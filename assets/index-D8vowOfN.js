(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function ES(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var nA={exports:{}},Mm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qb;function TD(){if(qb)return Mm;qb=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,r){var l=null;if(r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),"key"in s){r={};for(var u in s)u!=="key"&&(r[u]=s[u])}else r=s;return s=r.ref,{$$typeof:i,type:n,key:l,ref:s!==void 0?s:null,props:r}}return Mm.Fragment=t,Mm.jsx=e,Mm.jsxs=e,Mm}var Wb;function CD(){return Wb||(Wb=1,nA.exports=TD()),nA.exports}var it=CD(),iA={exports:{}},xn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kb;function RD(){if(Kb)return xn;Kb=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function _(X){return X===null||typeof X!="object"?null:(X=v&&X[v]||X["@@iterator"],typeof X=="function"?X:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,R={};function E(X,lt,xt){this.props=X,this.context=lt,this.refs=R,this.updater=xt||x}E.prototype.isReactComponent={},E.prototype.setState=function(X,lt){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,lt,"setState")},E.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function M(){}M.prototype=E.prototype;function w(X,lt,xt){this.props=X,this.context=lt,this.refs=R,this.updater=xt||x}var B=w.prototype=new M;B.constructor=w,b(B,E.prototype),B.isPureReactComponent=!0;var D=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function V(X,lt,xt,bt,ot,Ot){return xt=Ot.ref,{$$typeof:i,type:X,key:lt,ref:xt!==void 0?xt:null,props:Ot}}function H(X,lt){return V(X.type,lt,void 0,void 0,void 0,X.props)}function N(X){return typeof X=="object"&&X!==null&&X.$$typeof===i}function O(X){var lt={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(xt){return lt[xt]})}var Y=/\/+/g;function ht(X,lt){return typeof X=="object"&&X!==null&&X.key!=null?O(""+X.key):lt.toString(36)}function et(){}function dt(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(et,et):(X.status="pending",X.then(function(lt){X.status==="pending"&&(X.status="fulfilled",X.value=lt)},function(lt){X.status==="pending"&&(X.status="rejected",X.reason=lt)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function mt(X,lt,xt,bt,ot){var Ot=typeof X;(Ot==="undefined"||Ot==="boolean")&&(X=null);var It=!1;if(X===null)It=!0;else switch(Ot){case"bigint":case"string":case"number":It=!0;break;case"object":switch(X.$$typeof){case i:case t:It=!0;break;case g:return It=X._init,mt(It(X._payload),lt,xt,bt,ot)}}if(It)return ot=ot(X),It=bt===""?"."+ht(X,0):bt,D(ot)?(xt="",It!=null&&(xt=It.replace(Y,"$&/")+"/"),mt(ot,lt,xt,"",function(Ie){return Ie})):ot!=null&&(N(ot)&&(ot=H(ot,xt+(ot.key==null||X&&X.key===ot.key?"":(""+ot.key).replace(Y,"$&/")+"/")+It)),lt.push(ot)),1;It=0;var ie=bt===""?".":bt+":";if(D(X))for(var se=0;se<X.length;se++)bt=X[se],Ot=ie+ht(bt,se),It+=mt(bt,lt,xt,Ot,ot);else if(se=_(X),typeof se=="function")for(X=se.call(X),se=0;!(bt=X.next()).done;)bt=bt.value,Ot=ie+ht(bt,se++),It+=mt(bt,lt,xt,Ot,ot);else if(Ot==="object"){if(typeof X.then=="function")return mt(dt(X),lt,xt,bt,ot);throw lt=String(X),Error("Objects are not valid as a React child (found: "+(lt==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":lt)+"). If you meant to render a collection of children, use an array instead.")}return It}function F(X,lt,xt){if(X==null)return X;var bt=[],ot=0;return mt(X,bt,"","",function(Ot){return lt.call(xt,Ot,ot++)}),bt}function K(X){if(X._status===-1){var lt=X._result;lt=lt(),lt.then(function(xt){(X._status===0||X._status===-1)&&(X._status=1,X._result=xt)},function(xt){(X._status===0||X._status===-1)&&(X._status=2,X._result=xt)}),X._status===-1&&(X._status=0,X._result=lt)}if(X._status===1)return X._result.default;throw X._result}var $=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var lt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(lt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function yt(){}return xn.Children={map:F,forEach:function(X,lt,xt){F(X,function(){lt.apply(this,arguments)},xt)},count:function(X){var lt=0;return F(X,function(){lt++}),lt},toArray:function(X){return F(X,function(lt){return lt})||[]},only:function(X){if(!N(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},xn.Component=E,xn.Fragment=e,xn.Profiler=s,xn.PureComponent=w,xn.StrictMode=n,xn.Suspense=d,xn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,xn.__COMPILER_RUNTIME={__proto__:null,c:function(X){return I.H.useMemoCache(X)}},xn.cache=function(X){return function(){return X.apply(null,arguments)}},xn.cloneElement=function(X,lt,xt){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var bt=b({},X.props),ot=X.key,Ot=void 0;if(lt!=null)for(It in lt.ref!==void 0&&(Ot=void 0),lt.key!==void 0&&(ot=""+lt.key),lt)!L.call(lt,It)||It==="key"||It==="__self"||It==="__source"||It==="ref"&&lt.ref===void 0||(bt[It]=lt[It]);var It=arguments.length-2;if(It===1)bt.children=xt;else if(1<It){for(var ie=Array(It),se=0;se<It;se++)ie[se]=arguments[se+2];bt.children=ie}return V(X.type,ot,void 0,void 0,Ot,bt)},xn.createContext=function(X){return X={$$typeof:l,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:r,_context:X},X},xn.createElement=function(X,lt,xt){var bt,ot={},Ot=null;if(lt!=null)for(bt in lt.key!==void 0&&(Ot=""+lt.key),lt)L.call(lt,bt)&&bt!=="key"&&bt!=="__self"&&bt!=="__source"&&(ot[bt]=lt[bt]);var It=arguments.length-2;if(It===1)ot.children=xt;else if(1<It){for(var ie=Array(It),se=0;se<It;se++)ie[se]=arguments[se+2];ot.children=ie}if(X&&X.defaultProps)for(bt in It=X.defaultProps,It)ot[bt]===void 0&&(ot[bt]=It[bt]);return V(X,Ot,void 0,void 0,null,ot)},xn.createRef=function(){return{current:null}},xn.forwardRef=function(X){return{$$typeof:u,render:X}},xn.isValidElement=N,xn.lazy=function(X){return{$$typeof:g,_payload:{_status:-1,_result:X},_init:K}},xn.memo=function(X,lt){return{$$typeof:p,type:X,compare:lt===void 0?null:lt}},xn.startTransition=function(X){var lt=I.T,xt={};I.T=xt;try{var bt=X(),ot=I.S;ot!==null&&ot(xt,bt),typeof bt=="object"&&bt!==null&&typeof bt.then=="function"&&bt.then(yt,$)}catch(Ot){$(Ot)}finally{I.T=lt}},xn.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},xn.use=function(X){return I.H.use(X)},xn.useActionState=function(X,lt,xt){return I.H.useActionState(X,lt,xt)},xn.useCallback=function(X,lt){return I.H.useCallback(X,lt)},xn.useContext=function(X){return I.H.useContext(X)},xn.useDebugValue=function(){},xn.useDeferredValue=function(X,lt){return I.H.useDeferredValue(X,lt)},xn.useEffect=function(X,lt,xt){var bt=I.H;if(typeof xt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return bt.useEffect(X,lt)},xn.useId=function(){return I.H.useId()},xn.useImperativeHandle=function(X,lt,xt){return I.H.useImperativeHandle(X,lt,xt)},xn.useInsertionEffect=function(X,lt){return I.H.useInsertionEffect(X,lt)},xn.useLayoutEffect=function(X,lt){return I.H.useLayoutEffect(X,lt)},xn.useMemo=function(X,lt){return I.H.useMemo(X,lt)},xn.useOptimistic=function(X,lt){return I.H.useOptimistic(X,lt)},xn.useReducer=function(X,lt,xt){return I.H.useReducer(X,lt,xt)},xn.useRef=function(X){return I.H.useRef(X)},xn.useState=function(X){return I.H.useState(X)},xn.useSyncExternalStore=function(X,lt,xt){return I.H.useSyncExternalStore(X,lt,xt)},xn.useTransition=function(){return I.H.useTransition()},xn.version="19.1.0",xn}var Jb;function ep(){return Jb||(Jb=1,iA.exports=RD()),iA.exports}var Rt=ep();const cu=ES(Rt);var sA={exports:{}},bm={},aA={exports:{}},rA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zb;function wD(){return Zb||(Zb=1,function(i){function t(F,K){var $=F.length;F.push(K);t:for(;0<$;){var yt=$-1>>>1,X=F[yt];if(0<s(X,K))F[yt]=K,F[$]=X,$=yt;else break t}}function e(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var K=F[0],$=F.pop();if($!==K){F[0]=$;t:for(var yt=0,X=F.length,lt=X>>>1;yt<lt;){var xt=2*(yt+1)-1,bt=F[xt],ot=xt+1,Ot=F[ot];if(0>s(bt,$))ot<X&&0>s(Ot,bt)?(F[yt]=Ot,F[ot]=$,yt=ot):(F[yt]=bt,F[xt]=$,yt=xt);else if(ot<X&&0>s(Ot,$))F[yt]=Ot,F[ot]=$,yt=ot;else break t}}return K}function s(F,K){var $=F.sortIndex-K.sortIndex;return $!==0?$:F.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var l=Date,u=l.now();i.unstable_now=function(){return l.now()-u}}var d=[],p=[],g=1,v=null,_=3,x=!1,b=!1,R=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function D(F){for(var K=e(p);K!==null;){if(K.callback===null)n(p);else if(K.startTime<=F)n(p),K.sortIndex=K.expirationTime,t(d,K);else break;K=e(p)}}function I(F){if(R=!1,D(F),!b)if(e(d)!==null)b=!0,L||(L=!0,ht());else{var K=e(p);K!==null&&mt(I,K.startTime-F)}}var L=!1,V=-1,H=5,N=-1;function O(){return E?!0:!(i.unstable_now()-N<H)}function Y(){if(E=!1,L){var F=i.unstable_now();N=F;var K=!0;try{t:{b=!1,R&&(R=!1,w(V),V=-1),x=!0;var $=_;try{e:{for(D(F),v=e(d);v!==null&&!(v.expirationTime>F&&O());){var yt=v.callback;if(typeof yt=="function"){v.callback=null,_=v.priorityLevel;var X=yt(v.expirationTime<=F);if(F=i.unstable_now(),typeof X=="function"){v.callback=X,D(F),K=!0;break e}v===e(d)&&n(d),D(F)}else n(d);v=e(d)}if(v!==null)K=!0;else{var lt=e(p);lt!==null&&mt(I,lt.startTime-F),K=!1}}break t}finally{v=null,_=$,x=!1}K=void 0}}finally{K?ht():L=!1}}}var ht;if(typeof B=="function")ht=function(){B(Y)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,dt=et.port2;et.port1.onmessage=Y,ht=function(){dt.postMessage(null)}}else ht=function(){M(Y,0)};function mt(F,K){V=M(function(){F(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(F){F.callback=null},i.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<F?Math.floor(1e3/F):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_next=function(F){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var $=_;_=K;try{return F()}finally{_=$}},i.unstable_requestPaint=function(){E=!0},i.unstable_runWithPriority=function(F,K){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var $=_;_=F;try{return K()}finally{_=$}},i.unstable_scheduleCallback=function(F,K,$){var yt=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?yt+$:yt):$=yt,F){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=$+X,F={id:g++,callback:K,priorityLevel:F,startTime:$,expirationTime:X,sortIndex:-1},$>yt?(F.sortIndex=$,t(p,F),e(d)===null&&F===e(p)&&(R?(w(V),V=-1):R=!0,mt(I,$-yt))):(F.sortIndex=X,t(d,F),b||x||(b=!0,L||(L=!0,ht()))),F},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(F){var K=_;return function(){var $=_;_=K;try{return F.apply(this,arguments)}finally{_=$}}}}(rA)),rA}var Qb;function BD(){return Qb||(Qb=1,aA.exports=wD()),aA.exports}var oA={exports:{}},Zs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $b;function DD(){if($b)return Zs;$b=1;var i=ep();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(d,p,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:d,containerInfo:p,implementation:g}}var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Zs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Zs.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return r(d,p,null,g)},Zs.flushSync=function(d){var p=l.T,g=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=p,n.p=g,n.d.f()}},Zs.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(d,p))},Zs.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Zs.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,v=u(g,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?n.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:x}):g==="script"&&n.d.X(d,{crossOrigin:v,integrity:_,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Zs.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=u(p.as,p.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(d)},Zs.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,v=u(g,p.crossOrigin);n.d.L(d,g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Zs.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=u(p.as,p.crossOrigin);n.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(d)},Zs.requestFormReset=function(d){n.d.r(d)},Zs.unstable_batchedUpdates=function(d,p){return d(p)},Zs.useFormState=function(d,p,g){return l.H.useFormState(d,p,g)},Zs.useFormStatus=function(){return l.H.useHostTransitionStatus()},Zs.version="19.1.0",Zs}var tE;function UD(){if(tE)return oA.exports;tE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),oA.exports=DD(),oA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function ND(){if(eE)return bm;eE=1;var i=BD(),t=ep(),e=UD();function n(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var o=a,h=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(h=o.return),a=o.return;while(a)}return o.tag===3?h:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(r(a)!==a)throw Error(n(188))}function d(a){var o=a.alternate;if(!o){if(o=r(a),o===null)throw Error(n(188));return o!==a?null:a}for(var h=a,m=o;;){var A=h.return;if(A===null)break;var T=A.alternate;if(T===null){if(m=A.return,m!==null){h=m;continue}break}if(A.child===T.child){for(T=A.child;T;){if(T===h)return u(A),a;if(T===m)return u(A),o;T=T.sibling}throw Error(n(188))}if(h.return!==m.return)h=A,m=T;else{for(var P=!1,j=A.child;j;){if(j===h){P=!0,h=A,m=T;break}if(j===m){P=!0,m=A,h=T;break}j=j.sibling}if(!P){for(j=T.child;j;){if(j===h){P=!0,h=T,m=A;break}if(j===m){P=!0,m=T,h=A;break}j=j.sibling}if(!P)throw Error(n(189))}}if(h.alternate!==m)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?a:o}function p(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=p(a),o!==null)return o;a=a.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),B=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function ht(a){return a===null||typeof a!="object"?null:(a=Y&&a[Y]||a["@@iterator"],typeof a=="function"?a:null)}var et=Symbol.for("react.client.reference");function dt(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===et?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case E:return"Profiler";case R:return"StrictMode";case I:return"Suspense";case L:return"SuspenseList";case N:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case x:return"Portal";case B:return(a.displayName||"Context")+".Provider";case w:return(a._context.displayName||"Context")+".Consumer";case D:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case V:return o=a.displayName||null,o!==null?o:dt(a.type)||"Memo";case H:o=a._payload,a=a._init;try{return dt(a(o))}catch{}}return null}var mt=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},yt=[],X=-1;function lt(a){return{current:a}}function xt(a){0>X||(a.current=yt[X],yt[X]=null,X--)}function bt(a,o){X++,yt[X]=a.current,a.current=o}var ot=lt(null),Ot=lt(null),It=lt(null),ie=lt(null);function se(a,o){switch(bt(It,o),bt(Ot,a),bt(ot,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?Ab(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=Ab(o),a=Sb(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}xt(ot),bt(ot,a)}function Ie(){xt(ot),xt(Ot),xt(It)}function Ae(a){a.memoizedState!==null&&bt(ie,a);var o=ot.current,h=Sb(o,a.type);o!==h&&(bt(Ot,a),bt(ot,h))}function Be(a){Ot.current===a&&(xt(ot),xt(Ot)),ie.current===a&&(xt(ie),ym._currentValue=$)}var Ve=Object.prototype.hasOwnProperty,we=i.unstable_scheduleCallback,Z=i.unstable_cancelCallback,le=i.unstable_shouldYield,te=i.unstable_requestPaint,Kt=i.unstable_now,Xt=i.unstable_getCurrentPriorityLevel,Te=i.unstable_ImmediatePriority,Qt=i.unstable_UserBlockingPriority,J=i.unstable_NormalPriority,k=i.unstable_LowPriority,_t=i.unstable_IdlePriority,zt=i.log,Jt=i.unstable_setDisableYieldValue,Ht=null,fe=null;function ue(a){if(typeof zt=="function"&&Jt(a),fe&&typeof fe.setStrictMode=="function")try{fe.setStrictMode(Ht,a)}catch{}}var Se=Math.clz32?Math.clz32:Me,He=Math.log,ae=Math.LN2;function Me(a){return a>>>=0,a===0?32:31-(He(a)/ae|0)|0}var Re=256,_e=4194304;function de(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ft(a,o,h){var m=a.pendingLanes;if(m===0)return 0;var A=0,T=a.suspendedLanes,P=a.pingedLanes;a=a.warmLanes;var j=m&134217727;return j!==0?(m=j&~T,m!==0?A=de(m):(P&=j,P!==0?A=de(P):h||(h=j&~a,h!==0&&(A=de(h))))):(j=m&~T,j!==0?A=de(j):P!==0?A=de(P):h||(h=m&~a,h!==0&&(A=de(h)))),A===0?0:o!==0&&o!==A&&(o&T)===0&&(T=A&-A,h=o&-o,T>=h||T===32&&(h&4194048)!==0)?o:A}function Ft(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function re(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ct(){var a=Re;return Re<<=1,(Re&4194048)===0&&(Re=256),a}function Et(){var a=_e;return _e<<=1,(_e&62914560)===0&&(_e=4194304),a}function Nt(a){for(var o=[],h=0;31>h;h++)o.push(a);return o}function kt(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ge(a,o,h,m,A,T){var P=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var j=a.entanglements,nt=a.expirationTimes,Ct=a.hiddenUpdates;for(h=P&~h;0<h;){var qt=31-Se(h),$t=1<<qt;j[qt]=0,nt[qt]=-1;var Ut=Ct[qt];if(Ut!==null)for(Ct[qt]=null,qt=0;qt<Ut.length;qt++){var Lt=Ut[qt];Lt!==null&&(Lt.lane&=-536870913)}h&=~$t}m!==0&&me(a,m,0),T!==0&&A===0&&a.tag!==0&&(a.suspendedLanes|=T&~(P&~o))}function me(a,o,h){a.pendingLanes|=o,a.suspendedLanes&=~o;var m=31-Se(o);a.entangledLanes|=o,a.entanglements[m]=a.entanglements[m]|1073741824|h&4194090}function Pe(a,o){var h=a.entangledLanes|=o;for(a=a.entanglements;h;){var m=31-Se(h),A=1<<m;A&o|a[m]&o&&(a[m]|=o),h&=~A}}function dn(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ln(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function rn(){var a=K.p;return a!==0?a:(a=window.event,a===void 0?32:Gb(a.type))}function vi(a,o){var h=K.p;try{return K.p=a,o()}finally{K.p=h}}var si=Math.random().toString(36).slice(2),yi="__reactFiber$"+si,Ti="__reactProps$"+si,Ci="__reactContainer$"+si,gs="__reactEvents$"+si,Wa="__reactListeners$"+si,is="__reactHandles$"+si,Ye="__reactResources$"+si,Vs="__reactMarker$"+si;function Gn(a){delete a[yi],delete a[Ti],delete a[gs],delete a[Wa],delete a[is]}function z(a){var o=a[yi];if(o)return o;for(var h=a.parentNode;h;){if(o=h[Ci]||h[yi]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(a=Tb(a);a!==null;){if(h=a[yi])return h;a=Tb(a)}return o}a=h,h=a.parentNode}return null}function W(a){if(a=a[yi]||a[Ci]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function ut(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(n(33))}function wt(a){var o=a[Ye];return o||(o=a[Ye]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Dt(a){a[Vs]=!0}var Gt=new Set,oe={};function ne(a,o){G(a,o),G(a+"Capture",o)}function G(a,o){for(oe[a]=o,a=0;a<o.length;a++)Gt.add(o[a])}var tt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},at={};function gt(a){return Ve.call(at,a)?!0:Ve.call(st,a)?!1:tt.test(a)?at[a]=!0:(st[a]=!0,!1)}function Tt(a,o,h){if(gt(o))if(h===null)a.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+h)}}function Vt(a,o,h){if(h===null)a.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+h)}}function jt(a,o,h,m){if(m===null)a.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(o,h,""+m)}}var ee,ve;function pe(a){if(ee===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);ee=o&&o[1]||"",ve=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ee+a+ve}var ye=!1;function ke(a,o){if(!a||ye)return"";ye=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var $t=function(){throw Error()};if(Object.defineProperty($t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($t,[])}catch(Lt){var Ut=Lt}Reflect.construct(a,[],$t)}else{try{$t.call()}catch(Lt){Ut=Lt}a.call($t.prototype)}}else{try{throw Error()}catch(Lt){Ut=Lt}($t=a())&&typeof $t.catch=="function"&&$t.catch(function(){})}}catch(Lt){if(Lt&&Ut&&typeof Lt.stack=="string")return[Lt.stack,Ut.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=m.DetermineComponentFrameRoot(),P=T[0],j=T[1];if(P&&j){var nt=P.split(`
`),Ct=j.split(`
`);for(A=m=0;m<nt.length&&!nt[m].includes("DetermineComponentFrameRoot");)m++;for(;A<Ct.length&&!Ct[A].includes("DetermineComponentFrameRoot");)A++;if(m===nt.length||A===Ct.length)for(m=nt.length-1,A=Ct.length-1;1<=m&&0<=A&&nt[m]!==Ct[A];)A--;for(;1<=m&&0<=A;m--,A--)if(nt[m]!==Ct[A]){if(m!==1||A!==1)do if(m--,A--,0>A||nt[m]!==Ct[A]){var qt=`
`+nt[m].replace(" at new "," at ");return a.displayName&&qt.includes("<anonymous>")&&(qt=qt.replace("<anonymous>",a.displayName)),qt}while(1<=m&&0<=A);break}}}finally{ye=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?pe(h):""}function Le(a){switch(a.tag){case 26:case 27:case 5:return pe(a.type);case 16:return pe("Lazy");case 13:return pe("Suspense");case 19:return pe("SuspenseList");case 0:case 15:return ke(a.type,!1);case 11:return ke(a.type.render,!1);case 1:return ke(a.type,!0);case 31:return pe("Activity");default:return""}}function Tn(a){try{var o="";do o+=Le(a),a=a.return;while(a);return o}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function De(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ze(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ue(a){var o=ze(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),m=""+a[o];if(!a.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var A=h.get,T=h.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return A.call(this)},set:function(P){m=""+P,T.call(this,P)}}),Object.defineProperty(a,o,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(P){m=""+P},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Yn(a){a._valueTracker||(a._valueTracker=Ue(a))}function $e(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var h=o.getValue(),m="";return a&&(m=ze(a)?a.checked?"true":"false":a.value),a=m,a!==h?(o.setValue(a),!0):!1}function an(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Zn=/[\n"\\]/g;function je(a){return a.replace(Zn,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function vn(a,o,h,m,A,T,P,j){a.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?a.type=P:a.removeAttribute("type"),o!=null?P==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+De(o)):a.value!==""+De(o)&&(a.value=""+De(o)):P!=="submit"&&P!=="reset"||a.removeAttribute("value"),o!=null?ui(a,P,De(o)):h!=null?ui(a,P,De(h)):m!=null&&a.removeAttribute("value"),A==null&&T!=null&&(a.defaultChecked=!!T),A!=null&&(a.checked=A&&typeof A!="function"&&typeof A!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?a.name=""+De(j):a.removeAttribute("name")}function pn(a,o,h,m,A,T,P,j){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(a.type=T),o!=null||h!=null){if(!(T!=="submit"&&T!=="reset"||o!=null))return;h=h!=null?""+De(h):"",o=o!=null?""+De(o):h,j||o===a.value||(a.value=o),a.defaultValue=o}m=m??A,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=j?a.checked:!!m,a.defaultChecked=!!m,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(a.name=P)}function ui(a,o,h){o==="number"&&an(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function wn(a,o,h,m){if(a=a.options,o){o={};for(var A=0;A<h.length;A++)o["$"+h[A]]=!0;for(h=0;h<a.length;h++)A=o.hasOwnProperty("$"+a[h].value),a[h].selected!==A&&(a[h].selected=A),A&&m&&(a[h].defaultSelected=!0)}else{for(h=""+De(h),o=null,A=0;A<a.length;A++){if(a[A].value===h){a[A].selected=!0,m&&(a[A].defaultSelected=!0);return}o!==null||a[A].disabled||(o=a[A])}o!==null&&(o.selected=!0)}}function Qn(a,o,h){if(o!=null&&(o=""+De(o),o!==a.value&&(a.value=o),h==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=h!=null?""+De(h):""}function Ji(a,o,h,m){if(o==null){if(m!=null){if(h!=null)throw Error(n(92));if(mt(m)){if(1<m.length)throw Error(n(93));m=m[0]}h=m}h==null&&(h=""),o=h}h=De(o),a.defaultValue=h,m=a.textContent,m===h&&m!==""&&m!==null&&(a.value=m)}function Cs(a,o){if(o){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=o;return}}a.textContent=o}var fr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Su(a,o,h){var m=o.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":m?a.setProperty(o,h):typeof h!="number"||h===0||fr.has(o)?o==="float"?a.cssFloat=h:a[o]=(""+h).trim():a[o]=h+"px"}function Mu(a,o,h){if(o!=null&&typeof o!="object")throw Error(n(62));if(a=a.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var A in o)m=o[A],o.hasOwnProperty(A)&&h[A]!==m&&Su(a,A,m)}else for(var T in o)o.hasOwnProperty(T)&&Su(a,T,o[T])}function rh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var up=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bu(a){return Zg.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var oh=null;function lh(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Eo=null,yl=null;function fp(a){var o=W(a);if(o&&(a=o.stateNode)){var h=a[Ti]||null;t:switch(a=o.stateNode,o.type){case"input":if(vn(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),o=h.name,h.type==="radio"&&o!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+je(""+o)+'"][type="radio"]'),o=0;o<h.length;o++){var m=h[o];if(m!==a&&m.form===a.form){var A=m[Ti]||null;if(!A)throw Error(n(90));vn(m,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(o=0;o<h.length;o++)m=h[o],m.form===a.form&&$e(m)}break t;case"textarea":Qn(a,h.value,h.defaultValue);break t;case"select":o=h.value,o!=null&&wn(a,!!h.multiple,o,!1)}}}var Eu=!1;function hp(a,o,h){if(Eu)return a(o,h);Eu=!0;try{var m=a(o);return m}finally{if(Eu=!1,(Eo!==null||yl!==null)&&(Cr(),Eo&&(o=Eo,a=yl,yl=Eo=null,fp(o),a)))for(o=0;o<a.length;o++)fp(a[o])}}function ac(a,o){var h=a.stateNode;if(h===null)return null;var m=h[Ti]||null;if(m===null)return null;h=m[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break t;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(n(231,o,typeof h));return h}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tu=!1;if(hr)try{var rc={};Object.defineProperty(rc,"passive",{get:function(){Tu=!0}}),window.addEventListener("test",rc,rc),window.removeEventListener("test",rc,rc)}catch{Tu=!1}var Vr=null,dp=null,ch=null;function pp(){if(ch)return ch;var a,o=dp,h=o.length,m,A="value"in Vr?Vr.value:Vr.textContent,T=A.length;for(a=0;a<h&&o[a]===A[a];a++);var P=h-a;for(m=1;m<=P&&o[h-m]===A[T-m];m++);return ch=A.slice(a,1<m?1-m:void 0)}function To(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function oc(){return!0}function Cu(){return!1}function Rs(a){function o(h,m,A,T,P){this._reactName=h,this._targetInst=A,this.type=m,this.nativeEvent=T,this.target=P,this.currentTarget=null;for(var j in a)a.hasOwnProperty(j)&&(h=a[j],this[j]=h?h(T):T[j]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?oc:Cu,this.isPropagationStopped=Cu,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=oc)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=oc)},persist:function(){},isPersistent:oc}),o}var Co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lc=Rs(Co),cc=g({},Co,{view:0,detail:0}),Qg=Rs(cc),kr,uc,fc,hc=g({},cc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wu,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==fc&&(fc&&a.type==="mousemove"?(kr=a.screenX-fc.screenX,uc=a.screenY-fc.screenY):uc=kr=0,fc=a),kr)},movementY:function(a){return"movementY"in a?a.movementY:uc}}),mp=Rs(hc),$g=g({},hc,{dataTransfer:0}),xx=Rs($g),ss=g({},cc,{relatedTarget:0}),uh=Rs(ss),t0=g({},Co,{animationName:0,elapsedTime:0,pseudoElement:0}),e0=Rs(t0),n0=g({},Co,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),i0=Rs(n0),Ru=g({},Co,{data:0}),fh=Rs(Ru),s0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gp(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=r0[a])?!!o[a]:!1}function wu(){return gp}var o0=g({},cc,{key:function(a){if(a.key){var o=s0[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=To(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?a0[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wu,charCode:function(a){return a.type==="keypress"?To(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?To(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),vp=Rs(o0),yp=g({},hc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hh=Rs(yp),l0=g({},cc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wu}),_p=Rs(l0),c0=g({},Co,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xr=Rs(c0),xp=g({},hc,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Ax=Rs(xp),u0=g({},Co,{newState:0,oldState:0}),Ro=Rs(u0),jr=[9,13,27,32],Bu=hr&&"CompositionEvent"in window,_l=null;hr&&"documentMode"in document&&(_l=document.documentMode);var Du=hr&&"TextEvent"in window&&!_l,Uu=hr&&(!Bu||_l&&8<_l&&11>=_l),wo=" ",as=!1;function Nu(a,o){switch(a){case"keyup":return jr.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ap(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Bo=!1;function Ou(a,o){switch(a){case"compositionend":return Ap(o);case"keypress":return o.which!==32?null:(as=!0,wo);case"textInput":return a=o.data,a===wo&&as?null:a;default:return null}}function Sp(a,o){if(Bo)return a==="compositionend"||!Bu&&Nu(a,o)?(a=pp(),ch=dp=Vr=null,Bo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Uu&&o.locale!=="ko"?null:o.data;default:return null}}var dh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mp(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!dh[a.type]:o==="textarea"}function ks(a,o,h,m){Eo?yl?yl.push(m):yl=[m]:Eo=m,o=cv(o,"onChange"),0<o.length&&(h=new lc("onChange","change",null,h,m),a.push({event:h,listeners:o}))}var dc=null,xl=null;function f0(a){gb(a,0)}function Lu(a){var o=ut(a);if($e(o))return a}function ph(a,o){if(a==="change")return o}var mh=!1;if(hr){var gh;if(hr){var pc="oninput"in document;if(!pc){var mc=document.createElement("div");mc.setAttribute("oninput","return;"),pc=typeof mc.oninput=="function"}gh=pc}else gh=!1;mh=gh&&(!document.documentMode||9<document.documentMode)}function di(){dc&&(dc.detachEvent("onpropertychange",h0),xl=dc=null)}function h0(a){if(a.propertyName==="value"&&Lu(xl)){var o=[];ks(o,xl,a,lh(a)),hp(f0,o)}}function Sx(a,o,h){a==="focusin"?(di(),dc=o,xl=h,dc.attachEvent("onpropertychange",h0)):a==="focusout"&&di()}function d0(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Lu(xl)}function Iu(a,o){if(a==="click")return Lu(o)}function Do(a,o){if(a==="input"||a==="change")return Lu(o)}function p0(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Xs=typeof Object.is=="function"?Object.is:p0;function Ka(a,o){if(Xs(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var h=Object.keys(a),m=Object.keys(o);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var A=h[m];if(!Ve.call(o,A)||!Xs(a[A],o[A]))return!1}return!0}function js(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function bp(a,o){var h=js(a);a=0;for(var m;h;){if(h.nodeType===3){if(m=a+h.textContent.length,a<=o&&m>=o)return{node:h,offset:o-a};a=m}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=js(h)}}function Ep(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Ep(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Tp(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=an(a.document);o instanceof a.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)a=o.contentWindow;else break;o=an(a.document)}return o}function Pu(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var Cp=hr&&"documentMode"in document&&11>=document.documentMode,Yr=null,vh=null,Fu=null,yh=!1;function Rp(a,o,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;yh||Yr==null||Yr!==an(m)||(m=Yr,"selectionStart"in m&&Pu(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Fu&&Ka(Fu,m)||(Fu=m,m=cv(vh,"onSelect"),0<m.length&&(o=new lc("onSelect","select",null,o,h),a.push({event:o,listeners:m}),o.target=Yr)))}function rs(a,o){var h={};return h[a.toLowerCase()]=o.toLowerCase(),h["Webkit"+a]="webkit"+o,h["Moz"+a]="moz"+o,h}var Uo={animationend:rs("Animation","AnimationEnd"),animationiteration:rs("Animation","AnimationIteration"),animationstart:rs("Animation","AnimationStart"),transitionrun:rs("Transition","TransitionRun"),transitionstart:rs("Transition","TransitionStart"),transitioncancel:rs("Transition","TransitionCancel"),transitionend:rs("Transition","TransitionEnd")},_h={},m0={};hr&&(m0=document.createElement("div").style,"AnimationEvent"in window||(delete Uo.animationend.animation,delete Uo.animationiteration.animation,delete Uo.animationstart.animation),"TransitionEvent"in window||delete Uo.transitionend.transition);function qr(a){if(_h[a])return _h[a];if(!Uo[a])return a;var o=Uo[a],h;for(h in o)if(o.hasOwnProperty(h)&&h in m0)return _h[a]=o[h];return a}var ws=qr("animationend"),wp=qr("animationiteration"),Ys=qr("animationstart"),g0=qr("transitionrun"),Wr=qr("transitionstart"),gc=qr("transitioncancel"),Kr=qr("transitionend"),xh=new Map,Hu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hu.push("scrollEnd");function Zi(a,o){xh.set(a,o),ne(o,[a])}var Bp=new WeakMap;function os(a,o){if(typeof a=="object"&&a!==null){var h=Bp.get(a);return h!==void 0?h:(o={value:a,source:o,stack:Tn(o)},Bp.set(a,o),o)}return{value:a,source:o,stack:Tn(o)}}var vs=[],Ra=0,Ah=0;function zu(){for(var a=Ra,o=Ah=Ra=0;o<a;){var h=vs[o];vs[o++]=null;var m=vs[o];vs[o++]=null;var A=vs[o];vs[o++]=null;var T=vs[o];if(vs[o++]=null,m!==null&&A!==null){var P=m.pending;P===null?A.next=A:(A.next=P.next,P.next=A),m.pending=A}T!==0&&Dp(h,A,T)}}function No(a,o,h,m){vs[Ra++]=a,vs[Ra++]=o,vs[Ra++]=h,vs[Ra++]=m,Ah|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function Sh(a,o,h,m){return No(a,o,h,m),vc(a)}function Jr(a,o){return No(a,null,null,o),vc(a)}function Dp(a,o,h){a.lanes|=h;var m=a.alternate;m!==null&&(m.lanes|=h);for(var A=!1,T=a.return;T!==null;)T.childLanes|=h,m=T.alternate,m!==null&&(m.childLanes|=h),T.tag===22&&(a=T.stateNode,a===null||a._visibility&1||(A=!0)),a=T,T=T.return;return a.tag===3?(T=a.stateNode,A&&o!==null&&(A=31-Se(h),a=T.hiddenUpdates,m=a[A],m===null?a[A]=[o]:m.push(o),o.lane=h|536870912),T):null}function vc(a){if(50<Tr)throw Tr=0,Fl=null,Error(n(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Oo={};function Up(a,o,h,m){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qs(a,o,h,m){return new Up(a,o,h,m)}function Gu(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ri(a,o){var h=a.alternate;return h===null?(h=qs(a.tag,o,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=o,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,o=a.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function Np(a,o){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,o=h.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Qi(a,o,h,m,A,T){var P=0;if(m=a,typeof a=="function")Gu(a)&&(P=1);else if(typeof a=="string")P=dD(a,h,ot.current)?26:a==="html"||a==="head"||a==="body"?27:5;else t:switch(a){case N:return a=qs(31,h,o,A),a.elementType=N,a.lanes=T,a;case b:return Lo(h.children,A,T,o);case R:P=8,A|=24;break;case E:return a=qs(12,h,o,A|2),a.elementType=E,a.lanes=T,a;case I:return a=qs(13,h,o,A),a.elementType=I,a.lanes=T,a;case L:return a=qs(19,h,o,A),a.elementType=L,a.lanes=T,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case M:case B:P=10;break t;case w:P=9;break t;case D:P=11;break t;case V:P=14;break t;case H:P=16,m=null;break t}P=29,h=Error(n(130,a===null?"null":typeof a,"")),m=null}return o=qs(P,h,o,A),o.elementType=a,o.type=m,o.lanes=T,o}function Lo(a,o,h,m){return a=qs(7,a,m,o),a.lanes=h,a}function Vu(a,o,h){return a=qs(6,a,null,o),a.lanes=h,a}function Mh(a,o,h){return o=qs(4,a.children!==null?a.children:[],a.key,o),o.lanes=h,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var yc=[],Ws=0,ku=null,_c=0,ls=[],aa=0,Io=null,dr=1,pr="";function Zr(a,o){yc[Ws++]=_c,yc[Ws++]=ku,ku=a,_c=o}function bh(a,o,h){ls[aa++]=dr,ls[aa++]=pr,ls[aa++]=Io,Io=a;var m=dr;a=pr;var A=32-Se(m)-1;m&=~(1<<A),h+=1;var T=32-Se(o)+A;if(30<T){var P=A-A%5;T=(m&(1<<P)-1).toString(32),m>>=P,A-=P,dr=1<<32-Se(o)+A|h<<A|m,pr=T+a}else dr=1<<T|h<<A|m,pr=a}function Op(a){a.return!==null&&(Zr(a,1),bh(a,1,0))}function Lp(a){for(;a===ku;)ku=yc[--Ws],yc[Ws]=null,_c=yc[--Ws],yc[Ws]=null;for(;a===Io;)Io=ls[--aa],ls[aa]=null,pr=ls[--aa],ls[aa]=null,dr=ls[--aa],ls[aa]=null}var Bs=null,pi=null,In=!1,wa=null,ra=!1,Eh=Error(n(519));function Po(a){var o=Error(n(418,""));throw Al(os(o,a)),Eh}function v0(a){var o=a.stateNode,h=a.type,m=a.memoizedProps;switch(o[yi]=a,o[Ti]=m,h){case"dialog":Cn("cancel",o),Cn("close",o);break;case"iframe":case"object":case"embed":Cn("load",o);break;case"video":case"audio":for(h=0;h<hm.length;h++)Cn(hm[h],o);break;case"source":Cn("error",o);break;case"img":case"image":case"link":Cn("error",o),Cn("load",o);break;case"details":Cn("toggle",o);break;case"input":Cn("invalid",o),pn(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Yn(o);break;case"select":Cn("invalid",o);break;case"textarea":Cn("invalid",o),Ji(o,m.value,m.defaultValue,m.children),Yn(o)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||o.textContent===""+h||m.suppressHydrationWarning===!0||xb(o.textContent,h)?(m.popover!=null&&(Cn("beforetoggle",o),Cn("toggle",o)),m.onScroll!=null&&Cn("scroll",o),m.onScrollEnd!=null&&Cn("scrollend",o),m.onClick!=null&&(o.onclick=uv),o=!0):o=!1,o||Po(a)}function Ip(a){for(Bs=a.return;Bs;)switch(Bs.tag){case 5:case 13:ra=!1;return;case 27:case 3:ra=!0;return;default:Bs=Bs.return}}function Ja(a){if(a!==Bs)return!1;if(!In)return Ip(a),In=!0,!1;var o=a.tag,h;if((h=o!==3&&o!==27)&&((h=o===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||Vx(a.type,a.memoizedProps)),h=!h),h&&pi&&Po(a),Ip(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));t:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(h=a.data,h==="/$"){if(o===0){pi=fo(a.nextSibling);break t}o--}else h!=="$"&&h!=="$!"&&h!=="$?"||o++;a=a.nextSibling}pi=null}}else o===27?(o=pi,Xc(a.type)?(a=Yx,Yx=null,pi=a):pi=o):pi=Bs?fo(a.stateNode.nextSibling):null;return!0}function xc(){pi=Bs=null,In=!1}function Vn(){var a=wa;return a!==null&&(Ke===null?Ke=a:Ke.push.apply(Ke,a),wa=null),a}function Al(a){wa===null?wa=[a]:wa.push(a)}var Pp=lt(null),Fo=null,Qr=null;function Ho(a,o,h){bt(Pp,o._currentValue),o._currentValue=h}function $r(a){a._currentValue=Pp.current,xt(Pp)}function Fp(a,o,h){for(;a!==null;){var m=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),a===h)break;a=a.return}}function Xu(a,o,h,m){var A=a.child;for(A!==null&&(A.return=a);A!==null;){var T=A.dependencies;if(T!==null){var P=A.child;T=T.firstContext;t:for(;T!==null;){var j=T;T=A;for(var nt=0;nt<o.length;nt++)if(j.context===o[nt]){T.lanes|=h,j=T.alternate,j!==null&&(j.lanes|=h),Fp(T.return,h,a),m||(P=null);break t}T=j.next}}else if(A.tag===18){if(P=A.return,P===null)throw Error(n(341));P.lanes|=h,T=P.alternate,T!==null&&(T.lanes|=h),Fp(P,h,a),P=null}else P=A.child;if(P!==null)P.return=A;else for(P=A;P!==null;){if(P===a){P=null;break}if(A=P.sibling,A!==null){A.return=P.return,P=A;break}P=P.return}A=P}}function Ba(a,o,h,m){a=null;for(var A=o,T=!1;A!==null;){if(!T){if((A.flags&524288)!==0)T=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var P=A.alternate;if(P===null)throw Error(n(387));if(P=P.memoizedProps,P!==null){var j=A.type;Xs(A.pendingProps.value,P.value)||(a!==null?a.push(j):a=[j])}}else if(A===ie.current){if(P=A.alternate,P===null)throw Error(n(387));P.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(a!==null?a.push(ym):a=[ym])}A=A.return}a!==null&&Xu(o,a,h,m),o.flags|=262144}function ju(a){for(a=a.firstContext;a!==null;){if(!Xs(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function mr(a){Fo=a,Qr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function _i(a){return Th(Fo,a)}function Yu(a,o){return Fo===null&&mr(a),Th(a,o)}function Th(a,o){var h=o._currentValue;if(o={context:o,memoizedValue:h,next:null},Qr===null){if(a===null)throw Error(n(308));Qr=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Qr=Qr.next=o;return h}var Hp=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(h,m){a.push(m)}};this.abort=function(){o.aborted=!0,a.forEach(function(h){return h()})}},Mx=i.unstable_scheduleCallback,y0=i.unstable_NormalPriority,Pi={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ch(){return{controller:new Hp,data:new Map,refCount:0}}function Ac(a){a.refCount--,a.refCount===0&&Mx(y0,function(){a.controller.abort()})}var Sc=null,qu=0,cn=0,Mc=null;function oa(a,o){if(Sc===null){var h=Sc=[];qu=0,cn=Nx(),Mc={status:"pending",value:void 0,then:function(m){h.push(m)}}}return qu++,o.then(Rh,Rh),o}function Rh(){if(--qu===0&&Sc!==null){Mc!==null&&(Mc.status="fulfilled");var a=Sc;Sc=null,cn=0,Mc=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function bx(a,o){var h=[],m={status:"pending",value:null,reason:null,then:function(A){h.push(A)}};return a.then(function(){m.status="fulfilled",m.value=o;for(var A=0;A<h.length;A++)(0,h[A])(o)},function(A){for(m.status="rejected",m.reason=A,A=0;A<h.length;A++)(0,h[A])(void 0)}),m}var Wu=F.S;F.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&oa(a,o),Wu!==null&&Wu(a,o)};var Da=lt(null);function zo(){var a=Da.current;return a!==null?a:on.pooledCache}function Ku(a,o){o===null?bt(Da,Da.current):bt(Da,o.pool)}function wh(){var a=zo();return a===null?null:{parent:Pi._currentValue,pool:a}}var Ju=Error(n(460)),zp=Error(n(474)),Za=Error(n(542)),Zu={then:function(){}};function Bh(a){return a=a.status,a==="fulfilled"||a==="rejected"}function bc(){}function Dh(a,o,h){switch(h=a[h],h===void 0?a.push(o):h!==o&&(o.then(bc,bc),o=h),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,_0(a),a;default:if(typeof o.status=="string")o.then(bc,bc);else{if(a=on,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=o,a.status="pending",a.then(function(m){if(o.status==="pending"){var A=o;A.status="fulfilled",A.value=m}},function(m){if(o.status==="pending"){var A=o;A.status="rejected",A.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,_0(a),a}throw Ua=o,Ju}}var Ua=null;function Gp(){if(Ua===null)throw Error(n(459));var a=Ua;return Ua=null,a}function _0(a){if(a===Ju||a===Za)throw Error(n(483))}var to=!1;function Vp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tn(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function gr(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function eo(a,o,h){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(kn&2)!==0){var A=m.pending;return A===null?o.next=o:(o.next=A.next,A.next=o),m.pending=o,o=vc(a),Dp(a,null,h),o}return No(a,m,o,h),vc(a)}function Sl(a,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194048)!==0)){var m=o.lanes;m&=a.pendingLanes,h|=m,o.lanes=h,Pe(a,h)}}function Ec(a,o){var h=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var A=null,T=null;if(h=h.firstBaseUpdate,h!==null){do{var P={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};T===null?A=T=P:T=T.next=P,h=h.next}while(h!==null);T===null?A=T=o:T=T.next=o}else A=T=o;h={baseState:m.baseState,firstBaseUpdate:A,lastBaseUpdate:T,shared:m.shared,callbacks:m.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=o:a.next=o,h.lastBaseUpdate=o}var kp=!1;function Qu(){if(kp){var a=Mc;if(a!==null)throw a}}function Tc(a,o,h,m){kp=!1;var A=a.updateQueue;to=!1;var T=A.firstBaseUpdate,P=A.lastBaseUpdate,j=A.shared.pending;if(j!==null){A.shared.pending=null;var nt=j,Ct=nt.next;nt.next=null,P===null?T=Ct:P.next=Ct,P=nt;var qt=a.alternate;qt!==null&&(qt=qt.updateQueue,j=qt.lastBaseUpdate,j!==P&&(j===null?qt.firstBaseUpdate=Ct:j.next=Ct,qt.lastBaseUpdate=nt))}if(T!==null){var $t=A.baseState;P=0,qt=Ct=nt=null,j=T;do{var Ut=j.lane&-536870913,Lt=Ut!==j.lane;if(Lt?(Xe&Ut)===Ut:(m&Ut)===Ut){Ut!==0&&Ut===cn&&(kp=!0),qt!==null&&(qt=qt.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});t:{var nn=a,Ze=j;Ut=o;var ci=h;switch(Ze.tag){case 1:if(nn=Ze.payload,typeof nn=="function"){$t=nn.call(ci,$t,Ut);break t}$t=nn;break t;case 3:nn.flags=nn.flags&-65537|128;case 0:if(nn=Ze.payload,Ut=typeof nn=="function"?nn.call(ci,$t,Ut):nn,Ut==null)break t;$t=g({},$t,Ut);break t;case 2:to=!0}}Ut=j.callback,Ut!==null&&(a.flags|=64,Lt&&(a.flags|=8192),Lt=A.callbacks,Lt===null?A.callbacks=[Ut]:Lt.push(Ut))}else Lt={lane:Ut,tag:j.tag,payload:j.payload,callback:j.callback,next:null},qt===null?(Ct=qt=Lt,nt=$t):qt=qt.next=Lt,P|=Ut;if(j=j.next,j===null){if(j=A.shared.pending,j===null)break;Lt=j,j=Lt.next,Lt.next=null,A.lastBaseUpdate=Lt,A.shared.pending=null}}while(!0);qt===null&&(nt=$t),A.baseState=nt,A.firstBaseUpdate=Ct,A.lastBaseUpdate=qt,T===null&&(A.shared.lanes=0),ar|=P,a.lanes=P,a.memoizedState=$t}}function Cc(a,o){if(typeof a!="function")throw Error(n(191,a));a.call(o)}function x0(a,o){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)Cc(h[a],o)}var Rc=lt(null),Uh=lt(0);function A0(a,o){a=Fa,bt(Uh,a),bt(Rc,o),Fa=a|o.baseLanes}function Xp(){bt(Uh,Fa),bt(Rc,Rc.current)}function $u(){Fa=Uh.current,xt(Rc),xt(Uh)}var no=0,un=null,qn=null,Fi=null,Nh=!1,Go=!1,Ds=!1,Vi=0,Na=0,cs=null,S0=0;function wi(){throw Error(n(321))}function ys(a,o){if(o===null)return!1;for(var h=0;h<o.length&&h<a.length;h++)if(!Xs(a[h],o[h]))return!1;return!0}function io(a,o,h,m,A,T){return no=T,un=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,F.H=a===null||a.memoizedState===null?Vh:rm,Ds=!1,T=h(m,A),Ds=!1,Go&&(T=b0(o,h,m,A)),M0(a),T}function M0(a){F.H=nf;var o=qn!==null&&qn.next!==null;if(no=0,Fi=qn=un=null,Nh=!1,Na=0,cs=null,o)throw Error(n(300));a===null||$i||(a=a.dependencies,a!==null&&ju(a)&&($i=!0))}function b0(a,o,h,m){un=a;var A=0;do{if(Go&&(cs=null),Na=0,Go=!1,25<=A)throw Error(n(301));if(A+=1,Fi=qn=null,a.updateQueue!=null){var T=a.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}F.H=J0,T=o(h,m)}while(Go);return T}function Ex(){var a=F.H,o=a.useState()[0];return o=typeof o.then=="function"?Qa(o):o,a=a.useState()[0],(qn!==null?qn.memoizedState:null)!==a&&(un.flags|=1024),o}function jp(){var a=Vi!==0;return Vi=0,a}function Oh(a,o,h){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~h}function Yp(a){if(Nh){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Nh=!1}no=0,Fi=qn=un=null,Go=!1,Na=Vi=0,cs=null}function Us(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fi===null?un.memoizedState=Fi=a:Fi=Fi.next=a,Fi}function Hi(){if(qn===null){var a=un.alternate;a=a!==null?a.memoizedState:null}else a=qn.next;var o=Fi===null?un.memoizedState:Fi.next;if(o!==null)Fi=o,qn=a;else{if(a===null)throw un.alternate===null?Error(n(467)):Error(n(310));qn=a,a={memoizedState:qn.memoizedState,baseState:qn.baseState,baseQueue:qn.baseQueue,queue:qn.queue,next:null},Fi===null?un.memoizedState=Fi=a:Fi=Fi.next=a}return Fi}function Vo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qa(a){var o=Na;return Na+=1,cs===null&&(cs=[]),a=Dh(cs,a,o),o=un,(Fi===null?o.memoizedState:Fi.next)===null&&(o=o.alternate,F.H=o===null||o.memoizedState===null?Vh:rm),a}function Lh(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Qa(a);if(a.$$typeof===B)return _i(a)}throw Error(n(438,String(a)))}function qp(a){var o=null,h=un.updateQueue;if(h!==null&&(o=h.memoCache),o==null){var m=un.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(A){return A.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),h===null&&(h=Vo(),un.updateQueue=h),h.memoCache=o,h=o.data[o.index],h===void 0)for(h=o.data[o.index]=Array(a),m=0;m<a;m++)h[m]=O;return o.index++,h}function so(a,o){return typeof o=="function"?o(a):o}function ko(a){var o=Hi();return Wp(o,qn,a)}function Wp(a,o,h){var m=a.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=h;var A=a.baseQueue,T=m.pending;if(T!==null){if(A!==null){var P=A.next;A.next=T.next,T.next=P}o.baseQueue=A=T,m.pending=null}if(T=a.baseState,A===null)a.memoizedState=T;else{o=A.next;var j=P=null,nt=null,Ct=o,qt=!1;do{var $t=Ct.lane&-536870913;if($t!==Ct.lane?(Xe&$t)===$t:(no&$t)===$t){var Ut=Ct.revertLane;if(Ut===0)nt!==null&&(nt=nt.next={lane:0,revertLane:0,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null}),$t===cn&&(qt=!0);else if((no&Ut)===Ut){Ct=Ct.next,Ut===cn&&(qt=!0);continue}else $t={lane:0,revertLane:Ct.revertLane,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},nt===null?(j=nt=$t,P=T):nt=nt.next=$t,un.lanes|=Ut,ar|=Ut;$t=Ct.action,Ds&&h(T,$t),T=Ct.hasEagerState?Ct.eagerState:h(T,$t)}else Ut={lane:$t,revertLane:Ct.revertLane,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},nt===null?(j=nt=Ut,P=T):nt=nt.next=Ut,un.lanes|=$t,ar|=$t;Ct=Ct.next}while(Ct!==null&&Ct!==o);if(nt===null?P=T:nt.next=j,!Xs(T,a.memoizedState)&&($i=!0,qt&&(h=Mc,h!==null)))throw h;a.memoizedState=T,a.baseState=P,a.baseQueue=nt,m.lastRenderedState=T}return A===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function Kp(a){var o=Hi(),h=o.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=a;var m=h.dispatch,A=h.pending,T=o.memoizedState;if(A!==null){h.pending=null;var P=A=A.next;do T=a(T,P.action),P=P.next;while(P!==A);Xs(T,o.memoizedState)||($i=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),h.lastRenderedState=T}return[T,m]}function E0(a,o,h){var m=un,A=Hi(),T=In;if(T){if(h===void 0)throw Error(n(407));h=h()}else h=o();var P=!Xs((qn||A).memoizedState,h);P&&(A.memoizedState=h,$i=!0),A=A.queue;var j=C0.bind(null,m,A,a);if(Dc(2048,8,j,[a]),A.getSnapshot!==o||P||Fi!==null&&Fi.memoizedState.tag&1){if(m.flags|=2048,Bc(9,tf(),T0.bind(null,m,A,h,o),null),on===null)throw Error(n(349));T||(no&124)!==0||wc(m,o,h)}return h}function wc(a,o,h){a.flags|=16384,a={getSnapshot:o,value:h},o=un.updateQueue,o===null?(o=Vo(),un.updateQueue=o,o.stores=[a]):(h=o.stores,h===null?o.stores=[a]:h.push(a))}function T0(a,o,h,m){o.value=h,o.getSnapshot=m,R0(o)&&w0(a)}function C0(a,o,h){return h(function(){R0(o)&&w0(a)})}function R0(a){var o=a.getSnapshot;a=a.value;try{var h=o();return!Xs(a,h)}catch{return!0}}function w0(a){var o=Jr(a,2);o!==null&&Ls(o,a,2)}function Jp(a){var o=Us();if(typeof a=="function"){var h=a;if(a=h(),Ds){ue(!0);try{h()}finally{ue(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:a},o}function B0(a,o,h,m){return a.baseState=h,Wp(a,qn,typeof m=="function"?m:so)}function Tx(a,o,h,m,A){if(Gh(a))throw Error(n(485));if(a=o.action,a!==null){var T={payload:A,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){T.listeners.push(P)}};F.T!==null?h(!0):T.isTransition=!1,m(T),h=o.pending,h===null?(T.next=o.pending=T,D0(o,T)):(T.next=h.next,o.pending=h.next=T)}}function D0(a,o){var h=o.action,m=o.payload,A=a.state;if(o.isTransition){var T=F.T,P={};F.T=P;try{var j=h(A,m),nt=F.S;nt!==null&&nt(P,j),U0(a,o,j)}catch(Ct){Zp(a,o,Ct)}finally{F.T=T}}else try{T=h(A,m),U0(a,o,T)}catch(Ct){Zp(a,o,Ct)}}function U0(a,o,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){N0(a,o,m)},function(m){return Zp(a,o,m)}):N0(a,o,h)}function N0(a,o,h){o.status="fulfilled",o.value=h,O0(o),a.state=h,o=a.pending,o!==null&&(h=o.next,h===o?a.pending=null:(h=h.next,o.next=h,D0(a,h)))}function Zp(a,o,h){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=h,O0(o),o=o.next;while(o!==m)}a.action=null}function O0(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Qp(a,o){return o}function L0(a,o){if(In){var h=on.formState;if(h!==null){t:{var m=un;if(In){if(pi){e:{for(var A=pi,T=ra;A.nodeType!==8;){if(!T){A=null;break e}if(A=fo(A.nextSibling),A===null){A=null;break e}}T=A.data,A=T==="F!"||T==="F"?A:null}if(A){pi=fo(A.nextSibling),m=A.data==="F!";break t}}Po(m)}m=!1}m&&(o=h[0])}}return h=Us(),h.memoizedState=h.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qp,lastRenderedState:o},h.queue=m,h=W0.bind(null,un,m),m.dispatch=h,m=Jp(!1),T=zh.bind(null,un,!1,m.queue),m=Us(),A={state:o,dispatch:null,action:a,pending:null},m.queue=A,h=Tx.bind(null,un,A,T,h),A.dispatch=h,m.memoizedState=a,[o,h,!1]}function I0(a){var o=Hi();return P0(o,qn,a)}function P0(a,o,h){if(o=Wp(a,o,Qp)[0],a=ko(so)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=Qa(o)}catch(P){throw P===Ju?Za:P}else m=o;o=Hi();var A=o.queue,T=A.dispatch;return h!==o.memoizedState&&(un.flags|=2048,Bc(9,tf(),Cx.bind(null,A,h),null)),[m,T,a]}function Cx(a,o){a.action=o}function F0(a){var o=Hi(),h=qn;if(h!==null)return P0(o,h,a);Hi(),o=o.memoizedState,h=Hi();var m=h.queue.dispatch;return h.memoizedState=a,[o,m,!1]}function Bc(a,o,h,m){return a={tag:a,create:h,deps:m,inst:o,next:null},o=un.updateQueue,o===null&&(o=Vo(),un.updateQueue=o),h=o.lastEffect,h===null?o.lastEffect=a.next=a:(m=h.next,h.next=a,a.next=m,o.lastEffect=a),a}function tf(){return{destroy:void 0,resource:void 0}}function $p(){return Hi().memoizedState}function Ih(a,o,h,m){var A=Us();m=m===void 0?null:m,un.flags|=a,A.memoizedState=Bc(1|o,tf(),h,m)}function Dc(a,o,h,m){var A=Hi();m=m===void 0?null:m;var T=A.memoizedState.inst;qn!==null&&m!==null&&ys(m,qn.memoizedState.deps)?A.memoizedState=Bc(o,T,h,m):(un.flags|=a,A.memoizedState=Bc(1|o,T,h,m))}function tm(a,o){Ih(8390656,8,a,o)}function em(a,o){Dc(2048,8,a,o)}function Ph(a,o){return Dc(4,2,a,o)}function Fh(a,o){return Dc(4,4,a,o)}function H0(a,o){if(typeof o=="function"){a=a();var h=o(a);return function(){typeof h=="function"?h():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function z0(a,o,h){h=h!=null?h.concat([a]):null,Dc(4,4,H0.bind(null,o,a),h)}function nm(){}function G0(a,o){var h=Hi();o=o===void 0?null:o;var m=h.memoizedState;return o!==null&&ys(o,m[1])?m[0]:(h.memoizedState=[a,o],a)}function im(a,o){var h=Hi();o=o===void 0?null:o;var m=h.memoizedState;if(o!==null&&ys(o,m[1]))return m[0];if(m=a(),Ds){ue(!0);try{a()}finally{ue(!1)}}return h.memoizedState=[m,o],m}function Hh(a,o,h){return h===void 0||(no&1073741824)!==0?a.memoizedState=o:(a.memoizedState=h,a=$h(),un.lanes|=a,ar|=a,h)}function V0(a,o,h,m){return Xs(h,o)?h:Rc.current!==null?(a=Hh(a,h,m),Xs(a,o)||($i=!0),a):(no&42)===0?($i=!0,a.memoizedState=h):(a=$h(),un.lanes|=a,ar|=a,o)}function k0(a,o,h,m,A){var T=K.p;K.p=T!==0&&8>T?T:8;var P=F.T,j={};F.T=j,zh(a,!1,o,h);try{var nt=A(),Ct=F.S;if(Ct!==null&&Ct(j,nt),nt!==null&&typeof nt=="object"&&typeof nt.then=="function"){var qt=bx(nt,m);ef(a,o,qt,Si(a))}else ef(a,o,m,Si(a))}catch($t){ef(a,o,{then:function(){},status:"rejected",reason:$t},Si())}finally{K.p=T,F.T=P}}function Rx(){}function sm(a,o,h,m){if(a.tag!==5)throw Error(n(476));var A=X0(a).queue;k0(a,A,o,$,h===null?Rx:function(){return j0(a),h(m)})}function X0(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:$},next:null};var h={};return o.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:h},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function j0(a){var o=X0(a).next.queue;ef(a,o,{},Si())}function am(){return _i(ym)}function Y0(){return Hi().memoizedState}function q0(){return Hi().memoizedState}function wx(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var h=Si();a=gr(h);var m=eo(o,a,h);m!==null&&(Ls(m,o,h),Sl(m,o,h)),o={cache:Ch()},a.payload=o;return}o=o.return}}function Bx(a,o,h){var m=Si();h={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},Gh(a)?K0(o,h):(h=Sh(a,o,h,m),h!==null&&(Ls(h,a,m),la(h,o,m)))}function W0(a,o,h){var m=Si();ef(a,o,h,m)}function ef(a,o,h,m){var A={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(Gh(a))K0(o,A);else{var T=a.alternate;if(a.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var P=o.lastRenderedState,j=T(P,h);if(A.hasEagerState=!0,A.eagerState=j,Xs(j,P))return No(a,o,A,0),on===null&&zu(),!1}catch{}finally{}if(h=Sh(a,o,A,m),h!==null)return Ls(h,a,m),la(h,o,m),!0}return!1}function zh(a,o,h,m){if(m={lane:2,revertLane:Nx(),action:m,hasEagerState:!1,eagerState:null,next:null},Gh(a)){if(o)throw Error(n(479))}else o=Sh(a,h,m,2),o!==null&&Ls(o,a,2)}function Gh(a){var o=a.alternate;return a===un||o!==null&&o===un}function K0(a,o){Go=Nh=!0;var h=a.pending;h===null?o.next=o:(o.next=h.next,h.next=o),a.pending=o}function la(a,o,h){if((h&4194048)!==0){var m=o.lanes;m&=a.pendingLanes,h|=m,o.lanes=h,Pe(a,h)}}var nf={readContext:_i,use:Lh,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useLayoutEffect:wi,useInsertionEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useSyncExternalStore:wi,useId:wi,useHostTransitionStatus:wi,useFormState:wi,useActionState:wi,useOptimistic:wi,useMemoCache:wi,useCacheRefresh:wi},Vh={readContext:_i,use:Lh,useCallback:function(a,o){return Us().memoizedState=[a,o===void 0?null:o],a},useContext:_i,useEffect:tm,useImperativeHandle:function(a,o,h){h=h!=null?h.concat([a]):null,Ih(4194308,4,H0.bind(null,o,a),h)},useLayoutEffect:function(a,o){return Ih(4194308,4,a,o)},useInsertionEffect:function(a,o){Ih(4,2,a,o)},useMemo:function(a,o){var h=Us();o=o===void 0?null:o;var m=a();if(Ds){ue(!0);try{a()}finally{ue(!1)}}return h.memoizedState=[m,o],m},useReducer:function(a,o,h){var m=Us();if(h!==void 0){var A=h(o);if(Ds){ue(!0);try{h(o)}finally{ue(!1)}}}else A=o;return m.memoizedState=m.baseState=A,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:A},m.queue=a,a=a.dispatch=Bx.bind(null,un,a),[m.memoizedState,a]},useRef:function(a){var o=Us();return a={current:a},o.memoizedState=a},useState:function(a){a=Jp(a);var o=a.queue,h=W0.bind(null,un,o);return o.dispatch=h,[a.memoizedState,h]},useDebugValue:nm,useDeferredValue:function(a,o){var h=Us();return Hh(h,a,o)},useTransition:function(){var a=Jp(!1);return a=k0.bind(null,un,a.queue,!0,!1),Us().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,h){var m=un,A=Us();if(In){if(h===void 0)throw Error(n(407));h=h()}else{if(h=o(),on===null)throw Error(n(349));(Xe&124)!==0||wc(m,o,h)}A.memoizedState=h;var T={value:h,getSnapshot:o};return A.queue=T,tm(C0.bind(null,m,T,a),[a]),m.flags|=2048,Bc(9,tf(),T0.bind(null,m,T,h,o),null),h},useId:function(){var a=Us(),o=on.identifierPrefix;if(In){var h=pr,m=dr;h=(m&~(1<<32-Se(m)-1)).toString(32)+h,o=""+o+"R"+h,h=Vi++,0<h&&(o+="H"+h.toString(32)),o+=""}else h=S0++,o=""+o+"r"+h.toString(32)+"";return a.memoizedState=o},useHostTransitionStatus:am,useFormState:L0,useActionState:L0,useOptimistic:function(a){var o=Us();o.memoizedState=o.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=h,o=zh.bind(null,un,!0,h),h.dispatch=o,[a,o]},useMemoCache:qp,useCacheRefresh:function(){return Us().memoizedState=wx.bind(null,un)}},rm={readContext:_i,use:Lh,useCallback:G0,useContext:_i,useEffect:em,useImperativeHandle:z0,useInsertionEffect:Ph,useLayoutEffect:Fh,useMemo:im,useReducer:ko,useRef:$p,useState:function(){return ko(so)},useDebugValue:nm,useDeferredValue:function(a,o){var h=Hi();return V0(h,qn.memoizedState,a,o)},useTransition:function(){var a=ko(so)[0],o=Hi().memoizedState;return[typeof a=="boolean"?a:Qa(a),o]},useSyncExternalStore:E0,useId:Y0,useHostTransitionStatus:am,useFormState:I0,useActionState:I0,useOptimistic:function(a,o){var h=Hi();return B0(h,qn,a,o)},useMemoCache:qp,useCacheRefresh:q0},J0={readContext:_i,use:Lh,useCallback:G0,useContext:_i,useEffect:em,useImperativeHandle:z0,useInsertionEffect:Ph,useLayoutEffect:Fh,useMemo:im,useReducer:Kp,useRef:$p,useState:function(){return Kp(so)},useDebugValue:nm,useDeferredValue:function(a,o){var h=Hi();return qn===null?Hh(h,a,o):V0(h,qn.memoizedState,a,o)},useTransition:function(){var a=Kp(so)[0],o=Hi().memoizedState;return[typeof a=="boolean"?a:Qa(a),o]},useSyncExternalStore:E0,useId:Y0,useHostTransitionStatus:am,useFormState:F0,useActionState:F0,useOptimistic:function(a,o){var h=Hi();return qn!==null?B0(h,qn,a,o):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:qp,useCacheRefresh:q0},Ml=null,sf=0;function af(a){var o=sf;return sf+=1,Ml===null&&(Ml=[]),Dh(Ml,a,o)}function Uc(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function kh(a,o){throw o.$$typeof===v?Error(n(525)):(a=Object.prototype.toString.call(o),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function Z0(a){var o=a._init;return o(a._payload)}function Q0(a){function o(At,vt){if(a){var Mt=At.deletions;Mt===null?(At.deletions=[vt],At.flags|=16):Mt.push(vt)}}function h(At,vt){if(!a)return null;for(;vt!==null;)o(At,vt),vt=vt.sibling;return null}function m(At){for(var vt=new Map;At!==null;)At.key!==null?vt.set(At.key,At):vt.set(At.index,At),At=At.sibling;return vt}function A(At,vt){return At=Ri(At,vt),At.index=0,At.sibling=null,At}function T(At,vt,Mt){return At.index=Mt,a?(Mt=At.alternate,Mt!==null?(Mt=Mt.index,Mt<vt?(At.flags|=67108866,vt):Mt):(At.flags|=67108866,vt)):(At.flags|=1048576,vt)}function P(At){return a&&At.alternate===null&&(At.flags|=67108866),At}function j(At,vt,Mt,Zt){return vt===null||vt.tag!==6?(vt=Vu(Mt,At.mode,Zt),vt.return=At,vt):(vt=A(vt,Mt),vt.return=At,vt)}function nt(At,vt,Mt,Zt){var Ne=Mt.type;return Ne===b?qt(At,vt,Mt.props.children,Zt,Mt.key):vt!==null&&(vt.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===H&&Z0(Ne)===vt.type)?(vt=A(vt,Mt.props),Uc(vt,Mt),vt.return=At,vt):(vt=Qi(Mt.type,Mt.key,Mt.props,null,At.mode,Zt),Uc(vt,Mt),vt.return=At,vt)}function Ct(At,vt,Mt,Zt){return vt===null||vt.tag!==4||vt.stateNode.containerInfo!==Mt.containerInfo||vt.stateNode.implementation!==Mt.implementation?(vt=Mh(Mt,At.mode,Zt),vt.return=At,vt):(vt=A(vt,Mt.children||[]),vt.return=At,vt)}function qt(At,vt,Mt,Zt,Ne){return vt===null||vt.tag!==7?(vt=Lo(Mt,At.mode,Zt,Ne),vt.return=At,vt):(vt=A(vt,Mt),vt.return=At,vt)}function $t(At,vt,Mt){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return vt=Vu(""+vt,At.mode,Mt),vt.return=At,vt;if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case _:return Mt=Qi(vt.type,vt.key,vt.props,null,At.mode,Mt),Uc(Mt,vt),Mt.return=At,Mt;case x:return vt=Mh(vt,At.mode,Mt),vt.return=At,vt;case H:var Zt=vt._init;return vt=Zt(vt._payload),$t(At,vt,Mt)}if(mt(vt)||ht(vt))return vt=Lo(vt,At.mode,Mt,null),vt.return=At,vt;if(typeof vt.then=="function")return $t(At,af(vt),Mt);if(vt.$$typeof===B)return $t(At,Yu(At,vt),Mt);kh(At,vt)}return null}function Ut(At,vt,Mt,Zt){var Ne=vt!==null?vt.key:null;if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint")return Ne!==null?null:j(At,vt,""+Mt,Zt);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case _:return Mt.key===Ne?nt(At,vt,Mt,Zt):null;case x:return Mt.key===Ne?Ct(At,vt,Mt,Zt):null;case H:return Ne=Mt._init,Mt=Ne(Mt._payload),Ut(At,vt,Mt,Zt)}if(mt(Mt)||ht(Mt))return Ne!==null?null:qt(At,vt,Mt,Zt,null);if(typeof Mt.then=="function")return Ut(At,vt,af(Mt),Zt);if(Mt.$$typeof===B)return Ut(At,vt,Yu(At,Mt),Zt);kh(At,Mt)}return null}function Lt(At,vt,Mt,Zt,Ne){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number"||typeof Zt=="bigint")return At=At.get(Mt)||null,j(vt,At,""+Zt,Ne);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case _:return At=At.get(Zt.key===null?Mt:Zt.key)||null,nt(vt,At,Zt,Ne);case x:return At=At.get(Zt.key===null?Mt:Zt.key)||null,Ct(vt,At,Zt,Ne);case H:var En=Zt._init;return Zt=En(Zt._payload),Lt(At,vt,Mt,Zt,Ne)}if(mt(Zt)||ht(Zt))return At=At.get(Mt)||null,qt(vt,At,Zt,Ne,null);if(typeof Zt.then=="function")return Lt(At,vt,Mt,af(Zt),Ne);if(Zt.$$typeof===B)return Lt(At,vt,Mt,Yu(vt,Zt),Ne);kh(vt,Zt)}return null}function nn(At,vt,Mt,Zt){for(var Ne=null,En=null,Ge=vt,Qe=vt=0,As=null;Ge!==null&&Qe<Mt.length;Qe++){Ge.index>Qe?(As=Ge,Ge=null):As=Ge.sibling;var jn=Ut(At,Ge,Mt[Qe],Zt);if(jn===null){Ge===null&&(Ge=As);break}a&&Ge&&jn.alternate===null&&o(At,Ge),vt=T(jn,vt,Qe),En===null?Ne=jn:En.sibling=jn,En=jn,Ge=As}if(Qe===Mt.length)return h(At,Ge),In&&Zr(At,Qe),Ne;if(Ge===null){for(;Qe<Mt.length;Qe++)Ge=$t(At,Mt[Qe],Zt),Ge!==null&&(vt=T(Ge,vt,Qe),En===null?Ne=Ge:En.sibling=Ge,En=Ge);return In&&Zr(At,Qe),Ne}for(Ge=m(Ge);Qe<Mt.length;Qe++)As=Lt(Ge,At,Qe,Mt[Qe],Zt),As!==null&&(a&&As.alternate!==null&&Ge.delete(As.key===null?Qe:As.key),vt=T(As,vt,Qe),En===null?Ne=As:En.sibling=As,En=As);return a&&Ge.forEach(function(Kc){return o(At,Kc)}),In&&Zr(At,Qe),Ne}function Ze(At,vt,Mt,Zt){if(Mt==null)throw Error(n(151));for(var Ne=null,En=null,Ge=vt,Qe=vt=0,As=null,jn=Mt.next();Ge!==null&&!jn.done;Qe++,jn=Mt.next()){Ge.index>Qe?(As=Ge,Ge=null):As=Ge.sibling;var Kc=Ut(At,Ge,jn.value,Zt);if(Kc===null){Ge===null&&(Ge=As);break}a&&Ge&&Kc.alternate===null&&o(At,Ge),vt=T(Kc,vt,Qe),En===null?Ne=Kc:En.sibling=Kc,En=Kc,Ge=As}if(jn.done)return h(At,Ge),In&&Zr(At,Qe),Ne;if(Ge===null){for(;!jn.done;Qe++,jn=Mt.next())jn=$t(At,jn.value,Zt),jn!==null&&(vt=T(jn,vt,Qe),En===null?Ne=jn:En.sibling=jn,En=jn);return In&&Zr(At,Qe),Ne}for(Ge=m(Ge);!jn.done;Qe++,jn=Mt.next())jn=Lt(Ge,At,Qe,jn.value,Zt),jn!==null&&(a&&jn.alternate!==null&&Ge.delete(jn.key===null?Qe:jn.key),vt=T(jn,vt,Qe),En===null?Ne=jn:En.sibling=jn,En=jn);return a&&Ge.forEach(function(ED){return o(At,ED)}),In&&Zr(At,Qe),Ne}function ci(At,vt,Mt,Zt){if(typeof Mt=="object"&&Mt!==null&&Mt.type===b&&Mt.key===null&&(Mt=Mt.props.children),typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case _:t:{for(var Ne=Mt.key;vt!==null;){if(vt.key===Ne){if(Ne=Mt.type,Ne===b){if(vt.tag===7){h(At,vt.sibling),Zt=A(vt,Mt.props.children),Zt.return=At,At=Zt;break t}}else if(vt.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===H&&Z0(Ne)===vt.type){h(At,vt.sibling),Zt=A(vt,Mt.props),Uc(Zt,Mt),Zt.return=At,At=Zt;break t}h(At,vt);break}else o(At,vt);vt=vt.sibling}Mt.type===b?(Zt=Lo(Mt.props.children,At.mode,Zt,Mt.key),Zt.return=At,At=Zt):(Zt=Qi(Mt.type,Mt.key,Mt.props,null,At.mode,Zt),Uc(Zt,Mt),Zt.return=At,At=Zt)}return P(At);case x:t:{for(Ne=Mt.key;vt!==null;){if(vt.key===Ne)if(vt.tag===4&&vt.stateNode.containerInfo===Mt.containerInfo&&vt.stateNode.implementation===Mt.implementation){h(At,vt.sibling),Zt=A(vt,Mt.children||[]),Zt.return=At,At=Zt;break t}else{h(At,vt);break}else o(At,vt);vt=vt.sibling}Zt=Mh(Mt,At.mode,Zt),Zt.return=At,At=Zt}return P(At);case H:return Ne=Mt._init,Mt=Ne(Mt._payload),ci(At,vt,Mt,Zt)}if(mt(Mt))return nn(At,vt,Mt,Zt);if(ht(Mt)){if(Ne=ht(Mt),typeof Ne!="function")throw Error(n(150));return Mt=Ne.call(Mt),Ze(At,vt,Mt,Zt)}if(typeof Mt.then=="function")return ci(At,vt,af(Mt),Zt);if(Mt.$$typeof===B)return ci(At,vt,Yu(At,Mt),Zt);kh(At,Mt)}return typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint"?(Mt=""+Mt,vt!==null&&vt.tag===6?(h(At,vt.sibling),Zt=A(vt,Mt),Zt.return=At,At=Zt):(h(At,vt),Zt=Vu(Mt,At.mode,Zt),Zt.return=At,At=Zt),P(At)):h(At,vt)}return function(At,vt,Mt,Zt){try{sf=0;var Ne=ci(At,vt,Mt,Zt);return Ml=null,Ne}catch(Ge){if(Ge===Ju||Ge===Za)throw Ge;var En=qs(29,Ge,null,At.mode);return En.lanes=Zt,En.return=At,En}finally{}}}var bl=Q0(!0),$0=Q0(!1),$n=lt(null),$a=null;function Xo(a){var o=a.alternate;bt(Bi,Bi.current&1),bt($n,a),$a===null&&(o===null||Rc.current!==null||o.memoizedState!==null)&&($a=a)}function tv(a){if(a.tag===22){if(bt(Bi,Bi.current),bt($n,a),$a===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&($a=a)}}else jo()}function jo(){bt(Bi,Bi.current),bt($n,$n.current)}function vr(a){xt($n),$a===a&&($a=null),xt(Bi)}var Bi=lt(0);function ao(a){for(var o=a;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||jx(h)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Yo(a,o,h,m){o=a.memoizedState,h=h(m,o),h=h==null?o:g({},o,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var Ns={enqueueSetState:function(a,o,h){a=a._reactInternals;var m=Si(),A=gr(m);A.payload=o,h!=null&&(A.callback=h),o=eo(a,A,m),o!==null&&(Ls(o,a,m),Sl(o,a,m))},enqueueReplaceState:function(a,o,h){a=a._reactInternals;var m=Si(),A=gr(m);A.tag=1,A.payload=o,h!=null&&(A.callback=h),o=eo(a,A,m),o!==null&&(Ls(o,a,m),Sl(o,a,m))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var h=Si(),m=gr(h);m.tag=2,o!=null&&(m.callback=o),o=eo(a,m,h),o!==null&&(Ls(o,a,h),Sl(o,a,h))}};function ev(a,o,h,m,A,T,P){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,T,P):o.prototype&&o.prototype.isPureReactComponent?!Ka(h,m)||!Ka(A,T):!0}function nv(a,o,h,m){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,m),o.state!==a&&Ns.enqueueReplaceState(o,o.state,null)}function yr(a,o){var h=o;if("ref"in o){h={};for(var m in o)m!=="ref"&&(h[m]=o[m])}if(a=a.defaultProps){h===o&&(h=g({},h));for(var A in a)h[A]===void 0&&(h[A]=a[A])}return h}var El=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function rf(a){El(a)}function Xh(a){console.error(a)}function iv(a){El(a)}function jh(a,o){try{var h=a.onUncaughtError;h(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function Oa(a,o,h){try{var m=a.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Yh(a,o,h){return h=gr(h),h.tag=3,h.payload={element:null},h.callback=function(){jh(a,o)},h}function sv(a){return a=gr(a),a.tag=3,a}function qh(a,o,h,m){var A=h.type.getDerivedStateFromError;if(typeof A=="function"){var T=m.value;a.payload=function(){return A(T)},a.callback=function(){Oa(o,h,m)}}var P=h.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(a.callback=function(){Oa(o,h,m),typeof A!="function"&&(ga===null?ga=new Set([this]):ga.add(this));var j=m.stack;this.componentDidCatch(m.value,{componentStack:j!==null?j:""})})}function Dx(a,o,h,m,A){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=h.alternate,o!==null&&Ba(o,h,A,!0),h=$n.current,h!==null){switch(h.tag){case 13:return $a===null?c():h.alternate===null&&fi===0&&(fi=3),h.flags&=-257,h.flags|=65536,h.lanes=A,m===Zu?h.flags|=16384:(o=h.updateQueue,o===null?h.updateQueue=new Set([m]):o.add(m),Pt(a,m,A)),!1;case 22:return h.flags|=65536,m===Zu?h.flags|=16384:(o=h.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=o):(h=o.retryQueue,h===null?o.retryQueue=new Set([m]):h.add(m)),Pt(a,m,A)),!1}throw Error(n(435,h.tag))}return Pt(a,m,A),c(),!1}if(In)return o=$n.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=A,m!==Eh&&(a=Error(n(422),{cause:m}),Al(os(a,h)))):(m!==Eh&&(o=Error(n(423),{cause:m}),Al(os(o,h))),a=a.current.alternate,a.flags|=65536,A&=-A,a.lanes|=A,m=os(m,h),A=Yh(a.stateNode,m,A),Ec(a,A),fi!==4&&(fi=2)),!1;var T=Error(n(520),{cause:m});if(T=os(T,h),Xn===null?Xn=[T]:Xn.push(T),fi!==4&&(fi=2),o===null)return!0;m=os(m,h),h=o;do{switch(h.tag){case 3:return h.flags|=65536,a=A&-A,h.lanes|=a,a=Yh(h.stateNode,m,a),Ec(h,a),!1;case 1:if(o=h.type,T=h.stateNode,(h.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ga===null||!ga.has(T))))return h.flags|=65536,A&=-A,h.lanes|=A,A=sv(A),qh(A,a,h,m),Ec(h,A),!1}h=h.return}while(h!==null);return!1}var av=Error(n(461)),$i=!1;function Di(a,o,h,m){o.child=a===null?$0(o,null,h,m):bl(o,a.child,h,m)}function Ks(a,o,h,m,A){h=h.render;var T=o.ref;if("ref"in m){var P={};for(var j in m)j!=="ref"&&(P[j]=m[j])}else P=m;return mr(o),m=io(a,o,h,P,T,A),j=jp(),a!==null&&!$i?(Oh(a,o,A),ts(a,o,A)):(In&&j&&Op(o),o.flags|=1,Di(a,o,m,A),o.child)}function Js(a,o,h,m,A){if(a===null){var T=h.type;return typeof T=="function"&&!Gu(T)&&T.defaultProps===void 0&&h.compare===null?(o.tag=15,o.type=T,om(a,o,T,m,A)):(a=Qi(h.type,null,m,o,o.mode,A),a.ref=o.ref,a.return=o,o.child=a)}if(T=a.child,!of(a,A)){var P=T.memoizedProps;if(h=h.compare,h=h!==null?h:Ka,h(P,m)&&a.ref===o.ref)return ts(a,o,A)}return o.flags|=1,a=Ri(T,m),a.ref=o.ref,a.return=o,o.child=a}function om(a,o,h,m,A){if(a!==null){var T=a.memoizedProps;if(Ka(T,m)&&a.ref===o.ref)if($i=!1,o.pendingProps=m=T,of(a,A))(a.flags&131072)!==0&&($i=!0);else return o.lanes=a.lanes,ts(a,o,A)}return Nc(a,o,h,m,A)}function Tl(a,o,h){var m=o.pendingProps,A=m.children,T=a!==null?a.memoizedState:null;if(m.mode==="hidden"){if((o.flags&128)!==0){if(m=T!==null?T.baseLanes|h:h,a!==null){for(A=o.child=a.child,T=0;A!==null;)T=T|A.lanes|A.childLanes,A=A.sibling;o.childLanes=T&~m}else o.childLanes=0,o.child=null;return Cl(a,o,m,h)}if((h&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Ku(o,T!==null?T.cachePool:null),T!==null?A0(o,T):Xp(),tv(o);else return o.lanes=o.childLanes=536870912,Cl(a,o,T!==null?T.baseLanes|h:h,h)}else T!==null?(Ku(o,T.cachePool),A0(o,T),jo(),o.memoizedState=null):(a!==null&&Ku(o,null),Xp(),jo());return Di(a,o,A,h),o.child}function Cl(a,o,h,m){var A=zo();return A=A===null?null:{parent:Pi._currentValue,pool:A},o.memoizedState={baseLanes:h,cachePool:A},a!==null&&Ku(o,null),Xp(),tv(o),a!==null&&Ba(a,o,m,!0),null}function Rl(a,o){var h=o.ref;if(h===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(a===null||a.ref!==h)&&(o.flags|=4194816)}}function Nc(a,o,h,m,A){return mr(o),h=io(a,o,h,m,void 0,A),m=jp(),a!==null&&!$i?(Oh(a,o,A),ts(a,o,A)):(In&&m&&Op(o),o.flags|=1,Di(a,o,h,A),o.child)}function ca(a,o,h,m,A,T){return mr(o),o.updateQueue=null,h=b0(o,m,h,A),M0(a),m=jp(),a!==null&&!$i?(Oh(a,o,T),ts(a,o,T)):(In&&m&&Op(o),o.flags|=1,Di(a,o,h,T),o.child)}function ua(a,o,h,m,A){if(mr(o),o.stateNode===null){var T=Oo,P=h.contextType;typeof P=="object"&&P!==null&&(T=_i(P)),T=new h(m,T),o.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Ns,o.stateNode=T,T._reactInternals=o,T=o.stateNode,T.props=m,T.state=o.memoizedState,T.refs={},Vp(o),P=h.contextType,T.context=typeof P=="object"&&P!==null?_i(P):Oo,T.state=o.memoizedState,P=h.getDerivedStateFromProps,typeof P=="function"&&(Yo(o,h,P,m),T.state=o.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(P=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),P!==T.state&&Ns.enqueueReplaceState(T,T.state,null),Tc(o,m,T,A),Qu(),T.state=o.memoizedState),typeof T.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(a===null){T=o.stateNode;var j=o.memoizedProps,nt=yr(h,j);T.props=nt;var Ct=T.context,qt=h.contextType;P=Oo,typeof qt=="object"&&qt!==null&&(P=_i(qt));var $t=h.getDerivedStateFromProps;qt=typeof $t=="function"||typeof T.getSnapshotBeforeUpdate=="function",j=o.pendingProps!==j,qt||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(j||Ct!==P)&&nv(o,T,m,P),to=!1;var Ut=o.memoizedState;T.state=Ut,Tc(o,m,T,A),Qu(),Ct=o.memoizedState,j||Ut!==Ct||to?(typeof $t=="function"&&(Yo(o,h,$t,m),Ct=o.memoizedState),(nt=to||ev(o,h,nt,m,Ut,Ct,P))?(qt||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=Ct),T.props=m,T.state=Ct,T.context=P,m=nt):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{T=o.stateNode,tn(a,o),P=o.memoizedProps,qt=yr(h,P),T.props=qt,$t=o.pendingProps,Ut=T.context,Ct=h.contextType,nt=Oo,typeof Ct=="object"&&Ct!==null&&(nt=_i(Ct)),j=h.getDerivedStateFromProps,(Ct=typeof j=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(P!==$t||Ut!==nt)&&nv(o,T,m,nt),to=!1,Ut=o.memoizedState,T.state=Ut,Tc(o,m,T,A),Qu();var Lt=o.memoizedState;P!==$t||Ut!==Lt||to||a!==null&&a.dependencies!==null&&ju(a.dependencies)?(typeof j=="function"&&(Yo(o,h,j,m),Lt=o.memoizedState),(qt=to||ev(o,h,qt,m,Ut,Lt,nt)||a!==null&&a.dependencies!==null&&ju(a.dependencies))?(Ct||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(m,Lt,nt),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(m,Lt,nt)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||P===a.memoizedProps&&Ut===a.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||P===a.memoizedProps&&Ut===a.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Lt),T.props=m,T.state=Lt,T.context=nt,m=qt):(typeof T.componentDidUpdate!="function"||P===a.memoizedProps&&Ut===a.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||P===a.memoizedProps&&Ut===a.memoizedState||(o.flags|=1024),m=!1)}return T=m,Rl(a,o),m=(o.flags&128)!==0,T||m?(T=o.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:T.render(),o.flags|=1,a!==null&&m?(o.child=bl(o,a.child,null,A),o.child=bl(o,null,h,A)):Di(a,o,h,A),o.memoizedState=T.state,a=o.child):a=ts(a,o,A),a}function qo(a,o,h,m){return xc(),o.flags|=256,Di(a,o,h,m),o.child}var tr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function er(a){return{baseLanes:a,cachePool:wh()}}function ki(a,o,h){return a=a!==null?a.childLanes&~h:0,o&&(a|=Ha),a}function Oc(a,o,h){var m=o.pendingProps,A=!1,T=(o.flags&128)!==0,P;if((P=T)||(P=a!==null&&a.memoizedState===null?!1:(Bi.current&2)!==0),P&&(A=!0,o.flags&=-129),P=(o.flags&32)!==0,o.flags&=-33,a===null){if(In){if(A?Xo(o):jo(),In){var j=pi,nt;if(nt=j){t:{for(nt=j,j=ra;nt.nodeType!==8;){if(!j){j=null;break t}if(nt=fo(nt.nextSibling),nt===null){j=null;break t}}j=nt}j!==null?(o.memoizedState={dehydrated:j,treeContext:Io!==null?{id:dr,overflow:pr}:null,retryLane:536870912,hydrationErrors:null},nt=qs(18,null,null,0),nt.stateNode=j,nt.return=o,o.child=nt,Bs=o,pi=null,nt=!0):nt=!1}nt||Po(o)}if(j=o.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return jx(j)?o.lanes=32:o.lanes=536870912,null;vr(o)}return j=m.children,m=m.fallback,A?(jo(),A=o.mode,j=wl({mode:"hidden",children:j},A),m=Lo(m,A,h,null),j.return=o,m.return=o,j.sibling=m,o.child=j,A=o.child,A.memoizedState=er(h),A.childLanes=ki(a,P,h),o.memoizedState=tr,m):(Xo(o),_r(o,j))}if(nt=a.memoizedState,nt!==null&&(j=nt.dehydrated,j!==null)){if(T)o.flags&256?(Xo(o),o.flags&=-257,o=us(a,o,h)):o.memoizedState!==null?(jo(),o.child=a.child,o.flags|=128,o=null):(jo(),A=m.fallback,j=o.mode,m=wl({mode:"visible",children:m.children},j),A=Lo(A,j,h,null),A.flags|=2,m.return=o,A.return=o,m.sibling=A,o.child=m,bl(o,a.child,null,h),m=o.child,m.memoizedState=er(h),m.childLanes=ki(a,P,h),o.memoizedState=tr,o=A);else if(Xo(o),jx(j)){if(P=j.nextSibling&&j.nextSibling.dataset,P)var Ct=P.dgst;P=Ct,m=Error(n(419)),m.stack="",m.digest=P,Al({value:m,source:null,stack:null}),o=us(a,o,h)}else if($i||Ba(a,o,h,!1),P=(h&a.childLanes)!==0,$i||P){if(P=on,P!==null&&(m=h&-h,m=(m&42)!==0?1:dn(m),m=(m&(P.suspendedLanes|h))!==0?0:m,m!==0&&m!==nt.retryLane))throw nt.retryLane=m,Jr(a,m),Ls(P,a,m),av;j.data==="$?"||c(),o=us(a,o,h)}else j.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=nt.treeContext,pi=fo(j.nextSibling),Bs=o,In=!0,wa=null,ra=!1,a!==null&&(ls[aa++]=dr,ls[aa++]=pr,ls[aa++]=Io,dr=a.id,pr=a.overflow,Io=o),o=_r(o,m.children),o.flags|=4096);return o}return A?(jo(),A=m.fallback,j=o.mode,nt=a.child,Ct=nt.sibling,m=Ri(nt,{mode:"hidden",children:m.children}),m.subtreeFlags=nt.subtreeFlags&65011712,Ct!==null?A=Ri(Ct,A):(A=Lo(A,j,h,null),A.flags|=2),A.return=o,m.return=o,m.sibling=A,o.child=m,m=A,A=o.child,j=a.child.memoizedState,j===null?j=er(h):(nt=j.cachePool,nt!==null?(Ct=Pi._currentValue,nt=nt.parent!==Ct?{parent:Ct,pool:Ct}:nt):nt=wh(),j={baseLanes:j.baseLanes|h,cachePool:nt}),A.memoizedState=j,A.childLanes=ki(a,P,h),o.memoizedState=tr,m):(Xo(o),h=a.child,a=h.sibling,h=Ri(h,{mode:"visible",children:m.children}),h.return=o,h.sibling=null,a!==null&&(P=o.deletions,P===null?(o.deletions=[a],o.flags|=16):P.push(a)),o.child=h,o.memoizedState=null,h)}function _r(a,o){return o=wl({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function wl(a,o){return a=qs(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function us(a,o,h){return bl(o,a.child,null,h),a=_r(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function fs(a,o,h){a.lanes|=o;var m=a.alternate;m!==null&&(m.lanes|=o),Fp(a.return,o,h)}function Bn(a,o,h,m,A){var T=a.memoizedState;T===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:A}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=h,T.tailMode=A)}function La(a,o,h){var m=o.pendingProps,A=m.revealOrder,T=m.tail;if(Di(a,o,m.children,h),m=Bi.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)t:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&fs(a,h,o);else if(a.tag===19)fs(a,h,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break t;for(;a.sibling===null;){if(a.return===null||a.return===o)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(bt(Bi,m),A){case"forwards":for(h=o.child,A=null;h!==null;)a=h.alternate,a!==null&&ao(a)===null&&(A=h),h=h.sibling;h=A,h===null?(A=o.child,o.child=null):(A=h.sibling,h.sibling=null),Bn(o,!1,A,h,T);break;case"backwards":for(h=null,A=o.child,o.child=null;A!==null;){if(a=A.alternate,a!==null&&ao(a)===null){o.child=A;break}a=A.sibling,A.sibling=h,h=A,A=a}Bn(o,!0,h,null,T);break;case"together":Bn(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ts(a,o,h){if(a!==null&&(o.dependencies=a.dependencies),ar|=o.lanes,(h&o.childLanes)===0)if(a!==null){if(Ba(a,o,h,!1),(h&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(n(153));if(o.child!==null){for(a=o.child,h=Ri(a,a.pendingProps),o.child=h,h.return=o;a.sibling!==null;)a=a.sibling,h=h.sibling=Ri(a,a.pendingProps),h.return=o;h.sibling=null}return o.child}function of(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&ju(a)))}function Ia(a,o,h){switch(o.tag){case 3:se(o,o.stateNode.containerInfo),Ho(o,Pi,a.memoizedState.cache),xc();break;case 27:case 5:Ae(o);break;case 4:se(o,o.stateNode.containerInfo);break;case 10:Ho(o,o.type,o.memoizedProps.value);break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(Xo(o),o.flags|=128,null):(h&o.child.childLanes)!==0?Oc(a,o,h):(Xo(o),a=ts(a,o,h),a!==null?a.sibling:null);Xo(o);break;case 19:var A=(a.flags&128)!==0;if(m=(h&o.childLanes)!==0,m||(Ba(a,o,h,!1),m=(h&o.childLanes)!==0),A){if(m)return La(a,o,h);o.flags|=128}if(A=o.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),bt(Bi,Bi.current),m)break;return null;case 22:case 23:return o.lanes=0,Tl(a,o,h);case 24:Ho(o,Pi,a.memoizedState.cache)}return ts(a,o,h)}function Bl(a,o,h){if(a!==null)if(a.memoizedProps!==o.pendingProps)$i=!0;else{if(!of(a,h)&&(o.flags&128)===0)return $i=!1,Ia(a,o,h);$i=(a.flags&131072)!==0}else $i=!1,In&&(o.flags&1048576)!==0&&bh(o,_c,o.index);switch(o.lanes=0,o.tag){case 16:t:{a=o.pendingProps;var m=o.elementType,A=m._init;if(m=A(m._payload),o.type=m,typeof m=="function")Gu(m)?(a=yr(m,a),o.tag=1,o=ua(null,o,m,a,h)):(o.tag=0,o=Nc(null,o,m,a,h));else{if(m!=null){if(A=m.$$typeof,A===D){o.tag=11,o=Ks(null,o,m,a,h);break t}else if(A===V){o.tag=14,o=Js(null,o,m,a,h);break t}}throw o=dt(m)||m,Error(n(306,o,""))}}return o;case 0:return Nc(a,o,o.type,o.pendingProps,h);case 1:return m=o.type,A=yr(m,o.pendingProps),ua(a,o,m,A,h);case 3:t:{if(se(o,o.stateNode.containerInfo),a===null)throw Error(n(387));m=o.pendingProps;var T=o.memoizedState;A=T.element,tn(a,o),Tc(o,m,null,h);var P=o.memoizedState;if(m=P.cache,Ho(o,Pi,m),m!==T.cache&&Xu(o,[Pi],h,!0),Qu(),m=P.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:P.cache},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){o=qo(a,o,m,h);break t}else if(m!==A){A=os(Error(n(424)),o),Al(A),o=qo(a,o,m,h);break t}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(pi=fo(a.firstChild),Bs=o,In=!0,wa=null,ra=!0,h=$0(o,null,m,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(xc(),m===A){o=ts(a,o,h);break t}Di(a,o,m,h)}o=o.child}return o;case 26:return Rl(a,o),a===null?(h=Bb(o.type,null,o.pendingProps,null))?o.memoizedState=h:In||(h=o.type,a=o.pendingProps,m=fv(It.current).createElement(h),m[yi]=o,m[Ti]=a,Is(m,h,a),Dt(m),o.stateNode=m):o.memoizedState=Bb(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return Ae(o),a===null&&In&&(m=o.stateNode=Cb(o.type,o.pendingProps,It.current),Bs=o,ra=!0,A=pi,Xc(o.type)?(Yx=A,pi=fo(m.firstChild)):pi=A),Di(a,o,o.pendingProps.children,h),Rl(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&In&&((A=m=pi)&&(m=tD(m,o.type,o.pendingProps,ra),m!==null?(o.stateNode=m,Bs=o,pi=fo(m.firstChild),ra=!1,A=!0):A=!1),A||Po(o)),Ae(o),A=o.type,T=o.pendingProps,P=a!==null?a.memoizedProps:null,m=T.children,Vx(A,T)?m=null:P!==null&&Vx(A,P)&&(o.flags|=32),o.memoizedState!==null&&(A=io(a,o,Ex,null,null,h),ym._currentValue=A),Rl(a,o),Di(a,o,m,h),o.child;case 6:return a===null&&In&&((a=h=pi)&&(h=eD(h,o.pendingProps,ra),h!==null?(o.stateNode=h,Bs=o,pi=null,a=!0):a=!1),a||Po(o)),null;case 13:return Oc(a,o,h);case 4:return se(o,o.stateNode.containerInfo),m=o.pendingProps,a===null?o.child=bl(o,null,m,h):Di(a,o,m,h),o.child;case 11:return Ks(a,o,o.type,o.pendingProps,h);case 7:return Di(a,o,o.pendingProps,h),o.child;case 8:return Di(a,o,o.pendingProps.children,h),o.child;case 12:return Di(a,o,o.pendingProps.children,h),o.child;case 10:return m=o.pendingProps,Ho(o,o.type,m.value),Di(a,o,m.children,h),o.child;case 9:return A=o.type._context,m=o.pendingProps.children,mr(o),A=_i(A),m=m(A),o.flags|=1,Di(a,o,m,h),o.child;case 14:return Js(a,o,o.type,o.pendingProps,h);case 15:return om(a,o,o.type,o.pendingProps,h);case 19:return La(a,o,h);case 31:return m=o.pendingProps,h=o.mode,m={mode:m.mode,children:m.children},a===null?(h=wl(m,h),h.ref=o.ref,o.child=h,h.return=o,o=h):(h=Ri(a.child,m),h.ref=o.ref,o.child=h,h.return=o,o=h),o;case 22:return Tl(a,o,h);case 24:return mr(o),m=_i(Pi),a===null?(A=zo(),A===null&&(A=on,T=Ch(),A.pooledCache=T,T.refCount++,T!==null&&(A.pooledCacheLanes|=h),A=T),o.memoizedState={parent:m,cache:A},Vp(o),Ho(o,Pi,A)):((a.lanes&h)!==0&&(tn(a,o),Tc(o,null,null,h),Qu()),A=a.memoizedState,T=o.memoizedState,A.parent!==m?(A={parent:m,cache:m},o.memoizedState=A,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=A),Ho(o,Pi,m)):(m=T.cache,Ho(o,Pi,m),m!==A.cache&&Xu(o,[Pi],h,!0))),Di(a,o,o.pendingProps.children,h),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function nr(a){a.flags|=4}function lf(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!Lb(o)){if(o=$n.current,o!==null&&((Xe&4194048)===Xe?$a!==null:(Xe&62914560)!==Xe&&(Xe&536870912)===0||o!==$a))throw Ua=Zu,zp;a.flags|=8192}}function ro(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?Et():536870912,a.lanes|=o,Un|=o)}function Dl(a,o){if(!In)switch(a.tailMode){case"hidden":o=a.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function ai(a){var o=a.alternate!==null&&a.alternate.child===a.child,h=0,m=0;if(o)for(var A=a.child;A!==null;)h|=A.lanes|A.childLanes,m|=A.subtreeFlags&65011712,m|=A.flags&65011712,A.return=a,A=A.sibling;else for(A=a.child;A!==null;)h|=A.lanes|A.childLanes,m|=A.subtreeFlags,m|=A.flags,A.return=a,A=A.sibling;return a.subtreeFlags|=m,a.childLanes=h,o}function lm(a,o,h){var m=o.pendingProps;switch(Lp(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ai(o),null;case 1:return ai(o),null;case 3:return h=o.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),$r(Pi),Ie(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(Ja(o)?nr(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Vn())),ai(o),null;case 26:return h=o.memoizedState,a===null?(nr(o),h!==null?(ai(o),lf(o,h)):(ai(o),o.flags&=-16777217)):h?h!==a.memoizedState?(nr(o),ai(o),lf(o,h)):(ai(o),o.flags&=-16777217):(a.memoizedProps!==m&&nr(o),ai(o),o.flags&=-16777217),null;case 27:Be(o),h=It.current;var A=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==m&&nr(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return ai(o),null}a=ot.current,Ja(o)?v0(o):(a=Cb(A,m,h),o.stateNode=a,nr(o))}return ai(o),null;case 5:if(Be(o),h=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==m&&nr(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return ai(o),null}if(a=ot.current,Ja(o))v0(o);else{switch(A=fv(It.current),a){case 1:a=A.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:a=A.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":a=A.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":a=A.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":a=A.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof m.is=="string"?A.createElement("select",{is:m.is}):A.createElement("select"),m.multiple?a.multiple=!0:m.size&&(a.size=m.size);break;default:a=typeof m.is=="string"?A.createElement(h,{is:m.is}):A.createElement(h)}}a[yi]=o,a[Ti]=m;t:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)a.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break t;for(;A.sibling===null;){if(A.return===null||A.return===o)break t;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=a;t:switch(Is(a,h,m),h){case"button":case"input":case"select":case"textarea":a=!!m.autoFocus;break t;case"img":a=!0;break t;default:a=!1}a&&nr(o)}}return ai(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==m&&nr(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(n(166));if(a=It.current,Ja(o)){if(a=o.stateNode,h=o.memoizedProps,m=null,A=Bs,A!==null)switch(A.tag){case 27:case 5:m=A.memoizedProps}a[yi]=o,a=!!(a.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||xb(a.nodeValue,h)),a||Po(o)}else a=fv(a).createTextNode(m),a[yi]=o,o.stateNode=a}return ai(o),null;case 13:if(m=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(A=Ja(o),m!==null&&m.dehydrated!==null){if(a===null){if(!A)throw Error(n(318));if(A=o.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[yi]=o}else xc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ai(o),A=!1}else A=Vn(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=A),A=!0;if(!A)return o.flags&256?(vr(o),o):(vr(o),null)}if(vr(o),(o.flags&128)!==0)return o.lanes=h,o;if(h=m!==null,a=a!==null&&a.memoizedState!==null,h){m=o.child,A=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(A=m.alternate.memoizedState.cachePool.pool);var T=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(T=m.memoizedState.cachePool.pool),T!==A&&(m.flags|=2048)}return h!==a&&h&&(o.child.flags|=8192),ro(o,o.updateQueue),ai(o),null;case 4:return Ie(),a===null&&Px(o.stateNode.containerInfo),ai(o),null;case 10:return $r(o.type),ai(o),null;case 19:if(xt(Bi),A=o.memoizedState,A===null)return ai(o),null;if(m=(o.flags&128)!==0,T=A.rendering,T===null)if(m)Dl(A,!1);else{if(fi!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(T=ao(a),T!==null){for(o.flags|=128,Dl(A,!1),a=T.updateQueue,o.updateQueue=a,ro(o,a),o.subtreeFlags=0,a=h,h=o.child;h!==null;)Np(h,a),h=h.sibling;return bt(Bi,Bi.current&1|2),o.child}a=a.sibling}A.tail!==null&&Kt()>_s&&(o.flags|=128,m=!0,Dl(A,!1),o.lanes=4194304)}else{if(!m)if(a=ao(T),a!==null){if(o.flags|=128,m=!0,a=a.updateQueue,o.updateQueue=a,ro(o,a),Dl(A,!0),A.tail===null&&A.tailMode==="hidden"&&!T.alternate&&!In)return ai(o),null}else 2*Kt()-A.renderingStartTime>_s&&h!==536870912&&(o.flags|=128,m=!0,Dl(A,!1),o.lanes=4194304);A.isBackwards?(T.sibling=o.child,o.child=T):(a=A.last,a!==null?a.sibling=T:o.child=T,A.last=T)}return A.tail!==null?(o=A.tail,A.rendering=o,A.tail=o.sibling,A.renderingStartTime=Kt(),o.sibling=null,a=Bi.current,bt(Bi,m?a&1|2:a&1),o):(ai(o),null);case 22:case 23:return vr(o),$u(),m=o.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(h&536870912)!==0&&(o.flags&128)===0&&(ai(o),o.subtreeFlags&6&&(o.flags|=8192)):ai(o),h=o.updateQueue,h!==null&&ro(o,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==h&&(o.flags|=2048),a!==null&&xt(Da),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),$r(Pi),ai(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function Lc(a,o){switch(Lp(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return $r(Pi),Ie(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return Be(o),null;case 13:if(vr(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(n(340));xc()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return xt(Bi),null;case 4:return Ie(),null;case 10:return $r(o.type),null;case 22:case 23:return vr(o),$u(),a!==null&&xt(Da),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return $r(Pi),null;case 25:return null;default:return null}}function Ic(a,o){switch(Lp(o),o.tag){case 3:$r(Pi),Ie();break;case 26:case 27:case 5:Be(o);break;case 4:Ie();break;case 13:vr(o);break;case 19:xt(Bi);break;case 10:$r(o.type);break;case 22:case 23:vr(o),$u(),a!==null&&xt(Da);break;case 24:$r(Pi)}}function Ul(a,o){try{var h=o.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var A=m.next;h=A;do{if((h.tag&a)===a){m=void 0;var T=h.create,P=h.inst;m=T(),P.destroy=m}h=h.next}while(h!==A)}}catch(j){pt(o,o.return,j)}}function fa(a,o,h){try{var m=o.updateQueue,A=m!==null?m.lastEffect:null;if(A!==null){var T=A.next;m=T;do{if((m.tag&a)===a){var P=m.inst,j=P.destroy;if(j!==void 0){P.destroy=void 0,A=o;var nt=h,Ct=j;try{Ct()}catch(qt){pt(A,nt,qt)}}}m=m.next}while(m!==T)}}catch(qt){pt(o,o.return,qt)}}function Nl(a){var o=a.updateQueue;if(o!==null){var h=a.stateNode;try{x0(o,h)}catch(m){pt(a,a.return,m)}}}function oo(a,o,h){h.props=yr(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(m){pt(a,o,m)}}function Ol(a,o){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var m=a.stateNode;break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof h=="function"?a.refCleanup=h(m):h.current=m}}catch(A){pt(a,o,A)}}function xr(a,o){var h=a.ref,m=a.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(A){pt(a,o,A)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(A){pt(a,o,A)}else h.current=null}function Pc(a){var o=a.type,h=a.memoizedProps,m=a.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break t;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(A){pt(a,a.return,A)}}function cf(a,o,h){try{var m=a.stateNode;K3(m,a.type,h,o),m[Ti]=o}catch(A){pt(a,a.return,A)}}function uf(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Xc(a.type)||a.tag===4}function Wo(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||uf(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Xc(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Ko(a,o,h){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,o):(o=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,o.appendChild(a),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=uv));else if(m!==4&&(m===27&&Xc(a.type)&&(h=a.stateNode,o=null),a=a.child,a!==null))for(Ko(a,o,h),a=a.sibling;a!==null;)Ko(a,o,h),a=a.sibling}function Jo(a,o,h){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?h.insertBefore(a,o):h.appendChild(a);else if(m!==4&&(m===27&&Xc(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(Jo(a,o,h),a=a.sibling;a!==null;)Jo(a,o,h),a=a.sibling}function Zo(a){var o=a.stateNode,h=a.memoizedProps;try{for(var m=a.type,A=o.attributes;A.length;)o.removeAttributeNode(A[0]);Is(o,m,h),o[yi]=a,o[Ti]=h}catch(T){pt(a,a.return,T)}}var Ar=!1,ri=!1,Fc=!1,ha=typeof WeakSet=="function"?WeakSet:Set,ti=null;function Xi(a,o){if(a=a.containerInfo,zx=vv,a=Tp(a),Pu(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else t:{h=(h=a.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var A=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{h.nodeType,T.nodeType}catch{h=null;break t}var P=0,j=-1,nt=-1,Ct=0,qt=0,$t=a,Ut=null;e:for(;;){for(var Lt;$t!==h||A!==0&&$t.nodeType!==3||(j=P+A),$t!==T||m!==0&&$t.nodeType!==3||(nt=P+m),$t.nodeType===3&&(P+=$t.nodeValue.length),(Lt=$t.firstChild)!==null;)Ut=$t,$t=Lt;for(;;){if($t===a)break e;if(Ut===h&&++Ct===A&&(j=P),Ut===T&&++qt===m&&(nt=P),(Lt=$t.nextSibling)!==null)break;$t=Ut,Ut=$t.parentNode}$t=Lt}h=j===-1||nt===-1?null:{start:j,end:nt}}else h=null}h=h||{start:0,end:0}}else h=null;for(Gx={focusedElem:a,selectionRange:h},vv=!1,ti=o;ti!==null;)if(o=ti,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,ti=a;else for(;ti!==null;){switch(o=ti,T=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&T!==null){a=void 0,h=o,A=T.memoizedProps,T=T.memoizedState,m=h.stateNode;try{var nn=yr(h.type,A,h.elementType===h.type);a=m.getSnapshotBeforeUpdate(nn,T),m.__reactInternalSnapshotBeforeUpdate=a}catch(Ze){pt(h,h.return,Ze)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,h=a.nodeType,h===9)Xx(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Xx(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=o.sibling,a!==null){a.return=o.return,ti=a;break}ti=o.return}}function lo(a,o,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:Os(a,h),m&4&&Ul(5,h);break;case 1:if(Os(a,h),m&4)if(a=h.stateNode,o===null)try{a.componentDidMount()}catch(P){pt(h,h.return,P)}else{var A=yr(h.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(A,o,a.__reactInternalSnapshotBeforeUpdate)}catch(P){pt(h,h.return,P)}}m&64&&Nl(h),m&512&&Ol(h,h.return);break;case 3:if(Os(a,h),m&64&&(a=h.updateQueue,a!==null)){if(o=null,h.child!==null)switch(h.child.tag){case 27:case 5:o=h.child.stateNode;break;case 1:o=h.child.stateNode}try{x0(a,o)}catch(P){pt(h,h.return,P)}}break;case 27:o===null&&m&4&&Zo(h);case 26:case 5:Os(a,h),o===null&&m&4&&Pc(h),m&512&&Ol(h,h.return);break;case 12:Os(a,h);break;case 13:Os(a,h),m&4&&Qo(a,h),m&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=hi.bind(null,h),nD(a,h))));break;case 22:if(m=h.memoizedState!==null||Ar,!m){o=o!==null&&o.memoizedState!==null||ri,A=Ar;var T=ri;Ar=m,(ri=o)&&!T?Sr(a,h,(h.subtreeFlags&8772)!==0):Os(a,h),Ar=A,ri=T}break;case 30:break;default:Os(a,h)}}function yn(a){var o=a.alternate;o!==null&&(a.alternate=null,yn(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Gn(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var qe=null,Dn=!1;function Pa(a,o,h){for(h=h.child;h!==null;)Ll(a,o,h),h=h.sibling}function Ll(a,o,h){if(fe&&typeof fe.onCommitFiberUnmount=="function")try{fe.onCommitFiberUnmount(Ht,h)}catch{}switch(h.tag){case 26:ri||xr(h,o),Pa(a,o,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:ri||xr(h,o);var m=qe,A=Dn;Xc(h.type)&&(qe=h.stateNode,Dn=!1),Pa(a,o,h),pm(h.stateNode),qe=m,Dn=A;break;case 5:ri||xr(h,o);case 6:if(m=qe,A=Dn,qe=null,Pa(a,o,h),qe=m,Dn=A,qe!==null)if(Dn)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(h.stateNode)}catch(T){pt(h,o,T)}else try{qe.removeChild(h.stateNode)}catch(T){pt(h,o,T)}break;case 18:qe!==null&&(Dn?(a=qe,Eb(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),Sm(a)):Eb(qe,h.stateNode));break;case 4:m=qe,A=Dn,qe=h.stateNode.containerInfo,Dn=!0,Pa(a,o,h),qe=m,Dn=A;break;case 0:case 11:case 14:case 15:ri||fa(2,h,o),ri||fa(4,h,o),Pa(a,o,h);break;case 1:ri||(xr(h,o),m=h.stateNode,typeof m.componentWillUnmount=="function"&&oo(h,o,m)),Pa(a,o,h);break;case 21:Pa(a,o,h);break;case 22:ri=(m=ri)||h.memoizedState!==null,Pa(a,o,h),ri=m;break;default:Pa(a,o,h)}}function Qo(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Sm(a)}catch(h){pt(o,o.return,h)}}function Wh(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new ha),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new ha),o;default:throw Error(n(435,a.tag))}}function Il(a,o){var h=Wh(a);o.forEach(function(m){var A=en.bind(null,a,m);h.has(m)||(h.add(m),m.then(A,A))})}function es(a,o){var h=o.deletions;if(h!==null)for(var m=0;m<h.length;m++){var A=h[m],T=a,P=o,j=P;t:for(;j!==null;){switch(j.tag){case 27:if(Xc(j.type)){qe=j.stateNode,Dn=!1;break t}break;case 5:qe=j.stateNode,Dn=!1;break t;case 3:case 4:qe=j.stateNode.containerInfo,Dn=!0;break t}j=j.return}if(qe===null)throw Error(n(160));Ll(T,P,A),qe=null,Dn=!1,T=A.alternate,T!==null&&(T.return=null),A.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Kh(o,a),o=o.sibling}var ir=null;function Kh(a,o){var h=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:es(o,a),xi(a),m&4&&(fa(3,a,a.return),Ul(3,a),fa(5,a,a.return));break;case 1:es(o,a),xi(a),m&512&&(ri||h===null||xr(h,h.return)),m&64&&Ar&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var A=ir;if(es(o,a),xi(a),m&512&&(ri||h===null||xr(h,h.return)),m&4){var T=h!==null?h.memoizedState:null;if(m=a.memoizedState,h===null)if(m===null)if(a.stateNode===null){t:{m=a.type,h=a.memoizedProps,A=A.ownerDocument||A;e:switch(m){case"title":T=A.getElementsByTagName("title")[0],(!T||T[Vs]||T[yi]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=A.createElement(m),A.head.insertBefore(T,A.querySelector("head > title"))),Is(T,m,h),T[yi]=a,Dt(T),m=T;break t;case"link":var P=Nb("link","href",A).get(m+(h.href||""));if(P){for(var j=0;j<P.length;j++)if(T=P[j],T.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&T.getAttribute("rel")===(h.rel==null?null:h.rel)&&T.getAttribute("title")===(h.title==null?null:h.title)&&T.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){P.splice(j,1);break e}}T=A.createElement(m),Is(T,m,h),A.head.appendChild(T);break;case"meta":if(P=Nb("meta","content",A).get(m+(h.content||""))){for(j=0;j<P.length;j++)if(T=P[j],T.getAttribute("content")===(h.content==null?null:""+h.content)&&T.getAttribute("name")===(h.name==null?null:h.name)&&T.getAttribute("property")===(h.property==null?null:h.property)&&T.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&T.getAttribute("charset")===(h.charSet==null?null:h.charSet)){P.splice(j,1);break e}}T=A.createElement(m),Is(T,m,h),A.head.appendChild(T);break;default:throw Error(n(468,m))}T[yi]=a,Dt(T),m=T}a.stateNode=m}else Ob(A,a.type,a.stateNode);else a.stateNode=Ub(A,m,a.memoizedProps);else T!==m?(T===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):T.count--,m===null?Ob(A,a.type,a.stateNode):Ub(A,m,a.memoizedProps)):m===null&&a.stateNode!==null&&cf(a,a.memoizedProps,h.memoizedProps)}break;case 27:es(o,a),xi(a),m&512&&(ri||h===null||xr(h,h.return)),h!==null&&m&4&&cf(a,a.memoizedProps,h.memoizedProps);break;case 5:if(es(o,a),xi(a),m&512&&(ri||h===null||xr(h,h.return)),a.flags&32){A=a.stateNode;try{Cs(A,"")}catch(Lt){pt(a,a.return,Lt)}}m&4&&a.stateNode!=null&&(A=a.memoizedProps,cf(a,A,h!==null?h.memoizedProps:A)),m&1024&&(Fc=!0);break;case 6:if(es(o,a),xi(a),m&4){if(a.stateNode===null)throw Error(n(162));m=a.memoizedProps,h=a.stateNode;try{h.nodeValue=m}catch(Lt){pt(a,a.return,Lt)}}break;case 3:if(pv=null,A=ir,ir=hv(o.containerInfo),es(o,a),ir=A,xi(a),m&4&&h!==null&&h.memoizedState.isDehydrated)try{Sm(o.containerInfo)}catch(Lt){pt(a,a.return,Lt)}Fc&&(Fc=!1,$o(a));break;case 4:m=ir,ir=hv(a.stateNode.containerInfo),es(o,a),xi(a),ir=m;break;case 12:es(o,a),xi(a);break;case 13:es(o,a),xi(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Kn=Kt()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,Il(a,m)));break;case 22:A=a.memoizedState!==null;var nt=h!==null&&h.memoizedState!==null,Ct=Ar,qt=ri;if(Ar=Ct||A,ri=qt||nt,es(o,a),ri=qt,Ar=Ct,xi(a),m&8192)t:for(o=a.stateNode,o._visibility=A?o._visibility&-2:o._visibility|1,A&&(h===null||nt||Ar||ri||da(a)),h=null,o=a;;){if(o.tag===5||o.tag===26){if(h===null){nt=h=o;try{if(T=nt.stateNode,A)P=T.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{j=nt.stateNode;var $t=nt.memoizedProps.style,Ut=$t!=null&&$t.hasOwnProperty("display")?$t.display:null;j.style.display=Ut==null||typeof Ut=="boolean"?"":(""+Ut).trim()}}catch(Lt){pt(nt,nt.return,Lt)}}}else if(o.tag===6){if(h===null){nt=o;try{nt.stateNode.nodeValue=A?"":nt.memoizedProps}catch(Lt){pt(nt,nt.return,Lt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break t;for(;o.sibling===null;){if(o.return===null||o.return===a)break t;h===o&&(h=null),o=o.return}h===o&&(h=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=a.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Il(a,h))));break;case 19:es(o,a),xi(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,Il(a,m)));break;case 30:break;case 21:break;default:es(o,a),xi(a)}}function xi(a){var o=a.flags;if(o&2){try{for(var h,m=a.return;m!==null;){if(uf(m)){h=m;break}m=m.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var A=h.stateNode,T=Wo(a);Jo(a,T,A);break;case 5:var P=h.stateNode;h.flags&32&&(Cs(P,""),h.flags&=-33);var j=Wo(a);Jo(a,j,P);break;case 3:case 4:var nt=h.stateNode.containerInfo,Ct=Wo(a);Ko(a,Ct,nt);break;default:throw Error(n(161))}}catch(qt){pt(a,a.return,qt)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function $o(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;$o(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Os(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)lo(a,o.alternate,o),o=o.sibling}function da(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:fa(4,o,o.return),da(o);break;case 1:xr(o,o.return);var h=o.stateNode;typeof h.componentWillUnmount=="function"&&oo(o,o.return,h),da(o);break;case 27:pm(o.stateNode);case 26:case 5:xr(o,o.return),da(o);break;case 22:o.memoizedState===null&&da(o);break;case 30:da(o);break;default:da(o)}a=a.sibling}}function Sr(a,o,h){for(h=h&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,A=a,T=o,P=T.flags;switch(T.tag){case 0:case 11:case 15:Sr(A,T,h),Ul(4,T);break;case 1:if(Sr(A,T,h),m=T,A=m.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Ct){pt(m,m.return,Ct)}if(m=T,A=m.updateQueue,A!==null){var j=m.stateNode;try{var nt=A.shared.hiddenCallbacks;if(nt!==null)for(A.shared.hiddenCallbacks=null,A=0;A<nt.length;A++)Cc(nt[A],j)}catch(Ct){pt(m,m.return,Ct)}}h&&P&64&&Nl(T),Ol(T,T.return);break;case 27:Zo(T);case 26:case 5:Sr(A,T,h),h&&m===null&&P&4&&Pc(T),Ol(T,T.return);break;case 12:Sr(A,T,h);break;case 13:Sr(A,T,h),h&&P&4&&Qo(A,T);break;case 22:T.memoizedState===null&&Sr(A,T,h),Ol(T,T.return);break;case 30:break;default:Sr(A,T,h)}o=o.sibling}}function Jh(a,o){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&Ac(h))}function Zh(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Ac(a))}function ei(a,o,h,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Qh(a,o,h,m),o=o.sibling}function Qh(a,o,h,m){var A=o.flags;switch(o.tag){case 0:case 11:case 15:ei(a,o,h,m),A&2048&&Ul(9,o);break;case 1:ei(a,o,h,m);break;case 3:ei(a,o,h,m),A&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Ac(a)));break;case 12:if(A&2048){ei(a,o,h,m),a=o.stateNode;try{var T=o.memoizedProps,P=T.id,j=T.onPostCommit;typeof j=="function"&&j(P,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(nt){pt(o,o.return,nt)}}else ei(a,o,h,m);break;case 13:ei(a,o,h,m);break;case 23:break;case 22:T=o.stateNode,P=o.alternate,o.memoizedState!==null?T._visibility&2?ei(a,o,h,m):sr(a,o):T._visibility&2?ei(a,o,h,m):(T._visibility|=2,co(a,o,h,m,(o.subtreeFlags&10256)!==0)),A&2048&&Jh(P,o);break;case 24:ei(a,o,h,m),A&2048&&Zh(o.alternate,o);break;default:ei(a,o,h,m)}}function co(a,o,h,m,A){for(A=A&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var T=a,P=o,j=h,nt=m,Ct=P.flags;switch(P.tag){case 0:case 11:case 15:co(T,P,j,nt,A),Ul(8,P);break;case 23:break;case 22:var qt=P.stateNode;P.memoizedState!==null?qt._visibility&2?co(T,P,j,nt,A):sr(T,P):(qt._visibility|=2,co(T,P,j,nt,A)),A&&Ct&2048&&Jh(P.alternate,P);break;case 24:co(T,P,j,nt,A),A&&Ct&2048&&Zh(P.alternate,P);break;default:co(T,P,j,nt,A)}o=o.sibling}}function sr(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var h=a,m=o,A=m.flags;switch(m.tag){case 22:sr(h,m),A&2048&&Jh(m.alternate,m);break;case 24:sr(h,m),A&2048&&Zh(m.alternate,m);break;default:sr(h,m)}o=o.sibling}}var pa=8192;function Hc(a){if(a.subtreeFlags&pa)for(a=a.child;a!==null;)rv(a),a=a.sibling}function rv(a){switch(a.tag){case 26:Hc(a),a.flags&pa&&a.memoizedState!==null&&mD(ir,a.memoizedState,a.memoizedProps);break;case 5:Hc(a);break;case 3:case 4:var o=ir;ir=hv(a.stateNode.containerInfo),Hc(a),ir=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=pa,pa=16777216,Hc(a),pa=o):Hc(a));break;default:Hc(a)}}function ov(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function oi(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var m=o[h];ti=m,br(m,a)}ov(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)cm(a),a=a.sibling}function cm(a){switch(a.tag){case 0:case 11:case 15:oi(a),a.flags&2048&&fa(9,a,a.return);break;case 3:oi(a);break;case 12:oi(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Mr(a)):oi(a);break;default:oi(a)}}function Mr(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var m=o[h];ti=m,br(m,a)}ov(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:fa(8,o,o.return),Mr(o);break;case 22:h=o.stateNode,h._visibility&2&&(h._visibility&=-3,Mr(o));break;default:Mr(o)}a=a.sibling}}function br(a,o){for(;ti!==null;){var h=ti;switch(h.tag){case 0:case 11:case 15:fa(8,h,o);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Ac(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,ti=m;else t:for(h=a;ti!==null;){m=ti;var A=m.sibling,T=m.return;if(yn(m),m===h){ti=null;break t}if(A!==null){A.return=T,ti=A;break t}ti=T}}}var Ai={getCacheForType:function(a){var o=_i(Pi),h=o.data.get(a);return h===void 0&&(h=a(),o.data.set(a,h)),h}},um=typeof WeakMap=="function"?WeakMap:Map,kn=0,on=null,Sn=null,Xe=0,mn=0,mi=null,ma=!1,zc=!1,Gc=!1,Fa=0,fi=0,ar=0,Er=0,Pl=0,Ha=0,Un=0,Xn=null,Ke=null,bn=!1,Kn=0,_s=1/0,za=null,ga=null,ji=0,xs=null,ni=null,va=0,uo=0,ff=null,ya=null,Tr=0,Fl=null;function Si(){if((kn&2)!==0&&Xe!==0)return Xe&-Xe;if(F.T!==null){var a=cn;return a!==0?a:Nx()}return rn()}function $h(){Ha===0&&(Ha=(Xe&536870912)===0||In?ct():536870912);var a=$n.current;return a!==null&&(a.flags|=32),Ha}function Ls(a,o,h){(a===on&&(mn===2||mn===9)||a.cancelPendingCommit!==null)&&(el(a,0),rr(a,Xe,Ha,!1)),kt(a,h),((kn&2)===0||a!==on)&&(a===on&&((kn&2)===0&&(Er|=h),fi===4&&rr(a,Xe,Ha,!1)),sl(a))}function Vc(a,o,h){if((kn&6)!==0)throw Error(n(327));var m=!h&&(o&124)===0&&(o&a.expiredLanes)===0||Ft(a,o),A=m?S(a,o):f(a,o,!0),T=m;do{if(A===0){zc&&!m&&rr(a,o,0,!1);break}else{if(h=a.current.alternate,T&&!tl(h)){A=f(a,o,!1),T=!1;continue}if(A===2){if(T=o,a.errorRecoveryDisabledLanes&T)var P=0;else P=a.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){o=P;t:{var j=a;A=Xn;var nt=j.current.memoizedState.isDehydrated;if(nt&&(el(j,P).flags|=256),P=f(j,P,!1),P!==2){if(Gc&&!nt){j.errorRecoveryDisabledLanes|=T,Er|=T,A=4;break t}T=Ke,Ke=A,T!==null&&(Ke===null?Ke=T:Ke.push.apply(Ke,T))}A=P}if(T=!1,A!==2)continue}}if(A===1){el(a,0),rr(a,o,0,!0);break}t:{switch(m=a,T=A,T){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:rr(m,o,Ha,!ma);break t;case 2:Ke=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(A=Kn+300-Kt(),10<A)){if(rr(m,o,Ha,!ma),ft(m,0,!0)!==0)break t;m.timeoutHandle=Mb(hf.bind(null,m,h,Ke,za,bn,o,Ha,Er,Un,ma,T,2,-0,0),A);break t}hf(m,h,Ke,za,bn,o,Ha,Er,Un,ma,T,0,-0,0)}}break}while(!0);sl(a)}function hf(a,o,h,m,A,T,P,j,nt,Ct,qt,$t,Ut,Lt){if(a.timeoutHandle=-1,$t=o.subtreeFlags,($t&8192||($t&16785408)===16785408)&&(vm={stylesheets:null,count:0,unsuspend:pD},rv(o),$t=gD(),$t!==null)){a.cancelPendingCommit=$t(he.bind(null,a,o,T,h,m,A,P,j,nt,qt,1,Ut,Lt)),rr(a,T,P,!Ct);return}he(a,o,T,h,m,A,P,j,nt)}function tl(a){for(var o=a;;){var h=o.tag;if((h===0||h===11||h===15)&&o.flags&16384&&(h=o.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var A=h[m],T=A.getSnapshot;A=A.value;try{if(!Xs(T(),A))return!1}catch{return!1}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function rr(a,o,h,m){o&=~Pl,o&=~Er,a.suspendedLanes|=o,a.pingedLanes&=~o,m&&(a.warmLanes|=o),m=a.expirationTimes;for(var A=o;0<A;){var T=31-Se(A),P=1<<T;m[T]=-1,A&=~P}h!==0&&me(a,h,o)}function Cr(){return(kn&6)===0?(fm(0),!1):!0}function Hl(){if(Sn!==null){if(mn===0)var a=Sn.return;else a=Sn,Qr=Fo=null,Yp(a),Ml=null,sf=0,a=Sn;for(;a!==null;)Ic(a.alternate,a),a=a.return;Sn=null}}function el(a,o){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,Z3(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),Hl(),on=a,Sn=h=Ri(a.current,null),Xe=o,mn=0,mi=null,ma=!1,zc=Ft(a,o),Gc=!1,Un=Ha=Pl=Er=ar=fi=0,Ke=Xn=null,bn=!1,(o&8)!==0&&(o|=o&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=o;0<m;){var A=31-Se(m),T=1<<A;o|=a[A],m&=~T}return Fa=o,zu(),h}function td(a,o){un=null,F.H=nf,o===Ju||o===Za?(o=Gp(),mn=3):o===zp?(o=Gp(),mn=4):mn=o===av?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,mi=o,Sn===null&&(fi=1,jh(a,os(o,a.current)))}function kc(){var a=F.H;return F.H=nf,a===null?nf:a}function ed(){var a=F.A;return F.A=Ai,a}function c(){fi=4,ma||(Xe&4194048)!==Xe&&$n.current!==null||(zc=!0),(ar&134217727)===0&&(Er&134217727)===0||on===null||rr(on,Xe,Ha,!1)}function f(a,o,h){var m=kn;kn|=2;var A=kc(),T=ed();(on!==a||Xe!==o)&&(za=null,el(a,o)),o=!1;var P=fi;t:do try{if(mn!==0&&Sn!==null){var j=Sn,nt=mi;switch(mn){case 8:Hl(),P=6;break t;case 3:case 2:case 9:case 6:$n.current===null&&(o=!0);var Ct=mn;if(mn=0,mi=null,rt(a,j,nt,Ct),h&&zc){P=0;break t}break;default:Ct=mn,mn=0,mi=null,rt(a,j,nt,Ct)}}y(),P=fi;break}catch(qt){td(a,qt)}while(!0);return o&&a.shellSuspendCounter++,Qr=Fo=null,kn=m,F.H=A,F.A=T,Sn===null&&(on=null,Xe=0,zu()),P}function y(){for(;Sn!==null;)U(Sn)}function S(a,o){var h=kn;kn|=2;var m=kc(),A=ed();on!==a||Xe!==o?(za=null,_s=Kt()+500,el(a,o)):zc=Ft(a,o);t:do try{if(mn!==0&&Sn!==null){o=Sn;var T=mi;e:switch(mn){case 1:mn=0,mi=null,rt(a,o,T,1);break;case 2:case 9:if(Bh(T)){mn=0,mi=null,q(o);break}o=function(){mn!==2&&mn!==9||on!==a||(mn=7),sl(a)},T.then(o,o);break t;case 3:mn=7;break t;case 4:mn=5;break t;case 7:Bh(T)?(mn=0,mi=null,q(o)):(mn=0,mi=null,rt(a,o,T,7));break;case 5:var P=null;switch(Sn.tag){case 26:P=Sn.memoizedState;case 5:case 27:var j=Sn;if(!P||Lb(P)){mn=0,mi=null;var nt=j.sibling;if(nt!==null)Sn=nt;else{var Ct=j.return;Ct!==null?(Sn=Ct,St(Ct)):Sn=null}break e}}mn=0,mi=null,rt(a,o,T,5);break;case 6:mn=0,mi=null,rt(a,o,T,6);break;case 8:Hl(),fi=6;break t;default:throw Error(n(462))}}C();break}catch(qt){td(a,qt)}while(!0);return Qr=Fo=null,F.H=m,F.A=A,kn=h,Sn!==null?0:(on=null,Xe=0,zu(),fi)}function C(){for(;Sn!==null&&!le();)U(Sn)}function U(a){var o=Bl(a.alternate,a,Fa);a.memoizedProps=a.pendingProps,o===null?St(a):Sn=o}function q(a){var o=a,h=o.alternate;switch(o.tag){case 15:case 0:o=ca(h,o,o.pendingProps,o.type,void 0,Xe);break;case 11:o=ca(h,o,o.pendingProps,o.type.render,o.ref,Xe);break;case 5:Yp(o);default:Ic(h,o),o=Sn=Np(o,Fa),o=Bl(h,o,Fa)}a.memoizedProps=a.pendingProps,o===null?St(a):Sn=o}function rt(a,o,h,m){Qr=Fo=null,Yp(o),Ml=null,sf=0;var A=o.return;try{if(Dx(a,A,o,h,Xe)){fi=1,jh(a,os(h,a.current)),Sn=null;return}}catch(T){if(A!==null)throw Sn=A,T;fi=1,jh(a,os(h,a.current)),Sn=null;return}o.flags&32768?(In||m===1?a=!0:zc||(Xe&536870912)!==0?a=!1:(ma=a=!0,(m===2||m===9||m===3||m===6)&&(m=$n.current,m!==null&&m.tag===13&&(m.flags|=16384))),Yt(o,a)):St(o)}function St(a){var o=a;do{if((o.flags&32768)!==0){Yt(o,ma);return}a=o.return;var h=lm(o.alternate,o,Fa);if(h!==null){Sn=h;return}if(o=o.sibling,o!==null){Sn=o;return}Sn=o=a}while(o!==null);fi===0&&(fi=5)}function Yt(a,o){do{var h=Lc(a.alternate,a);if(h!==null){h.flags&=32767,Sn=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!o&&(a=a.sibling,a!==null)){Sn=a;return}Sn=a=h}while(a!==null);fi=6,Sn=null}function he(a,o,h,m,A,T,P,j,nt){a.cancelPendingCommit=null;do nl();while(ji!==0);if((kn&6)!==0)throw Error(n(327));if(o!==null){if(o===a.current)throw Error(n(177));if(T=o.lanes|o.childLanes,T|=Ah,ge(a,h,T,P,j,nt),a===on&&(Sn=on=null,Xe=0),ni=o,xs=a,va=h,uo=T,ff=A,ya=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,Pn(J,function(){return il(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=F.T,F.T=null,A=K.p,K.p=2,P=kn,kn|=4;try{Xi(a,o,h)}finally{kn=P,K.p=A,F.T=m}}ji=1,be(),Ce(),ln()}}function be(){if(ji===1){ji=0;var a=xs,o=ni,h=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||h){h=F.T,F.T=null;var m=K.p;K.p=2;var A=kn;kn|=4;try{Kh(o,a);var T=Gx,P=Tp(a.containerInfo),j=T.focusedElem,nt=T.selectionRange;if(P!==j&&j&&j.ownerDocument&&Ep(j.ownerDocument.documentElement,j)){if(nt!==null&&Pu(j)){var Ct=nt.start,qt=nt.end;if(qt===void 0&&(qt=Ct),"selectionStart"in j)j.selectionStart=Ct,j.selectionEnd=Math.min(qt,j.value.length);else{var $t=j.ownerDocument||document,Ut=$t&&$t.defaultView||window;if(Ut.getSelection){var Lt=Ut.getSelection(),nn=j.textContent.length,Ze=Math.min(nt.start,nn),ci=nt.end===void 0?Ze:Math.min(nt.end,nn);!Lt.extend&&Ze>ci&&(P=ci,ci=Ze,Ze=P);var At=bp(j,Ze),vt=bp(j,ci);if(At&&vt&&(Lt.rangeCount!==1||Lt.anchorNode!==At.node||Lt.anchorOffset!==At.offset||Lt.focusNode!==vt.node||Lt.focusOffset!==vt.offset)){var Mt=$t.createRange();Mt.setStart(At.node,At.offset),Lt.removeAllRanges(),Ze>ci?(Lt.addRange(Mt),Lt.extend(vt.node,vt.offset)):(Mt.setEnd(vt.node,vt.offset),Lt.addRange(Mt))}}}}for($t=[],Lt=j;Lt=Lt.parentNode;)Lt.nodeType===1&&$t.push({element:Lt,left:Lt.scrollLeft,top:Lt.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<$t.length;j++){var Zt=$t[j];Zt.element.scrollLeft=Zt.left,Zt.element.scrollTop=Zt.top}}vv=!!zx,Gx=zx=null}finally{kn=A,K.p=m,F.T=h}}a.current=o,ji=2}}function Ce(){if(ji===2){ji=0;var a=xs,o=ni,h=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||h){h=F.T,F.T=null;var m=K.p;K.p=2;var A=kn;kn|=4;try{lo(a,o.alternate,o)}finally{kn=A,K.p=m,F.T=h}}ji=3}}function ln(){if(ji===4||ji===3){ji=0,te();var a=xs,o=ni,h=va,m=ya;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?ji=5:(ji=0,ni=xs=null,_a(a,a.pendingLanes));var A=a.pendingLanes;if(A===0&&(ga=null),Ln(h),o=o.stateNode,fe&&typeof fe.onCommitFiberRoot=="function")try{fe.onCommitFiberRoot(Ht,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=F.T,A=K.p,K.p=2,F.T=null;try{for(var T=a.onRecoverableError,P=0;P<m.length;P++){var j=m[P];T(j.value,{componentStack:j.stack})}}finally{F.T=o,K.p=A}}(va&3)!==0&&nl(),sl(a),A=a.pendingLanes,(h&4194090)!==0&&(A&42)!==0?a===Fl?Tr++:(Tr=0,Fl=a):Tr=0,fm(0)}}function _a(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Ac(o)))}function nl(a){return be(),Ce(),ln(),il()}function il(){if(ji!==5)return!1;var a=xs,o=uo;uo=0;var h=Ln(va),m=F.T,A=K.p;try{K.p=32>h?32:h,F.T=null,h=ff,ff=null;var T=xs,P=va;if(ji=0,ni=xs=null,va=0,(kn&6)!==0)throw Error(n(331));var j=kn;if(kn|=4,cm(T.current),Qh(T,T.current,P,h),kn=j,fm(0,!1),fe&&typeof fe.onPostCommitFiberRoot=="function")try{fe.onPostCommitFiberRoot(Ht,T)}catch{}return!0}finally{K.p=A,F.T=m,_a(a,o)}}function Bt(a,o,h){o=os(h,o),o=Yh(a.stateNode,o,2),a=eo(a,o,2),a!==null&&(kt(a,2),sl(a))}function pt(a,o,h){if(a.tag===3)Bt(a,a,h);else for(;o!==null;){if(o.tag===3){Bt(o,a,h);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ga===null||!ga.has(m))){a=os(h,a),h=sv(2),m=eo(o,h,2),m!==null&&(qh(h,m,o,a),kt(m,2),sl(m));break}}o=o.return}}function Pt(a,o,h){var m=a.pingCache;if(m===null){m=a.pingCache=new um;var A=new Set;m.set(o,A)}else A=m.get(o),A===void 0&&(A=new Set,m.set(o,A));A.has(h)||(Gc=!0,A.add(h),a=ce.bind(null,a,o,h),o.then(a,a))}function ce(a,o,h){var m=a.pingCache;m!==null&&m.delete(o),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,on===a&&(Xe&h)===h&&(fi===4||fi===3&&(Xe&62914560)===Xe&&300>Kt()-Kn?(kn&2)===0&&el(a,0):Pl|=h,Un===Xe&&(Un=0)),sl(a)}function Fe(a,o){o===0&&(o=Et()),a=Jr(a,o),a!==null&&(kt(a,o),sl(a))}function hi(a){var o=a.memoizedState,h=0;o!==null&&(h=o.retryLane),Fe(a,h)}function en(a,o){var h=0;switch(a.tag){case 13:var m=a.stateNode,A=a.memoizedState;A!==null&&(h=A.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(o),Fe(a,h)}function Pn(a,o){return we(a,o)}var Ui=null,Mn=null,Rr=!1,nd=!1,Ux=!1,df=0;function sl(a){a!==Mn&&a.next===null&&(Mn===null?Ui=Mn=a:Mn=Mn.next=a),nd=!0,Rr||(Rr=!0,V3())}function fm(a,o){if(!Ux&&nd){Ux=!0;do for(var h=!1,m=Ui;m!==null;){if(a!==0){var A=m.pendingLanes;if(A===0)var T=0;else{var P=m.suspendedLanes,j=m.pingedLanes;T=(1<<31-Se(42|a)+1)-1,T&=A&~(P&~j),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(h=!0,db(m,T))}else T=Xe,T=ft(m,m===on?T:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(T&3)===0||Ft(m,T)||(h=!0,db(m,T));m=m.next}while(h);Ux=!1}}function G3(){ub()}function ub(){nd=Rr=!1;var a=0;df!==0&&(J3()&&(a=df),df=0);for(var o=Kt(),h=null,m=Ui;m!==null;){var A=m.next,T=fb(m,o);T===0?(m.next=null,h===null?Ui=A:h.next=A,A===null&&(Mn=h)):(h=m,(a!==0||(T&3)!==0)&&(nd=!0)),m=A}fm(a)}function fb(a,o){for(var h=a.suspendedLanes,m=a.pingedLanes,A=a.expirationTimes,T=a.pendingLanes&-62914561;0<T;){var P=31-Se(T),j=1<<P,nt=A[P];nt===-1?((j&h)===0||(j&m)!==0)&&(A[P]=re(j,o)):nt<=o&&(a.expiredLanes|=j),T&=~j}if(o=on,h=Xe,h=ft(a,a===o?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m=a.callbackNode,h===0||a===o&&(mn===2||mn===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&Z(m),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||Ft(a,h)){if(o=h&-h,o===a.callbackPriority)return o;switch(m!==null&&Z(m),Ln(h)){case 2:case 8:h=Qt;break;case 32:h=J;break;case 268435456:h=_t;break;default:h=J}return m=hb.bind(null,a),h=we(h,m),a.callbackPriority=o,a.callbackNode=h,o}return m!==null&&m!==null&&Z(m),a.callbackPriority=2,a.callbackNode=null,2}function hb(a,o){if(ji!==0&&ji!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(nl()&&a.callbackNode!==h)return null;var m=Xe;return m=ft(a,a===on?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m===0?null:(Vc(a,m,o),fb(a,Kt()),a.callbackNode!=null&&a.callbackNode===h?hb.bind(null,a):null)}function db(a,o){if(nl())return null;Vc(a,o,!0)}function V3(){Q3(function(){(kn&6)!==0?we(Te,G3):ub()})}function Nx(){return df===0&&(df=ct()),df}function pb(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:bu(""+a)}function mb(a,o){var h=o.ownerDocument.createElement("input");return h.name=o.name,h.value=o.value,a.id&&h.setAttribute("form",a.id),o.parentNode.insertBefore(h,o),a=new FormData(a),h.parentNode.removeChild(h),a}function k3(a,o,h,m,A){if(o==="submit"&&h&&h.stateNode===A){var T=pb((A[Ti]||null).action),P=m.submitter;P&&(o=(o=P[Ti]||null)?pb(o.formAction):P.getAttribute("formAction"),o!==null&&(T=o,P=null));var j=new lc("action","action",null,m,A);a.push({event:j,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(df!==0){var nt=P?mb(A,P):new FormData(A);sm(h,{pending:!0,data:nt,method:A.method,action:T},null,nt)}}else typeof T=="function"&&(j.preventDefault(),nt=P?mb(A,P):new FormData(A),sm(h,{pending:!0,data:nt,method:A.method,action:T},T,nt))},currentTarget:A}]})}}for(var Ox=0;Ox<Hu.length;Ox++){var Lx=Hu[Ox],X3=Lx.toLowerCase(),j3=Lx[0].toUpperCase()+Lx.slice(1);Zi(X3,"on"+j3)}Zi(ws,"onAnimationEnd"),Zi(wp,"onAnimationIteration"),Zi(Ys,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(g0,"onTransitionRun"),Zi(Wr,"onTransitionStart"),Zi(gc,"onTransitionCancel"),Zi(Kr,"onTransitionEnd"),G("onMouseEnter",["mouseout","mouseover"]),G("onMouseLeave",["mouseout","mouseover"]),G("onPointerEnter",["pointerout","pointerover"]),G("onPointerLeave",["pointerout","pointerover"]),ne("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ne("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ne("onBeforeInput",["compositionend","keypress","textInput","paste"]),ne("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ne("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ne("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hm));function gb(a,o){o=(o&4)!==0;for(var h=0;h<a.length;h++){var m=a[h],A=m.event;m=m.listeners;t:{var T=void 0;if(o)for(var P=m.length-1;0<=P;P--){var j=m[P],nt=j.instance,Ct=j.currentTarget;if(j=j.listener,nt!==T&&A.isPropagationStopped())break t;T=j,A.currentTarget=Ct;try{T(A)}catch(qt){El(qt)}A.currentTarget=null,T=nt}else for(P=0;P<m.length;P++){if(j=m[P],nt=j.instance,Ct=j.currentTarget,j=j.listener,nt!==T&&A.isPropagationStopped())break t;T=j,A.currentTarget=Ct;try{T(A)}catch(qt){El(qt)}A.currentTarget=null,T=nt}}}}function Cn(a,o){var h=o[gs];h===void 0&&(h=o[gs]=new Set);var m=a+"__bubble";h.has(m)||(vb(o,a,2,!1),h.add(m))}function Ix(a,o,h){var m=0;o&&(m|=4),vb(h,a,m,o)}var lv="_reactListening"+Math.random().toString(36).slice(2);function Px(a){if(!a[lv]){a[lv]=!0,Gt.forEach(function(h){h!=="selectionchange"&&(Y3.has(h)||Ix(h,!1,a),Ix(h,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[lv]||(o[lv]=!0,Ix("selectionchange",!1,o))}}function vb(a,o,h,m){switch(Gb(o)){case 2:var A=_D;break;case 8:A=xD;break;default:A=Zx}h=A.bind(null,o,h,a),A=void 0,!Tu||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(A=!0),m?A!==void 0?a.addEventListener(o,h,{capture:!0,passive:A}):a.addEventListener(o,h,!0):A!==void 0?a.addEventListener(o,h,{passive:A}):a.addEventListener(o,h,!1)}function Fx(a,o,h,m,A){var T=m;if((o&1)===0&&(o&2)===0&&m!==null)t:for(;;){if(m===null)return;var P=m.tag;if(P===3||P===4){var j=m.stateNode.containerInfo;if(j===A)break;if(P===4)for(P=m.return;P!==null;){var nt=P.tag;if((nt===3||nt===4)&&P.stateNode.containerInfo===A)return;P=P.return}for(;j!==null;){if(P=z(j),P===null)return;if(nt=P.tag,nt===5||nt===6||nt===26||nt===27){m=T=P;continue t}j=j.parentNode}}m=m.return}hp(function(){var Ct=T,qt=lh(h),$t=[];t:{var Ut=xh.get(a);if(Ut!==void 0){var Lt=lc,nn=a;switch(a){case"keypress":if(To(h)===0)break t;case"keydown":case"keyup":Lt=vp;break;case"focusin":nn="focus",Lt=uh;break;case"focusout":nn="blur",Lt=uh;break;case"beforeblur":case"afterblur":Lt=uh;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Lt=mp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Lt=xx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Lt=_p;break;case ws:case wp:case Ys:Lt=e0;break;case Kr:Lt=Xr;break;case"scroll":case"scrollend":Lt=Qg;break;case"wheel":Lt=Ax;break;case"copy":case"cut":case"paste":Lt=i0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Lt=hh;break;case"toggle":case"beforetoggle":Lt=Ro}var Ze=(o&4)!==0,ci=!Ze&&(a==="scroll"||a==="scrollend"),At=Ze?Ut!==null?Ut+"Capture":null:Ut;Ze=[];for(var vt=Ct,Mt;vt!==null;){var Zt=vt;if(Mt=Zt.stateNode,Zt=Zt.tag,Zt!==5&&Zt!==26&&Zt!==27||Mt===null||At===null||(Zt=ac(vt,At),Zt!=null&&Ze.push(dm(vt,Zt,Mt))),ci)break;vt=vt.return}0<Ze.length&&(Ut=new Lt(Ut,nn,null,h,qt),$t.push({event:Ut,listeners:Ze}))}}if((o&7)===0){t:{if(Ut=a==="mouseover"||a==="pointerover",Lt=a==="mouseout"||a==="pointerout",Ut&&h!==oh&&(nn=h.relatedTarget||h.fromElement)&&(z(nn)||nn[Ci]))break t;if((Lt||Ut)&&(Ut=qt.window===qt?qt:(Ut=qt.ownerDocument)?Ut.defaultView||Ut.parentWindow:window,Lt?(nn=h.relatedTarget||h.toElement,Lt=Ct,nn=nn?z(nn):null,nn!==null&&(ci=r(nn),Ze=nn.tag,nn!==ci||Ze!==5&&Ze!==27&&Ze!==6)&&(nn=null)):(Lt=null,nn=Ct),Lt!==nn)){if(Ze=mp,Zt="onMouseLeave",At="onMouseEnter",vt="mouse",(a==="pointerout"||a==="pointerover")&&(Ze=hh,Zt="onPointerLeave",At="onPointerEnter",vt="pointer"),ci=Lt==null?Ut:ut(Lt),Mt=nn==null?Ut:ut(nn),Ut=new Ze(Zt,vt+"leave",Lt,h,qt),Ut.target=ci,Ut.relatedTarget=Mt,Zt=null,z(qt)===Ct&&(Ze=new Ze(At,vt+"enter",nn,h,qt),Ze.target=Mt,Ze.relatedTarget=ci,Zt=Ze),ci=Zt,Lt&&nn)e:{for(Ze=Lt,At=nn,vt=0,Mt=Ze;Mt;Mt=id(Mt))vt++;for(Mt=0,Zt=At;Zt;Zt=id(Zt))Mt++;for(;0<vt-Mt;)Ze=id(Ze),vt--;for(;0<Mt-vt;)At=id(At),Mt--;for(;vt--;){if(Ze===At||At!==null&&Ze===At.alternate)break e;Ze=id(Ze),At=id(At)}Ze=null}else Ze=null;Lt!==null&&yb($t,Ut,Lt,Ze,!1),nn!==null&&ci!==null&&yb($t,ci,nn,Ze,!0)}}t:{if(Ut=Ct?ut(Ct):window,Lt=Ut.nodeName&&Ut.nodeName.toLowerCase(),Lt==="select"||Lt==="input"&&Ut.type==="file")var Ne=ph;else if(Mp(Ut))if(mh)Ne=Do;else{Ne=d0;var En=Sx}else Lt=Ut.nodeName,!Lt||Lt.toLowerCase()!=="input"||Ut.type!=="checkbox"&&Ut.type!=="radio"?Ct&&rh(Ct.elementType)&&(Ne=ph):Ne=Iu;if(Ne&&(Ne=Ne(a,Ct))){ks($t,Ne,h,qt);break t}En&&En(a,Ut,Ct),a==="focusout"&&Ct&&Ut.type==="number"&&Ct.memoizedProps.value!=null&&ui(Ut,"number",Ut.value)}switch(En=Ct?ut(Ct):window,a){case"focusin":(Mp(En)||En.contentEditable==="true")&&(Yr=En,vh=Ct,Fu=null);break;case"focusout":Fu=vh=Yr=null;break;case"mousedown":yh=!0;break;case"contextmenu":case"mouseup":case"dragend":yh=!1,Rp($t,h,qt);break;case"selectionchange":if(Cp)break;case"keydown":case"keyup":Rp($t,h,qt)}var Ge;if(Bu)t:{switch(a){case"compositionstart":var Qe="onCompositionStart";break t;case"compositionend":Qe="onCompositionEnd";break t;case"compositionupdate":Qe="onCompositionUpdate";break t}Qe=void 0}else Bo?Nu(a,h)&&(Qe="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(Qe="onCompositionStart");Qe&&(Uu&&h.locale!=="ko"&&(Bo||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&Bo&&(Ge=pp()):(Vr=qt,dp="value"in Vr?Vr.value:Vr.textContent,Bo=!0)),En=cv(Ct,Qe),0<En.length&&(Qe=new fh(Qe,a,null,h,qt),$t.push({event:Qe,listeners:En}),Ge?Qe.data=Ge:(Ge=Ap(h),Ge!==null&&(Qe.data=Ge)))),(Ge=Du?Ou(a,h):Sp(a,h))&&(Qe=cv(Ct,"onBeforeInput"),0<Qe.length&&(En=new fh("onBeforeInput","beforeinput",null,h,qt),$t.push({event:En,listeners:Qe}),En.data=Ge)),k3($t,a,Ct,h,qt)}gb($t,o)})}function dm(a,o,h){return{instance:a,listener:o,currentTarget:h}}function cv(a,o){for(var h=o+"Capture",m=[];a!==null;){var A=a,T=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||T===null||(A=ac(a,h),A!=null&&m.unshift(dm(a,A,T)),A=ac(a,o),A!=null&&m.push(dm(a,A,T))),a.tag===3)return m;a=a.return}return[]}function id(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function yb(a,o,h,m,A){for(var T=o._reactName,P=[];h!==null&&h!==m;){var j=h,nt=j.alternate,Ct=j.stateNode;if(j=j.tag,nt!==null&&nt===m)break;j!==5&&j!==26&&j!==27||Ct===null||(nt=Ct,A?(Ct=ac(h,T),Ct!=null&&P.unshift(dm(h,Ct,nt))):A||(Ct=ac(h,T),Ct!=null&&P.push(dm(h,Ct,nt)))),h=h.return}P.length!==0&&a.push({event:o,listeners:P})}var q3=/\r\n?/g,W3=/\u0000|\uFFFD/g;function _b(a){return(typeof a=="string"?a:""+a).replace(q3,`
`).replace(W3,"")}function xb(a,o){return o=_b(o),_b(a)===o}function uv(){}function li(a,o,h,m,A,T){switch(h){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Cs(a,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Cs(a,""+m);break;case"className":Vt(a,"class",m);break;case"tabIndex":Vt(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Vt(a,h,m);break;case"style":Mu(a,m,T);break;case"data":if(o!=="object"){Vt(a,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||h!=="href")){a.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(h);break}m=bu(""+m),a.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(h==="formAction"?(o!=="input"&&li(a,o,"name",A.name,A,null),li(a,o,"formEncType",A.formEncType,A,null),li(a,o,"formMethod",A.formMethod,A,null),li(a,o,"formTarget",A.formTarget,A,null)):(li(a,o,"encType",A.encType,A,null),li(a,o,"method",A.method,A,null),li(a,o,"target",A.target,A,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(h);break}m=bu(""+m),a.setAttribute(h,m);break;case"onClick":m!=null&&(a.onclick=uv);break;case"onScroll":m!=null&&Cn("scroll",a);break;case"onScrollEnd":m!=null&&Cn("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(h=m.__html,h!=null){if(A.children!=null)throw Error(n(60));a.innerHTML=h}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}h=bu(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(h,""+m):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":m===!0?a.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(h,m):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(h,m):a.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(h):a.setAttribute(h,m);break;case"popover":Cn("beforetoggle",a),Cn("toggle",a),Tt(a,"popover",m);break;case"xlinkActuate":jt(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":jt(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":jt(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":jt(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":jt(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":jt(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":jt(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":jt(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":jt(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Tt(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=up.get(h)||h,Tt(a,h,m))}}function Hx(a,o,h,m,A,T){switch(h){case"style":Mu(a,m,T);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(h=m.__html,h!=null){if(A.children!=null)throw Error(n(60));a.innerHTML=h}}break;case"children":typeof m=="string"?Cs(a,m):(typeof m=="number"||typeof m=="bigint")&&Cs(a,""+m);break;case"onScroll":m!=null&&Cn("scroll",a);break;case"onScrollEnd":m!=null&&Cn("scrollend",a);break;case"onClick":m!=null&&(a.onclick=uv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oe.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(A=h.endsWith("Capture"),o=h.slice(2,A?h.length-7:void 0),T=a[Ti]||null,T=T!=null?T[h]:null,typeof T=="function"&&a.removeEventListener(o,T,A),typeof m=="function")){typeof T!="function"&&T!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(o,m,A);break t}h in a?a[h]=m:m===!0?a.setAttribute(h,""):Tt(a,h,m)}}}function Is(a,o,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cn("error",a),Cn("load",a);var m=!1,A=!1,T;for(T in h)if(h.hasOwnProperty(T)){var P=h[T];if(P!=null)switch(T){case"src":m=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:li(a,o,T,P,h,null)}}A&&li(a,o,"srcSet",h.srcSet,h,null),m&&li(a,o,"src",h.src,h,null);return;case"input":Cn("invalid",a);var j=T=P=A=null,nt=null,Ct=null;for(m in h)if(h.hasOwnProperty(m)){var qt=h[m];if(qt!=null)switch(m){case"name":A=qt;break;case"type":P=qt;break;case"checked":nt=qt;break;case"defaultChecked":Ct=qt;break;case"value":T=qt;break;case"defaultValue":j=qt;break;case"children":case"dangerouslySetInnerHTML":if(qt!=null)throw Error(n(137,o));break;default:li(a,o,m,qt,h,null)}}pn(a,T,j,nt,Ct,P,A,!1),Yn(a);return;case"select":Cn("invalid",a),m=P=T=null;for(A in h)if(h.hasOwnProperty(A)&&(j=h[A],j!=null))switch(A){case"value":T=j;break;case"defaultValue":P=j;break;case"multiple":m=j;default:li(a,o,A,j,h,null)}o=T,h=P,a.multiple=!!m,o!=null?wn(a,!!m,o,!1):h!=null&&wn(a,!!m,h,!0);return;case"textarea":Cn("invalid",a),T=A=m=null;for(P in h)if(h.hasOwnProperty(P)&&(j=h[P],j!=null))switch(P){case"value":m=j;break;case"defaultValue":A=j;break;case"children":T=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(n(91));break;default:li(a,o,P,j,h,null)}Ji(a,m,A,T),Yn(a);return;case"option":for(nt in h)if(h.hasOwnProperty(nt)&&(m=h[nt],m!=null))switch(nt){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:li(a,o,nt,m,h,null)}return;case"dialog":Cn("beforetoggle",a),Cn("toggle",a),Cn("cancel",a),Cn("close",a);break;case"iframe":case"object":Cn("load",a);break;case"video":case"audio":for(m=0;m<hm.length;m++)Cn(hm[m],a);break;case"image":Cn("error",a),Cn("load",a);break;case"details":Cn("toggle",a);break;case"embed":case"source":case"link":Cn("error",a),Cn("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ct in h)if(h.hasOwnProperty(Ct)&&(m=h[Ct],m!=null))switch(Ct){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:li(a,o,Ct,m,h,null)}return;default:if(rh(o)){for(qt in h)h.hasOwnProperty(qt)&&(m=h[qt],m!==void 0&&Hx(a,o,qt,m,h,void 0));return}}for(j in h)h.hasOwnProperty(j)&&(m=h[j],m!=null&&li(a,o,j,m,h,null))}function K3(a,o,h,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,T=null,P=null,j=null,nt=null,Ct=null,qt=null;for(Lt in h){var $t=h[Lt];if(h.hasOwnProperty(Lt)&&$t!=null)switch(Lt){case"checked":break;case"value":break;case"defaultValue":nt=$t;default:m.hasOwnProperty(Lt)||li(a,o,Lt,null,m,$t)}}for(var Ut in m){var Lt=m[Ut];if($t=h[Ut],m.hasOwnProperty(Ut)&&(Lt!=null||$t!=null))switch(Ut){case"type":T=Lt;break;case"name":A=Lt;break;case"checked":Ct=Lt;break;case"defaultChecked":qt=Lt;break;case"value":P=Lt;break;case"defaultValue":j=Lt;break;case"children":case"dangerouslySetInnerHTML":if(Lt!=null)throw Error(n(137,o));break;default:Lt!==$t&&li(a,o,Ut,Lt,m,$t)}}vn(a,P,j,nt,Ct,qt,T,A);return;case"select":Lt=P=j=Ut=null;for(T in h)if(nt=h[T],h.hasOwnProperty(T)&&nt!=null)switch(T){case"value":break;case"multiple":Lt=nt;default:m.hasOwnProperty(T)||li(a,o,T,null,m,nt)}for(A in m)if(T=m[A],nt=h[A],m.hasOwnProperty(A)&&(T!=null||nt!=null))switch(A){case"value":Ut=T;break;case"defaultValue":j=T;break;case"multiple":P=T;default:T!==nt&&li(a,o,A,T,m,nt)}o=j,h=P,m=Lt,Ut!=null?wn(a,!!h,Ut,!1):!!m!=!!h&&(o!=null?wn(a,!!h,o,!0):wn(a,!!h,h?[]:"",!1));return;case"textarea":Lt=Ut=null;for(j in h)if(A=h[j],h.hasOwnProperty(j)&&A!=null&&!m.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:li(a,o,j,null,m,A)}for(P in m)if(A=m[P],T=h[P],m.hasOwnProperty(P)&&(A!=null||T!=null))switch(P){case"value":Ut=A;break;case"defaultValue":Lt=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:A!==T&&li(a,o,P,A,m,T)}Qn(a,Ut,Lt);return;case"option":for(var nn in h)if(Ut=h[nn],h.hasOwnProperty(nn)&&Ut!=null&&!m.hasOwnProperty(nn))switch(nn){case"selected":a.selected=!1;break;default:li(a,o,nn,null,m,Ut)}for(nt in m)if(Ut=m[nt],Lt=h[nt],m.hasOwnProperty(nt)&&Ut!==Lt&&(Ut!=null||Lt!=null))switch(nt){case"selected":a.selected=Ut&&typeof Ut!="function"&&typeof Ut!="symbol";break;default:li(a,o,nt,Ut,m,Lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in h)Ut=h[Ze],h.hasOwnProperty(Ze)&&Ut!=null&&!m.hasOwnProperty(Ze)&&li(a,o,Ze,null,m,Ut);for(Ct in m)if(Ut=m[Ct],Lt=h[Ct],m.hasOwnProperty(Ct)&&Ut!==Lt&&(Ut!=null||Lt!=null))switch(Ct){case"children":case"dangerouslySetInnerHTML":if(Ut!=null)throw Error(n(137,o));break;default:li(a,o,Ct,Ut,m,Lt)}return;default:if(rh(o)){for(var ci in h)Ut=h[ci],h.hasOwnProperty(ci)&&Ut!==void 0&&!m.hasOwnProperty(ci)&&Hx(a,o,ci,void 0,m,Ut);for(qt in m)Ut=m[qt],Lt=h[qt],!m.hasOwnProperty(qt)||Ut===Lt||Ut===void 0&&Lt===void 0||Hx(a,o,qt,Ut,m,Lt);return}}for(var At in h)Ut=h[At],h.hasOwnProperty(At)&&Ut!=null&&!m.hasOwnProperty(At)&&li(a,o,At,null,m,Ut);for($t in m)Ut=m[$t],Lt=h[$t],!m.hasOwnProperty($t)||Ut===Lt||Ut==null&&Lt==null||li(a,o,$t,Ut,m,Lt)}var zx=null,Gx=null;function fv(a){return a.nodeType===9?a:a.ownerDocument}function Ab(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sb(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Vx(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var kx=null;function J3(){var a=window.event;return a&&a.type==="popstate"?a===kx?!1:(kx=a,!0):(kx=null,!1)}var Mb=typeof setTimeout=="function"?setTimeout:void 0,Z3=typeof clearTimeout=="function"?clearTimeout:void 0,bb=typeof Promise=="function"?Promise:void 0,Q3=typeof queueMicrotask=="function"?queueMicrotask:typeof bb<"u"?function(a){return bb.resolve(null).then(a).catch($3)}:Mb;function $3(a){setTimeout(function(){throw a})}function Xc(a){return a==="head"}function Eb(a,o){var h=o,m=0,A=0;do{var T=h.nextSibling;if(a.removeChild(h),T&&T.nodeType===8)if(h=T.data,h==="/$"){if(0<m&&8>m){h=m;var P=a.ownerDocument;if(h&1&&pm(P.documentElement),h&2&&pm(P.body),h&4)for(h=P.head,pm(h),P=h.firstChild;P;){var j=P.nextSibling,nt=P.nodeName;P[Vs]||nt==="SCRIPT"||nt==="STYLE"||nt==="LINK"&&P.rel.toLowerCase()==="stylesheet"||h.removeChild(P),P=j}}if(A===0){a.removeChild(T),Sm(o);return}A--}else h==="$"||h==="$?"||h==="$!"?A++:m=h.charCodeAt(0)-48;else m=0;h=T}while(h);Sm(o)}function Xx(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var h=o;switch(o=o.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Xx(h),Gn(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function tD(a,o,h,m){for(;a.nodeType===1;){var A=h;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[Vs])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(T=a.getAttribute("rel"),T==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(T!==A.rel||a.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||a.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||a.getAttribute("title")!==(A.title==null?null:A.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(T=a.getAttribute("src"),(T!==(A.src==null?null:A.src)||a.getAttribute("type")!==(A.type==null?null:A.type)||a.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&T&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var T=A.name==null?null:""+A.name;if(A.type==="hidden"&&a.getAttribute("name")===T)return a}else return a;if(a=fo(a.nextSibling),a===null)break}return null}function eD(a,o,h){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=fo(a.nextSibling),a===null))return null;return a}function jx(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function nD(a,o){var h=a.ownerDocument;if(a.data!=="$?"||h.readyState==="complete")o();else{var m=function(){o(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),a._reactRetry=m}}function fo(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var Yx=null;function Tb(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(o===0)return a;o--}else h==="/$"&&o++}a=a.previousSibling}return null}function Cb(a,o,h){switch(o=fv(h),a){case"html":if(a=o.documentElement,!a)throw Error(n(452));return a;case"head":if(a=o.head,!a)throw Error(n(453));return a;case"body":if(a=o.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function pm(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Gn(a)}var wr=new Map,Rb=new Set;function hv(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var zl=K.d;K.d={f:iD,r:sD,D:aD,C:rD,L:oD,m:lD,X:uD,S:cD,M:fD};function iD(){var a=zl.f(),o=Cr();return a||o}function sD(a){var o=W(a);o!==null&&o.tag===5&&o.type==="form"?j0(o):zl.r(a)}var sd=typeof document>"u"?null:document;function wb(a,o,h){var m=sd;if(m&&typeof o=="string"&&o){var A=je(o);A='link[rel="'+a+'"][href="'+A+'"]',typeof h=="string"&&(A+='[crossorigin="'+h+'"]'),Rb.has(A)||(Rb.add(A),a={rel:a,crossOrigin:h,href:o},m.querySelector(A)===null&&(o=m.createElement("link"),Is(o,"link",a),Dt(o),m.head.appendChild(o)))}}function aD(a){zl.D(a),wb("dns-prefetch",a,null)}function rD(a,o){zl.C(a,o),wb("preconnect",a,o)}function oD(a,o,h){zl.L(a,o,h);var m=sd;if(m&&a&&o){var A='link[rel="preload"][as="'+je(o)+'"]';o==="image"&&h&&h.imageSrcSet?(A+='[imagesrcset="'+je(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(A+='[imagesizes="'+je(h.imageSizes)+'"]')):A+='[href="'+je(a)+'"]';var T=A;switch(o){case"style":T=ad(a);break;case"script":T=rd(a)}wr.has(T)||(a=g({rel:"preload",href:o==="image"&&h&&h.imageSrcSet?void 0:a,as:o},h),wr.set(T,a),m.querySelector(A)!==null||o==="style"&&m.querySelector(mm(T))||o==="script"&&m.querySelector(gm(T))||(o=m.createElement("link"),Is(o,"link",a),Dt(o),m.head.appendChild(o)))}}function lD(a,o){zl.m(a,o);var h=sd;if(h&&a){var m=o&&typeof o.as=="string"?o.as:"script",A='link[rel="modulepreload"][as="'+je(m)+'"][href="'+je(a)+'"]',T=A;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=rd(a)}if(!wr.has(T)&&(a=g({rel:"modulepreload",href:a},o),wr.set(T,a),h.querySelector(A)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(gm(T)))return}m=h.createElement("link"),Is(m,"link",a),Dt(m),h.head.appendChild(m)}}}function cD(a,o,h){zl.S(a,o,h);var m=sd;if(m&&a){var A=wt(m).hoistableStyles,T=ad(a);o=o||"default";var P=A.get(T);if(!P){var j={loading:0,preload:null};if(P=m.querySelector(mm(T)))j.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":o},h),(h=wr.get(T))&&qx(a,h);var nt=P=m.createElement("link");Dt(nt),Is(nt,"link",a),nt._p=new Promise(function(Ct,qt){nt.onload=Ct,nt.onerror=qt}),nt.addEventListener("load",function(){j.loading|=1}),nt.addEventListener("error",function(){j.loading|=2}),j.loading|=4,dv(P,o,m)}P={type:"stylesheet",instance:P,count:1,state:j},A.set(T,P)}}}function uD(a,o){zl.X(a,o);var h=sd;if(h&&a){var m=wt(h).hoistableScripts,A=rd(a),T=m.get(A);T||(T=h.querySelector(gm(A)),T||(a=g({src:a,async:!0},o),(o=wr.get(A))&&Wx(a,o),T=h.createElement("script"),Dt(T),Is(T,"link",a),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(A,T))}}function fD(a,o){zl.M(a,o);var h=sd;if(h&&a){var m=wt(h).hoistableScripts,A=rd(a),T=m.get(A);T||(T=h.querySelector(gm(A)),T||(a=g({src:a,async:!0,type:"module"},o),(o=wr.get(A))&&Wx(a,o),T=h.createElement("script"),Dt(T),Is(T,"link",a),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(A,T))}}function Bb(a,o,h,m){var A=(A=It.current)?hv(A):null;if(!A)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(o=ad(h.href),h=wt(A).hoistableStyles,m=h.get(o),m||(m={type:"style",instance:null,count:0,state:null},h.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=ad(h.href);var T=wt(A).hoistableStyles,P=T.get(a);if(P||(A=A.ownerDocument||A,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(a,P),(T=A.querySelector(mm(a)))&&!T._p&&(P.instance=T,P.state.loading=5),wr.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},wr.set(a,h),T||hD(A,a,h,P.state))),o&&m===null)throw Error(n(528,""));return P}if(o&&m!==null)throw Error(n(529,""));return null;case"script":return o=h.async,h=h.src,typeof h=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=rd(h),h=wt(A).hoistableScripts,m=h.get(o),m||(m={type:"script",instance:null,count:0,state:null},h.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function ad(a){return'href="'+je(a)+'"'}function mm(a){return'link[rel="stylesheet"]['+a+"]"}function Db(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function hD(a,o,h,m){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=a.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Is(o,"link",h),Dt(o),a.head.appendChild(o))}function rd(a){return'[src="'+je(a)+'"]'}function gm(a){return"script[async]"+a}function Ub(a,o,h){if(o.count++,o.instance===null)switch(o.type){case"style":var m=a.querySelector('style[data-href~="'+je(h.href)+'"]');if(m)return o.instance=m,Dt(m),m;var A=g({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),Dt(m),Is(m,"style",A),dv(m,h.precedence,a),o.instance=m;case"stylesheet":A=ad(h.href);var T=a.querySelector(mm(A));if(T)return o.state.loading|=4,o.instance=T,Dt(T),T;m=Db(h),(A=wr.get(A))&&qx(m,A),T=(a.ownerDocument||a).createElement("link"),Dt(T);var P=T;return P._p=new Promise(function(j,nt){P.onload=j,P.onerror=nt}),Is(T,"link",m),o.state.loading|=4,dv(T,h.precedence,a),o.instance=T;case"script":return T=rd(h.src),(A=a.querySelector(gm(T)))?(o.instance=A,Dt(A),A):(m=h,(A=wr.get(T))&&(m=g({},h),Wx(m,A)),a=a.ownerDocument||a,A=a.createElement("script"),Dt(A),Is(A,"link",m),a.head.appendChild(A),o.instance=A);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,dv(m,h.precedence,a));return o.instance}function dv(a,o,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=m.length?m[m.length-1]:null,T=A,P=0;P<m.length;P++){var j=m[P];if(j.dataset.precedence===o)T=j;else if(T!==A)break}T?T.parentNode.insertBefore(a,T.nextSibling):(o=h.nodeType===9?h.head:h,o.insertBefore(a,o.firstChild))}function qx(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function Wx(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var pv=null;function Nb(a,o,h){if(pv===null){var m=new Map,A=pv=new Map;A.set(h,m)}else A=pv,m=A.get(h),m||(m=new Map,A.set(h,m));if(m.has(a))return m;for(m.set(a,null),h=h.getElementsByTagName(a),A=0;A<h.length;A++){var T=h[A];if(!(T[Vs]||T[yi]||a==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var P=T.getAttribute(o)||"";P=a+P;var j=m.get(P);j?j.push(T):m.set(P,[T])}}return m}function Ob(a,o,h){a=a.ownerDocument||a,a.head.insertBefore(h,o==="title"?a.querySelector("head > title"):null)}function dD(a,o,h){if(h===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Lb(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var vm=null;function pD(){}function mD(a,o,h){if(vm===null)throw Error(n(475));var m=vm;if(o.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var A=ad(h.href),T=a.querySelector(mm(A));if(T){a=T._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(m.count++,m=mv.bind(m),a.then(m,m)),o.state.loading|=4,o.instance=T,Dt(T);return}T=a.ownerDocument||a,h=Db(h),(A=wr.get(A))&&qx(h,A),T=T.createElement("link"),Dt(T);var P=T;P._p=new Promise(function(j,nt){P.onload=j,P.onerror=nt}),Is(T,"link",h),o.instance=T}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(m.count++,o=mv.bind(m),a.addEventListener("load",o),a.addEventListener("error",o))}}function gD(){if(vm===null)throw Error(n(475));var a=vm;return a.stylesheets&&a.count===0&&Kx(a,a.stylesheets),0<a.count?function(o){var h=setTimeout(function(){if(a.stylesheets&&Kx(a,a.stylesheets),a.unsuspend){var m=a.unsuspend;a.unsuspend=null,m()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(h)}}:null}function mv(){if(this.count--,this.count===0){if(this.stylesheets)Kx(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var gv=null;function Kx(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,gv=new Map,o.forEach(vD,a),gv=null,mv.call(a))}function vD(a,o){if(!(o.state.loading&4)){var h=gv.get(a);if(h)var m=h.get(null);else{h=new Map,gv.set(a,h);for(var A=a.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<A.length;T++){var P=A[T];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(h.set(P.dataset.precedence,P),m=P)}m&&h.set(null,m)}A=o.instance,P=A.getAttribute("data-precedence"),T=h.get(P)||m,T===m&&h.set(null,A),h.set(P,A),this.count++,m=mv.bind(this),A.addEventListener("load",m),A.addEventListener("error",m),T?T.parentNode.insertBefore(A,T.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(A,a.firstChild)),o.state.loading|=4}}var ym={$$typeof:B,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function yD(a,o,h,m,A,T,P,j){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=m,this.onUncaughtError=A,this.onCaughtError=T,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Ib(a,o,h,m,A,T,P,j,nt,Ct,qt,$t){return a=new yD(a,o,h,P,j,nt,Ct,$t),o=1,T===!0&&(o|=24),T=qs(3,null,null,o),a.current=T,T.stateNode=a,o=Ch(),o.refCount++,a.pooledCache=o,o.refCount++,T.memoizedState={element:m,isDehydrated:h,cache:o},Vp(T),a}function Pb(a){return a?(a=Oo,a):Oo}function Fb(a,o,h,m,A,T){A=Pb(A),m.context===null?m.context=A:m.pendingContext=A,m=gr(o),m.payload={element:h},T=T===void 0?null:T,T!==null&&(m.callback=T),h=eo(a,m,o),h!==null&&(Ls(h,a,o),Sl(h,a,o))}function Hb(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<o?h:o}}function Jx(a,o){Hb(a,o),(a=a.alternate)&&Hb(a,o)}function zb(a){if(a.tag===13){var o=Jr(a,67108864);o!==null&&Ls(o,a,67108864),Jx(a,67108864)}}var vv=!0;function _D(a,o,h,m){var A=F.T;F.T=null;var T=K.p;try{K.p=2,Zx(a,o,h,m)}finally{K.p=T,F.T=A}}function xD(a,o,h,m){var A=F.T;F.T=null;var T=K.p;try{K.p=8,Zx(a,o,h,m)}finally{K.p=T,F.T=A}}function Zx(a,o,h,m){if(vv){var A=Qx(m);if(A===null)Fx(a,o,m,yv,h),Vb(a,m);else if(SD(A,a,o,h,m))m.stopPropagation();else if(Vb(a,m),o&4&&-1<AD.indexOf(a)){for(;A!==null;){var T=W(A);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var P=de(T.pendingLanes);if(P!==0){var j=T;for(j.pendingLanes|=2,j.entangledLanes|=2;P;){var nt=1<<31-Se(P);j.entanglements[1]|=nt,P&=~nt}sl(T),(kn&6)===0&&(_s=Kt()+500,fm(0))}}break;case 13:j=Jr(T,2),j!==null&&Ls(j,T,2),Cr(),Jx(T,2)}if(T=Qx(m),T===null&&Fx(a,o,m,yv,h),T===A)break;A=T}A!==null&&m.stopPropagation()}else Fx(a,o,m,null,h)}}function Qx(a){return a=lh(a),$x(a)}var yv=null;function $x(a){if(yv=null,a=z(a),a!==null){var o=r(a);if(o===null)a=null;else{var h=o.tag;if(h===13){if(a=l(o),a!==null)return a;a=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return yv=a,null}function Gb(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xt()){case Te:return 2;case Qt:return 8;case J:case k:return 32;case _t:return 268435456;default:return 32}default:return 32}}var tA=!1,jc=null,Yc=null,qc=null,_m=new Map,xm=new Map,Wc=[],AD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vb(a,o){switch(a){case"focusin":case"focusout":jc=null;break;case"dragenter":case"dragleave":Yc=null;break;case"mouseover":case"mouseout":qc=null;break;case"pointerover":case"pointerout":_m.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":xm.delete(o.pointerId)}}function Am(a,o,h,m,A,T){return a===null||a.nativeEvent!==T?(a={blockedOn:o,domEventName:h,eventSystemFlags:m,nativeEvent:T,targetContainers:[A]},o!==null&&(o=W(o),o!==null&&zb(o)),a):(a.eventSystemFlags|=m,o=a.targetContainers,A!==null&&o.indexOf(A)===-1&&o.push(A),a)}function SD(a,o,h,m,A){switch(o){case"focusin":return jc=Am(jc,a,o,h,m,A),!0;case"dragenter":return Yc=Am(Yc,a,o,h,m,A),!0;case"mouseover":return qc=Am(qc,a,o,h,m,A),!0;case"pointerover":var T=A.pointerId;return _m.set(T,Am(_m.get(T)||null,a,o,h,m,A)),!0;case"gotpointercapture":return T=A.pointerId,xm.set(T,Am(xm.get(T)||null,a,o,h,m,A)),!0}return!1}function kb(a){var o=z(a.target);if(o!==null){var h=r(o);if(h!==null){if(o=h.tag,o===13){if(o=l(h),o!==null){a.blockedOn=o,vi(a.priority,function(){if(h.tag===13){var m=Si();m=dn(m);var A=Jr(h,m);A!==null&&Ls(A,h,m),Jx(h,m)}});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function _v(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var h=Qx(a.nativeEvent);if(h===null){h=a.nativeEvent;var m=new h.constructor(h.type,h);oh=m,h.target.dispatchEvent(m),oh=null}else return o=W(h),o!==null&&zb(o),a.blockedOn=h,!1;o.shift()}return!0}function Xb(a,o,h){_v(a)&&h.delete(o)}function MD(){tA=!1,jc!==null&&_v(jc)&&(jc=null),Yc!==null&&_v(Yc)&&(Yc=null),qc!==null&&_v(qc)&&(qc=null),_m.forEach(Xb),xm.forEach(Xb)}function xv(a,o){a.blockedOn===o&&(a.blockedOn=null,tA||(tA=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,MD)))}var Av=null;function jb(a){Av!==a&&(Av=a,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Av===a&&(Av=null);for(var o=0;o<a.length;o+=3){var h=a[o],m=a[o+1],A=a[o+2];if(typeof m!="function"){if($x(m||h)===null)continue;break}var T=W(h);T!==null&&(a.splice(o,3),o-=3,sm(T,{pending:!0,data:A,method:h.method,action:m},m,A))}}))}function Sm(a){function o(nt){return xv(nt,a)}jc!==null&&xv(jc,a),Yc!==null&&xv(Yc,a),qc!==null&&xv(qc,a),_m.forEach(o),xm.forEach(o);for(var h=0;h<Wc.length;h++){var m=Wc[h];m.blockedOn===a&&(m.blockedOn=null)}for(;0<Wc.length&&(h=Wc[0],h.blockedOn===null);)kb(h),h.blockedOn===null&&Wc.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var A=h[m],T=h[m+1],P=A[Ti]||null;if(typeof T=="function")P||jb(h);else if(P){var j=null;if(T&&T.hasAttribute("formAction")){if(A=T,P=T[Ti]||null)j=P.formAction;else if($x(A)!==null)continue}else j=P.action;typeof j=="function"?h[m+1]=j:(h.splice(m,3),m-=3),jb(h)}}}function eA(a){this._internalRoot=a}Sv.prototype.render=eA.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(n(409));var h=o.current,m=Si();Fb(h,m,a,o,null,null)},Sv.prototype.unmount=eA.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;Fb(a.current,2,null,a,null,null),Cr(),o[Ci]=null}};function Sv(a){this._internalRoot=a}Sv.prototype.unstable_scheduleHydration=function(a){if(a){var o=rn();a={blockedOn:null,target:a,priority:o};for(var h=0;h<Wc.length&&o!==0&&o<Wc[h].priority;h++);Wc.splice(h,0,a),h===0&&kb(a)}};var Yb=t.version;if(Yb!=="19.1.0")throw Error(n(527,Yb,"19.1.0"));K.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=d(o),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var bD={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mv.isDisabled&&Mv.supportsFiber)try{Ht=Mv.inject(bD),fe=Mv}catch{}}return bm.createRoot=function(a,o){if(!s(a))throw Error(n(299));var h=!1,m="",A=rf,T=Xh,P=iv,j=null;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(A=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(P=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(j=o.unstable_transitionCallbacks)),o=Ib(a,1,!1,null,null,h,m,A,T,P,j,null),a[Ci]=o.current,Px(a),new eA(o)},bm.hydrateRoot=function(a,o,h){if(!s(a))throw Error(n(299));var m=!1,A="",T=rf,P=Xh,j=iv,nt=null,Ct=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(A=h.identifierPrefix),h.onUncaughtError!==void 0&&(T=h.onUncaughtError),h.onCaughtError!==void 0&&(P=h.onCaughtError),h.onRecoverableError!==void 0&&(j=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(nt=h.unstable_transitionCallbacks),h.formState!==void 0&&(Ct=h.formState)),o=Ib(a,1,!0,o,h??null,m,A,T,P,j,nt,Ct),o.context=Pb(null),h=o.current,m=Si(),m=dn(m),A=gr(m),A.callback=null,eo(h,A,m),h=m,o.current.lanes=h,kt(o,h),sl(o),a[Ci]=o.current,Px(a),new Sv(o)},bm.version="19.1.0",bm}var nE;function OD(){if(nE)return sA.exports;nE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),sA.exports=ND(),sA.exports}var w2=OD();const B2=Rt.createContext({});function LD(i){const t=Rt.useRef(null);return t.current===null&&(t.current=i()),t.current}const TS=typeof window<"u",ID=TS?Rt.useLayoutEffect:Rt.useEffect,CS=Rt.createContext(null);function RS(i,t){i.indexOf(t)===-1&&i.push(t)}function wS(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}const nc=(i,t,e)=>e>t?t:e<i?i:e;let BS=()=>{};const ic={},D2=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function U2(i){return typeof i=="object"&&i!==null}const N2=i=>/^0[^.\s]+$/u.test(i);function DS(i){let t;return()=>(t===void 0&&(t=i()),t)}const Pr=i=>i,PD=(i,t)=>e=>t(i(e)),Cg=(...i)=>i.reduce(PD),og=(i,t,e)=>{const n=t-i;return n===0?1:(e-i)/n};class US{constructor(){this.subscriptions=[]}add(t){return RS(this.subscriptions,t),()=>wS(this.subscriptions,t)}notify(t,e,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,n);else for(let r=0;r<s;r++){const l=this.subscriptions[r];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ll=i=>i*1e3,cl=i=>i/1e3;function O2(i,t){return t?i*(1e3/t):0}const L2=(i,t,e)=>(((1-3*e+3*t)*i+(3*e-6*t))*i+3*t)*i,FD=1e-7,HD=12;function zD(i,t,e,n,s){let r,l,u=0;do l=t+(e-t)/2,r=L2(l,n,s)-i,r>0?e=l:t=l;while(Math.abs(r)>FD&&++u<HD);return l}function Rg(i,t,e,n){if(i===t&&e===n)return Pr;const s=r=>zD(r,0,1,i,e);return r=>r===0||r===1?r:L2(s(r),t,n)}const I2=i=>t=>t<=.5?i(2*t)/2:(2-i(2*(1-t)))/2,P2=i=>t=>1-i(1-t),F2=Rg(.33,1.53,.69,.99),NS=P2(F2),H2=I2(NS),z2=i=>(i*=2)<1?.5*NS(i):.5*(2-Math.pow(2,-10*(i-1))),OS=i=>1-Math.sin(Math.acos(i)),G2=P2(OS),V2=I2(OS),GD=Rg(.42,0,1,1),VD=Rg(0,0,.58,1),k2=Rg(.42,0,.58,1),kD=i=>Array.isArray(i)&&typeof i[0]!="number",X2=i=>Array.isArray(i)&&typeof i[0]=="number",XD={linear:Pr,easeIn:GD,easeInOut:k2,easeOut:VD,circIn:OS,circInOut:V2,circOut:G2,backIn:NS,backInOut:H2,backOut:F2,anticipate:z2},jD=i=>typeof i=="string",iE=i=>{if(X2(i)){BS(i.length===4);const[t,e,n,s]=i;return Rg(t,e,n,s)}else if(jD(i))return XD[i];return i},bv=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],sE={value:null};function YD(i,t){let e=new Set,n=new Set,s=!1,r=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},d=0;function p(v){l.has(v)&&(g.schedule(v),i()),d++,v(u)}const g={schedule:(v,_=!1,x=!1)=>{const R=x&&s?e:n;return _&&l.add(v),R.has(v)||R.add(v),v},cancel:v=>{n.delete(v),l.delete(v)},process:v=>{if(u=v,s){r=!0;return}s=!0,[e,n]=[n,e],e.forEach(p),t&&sE.value&&sE.value.frameloop[t].push(d),d=0,e.clear(),s=!1,r&&(r=!1,g.process(v))}};return g}const qD=40;function j2(i,t){let e=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>e=!0,l=bv.reduce((B,D)=>(B[D]=YD(r,t?D:void 0),B),{}),{setup:u,read:d,resolveKeyframes:p,preUpdate:g,update:v,preRender:_,render:x,postRender:b}=l,R=()=>{const B=ic.useManualTiming?s.timestamp:performance.now();e=!1,ic.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(B-s.timestamp,qD),1)),s.timestamp=B,s.isProcessing=!0,u.process(s),d.process(s),p.process(s),g.process(s),v.process(s),_.process(s),x.process(s),b.process(s),s.isProcessing=!1,e&&t&&(n=!1,i(R))},E=()=>{e=!0,n=!0,s.isProcessing||i(R)};return{schedule:bv.reduce((B,D)=>{const I=l[D];return B[D]=(L,V=!1,H=!1)=>(e||E(),I.schedule(L,V,H)),B},{}),cancel:B=>{for(let D=0;D<bv.length;D++)l[bv[D]].cancel(B)},state:s,steps:l}}const{schedule:Ii,cancel:fu,state:Ps,steps:lA}=j2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pr,!0);let Ey;function WD(){Ey=void 0}const ja={now:()=>(Ey===void 0&&ja.set(Ps.isProcessing||ic.useManualTiming?Ps.timestamp:performance.now()),Ey),set:i=>{Ey=i,queueMicrotask(WD)}},Y2=i=>t=>typeof t=="string"&&t.startsWith(i),LS=Y2("--"),KD=Y2("var(--"),IS=i=>KD(i)?JD.test(i.split("/*")[0].trim()):!1,JD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,np={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},lg={...np,transform:i=>nc(0,1,i)},Ev={...np,default:1},jm=i=>Math.round(i*1e5)/1e5,PS=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ZD(i){return i==null}const QD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,FS=(i,t)=>e=>!!(typeof e=="string"&&QD.test(e)&&e.startsWith(i)||t&&!ZD(e)&&Object.prototype.hasOwnProperty.call(e,t)),q2=(i,t,e)=>n=>{if(typeof n!="string")return n;const[s,r,l,u]=n.match(PS);return{[i]:parseFloat(s),[t]:parseFloat(r),[e]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},$D=i=>nc(0,255,i),cA={...np,transform:i=>Math.round($D(i))},Lf={test:FS("rgb","red"),parse:q2("red","green","blue"),transform:({red:i,green:t,blue:e,alpha:n=1})=>"rgba("+cA.transform(i)+", "+cA.transform(t)+", "+cA.transform(e)+", "+jm(lg.transform(n))+")"};function tU(i){let t="",e="",n="",s="";return i.length>5?(t=i.substring(1,3),e=i.substring(3,5),n=i.substring(5,7),s=i.substring(7,9)):(t=i.substring(1,2),e=i.substring(2,3),n=i.substring(3,4),s=i.substring(4,5),t+=t,e+=e,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const U1={test:FS("#"),parse:tU,transform:Lf.transform},wg=i=>({test:t=>typeof t=="string"&&t.endsWith(i)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${i}`}),au=wg("deg"),ul=wg("%"),sn=wg("px"),eU=wg("vh"),nU=wg("vw"),aE={...ul,parse:i=>ul.parse(i)/100,transform:i=>ul.transform(i*100)},Rd={test:FS("hsl","hue"),parse:q2("hue","saturation","lightness"),transform:({hue:i,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(i)+", "+ul.transform(jm(t))+", "+ul.transform(jm(e))+", "+jm(lg.transform(n))+")"},ea={test:i=>Lf.test(i)||U1.test(i)||Rd.test(i),parse:i=>Lf.test(i)?Lf.parse(i):Rd.test(i)?Rd.parse(i):U1.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?Lf.transform(i):Rd.transform(i)},iU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function sU(i){var t,e;return isNaN(i)&&typeof i=="string"&&(((t=i.match(PS))==null?void 0:t.length)||0)+(((e=i.match(iU))==null?void 0:e.length)||0)>0}const W2="number",K2="color",aU="var",rU="var(",rE="${}",oU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function cg(i){const t=i.toString(),e=[],n={color:[],number:[],var:[]},s=[];let r=0;const u=t.replace(oU,d=>(ea.test(d)?(n.color.push(r),s.push(K2),e.push(ea.parse(d))):d.startsWith(rU)?(n.var.push(r),s.push(aU),e.push(d)):(n.number.push(r),s.push(W2),e.push(parseFloat(d))),++r,rE)).split(rE);return{values:e,split:u,indexes:n,types:s}}function J2(i){return cg(i).values}function Z2(i){const{split:t,types:e}=cg(i),n=t.length;return s=>{let r="";for(let l=0;l<n;l++)if(r+=t[l],s[l]!==void 0){const u=e[l];u===W2?r+=jm(s[l]):u===K2?r+=ea.transform(s[l]):r+=s[l]}return r}}const lU=i=>typeof i=="number"?0:i;function cU(i){const t=J2(i);return Z2(i)(t.map(lU))}const hu={test:sU,parse:J2,createTransformer:Z2,getAnimatableNone:cU};function uA(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*(2/3-e)*6:i}function uU({hue:i,saturation:t,lightness:e,alpha:n}){i/=360,t/=100,e/=100;let s=0,r=0,l=0;if(!t)s=r=l=e;else{const u=e<.5?e*(1+t):e+t-e*t,d=2*e-u;s=uA(d,u,i+1/3),r=uA(d,u,i),l=uA(d,u,i-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(l*255),alpha:n}}function Ly(i,t){return e=>e>0?t:i}const Ni=(i,t,e)=>i+(t-i)*e,fA=(i,t,e)=>{const n=i*i,s=e*(t*t-n)+n;return s<0?0:Math.sqrt(s)},fU=[U1,Lf,Rd],hU=i=>fU.find(t=>t.test(i));function oE(i){const t=hU(i);if(!t)return!1;let e=t.parse(i);return t===Rd&&(e=uU(e)),e}const lE=(i,t)=>{const e=oE(i),n=oE(t);if(!e||!n)return Ly(i,t);const s={...e};return r=>(s.red=fA(e.red,n.red,r),s.green=fA(e.green,n.green,r),s.blue=fA(e.blue,n.blue,r),s.alpha=Ni(e.alpha,n.alpha,r),Lf.transform(s))},N1=new Set(["none","hidden"]);function dU(i,t){return N1.has(i)?e=>e<=0?i:t:e=>e>=1?t:i}function pU(i,t){return e=>Ni(i,t,e)}function HS(i){return typeof i=="number"?pU:typeof i=="string"?IS(i)?Ly:ea.test(i)?lE:vU:Array.isArray(i)?Q2:typeof i=="object"?ea.test(i)?lE:mU:Ly}function Q2(i,t){const e=[...i],n=e.length,s=i.map((r,l)=>HS(r)(r,t[l]));return r=>{for(let l=0;l<n;l++)e[l]=s[l](r);return e}}function mU(i,t){const e={...i,...t},n={};for(const s in e)i[s]!==void 0&&t[s]!==void 0&&(n[s]=HS(i[s])(i[s],t[s]));return s=>{for(const r in n)e[r]=n[r](s);return e}}function gU(i,t){const e=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const r=t.types[s],l=i.indexes[r][n[r]],u=i.values[l]??0;e[s]=u,n[r]++}return e}const vU=(i,t)=>{const e=hu.createTransformer(t),n=cg(i),s=cg(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?N1.has(i)&&!s.values.length||N1.has(t)&&!n.values.length?dU(i,t):Cg(Q2(gU(n,s),s.values),e):Ly(i,t)};function $2(i,t,e){return typeof i=="number"&&typeof t=="number"&&typeof e=="number"?Ni(i,t,e):HS(i)(i,t)}const yU=i=>{const t=({timestamp:e})=>i(e);return{start:(e=!0)=>Ii.update(t,e),stop:()=>fu(t),now:()=>Ps.isProcessing?Ps.timestamp:ja.now()}},tR=(i,t,e=10)=>{let n="";const s=Math.max(Math.round(t/e),2);for(let r=0;r<s;r++)n+=i(r/(s-1))+", ";return`linear(${n.substring(0,n.length-2)})`},Iy=2e4;function zS(i){let t=0;const e=50;let n=i.next(t);for(;!n.done&&t<Iy;)t+=e,n=i.next(t);return t>=Iy?1/0:t}function _U(i,t=100,e){const n=e({...i,keyframes:[0,t]}),s=Math.min(zS(n),Iy);return{type:"keyframes",ease:r=>n.next(s*r).value/t,duration:cl(s)}}const xU=5;function eR(i,t,e){const n=Math.max(t-xU,0);return O2(e-i(n),t-n)}const Gi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},cE=.001;function AU({duration:i=Gi.duration,bounce:t=Gi.bounce,velocity:e=Gi.velocity,mass:n=Gi.mass}){let s,r,l=1-t;l=nc(Gi.minDamping,Gi.maxDamping,l),i=nc(Gi.minDuration,Gi.maxDuration,cl(i)),l<1?(s=p=>{const g=p*l,v=g*i,_=g-e,x=O1(p,l),b=Math.exp(-v);return cE-_/x*b},r=p=>{const v=p*l*i,_=v*e+e,x=Math.pow(l,2)*Math.pow(p,2)*i,b=Math.exp(-v),R=O1(Math.pow(p,2),l);return(-s(p)+cE>0?-1:1)*((_-x)*b)/R}):(s=p=>{const g=Math.exp(-p*i),v=(p-e)*i+1;return-.001+g*v},r=p=>{const g=Math.exp(-p*i),v=(e-p)*(i*i);return g*v});const u=5/i,d=MU(s,r,u);if(i=ll(i),isNaN(d))return{stiffness:Gi.stiffness,damping:Gi.damping,duration:i};{const p=Math.pow(d,2)*n;return{stiffness:p,damping:l*2*Math.sqrt(n*p),duration:i}}}const SU=12;function MU(i,t,e){let n=e;for(let s=1;s<SU;s++)n=n-i(n)/t(n);return n}function O1(i,t){return i*Math.sqrt(1-t*t)}const bU=["duration","bounce"],EU=["stiffness","damping","mass"];function uE(i,t){return t.some(e=>i[e]!==void 0)}function TU(i){let t={velocity:Gi.velocity,stiffness:Gi.stiffness,damping:Gi.damping,mass:Gi.mass,isResolvedFromDuration:!1,...i};if(!uE(i,EU)&&uE(i,bU))if(i.visualDuration){const e=i.visualDuration,n=2*Math.PI/(e*1.2),s=n*n,r=2*nc(.05,1,1-(i.bounce||0))*Math.sqrt(s);t={...t,mass:Gi.mass,stiffness:s,damping:r}}else{const e=AU(i);t={...t,...e,mass:Gi.mass},t.isResolvedFromDuration=!0}return t}function Py(i=Gi.visualDuration,t=Gi.bounce){const e=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:t}:i;let{restSpeed:n,restDelta:s}=e;const r=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],u={done:!1,value:r},{stiffness:d,damping:p,mass:g,duration:v,velocity:_,isResolvedFromDuration:x}=TU({...e,velocity:-cl(e.velocity||0)}),b=_||0,R=p/(2*Math.sqrt(d*g)),E=l-r,M=cl(Math.sqrt(d/g)),w=Math.abs(E)<5;n||(n=w?Gi.restSpeed.granular:Gi.restSpeed.default),s||(s=w?Gi.restDelta.granular:Gi.restDelta.default);let B;if(R<1){const I=O1(M,R);B=L=>{const V=Math.exp(-R*M*L);return l-V*((b+R*M*E)/I*Math.sin(I*L)+E*Math.cos(I*L))}}else if(R===1)B=I=>l-Math.exp(-M*I)*(E+(b+M*E)*I);else{const I=M*Math.sqrt(R*R-1);B=L=>{const V=Math.exp(-R*M*L),H=Math.min(I*L,300);return l-V*((b+R*M*E)*Math.sinh(H)+I*E*Math.cosh(H))/I}}const D={calculatedDuration:x&&v||null,next:I=>{const L=B(I);if(x)u.done=I>=v;else{let V=I===0?b:0;R<1&&(V=I===0?ll(b):eR(B,I,L));const H=Math.abs(V)<=n,N=Math.abs(l-L)<=s;u.done=H&&N}return u.value=u.done?l:L,u},toString:()=>{const I=Math.min(zS(D),Iy),L=tR(V=>D.next(I*V).value,I,30);return I+"ms "+L},toTransition:()=>{}};return D}Py.applyToOptions=i=>{const t=_U(i,100,Py);return i.ease=t.ease,i.duration=ll(t.duration),i.type="keyframes",i};function L1({keyframes:i,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:l,min:u,max:d,restDelta:p=.5,restSpeed:g}){const v=i[0],_={done:!1,value:v},x=H=>u!==void 0&&H<u||d!==void 0&&H>d,b=H=>u===void 0?d:d===void 0||Math.abs(u-H)<Math.abs(d-H)?u:d;let R=e*t;const E=v+R,M=l===void 0?E:l(E);M!==E&&(R=M-v);const w=H=>-R*Math.exp(-H/n),B=H=>M+w(H),D=H=>{const N=w(H),O=B(H);_.done=Math.abs(N)<=p,_.value=_.done?M:O};let I,L;const V=H=>{x(_.value)&&(I=H,L=Py({keyframes:[_.value,b(_.value)],velocity:eR(B,H,_.value),damping:s,stiffness:r,restDelta:p,restSpeed:g}))};return V(0),{calculatedDuration:null,next:H=>{let N=!1;return!L&&I===void 0&&(N=!0,D(H),V(H)),I!==void 0&&H>=I?L.next(H-I):(!N&&D(H),_)}}}function CU(i,t,e){const n=[],s=e||ic.mix||$2,r=i.length-1;for(let l=0;l<r;l++){let u=s(i[l],i[l+1]);if(t){const d=Array.isArray(t)?t[l]||Pr:t;u=Cg(d,u)}n.push(u)}return n}function RU(i,t,{clamp:e=!0,ease:n,mixer:s}={}){const r=i.length;if(BS(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const l=i[0]===i[1];i[0]>i[r-1]&&(i=[...i].reverse(),t=[...t].reverse());const u=CU(t,n,s),d=u.length,p=g=>{if(l&&g<i[0])return t[0];let v=0;if(d>1)for(;v<i.length-2&&!(g<i[v+1]);v++);const _=og(i[v],i[v+1],g);return u[v](_)};return e?g=>p(nc(i[0],i[r-1],g)):p}function wU(i,t){const e=i[i.length-1];for(let n=1;n<=t;n++){const s=og(0,t,n);i.push(Ni(e,1,s))}}function BU(i){const t=[0];return wU(t,i.length-1),t}function DU(i,t){return i.map(e=>e*t)}function UU(i,t){return i.map(()=>t||k2).splice(0,i.length-1)}function Ym({duration:i=300,keyframes:t,times:e,ease:n="easeInOut"}){const s=kD(n)?n.map(iE):iE(n),r={done:!1,value:t[0]},l=DU(e&&e.length===t.length?e:BU(t),i),u=RU(l,t,{ease:Array.isArray(s)?s:UU(t,s)});return{calculatedDuration:i,next:d=>(r.value=u(d),r.done=d>=i,r)}}const NU=i=>i!==null;function GS(i,{repeat:t,repeatType:e="loop"},n,s=1){const r=i.filter(NU),u=s<0||t&&e!=="loop"&&t%2===1?0:r.length-1;return!u||n===void 0?r[u]:n}const OU={decay:L1,inertia:L1,tween:Ym,keyframes:Ym,spring:Py};function nR(i){typeof i.type=="string"&&(i.type=OU[i.type])}class VS{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const LU=i=>i/100;class kS extends VS{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(e=!0)=>{var n,s;if(e){const{motionValue:r}=this.options;r&&r.updatedAt!==ja.now()&&this.tick(ja.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;nR(t);const{type:e=Ym,repeat:n=0,repeatDelay:s=0,repeatType:r,velocity:l=0}=t;let{keyframes:u}=t;const d=e||Ym;d!==Ym&&typeof u[0]!="number"&&(this.mixKeyframes=Cg(LU,$2(u[0],u[1])),u=[0,100]);const p=d({...t,keyframes:u});r==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...u].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=zS(p));const{calculatedDuration:g}=p;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=p}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:s,mixKeyframes:r,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return n.next(0);const{delay:p=0,keyframes:g,repeat:v,repeatType:_,repeatDelay:x,type:b,onUpdate:R,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const M=this.currentTime-p*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?M<0:M>s;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let B=this.currentTime,D=n;if(v){const H=Math.min(this.currentTime,s)/u;let N=Math.floor(H),O=H%1;!O&&H>=1&&(O=1),O===1&&N--,N=Math.min(N,v+1),!!(N%2)&&(_==="reverse"?(O=1-O,x&&(O-=x/u)):_==="mirror"&&(D=l)),B=nc(0,1,O)*u}const I=w?{done:!1,value:g[0]}:D.next(B);r&&(I.value=r(I.value));let{done:L}=I;!w&&d!==null&&(L=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const V=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return V&&b!==L1&&(I.value=GS(g,this.options,E,this.speed)),R&&R(I.value),V&&this.finish(),I}then(t,e){return this.finished.then(t,e)}get duration(){return cl(this.calculatedDuration)}get time(){return cl(this.currentTime)}set time(t){var e;t=ll(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ja.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=cl(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:t=yU,startTime:e}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),(r=(s=this.options).onPlay)==null||r.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ja.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function IU(i){for(let t=1;t<i.length;t++)i[t]??(i[t]=i[t-1])}const If=i=>i*180/Math.PI,I1=i=>{const t=If(Math.atan2(i[1],i[0]));return P1(t)},PU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:I1,rotateZ:I1,skewX:i=>If(Math.atan(i[1])),skewY:i=>If(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},P1=i=>(i=i%360,i<0&&(i+=360),i),fE=I1,hE=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),dE=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),FU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:hE,scaleY:dE,scale:i=>(hE(i)+dE(i))/2,rotateX:i=>P1(If(Math.atan2(i[6],i[5]))),rotateY:i=>P1(If(Math.atan2(-i[2],i[0]))),rotateZ:fE,rotate:fE,skewX:i=>If(Math.atan(i[4])),skewY:i=>If(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function F1(i){return i.includes("scale")?1:0}function H1(i,t){if(!i||i==="none")return F1(t);const e=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(e)n=FU,s=e;else{const u=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=PU,s=u}if(!s)return F1(t);const r=n[t],l=s[1].split(",").map(zU);return typeof r=="function"?r(l):l[r]}const HU=(i,t)=>{const{transform:e="none"}=getComputedStyle(i);return H1(e,t)};function zU(i){return parseFloat(i.trim())}const ip=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sp=new Set(ip),pE=i=>i===np||i===sn,GU=new Set(["x","y","z"]),VU=ip.filter(i=>!GU.has(i));function kU(i){const t=[];return VU.forEach(e=>{const n=i.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const Xf={width:({x:i},{paddingLeft:t="0",paddingRight:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),height:({y:i},{paddingTop:t="0",paddingBottom:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),top:(i,{top:t})=>parseFloat(t),left:(i,{left:t})=>parseFloat(t),bottom:({y:i},{top:t})=>parseFloat(t)+(i.max-i.min),right:({x:i},{left:t})=>parseFloat(t)+(i.max-i.min),x:(i,{transform:t})=>H1(t,"x"),y:(i,{transform:t})=>H1(t,"y")};Xf.translateX=Xf.x;Xf.translateY=Xf.y;const jf=new Set;let z1=!1,G1=!1,V1=!1;function iR(){if(G1){const i=Array.from(jf).filter(n=>n.needsMeasurement),t=new Set(i.map(n=>n.element)),e=new Map;t.forEach(n=>{const s=kU(n);s.length&&(e.set(n,s),n.render())}),i.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=e.get(n);s&&s.forEach(([r,l])=>{var u;(u=n.getValue(r))==null||u.set(l)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}G1=!1,z1=!1,jf.forEach(i=>i.complete(V1)),jf.clear()}function sR(){jf.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(G1=!0)})}function XU(){V1=!0,sR(),iR(),V1=!1}class XS{constructor(t,e,n,s,r,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=s,this.element=r,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(jf.add(this),z1||(z1=!0,Ii.read(sR),Ii.resolveKeyframes(iR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:s}=this;if(t[0]===null){const r=s==null?void 0:s.get(),l=t[t.length-1];if(r!==void 0)t[0]=r;else if(n&&e){const u=n.readValue(e,l);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=l),s&&r===void 0&&s.set(t[0])}IU(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),jf.delete(this)}cancel(){this.state==="scheduled"&&(jf.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const jU=i=>i.startsWith("--");function YU(i,t,e){jU(t)?i.style.setProperty(t,e):i.style[t]=e}const qU=DS(()=>window.ScrollTimeline!==void 0),WU={};function KU(i,t){const e=DS(i);return()=>WU[t]??e()}const aR=KU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gm=([i,t,e,n])=>`cubic-bezier(${i}, ${t}, ${e}, ${n})`,mE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gm([0,.65,.55,1]),circOut:Gm([.55,0,1,.45]),backIn:Gm([.31,.01,.66,-.59]),backOut:Gm([.33,1.53,.69,.99])};function rR(i,t){if(i)return typeof i=="function"?aR()?tR(i,t):"ease-out":X2(i)?Gm(i):Array.isArray(i)?i.map(e=>rR(e,t)||mE.easeOut):mE[i]}function JU(i,t,e,{delay:n=0,duration:s=300,repeat:r=0,repeatType:l="loop",ease:u="easeOut",times:d}={},p=void 0){const g={[t]:e};d&&(g.offset=d);const v=rR(u,s);Array.isArray(v)&&(g.easing=v);const _={delay:n,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:r+1,direction:l==="reverse"?"alternate":"normal"};return p&&(_.pseudoElement=p),i.animate(g,_)}function oR(i){return typeof i=="function"&&"applyToOptions"in i}function ZU({type:i,...t}){return oR(i)&&aR()?i.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class QU extends VS{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:n,keyframes:s,pseudoElement:r,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=t;this.isPseudoElement=!!r,this.allowFlatten=l,this.options=t,BS(typeof t.type!="string");const p=ZU(t);this.animation=JU(e,n,s,p,r),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const g=GS(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):YU(e,n,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,n;const t=((n=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:n.call(e).duration)||0;return cl(Number(t))}get time(){return cl(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ll(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&qU()?(this.animation.timeline=t,Pr):e(this)}}const lR={anticipate:z2,backInOut:H2,circInOut:V2};function $U(i){return i in lR}function tN(i){typeof i.ease=="string"&&$U(i.ease)&&(i.ease=lR[i.ease])}const gE=10;class eN extends QU{constructor(t){tN(t),nR(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:s,element:r,...l}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const u=new kS({...l,autoplay:!1}),d=ll(this.finishedTime??this.time);e.setWithVelocity(u.sample(d-gE).value,u.sample(d).value,gE),u.stop()}}const vE=(i,t)=>t==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(hu.test(i)||i==="0")&&!i.startsWith("url("));function nN(i){const t=i[0];if(i.length===1)return!0;for(let e=0;e<i.length;e++)if(i[e]!==t)return!0}function iN(i,t,e,n){const s=i[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const r=i[i.length-1],l=vE(s,t),u=vE(r,t);return!l||!u?!1:nN(i)||(e==="spring"||oR(e))&&n}function cR(i){return U2(i)&&"offsetHeight"in i}const sN=new Set(["opacity","clipPath","filter","transform"]),aN=DS(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function rN(i){var p;const{motionValue:t,name:e,repeatDelay:n,repeatType:s,damping:r,type:l}=i;if(!cR((p=t==null?void 0:t.owner)==null?void 0:p.current))return!1;const{onUpdate:u,transformTemplate:d}=t.owner.getProps();return aN()&&e&&sN.has(e)&&(e!=="transform"||!d)&&!u&&!n&&s!=="mirror"&&r!==0&&l!=="inertia"}const oN=40;class lN extends VS{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:l="loop",keyframes:u,name:d,motionValue:p,element:g,...v}){var b;super(),this.stop=()=>{var R,E;this._animation&&(this._animation.stop(),(R=this.stopTimeline)==null||R.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=ja.now();const _={autoplay:t,delay:e,type:n,repeat:s,repeatDelay:r,repeatType:l,name:d,motionValue:p,element:g,...v},x=(g==null?void 0:g.KeyframeResolver)||XS;this.keyframeResolver=new x(u,(R,E,M)=>this.onKeyframesResolved(R,E,_,!M),d,p,g),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(t,e,n,s){this.keyframeResolver=void 0;const{name:r,type:l,velocity:u,delay:d,isHandoff:p,onUpdate:g}=n;this.resolvedAt=ja.now(),iN(t,r,l,u)||((ic.instantAnimations||!d)&&(g==null||g(GS(t,n,e))),t[0]=t[t.length-1],n.duration=0,n.repeat=0);const _={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>oN?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},x=!p&&rN(_)?new eN({..._,element:_.motionValue.owner.current}):new kS(_);x.finished.then(()=>this.notifyFinished()).catch(Pr),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),XU()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const cN=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function uN(i){const t=cN.exec(i);if(!t)return[,];const[,e,n,s]=t;return[`--${e??n}`,s]}function uR(i,t,e=1){const[n,s]=uN(i);if(!n)return;const r=window.getComputedStyle(t).getPropertyValue(n);if(r){const l=r.trim();return D2(l)?parseFloat(l):l}return IS(s)?uR(s,t,e+1):s}function jS(i,t){return(i==null?void 0:i[t])??(i==null?void 0:i.default)??i}const fR=new Set(["width","height","top","left","right","bottom",...ip]),fN={test:i=>i==="auto",parse:i=>i},hR=i=>t=>t.test(i),dR=[np,sn,ul,au,nU,eU,fN],yE=i=>dR.find(hR(i));function hN(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||N2(i):!0}const dN=new Set(["brightness","contrast","saturate","opacity"]);function pN(i){const[t,e]=i.slice(0,-1).split("(");if(t==="drop-shadow")return i;const[n]=e.match(PS)||[];if(!n)return i;const s=e.replace(n,"");let r=dN.has(t)?1:0;return n!==e&&(r*=100),t+"("+r+s+")"}const mN=/\b([a-z-]*)\(.*?\)/gu,k1={...hu,getAnimatableNone:i=>{const t=i.match(mN);return t?t.map(pN).join(" "):i}},_E={...np,transform:Math.round},gN={rotate:au,rotateX:au,rotateY:au,rotateZ:au,scale:Ev,scaleX:Ev,scaleY:Ev,scaleZ:Ev,skew:au,skewX:au,skewY:au,distance:sn,translateX:sn,translateY:sn,translateZ:sn,x:sn,y:sn,z:sn,perspective:sn,transformPerspective:sn,opacity:lg,originX:aE,originY:aE,originZ:sn},YS={borderWidth:sn,borderTopWidth:sn,borderRightWidth:sn,borderBottomWidth:sn,borderLeftWidth:sn,borderRadius:sn,radius:sn,borderTopLeftRadius:sn,borderTopRightRadius:sn,borderBottomRightRadius:sn,borderBottomLeftRadius:sn,width:sn,maxWidth:sn,height:sn,maxHeight:sn,top:sn,right:sn,bottom:sn,left:sn,padding:sn,paddingTop:sn,paddingRight:sn,paddingBottom:sn,paddingLeft:sn,margin:sn,marginTop:sn,marginRight:sn,marginBottom:sn,marginLeft:sn,backgroundPositionX:sn,backgroundPositionY:sn,...gN,zIndex:_E,fillOpacity:lg,strokeOpacity:lg,numOctaves:_E},vN={...YS,color:ea,backgroundColor:ea,outlineColor:ea,fill:ea,stroke:ea,borderColor:ea,borderTopColor:ea,borderRightColor:ea,borderBottomColor:ea,borderLeftColor:ea,filter:k1,WebkitFilter:k1},pR=i=>vN[i];function mR(i,t){let e=pR(i);return e!==k1&&(e=hu),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const yN=new Set(["auto","none","0"]);function _N(i,t,e){let n=0,s;for(;n<i.length&&!s;){const r=i[n];typeof r=="string"&&!yN.has(r)&&cg(r).values.length&&(s=i[n]),n++}if(s&&e)for(const r of t)i[r]=mR(e,s)}class xN extends XS{constructor(t,e,n,s,r){super(t,e,n,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let p=t[d];if(typeof p=="string"&&(p=p.trim(),IS(p))){const g=uR(p,e.current);g!==void 0&&(t[d]=g),d===t.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!fR.has(n)||t.length!==2)return;const[s,r]=t,l=yE(s),u=yE(r);if(l!==u)if(pE(l)&&pE(u))for(let d=0;d<t.length;d++){const p=t[d];typeof p=="string"&&(t[d]=parseFloat(p))}else Xf[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||hN(t[s]))&&n.push(s);n.length&&_N(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xf[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var u;const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(e);s&&s.jump(this.measuredOrigin,!1);const r=n.length-1,l=n[r];n[r]=Xf[e](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([d,p])=>{t.getValue(d).set(p)}),this.resolveNoneKeyframes()}}function AN(i,t,e){if(i instanceof EventTarget)return[i];if(typeof i=="string"){let n=document;const s=(e==null?void 0:e[i])??n.querySelectorAll(i);return s?Array.from(s):[]}return Array.from(i)}const xE=30,SN=i=>!isNaN(parseFloat(i));class MN{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{var l,u;const r=ja.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty();s&&((u=this.events.renderRequest)==null||u.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=ja.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=SN(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new US);const n=this.events[t].add(e);return t==="change"?()=>{n(),Ii.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ja.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>xE)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,xE);return O2(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hd(i,t){return new MN(i,t)}const gR=(i,t)=>t&&typeof i=="number"?t.transform(i):i,{schedule:qS}=j2(queueMicrotask,!1),vo={x:!1,y:!1};function vR(){return vo.x||vo.y}function bN(i){return i==="x"||i==="y"?vo[i]?null:(vo[i]=!0,()=>{vo[i]=!1}):vo.x||vo.y?null:(vo.x=vo.y=!0,()=>{vo.x=vo.y=!1})}function yR(i,t){const e=AN(i),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[e,s,()=>n.abort()]}function AE(i){return!(i.pointerType==="touch"||vR())}function EN(i,t,e={}){const[n,s,r]=yR(i,e),l=u=>{if(!AE(u))return;const{target:d}=u,p=t(d,u);if(typeof p!="function"||!d)return;const g=v=>{AE(v)&&(p(v),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return n.forEach(u=>{u.addEventListener("pointerenter",l,s)}),r}const _R=(i,t)=>t?i===t?!0:_R(i,t.parentElement):!1,WS=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,TN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function CN(i){return TN.has(i.tagName)||i.tabIndex!==-1}const Ty=new WeakSet;function SE(i){return t=>{t.key==="Enter"&&i(t)}}function hA(i,t){i.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const RN=(i,t)=>{const e=i.currentTarget;if(!e)return;const n=SE(()=>{if(Ty.has(e))return;hA(e,"down");const s=SE(()=>{hA(e,"up")}),r=()=>hA(e,"cancel");e.addEventListener("keyup",s,t),e.addEventListener("blur",r,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function ME(i){return WS(i)&&!vR()}function wN(i,t,e={}){const[n,s,r]=yR(i,e),l=u=>{const d=u.currentTarget;if(!ME(u))return;Ty.add(d);const p=t(d,u),g=(x,b)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),Ty.has(d)&&Ty.delete(d),ME(x)&&typeof p=="function"&&p(x,{success:b})},v=x=>{g(x,d===window||d===document||e.useGlobalTarget||_R(d,x.target))},_=x=>{g(x,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",_,s)};return n.forEach(u=>{(e.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),cR(u)&&(u.addEventListener("focus",p=>RN(p,s)),!CN(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),r}function xR(i){return U2(i)&&"ownerSVGElement"in i}function BN(i){return xR(i)&&i.tagName==="svg"}const ia=i=>!!(i&&i.getVelocity),DN=[...dR,ea,hu],UN=i=>DN.find(hR(i)),AR=Rt.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});function NN(i=!0){const t=Rt.useContext(CS);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:s}=t,r=Rt.useId();Rt.useEffect(()=>{if(i)return s(r)},[i]);const l=Rt.useCallback(()=>i&&n&&n(r),[r,n,i]);return!e&&n?[!1,l]:[!0]}const SR=Rt.createContext({strict:!1}),bE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zd={};for(const i in bE)zd[i]={isEnabled:t=>bE[i].some(e=>!!t[e])};function ON(i){for(const t in i)zd[t]={...zd[t],...i[t]}}const LN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Fy(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||LN.has(i)}let MR=i=>!Fy(i);function IN(i){i&&(MR=t=>t.startsWith("on")?!Fy(t):i(t))}try{IN(require("@emotion/is-prop-valid").default)}catch{}function PN(i,t,e){const n={};for(const s in i)s==="values"&&typeof i.values=="object"||(MR(s)||e===!0&&Fy(s)||!t&&!Fy(s)||i.draggable&&s.startsWith("onDrag"))&&(n[s]=i[s]);return n}function FN(i){if(typeof Proxy>"u")return i;const t=new Map,e=(...n)=>i(...n);return new Proxy(e,{get:(n,s)=>s==="create"?i:(t.has(s)||t.set(s,i(s)),t.get(s))})}const O_=Rt.createContext({});function L_(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function ug(i){return typeof i=="string"||Array.isArray(i)}const KS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],JS=["initial",...KS];function I_(i){return L_(i.animate)||JS.some(t=>ug(i[t]))}function bR(i){return!!(I_(i)||i.variants)}function HN(i,t){if(I_(i)){const{initial:e,animate:n}=i;return{initial:e===!1||ug(e)?e:void 0,animate:ug(n)?n:void 0}}return i.inherit!==!1?t:{}}function zN(i){const{initial:t,animate:e}=HN(i,Rt.useContext(O_));return Rt.useMemo(()=>({initial:t,animate:e}),[EE(t),EE(e)])}function EE(i){return Array.isArray(i)?i.join(" "):i}const GN=Symbol.for("motionComponentSymbol");function wd(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function VN(i,t,e){return Rt.useCallback(n=>{n&&i.onMount&&i.onMount(n),t&&(n?t.mount(n):t.unmount()),e&&(typeof e=="function"?e(n):wd(e)&&(e.current=n))},[t])}const ZS=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),kN="framerAppearId",ER="data-"+ZS(kN),TR=Rt.createContext({});function XN(i,t,e,n,s){var R,E;const{visualElement:r}=Rt.useContext(O_),l=Rt.useContext(SR),u=Rt.useContext(CS),d=Rt.useContext(AR).reducedMotion,p=Rt.useRef(null);n=n||l.renderer,!p.current&&n&&(p.current=n(i,{visualState:t,parent:r,props:e,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const g=p.current,v=Rt.useContext(TR);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&jN(p.current,e,s,v);const _=Rt.useRef(!1);Rt.useInsertionEffect(()=>{g&&_.current&&g.update(e,u)});const x=e[ER],b=Rt.useRef(!!x&&!((R=window.MotionHandoffIsComplete)!=null&&R.call(window,x))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,x)));return ID(()=>{g&&(_.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),qS.render(g.render),b.current&&g.animationState&&g.animationState.animateChanges())}),Rt.useEffect(()=>{g&&(!b.current&&g.animationState&&g.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var M;(M=window.MotionHandoffMarkAsComplete)==null||M.call(window,x)}),b.current=!1))}),g}function jN(i,t,e,n){const{layoutId:s,layout:r,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:p,layoutCrossfade:g}=t;i.projection=new e(i.latestValues,t["data-framer-portal-id"]?void 0:CR(i.parent)),i.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!l||u&&wd(u),visualElement:i,animationType:typeof r=="string"?r:"both",initialPromotionConfig:n,crossfade:g,layoutScroll:d,layoutRoot:p})}function CR(i){if(i)return i.options.allowProjection!==!1?i.projection:CR(i.parent)}function YN({preloadedFeatures:i,createVisualElement:t,useRender:e,useVisualState:n,Component:s}){i&&ON(i);function r(u,d){let p;const g={...Rt.useContext(AR),...u,layoutId:qN(u)},{isStatic:v}=g,_=zN(u),x=n(u,v);if(!v&&TS){WN();const b=KN(g);p=b.MeasureLayout,_.visualElement=XN(s,x,g,t,b.ProjectionNode)}return it.jsxs(O_.Provider,{value:_,children:[p&&_.visualElement?it.jsx(p,{visualElement:_.visualElement,...g}):null,e(s,u,VN(x,_.visualElement,d),x,v,_.visualElement)]})}r.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const l=Rt.forwardRef(r);return l[GN]=s,l}function qN({layoutId:i}){const t=Rt.useContext(B2).id;return t&&i!==void 0?t+"-"+i:i}function WN(i,t){Rt.useContext(SR).strict}function KN(i){const{drag:t,layout:e}=zd;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(i)||e!=null&&e.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const fg={};function JN(i){for(const t in i)fg[t]=i[t],LS(t)&&(fg[t].isCSSVariable=!0)}function RR(i,{layout:t,layoutId:e}){return sp.has(i)||i.startsWith("origin")||(t||e!==void 0)&&(!!fg[i]||i==="opacity")}const ZN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},QN=ip.length;function $N(i,t,e){let n="",s=!0;for(let r=0;r<QN;r++){const l=ip[r],u=i[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||e){const p=gR(u,YS[l]);if(!d){s=!1;const g=ZN[l]||l;n+=`${g}(${p}) `}e&&(t[l]=p)}}return n=n.trim(),e?n=e(t,s?"":n):s&&(n="none"),n}function QS(i,t,e){const{style:n,vars:s,transformOrigin:r}=i;let l=!1,u=!1;for(const d in t){const p=t[d];if(sp.has(d)){l=!0;continue}else if(LS(d)){s[d]=p;continue}else{const g=gR(p,YS[d]);d.startsWith("origin")?(u=!0,r[d]=g):n[d]=g}}if(t.transform||(l||e?n.transform=$N(t,i.transform,e):n.transform&&(n.transform="none")),u){const{originX:d="50%",originY:p="50%",originZ:g=0}=r;n.transformOrigin=`${d} ${p} ${g}`}}const $S=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function wR(i,t,e){for(const n in t)!ia(t[n])&&!RR(n,e)&&(i[n]=t[n])}function tO({transformTemplate:i},t){return Rt.useMemo(()=>{const e=$S();return QS(e,t,i),Object.assign({},e.vars,e.style)},[t])}function eO(i,t){const e=i.style||{},n={};return wR(n,e,i),Object.assign(n,tO(i,t)),n}function nO(i,t){const e={},n=eO(i,t);return i.drag&&i.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(e.tabIndex=0),e.style=n,e}const iO={offset:"stroke-dashoffset",array:"stroke-dasharray"},sO={offset:"strokeDashoffset",array:"strokeDasharray"};function aO(i,t,e=1,n=0,s=!0){i.pathLength=1;const r=s?iO:sO;i[r.offset]=sn.transform(-n);const l=sn.transform(t),u=sn.transform(e);i[r.array]=`${l} ${u}`}function BR(i,{attrX:t,attrY:e,attrScale:n,pathLength:s,pathSpacing:r=1,pathOffset:l=0,...u},d,p,g){if(QS(i,u,p),d){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:v,style:_}=i;v.transform&&(_.transform=v.transform,delete v.transform),(_.transform||v.transformOrigin)&&(_.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),_.transform&&(_.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete v.transformBox),t!==void 0&&(v.x=t),e!==void 0&&(v.y=e),n!==void 0&&(v.scale=n),s!==void 0&&aO(v,s,r,l,!1)}const DR=()=>({...$S(),attrs:{}}),UR=i=>typeof i=="string"&&i.toLowerCase()==="svg";function rO(i,t,e,n){const s=Rt.useMemo(()=>{const r=DR();return BR(r,t,UR(n),i.transformTemplate,i.style),{...r.attrs,style:{...r.style}}},[t]);if(i.style){const r={};wR(r,i.style,i),s.style={...r,...s.style}}return s}const oO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tM(i){return typeof i!="string"||i.includes("-")?!1:!!(oO.indexOf(i)>-1||/[A-Z]/u.test(i))}function lO(i=!1){return(e,n,s,{latestValues:r},l)=>{const d=(tM(e)?rO:nO)(n,r,l,e),p=PN(n,typeof e=="string",i),g=e!==Rt.Fragment?{...p,...d,ref:s}:{},{children:v}=n,_=Rt.useMemo(()=>ia(v)?v.get():v,[v]);return Rt.createElement(e,{...g,children:_})}}function TE(i){const t=[{},{}];return i==null||i.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function eM(i,t,e,n){if(typeof t=="function"){const[s,r]=TE(n);t=t(e!==void 0?e:i.custom,s,r)}if(typeof t=="string"&&(t=i.variants&&i.variants[t]),typeof t=="function"){const[s,r]=TE(n);t=t(e!==void 0?e:i.custom,s,r)}return t}function Cy(i){return ia(i)?i.get():i}function cO({scrapeMotionValuesFromProps:i,createRenderState:t},e,n,s){return{latestValues:uO(e,n,s,i),renderState:t()}}const NR=i=>(t,e)=>{const n=Rt.useContext(O_),s=Rt.useContext(CS),r=()=>cO(i,t,n,s);return e?r():LD(r)};function uO(i,t,e,n){const s={},r=n(i,{});for(const _ in r)s[_]=Cy(r[_]);let{initial:l,animate:u}=i;const d=I_(i),p=bR(i);t&&p&&!d&&i.inherit!==!1&&(l===void 0&&(l=t.initial),u===void 0&&(u=t.animate));let g=e?e.initial===!1:!1;g=g||l===!1;const v=g?u:l;if(v&&typeof v!="boolean"&&!L_(v)){const _=Array.isArray(v)?v:[v];for(let x=0;x<_.length;x++){const b=eM(i,_[x]);if(b){const{transitionEnd:R,transition:E,...M}=b;for(const w in M){let B=M[w];if(Array.isArray(B)){const D=g?B.length-1:0;B=B[D]}B!==null&&(s[w]=B)}for(const w in R)s[w]=R[w]}}}return s}function nM(i,t,e){var r;const{style:n}=i,s={};for(const l in n)(ia(n[l])||t.style&&ia(t.style[l])||RR(l,i)||((r=e==null?void 0:e.getValue(l))==null?void 0:r.liveStyle)!==void 0)&&(s[l]=n[l]);return s}const fO={useVisualState:NR({scrapeMotionValuesFromProps:nM,createRenderState:$S})};function OR(i,t,e){const n=nM(i,t,e);for(const s in i)if(ia(i[s])||ia(t[s])){const r=ip.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[r]=i[s]}return n}const hO={useVisualState:NR({scrapeMotionValuesFromProps:OR,createRenderState:DR})};function dO(i,t){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...tM(n)?hO:fO,preloadedFeatures:i,useRender:lO(s),createVisualElement:t,Component:n};return YN(l)}}function hg(i,t,e){const n=i.getProps();return eM(n,t,e!==void 0?e:n.custom,i)}const X1=i=>Array.isArray(i);function pO(i,t,e){i.hasValue(t)?i.getValue(t).set(e):i.addValue(t,Hd(e))}function mO(i){return X1(i)?i[i.length-1]||0:i}function gO(i,t){const e=hg(i,t);let{transitionEnd:n={},transition:s={},...r}=e||{};r={...r,...n};for(const l in r){const u=mO(r[l]);pO(i,l,u)}}function vO(i){return!!(ia(i)&&i.add)}function j1(i,t){const e=i.getValue("willChange");if(vO(e))return e.add(t);if(!e&&ic.WillChange){const n=new ic.WillChange("auto");i.addValue("willChange",n),n.add(t)}}function LR(i){return i.props[ER]}const yO=i=>i!==null;function _O(i,{repeat:t,repeatType:e="loop"},n){const s=i.filter(yO),r=t&&e!=="loop"&&t%2===1?0:s.length-1;return s[r]}const xO={type:"spring",stiffness:500,damping:25,restSpeed:10},AO=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),SO={type:"keyframes",duration:.8},MO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bO=(i,{keyframes:t})=>t.length>2?SO:sp.has(i)?i.startsWith("scale")?AO(t[1]):xO:MO;function EO({when:i,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:s,repeat:r,repeatType:l,repeatDelay:u,from:d,elapsed:p,...g}){return!!Object.keys(g).length}const iM=(i,t,e,n={},s,r)=>l=>{const u=jS(n,i)||{},d=u.delay||n.delay||0;let{elapsed:p=0}=n;p=p-ll(d);const g={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-p,onUpdate:_=>{t.set(_),u.onUpdate&&u.onUpdate(_)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:i,motionValue:t,element:r?void 0:s};EO(u)||Object.assign(g,bO(i,g)),g.duration&&(g.duration=ll(g.duration)),g.repeatDelay&&(g.repeatDelay=ll(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(v=!0)),(ic.instantAnimations||ic.skipAnimations)&&(v=!0,g.duration=0,g.delay=0),g.allowFlatten=!u.type&&!u.ease,v&&!r&&t.get()!==void 0){const _=_O(g.keyframes,u);if(_!==void 0){Ii.update(()=>{g.onUpdate(_),g.onComplete()});return}}return u.isSync?new kS(g):new lN(g)};function TO({protectedKeys:i,needsAnimating:t},e){const n=i.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function IR(i,t,{delay:e=0,transitionOverride:n,type:s}={}){let{transition:r=i.getDefaultTransition(),transitionEnd:l,...u}=t;n&&(r=n);const d=[],p=s&&i.animationState&&i.animationState.getState()[s];for(const g in u){const v=i.getValue(g,i.latestValues[g]??null),_=u[g];if(_===void 0||p&&TO(p,g))continue;const x={delay:e,...jS(r||{},g)},b=v.get();if(b!==void 0&&!v.isAnimating&&!Array.isArray(_)&&_===b&&!x.velocity)continue;let R=!1;if(window.MotionHandoffAnimation){const M=LR(i);if(M){const w=window.MotionHandoffAnimation(M,g,Ii);w!==null&&(x.startTime=w,R=!0)}}j1(i,g),v.start(iM(g,v,_,i.shouldReduceMotion&&fR.has(g)?{type:!1}:x,i,R));const E=v.animation;E&&d.push(E)}return l&&Promise.all(d).then(()=>{Ii.update(()=>{l&&gO(i,l)})}),d}function Y1(i,t,e={}){var d;const n=hg(i,t,e.type==="exit"?(d=i.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=i.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(s=e.transitionOverride);const r=n?()=>Promise.all(IR(i,n,e)):()=>Promise.resolve(),l=i.variantChildren&&i.variantChildren.size?(p=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:_}=s;return CO(i,t,g+p,v,_,e)}:()=>Promise.resolve(),{when:u}=s;if(u){const[p,g]=u==="beforeChildren"?[r,l]:[l,r];return p().then(()=>g())}else return Promise.all([r(),l(e.delay)])}function CO(i,t,e=0,n=0,s=1,r){const l=[],u=(i.variantChildren.size-1)*n,d=s===1?(p=0)=>p*n:(p=0)=>u-p*n;return Array.from(i.variantChildren).sort(RO).forEach((p,g)=>{p.notify("AnimationStart",t),l.push(Y1(p,t,{...r,delay:e+d(g)}).then(()=>p.notify("AnimationComplete",t)))}),Promise.all(l)}function RO(i,t){return i.sortNodePosition(t)}function wO(i,t,e={}){i.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(r=>Y1(i,r,e));n=Promise.all(s)}else if(typeof t=="string")n=Y1(i,t,e);else{const s=typeof t=="function"?hg(i,t,e.custom):t;n=Promise.all(IR(i,s,e))}return n.then(()=>{i.notify("AnimationComplete",t)})}function PR(i,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==i.length)return!1;for(let n=0;n<e;n++)if(t[n]!==i[n])return!1;return!0}const BO=JS.length;function FR(i){if(!i)return;if(!i.isControllingVariants){const e=i.parent?FR(i.parent)||{}:{};return i.props.initial!==void 0&&(e.initial=i.props.initial),e}const t={};for(let e=0;e<BO;e++){const n=JS[e],s=i.props[n];(ug(s)||s===!1)&&(t[n]=s)}return t}const DO=[...KS].reverse(),UO=KS.length;function NO(i){return t=>Promise.all(t.map(({animation:e,options:n})=>wO(i,e,n)))}function OO(i){let t=NO(i),e=CE(),n=!0;const s=d=>(p,g)=>{var _;const v=hg(i,g,d==="exit"?(_=i.presenceContext)==null?void 0:_.custom:void 0);if(v){const{transition:x,transitionEnd:b,...R}=v;p={...p,...R,...b}}return p};function r(d){t=d(i)}function l(d){const{props:p}=i,g=FR(i.parent)||{},v=[],_=new Set;let x={},b=1/0;for(let E=0;E<UO;E++){const M=DO[E],w=e[M],B=p[M]!==void 0?p[M]:g[M],D=ug(B),I=M===d?w.isActive:null;I===!1&&(b=E);let L=B===g[M]&&B!==p[M]&&D;if(L&&n&&i.manuallyAnimateOnMount&&(L=!1),w.protectedKeys={...x},!w.isActive&&I===null||!B&&!w.prevProp||L_(B)||typeof B=="boolean")continue;const V=LO(w.prevProp,B);let H=V||M===d&&w.isActive&&!L&&D||E>b&&D,N=!1;const O=Array.isArray(B)?B:[B];let Y=O.reduce(s(M),{});I===!1&&(Y={});const{prevResolvedValues:ht={}}=w,et={...ht,...Y},dt=K=>{H=!0,_.has(K)&&(N=!0,_.delete(K)),w.needsAnimating[K]=!0;const $=i.getValue(K);$&&($.liveStyle=!1)};for(const K in et){const $=Y[K],yt=ht[K];if(x.hasOwnProperty(K))continue;let X=!1;X1($)&&X1(yt)?X=!PR($,yt):X=$!==yt,X?$!=null?dt(K):_.add(K):$!==void 0&&_.has(K)?dt(K):w.protectedKeys[K]=!0}w.prevProp=B,w.prevResolvedValues=Y,w.isActive&&(x={...x,...Y}),n&&i.blockInitialAnimation&&(H=!1),H&&(!(L&&V)||N)&&v.push(...O.map(K=>({animation:K,options:{type:M}})))}if(_.size){const E={};if(typeof p.initial!="boolean"){const M=hg(i,Array.isArray(p.initial)?p.initial[0]:p.initial);M&&M.transition&&(E.transition=M.transition)}_.forEach(M=>{const w=i.getBaseTarget(M),B=i.getValue(M);B&&(B.liveStyle=!0),E[M]=w??null}),v.push({animation:E})}let R=!!v.length;return n&&(p.initial===!1||p.initial===p.animate)&&!i.manuallyAnimateOnMount&&(R=!1),n=!1,R?t(v):Promise.resolve()}function u(d,p){var v;if(e[d].isActive===p)return Promise.resolve();(v=i.variantChildren)==null||v.forEach(_=>{var x;return(x=_.animationState)==null?void 0:x.setActive(d,p)}),e[d].isActive=p;const g=l(d);for(const _ in e)e[_].protectedKeys={};return g}return{animateChanges:l,setActive:u,setAnimateFunction:r,getState:()=>e,reset:()=>{e=CE(),n=!0}}}function LO(i,t){return typeof t=="string"?t!==i:Array.isArray(t)?!PR(t,i):!1}function pf(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function CE(){return{animate:pf(!0),whileInView:pf(),whileHover:pf(),whileTap:pf(),whileDrag:pf(),whileFocus:pf(),exit:pf()}}class vu{constructor(t){this.isMounted=!1,this.node=t}update(){}}class IO extends vu{constructor(t){super(t),t.animationState||(t.animationState=OO(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();L_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let PO=0;class FO extends vu{constructor(){super(...arguments),this.id=PO++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const HO={animation:{Feature:IO},exit:{Feature:FO}};function dg(i,t,e,n={passive:!0}){return i.addEventListener(t,e,n),()=>i.removeEventListener(t,e)}function Bg(i){return{point:{x:i.pageX,y:i.pageY}}}const zO=i=>t=>WS(t)&&i(t,Bg(t));function qm(i,t,e,n){return dg(i,t,zO(e),n)}function HR({top:i,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:i,max:n}}}function GO({x:i,y:t}){return{top:t.min,right:i.max,bottom:t.max,left:i.min}}function VO(i,t){if(!t)return i;const e=t({x:i.left,y:i.top}),n=t({x:i.right,y:i.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}const zR=1e-4,kO=1-zR,XO=1+zR,GR=.01,jO=0-GR,YO=0+GR;function Ea(i){return i.max-i.min}function qO(i,t,e){return Math.abs(i-t)<=e}function RE(i,t,e,n=.5){i.origin=n,i.originPoint=Ni(t.min,t.max,i.origin),i.scale=Ea(e)/Ea(t),i.translate=Ni(e.min,e.max,i.origin)-i.originPoint,(i.scale>=kO&&i.scale<=XO||isNaN(i.scale))&&(i.scale=1),(i.translate>=jO&&i.translate<=YO||isNaN(i.translate))&&(i.translate=0)}function Wm(i,t,e,n){RE(i.x,t.x,e.x,n?n.originX:void 0),RE(i.y,t.y,e.y,n?n.originY:void 0)}function wE(i,t,e){i.min=e.min+t.min,i.max=i.min+Ea(t)}function WO(i,t,e){wE(i.x,t.x,e.x),wE(i.y,t.y,e.y)}function BE(i,t,e){i.min=t.min-e.min,i.max=i.min+Ea(t)}function Km(i,t,e){BE(i.x,t.x,e.x),BE(i.y,t.y,e.y)}const DE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bd=()=>({x:DE(),y:DE()}),UE=()=>({min:0,max:0}),qi=()=>({x:UE(),y:UE()});function Ur(i){return[i("x"),i("y")]}function dA(i){return i===void 0||i===1}function q1({scale:i,scaleX:t,scaleY:e}){return!dA(i)||!dA(t)||!dA(e)}function wf(i){return q1(i)||VR(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function VR(i){return NE(i.x)||NE(i.y)}function NE(i){return i&&i!=="0%"}function Hy(i,t,e){const n=i-e,s=t*n;return e+s}function OE(i,t,e,n,s){return s!==void 0&&(i=Hy(i,s,n)),Hy(i,e,n)+t}function W1(i,t=0,e=1,n,s){i.min=OE(i.min,t,e,n,s),i.max=OE(i.max,t,e,n,s)}function kR(i,{x:t,y:e}){W1(i.x,t.translate,t.scale,t.originPoint),W1(i.y,e.translate,e.scale,e.originPoint)}const LE=.999999999999,IE=1.0000000000001;function KO(i,t,e,n=!1){const s=e.length;if(!s)return;t.x=t.y=1;let r,l;for(let u=0;u<s;u++){r=e[u],l=r.projectionDelta;const{visualElement:d}=r.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Ud(i,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,kR(i,l)),n&&wf(r.latestValues)&&Ud(i,r.latestValues))}t.x<IE&&t.x>LE&&(t.x=1),t.y<IE&&t.y>LE&&(t.y=1)}function Dd(i,t){i.min=i.min+t,i.max=i.max+t}function PE(i,t,e,n,s=.5){const r=Ni(i.min,i.max,s);W1(i,t,e,r,n)}function Ud(i,t){PE(i.x,t.x,t.scaleX,t.scale,t.originX),PE(i.y,t.y,t.scaleY,t.scale,t.originY)}function XR(i,t){return HR(VO(i.getBoundingClientRect(),t))}function JO(i,t,e){const n=XR(i,e),{scroll:s}=t;return s&&(Dd(n.x,s.offset.x),Dd(n.y,s.offset.y)),n}const jR=({current:i})=>i?i.ownerDocument.defaultView:null,FE=(i,t)=>Math.abs(i-t);function ZO(i,t){const e=FE(i.x,t.x),n=FE(i.y,t.y);return Math.sqrt(e**2+n**2)}class YR{constructor(t,e,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=mA(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,x=ZO(v.offset,{x:0,y:0})>=3;if(!_&&!x)return;const{point:b}=v,{timestamp:R}=Ps;this.history.push({...b,timestamp:R});const{onStart:E,onMove:M}=this.handlers;_||(E&&E(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,v)},this.handlePointerMove=(v,_)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=pA(_,this.transformPagePoint),Ii.update(this.updatePoint,!0)},this.handlePointerUp=(v,_)=>{this.end();const{onEnd:x,onSessionEnd:b,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=mA(v.type==="pointercancel"?this.lastMoveEventInfo:pA(_,this.transformPagePoint),this.history);this.startEvent&&x&&x(v,E),b&&b(v,E)},!WS(t))return;this.dragSnapToOrigin=r,this.handlers=e,this.transformPagePoint=n,this.contextWindow=s||window;const l=Bg(t),u=pA(l,this.transformPagePoint),{point:d}=u,{timestamp:p}=Ps;this.history=[{...d,timestamp:p}];const{onSessionStart:g}=e;g&&g(t,mA(u,this.history)),this.removeListeners=Cg(qm(this.contextWindow,"pointermove",this.handlePointerMove),qm(this.contextWindow,"pointerup",this.handlePointerUp),qm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),fu(this.updatePoint)}}function pA(i,t){return t?{point:t(i.point)}:i}function HE(i,t){return{x:i.x-t.x,y:i.y-t.y}}function mA({point:i},t){return{point:i,delta:HE(i,qR(t)),offset:HE(i,QO(t)),velocity:$O(t,.1)}}function QO(i){return i[0]}function qR(i){return i[i.length-1]}function $O(i,t){if(i.length<2)return{x:0,y:0};let e=i.length-1,n=null;const s=qR(i);for(;e>=0&&(n=i[e],!(s.timestamp-n.timestamp>ll(t)));)e--;if(!n)return{x:0,y:0};const r=cl(s.timestamp-n.timestamp);if(r===0)return{x:0,y:0};const l={x:(s.x-n.x)/r,y:(s.y-n.y)/r};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function tL(i,{min:t,max:e},n){return t!==void 0&&i<t?i=n?Ni(t,i,n.min):Math.max(i,t):e!==void 0&&i>e&&(i=n?Ni(e,i,n.max):Math.min(i,e)),i}function zE(i,t,e){return{min:t!==void 0?i.min+t:void 0,max:e!==void 0?i.max+e-(i.max-i.min):void 0}}function eL(i,{top:t,left:e,bottom:n,right:s}){return{x:zE(i.x,e,s),y:zE(i.y,t,n)}}function GE(i,t){let e=t.min-i.min,n=t.max-i.max;return t.max-t.min<i.max-i.min&&([e,n]=[n,e]),{min:e,max:n}}function nL(i,t){return{x:GE(i.x,t.x),y:GE(i.y,t.y)}}function iL(i,t){let e=.5;const n=Ea(i),s=Ea(t);return s>n?e=og(t.min,t.max-n,i.min):n>s&&(e=og(i.min,i.max-s,t.min)),nc(0,1,e)}function sL(i,t){const e={};return t.min!==void 0&&(e.min=t.min-i.min),t.max!==void 0&&(e.max=t.max-i.min),e}const K1=.35;function aL(i=K1){return i===!1?i=0:i===!0&&(i=K1),{x:VE(i,"left","right"),y:VE(i,"top","bottom")}}function VE(i,t,e){return{min:kE(i,t),max:kE(i,e)}}function kE(i,t){return typeof i=="number"?i:i[t]||0}const rL=new WeakMap;class oL{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qi(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Bg(g).point)},r=(g,v)=>{const{drag:_,dragPropagation:x,onDragStart:b}=this.getProps();if(_&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=bN(_),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ur(E=>{let M=this.getAxisMotionValue(E).get()||0;if(ul.test(M)){const{projection:w}=this.visualElement;if(w&&w.layout){const B=w.layout.layoutBox[E];B&&(M=Ea(B)*(parseFloat(M)/100))}}this.originPoint[E]=M}),b&&Ii.postRender(()=>b(g,v)),j1(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},l=(g,v)=>{const{dragPropagation:_,dragDirectionLock:x,onDirectionLock:b,onDrag:R}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:E}=v;if(x&&this.currentDirection===null){this.currentDirection=lL(E),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",v.point,E),this.updateAxis("y",v.point,E),this.visualElement.render(),R&&R(g,v)},u=(g,v)=>this.stop(g,v),d=()=>Ur(g=>{var v;return this.getAnimationState(g)==="paused"&&((v=this.getAxisMotionValue(g).animation)==null?void 0:v.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new YR(t,{onSessionStart:s,onStart:r,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:jR(this.visualElement)})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=e;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&Ii.postRender(()=>r(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:s}=this.getProps();if(!n||!Tv(t,s,this.currentDirection))return;const r=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=tL(l,this.constraints[t],this.elastic[t])),r.set(l)}resolveConstraints(){var r;const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;t&&wd(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=eL(n.layoutBox,t):this.constraints=!1,this.elastic=aL(e),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ur(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=sL(n.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!wd(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=JO(n,s.root,this.visualElement.getTransformPagePoint());let l=nL(s.layout.layoutBox,r);if(e){const u=e(GO(l));this.hasMutatedConstraints=!!u,u&&(l=HR(u))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:s,dragTransition:r,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},p=Ur(g=>{if(!Tv(g,e,this.currentDirection))return;let v=d&&d[g]||{};l&&(v={min:0,max:0});const _=s?200:1e6,x=s?40:1e7,b={type:"inertia",velocity:n?t[g]:0,bounceStiffness:_,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...r,...v};return this.startAxisValueAnimation(g,b)});return Promise.all(p).then(u)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return j1(this.visualElement,t),n.start(iM(t,n,0,e,this.visualElement,!1))}stopAnimation(){Ur(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ur(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[e];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Ur(e=>{const{drag:n}=this.getProps();if(!Tv(e,n,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(e);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[e];r.set(t[e]-Ni(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!wd(e)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ur(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();s[l]=iL({min:d,max:d},this.constraints[l])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ur(l=>{if(!Tv(l,t,null))return;const u=this.getAxisMotionValue(l),{min:d,max:p}=this.constraints[l];u.set(Ni(d,p,s[l]))})}addListeners(){if(!this.visualElement.current)return;rL.set(this.visualElement,this);const t=this.visualElement.current,e=qm(t,"pointerdown",d=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();wd(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ii.read(n);const l=dg(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(Ur(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=d[g].translate,v.set(v.get()+d[g].translate))}),this.visualElement.render())});return()=>{l(),e(),r(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:l=K1,dragMomentum:u=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:s,dragConstraints:r,dragElastic:l,dragMomentum:u}}}function Tv(i,t,e){return(t===!0||t===i)&&(e===null||e===i)}function lL(i,t=10){let e=null;return Math.abs(i.y)>t?e="y":Math.abs(i.x)>t&&(e="x"),e}class cL extends vu{constructor(t){super(t),this.removeGroupControls=Pr,this.removeListeners=Pr,this.controls=new oL(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pr}unmount(){this.removeGroupControls(),this.removeListeners()}}const XE=i=>(t,e)=>{i&&Ii.postRender(()=>i(t,e))};class uL extends vu{constructor(){super(...arguments),this.removePointerDownListener=Pr}onPointerDown(t){this.session=new YR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jR(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:XE(t),onStart:XE(e),onMove:n,onEnd:(r,l)=>{delete this.session,s&&Ii.postRender(()=>s(r,l))}}}mount(){this.removePointerDownListener=qm(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ry={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function jE(i,t){return t.max===t.min?0:i/(t.max-t.min)*100}const Em={correct:(i,t)=>{if(!t.target)return i;if(typeof i=="string")if(sn.test(i))i=parseFloat(i);else return i;const e=jE(i,t.target.x),n=jE(i,t.target.y);return`${e}% ${n}%`}},fL={correct:(i,{treeScale:t,projectionDelta:e})=>{const n=i,s=hu.parse(i);if(s.length>5)return n;const r=hu.createTransformer(i),l=typeof s[0]!="number"?1:0,u=e.x.scale*t.x,d=e.y.scale*t.y;s[0+l]/=u,s[1+l]/=d;const p=Ni(u,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=p),typeof s[3+l]=="number"&&(s[3+l]/=p),r(s)}};class hL extends Rt.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:s}=this.props,{projection:r}=t;JN(dL),r&&(e.group&&e.group.add(r),n&&n.register&&s&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Ry.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:s,isPresent:r}=this.props,{projection:l}=n;return l&&(l.isPresent=r,s||t.layoutDependency!==e||e===void 0||t.isPresent!==r?l.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?l.promote():l.relegate()||Ii.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),qS.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function WR(i){const[t,e]=NN(),n=Rt.useContext(B2);return it.jsx(hL,{...i,layoutGroup:n,switchLayoutGroup:Rt.useContext(TR),isPresent:t,safeToRemove:e})}const dL={borderRadius:{...Em,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Em,borderTopRightRadius:Em,borderBottomLeftRadius:Em,borderBottomRightRadius:Em,boxShadow:fL};function pL(i,t,e){const n=ia(i)?i:Hd(i);return n.start(iM("",n,t,e)),n.animation}const mL=(i,t)=>i.depth-t.depth;class gL{constructor(){this.children=[],this.isDirty=!1}add(t){RS(this.children,t),this.isDirty=!0}remove(t){wS(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(mL),this.isDirty=!1,this.children.forEach(t)}}function vL(i,t){const e=ja.now(),n=({timestamp:s})=>{const r=s-e;r>=t&&(fu(n),i(r-t))};return Ii.setup(n,!0),()=>fu(n)}const KR=["TopLeft","TopRight","BottomLeft","BottomRight"],yL=KR.length,YE=i=>typeof i=="string"?parseFloat(i):i,qE=i=>typeof i=="number"||sn.test(i);function _L(i,t,e,n,s,r){s?(i.opacity=Ni(0,e.opacity??1,xL(n)),i.opacityExit=Ni(t.opacity??1,0,AL(n))):r&&(i.opacity=Ni(t.opacity??1,e.opacity??1,n));for(let l=0;l<yL;l++){const u=`border${KR[l]}Radius`;let d=WE(t,u),p=WE(e,u);if(d===void 0&&p===void 0)continue;d||(d=0),p||(p=0),d===0||p===0||qE(d)===qE(p)?(i[u]=Math.max(Ni(YE(d),YE(p),n),0),(ul.test(p)||ul.test(d))&&(i[u]+="%")):i[u]=p}(t.rotate||e.rotate)&&(i.rotate=Ni(t.rotate||0,e.rotate||0,n))}function WE(i,t){return i[t]!==void 0?i[t]:i.borderRadius}const xL=JR(0,.5,G2),AL=JR(.5,.95,Pr);function JR(i,t,e){return n=>n<i?0:n>t?1:e(og(i,t,n))}function KE(i,t){i.min=t.min,i.max=t.max}function Br(i,t){KE(i.x,t.x),KE(i.y,t.y)}function JE(i,t){i.translate=t.translate,i.scale=t.scale,i.originPoint=t.originPoint,i.origin=t.origin}function ZE(i,t,e,n,s){return i-=t,i=Hy(i,1/e,n),s!==void 0&&(i=Hy(i,1/s,n)),i}function SL(i,t=0,e=1,n=.5,s,r=i,l=i){if(ul.test(t)&&(t=parseFloat(t),t=Ni(l.min,l.max,t/100)-l.min),typeof t!="number")return;let u=Ni(r.min,r.max,n);i===r&&(u-=t),i.min=ZE(i.min,t,e,u,s),i.max=ZE(i.max,t,e,u,s)}function QE(i,t,[e,n,s],r,l){SL(i,t[e],t[n],t[s],t.scale,r,l)}const ML=["x","scaleX","originX"],bL=["y","scaleY","originY"];function $E(i,t,e,n){QE(i.x,t,ML,e?e.x:void 0,n?n.x:void 0),QE(i.y,t,bL,e?e.y:void 0,n?n.y:void 0)}function tT(i){return i.translate===0&&i.scale===1}function ZR(i){return tT(i.x)&&tT(i.y)}function eT(i,t){return i.min===t.min&&i.max===t.max}function EL(i,t){return eT(i.x,t.x)&&eT(i.y,t.y)}function nT(i,t){return Math.round(i.min)===Math.round(t.min)&&Math.round(i.max)===Math.round(t.max)}function QR(i,t){return nT(i.x,t.x)&&nT(i.y,t.y)}function iT(i){return Ea(i.x)/Ea(i.y)}function sT(i,t){return i.translate===t.translate&&i.scale===t.scale&&i.originPoint===t.originPoint}class TL{constructor(){this.members=[]}add(t){RS(this.members,t),t.scheduleRender()}remove(t){if(wS(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let n;for(let s=e;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){n=r;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function CL(i,t,e){let n="";const s=i.x.translate/t.x,r=i.y.translate/t.y,l=(e==null?void 0:e.z)||0;if((s||r||l)&&(n=`translate3d(${s}px, ${r}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:p,rotate:g,rotateX:v,rotateY:_,skewX:x,skewY:b}=e;p&&(n=`perspective(${p}px) ${n}`),g&&(n+=`rotate(${g}deg) `),v&&(n+=`rotateX(${v}deg) `),_&&(n+=`rotateY(${_}deg) `),x&&(n+=`skewX(${x}deg) `),b&&(n+=`skewY(${b}deg) `)}const u=i.x.scale*t.x,d=i.y.scale*t.y;return(u!==1||d!==1)&&(n+=`scale(${u}, ${d})`),n||"none"}const gA=["","X","Y","Z"],RL={visibility:"hidden"},wL=1e3;let BL=0;function vA(i,t,e,n){const{latestValues:s}=t;s[i]&&(e[i]=s[i],t.setStaticValue(i,0),n&&(n[i]=0))}function $R(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:t}=i.options;if(!t)return;const e=LR(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:s,layoutId:r}=i.options;window.MotionCancelOptimisedAnimation(e,"transform",Ii,!(s||r))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&$R(n)}function tw({attachResizeListener:i,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(l={},u=t==null?void 0:t()){this.id=BL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(NL),this.nodes.forEach(FL),this.nodes.forEach(HL),this.nodes.forEach(OL)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new gL)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new US),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=xR(l)&&!BN(l),this.instance=l;const{layoutId:u,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),i){let g;const v=()=>this.root.updateBlockedByResize=!1;i(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=vL(v,250),Ry.hasAnimatedSinceResize&&(Ry.hasAnimatedSinceResize=!1,this.nodes.forEach(rT))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&p&&(u||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeLayoutChanged:_,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||p.getDefaultTransition()||XL,{onLayoutAnimationStart:R,onLayoutAnimationComplete:E}=p.getProps(),M=!this.targetLayout||!QR(this.targetLayout,x),w=!v&&_;if(this.options.layoutRoot||this.resumeFrom||w||v&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,w);const B={...jS(b,"layout"),onPlay:R,onComplete:E};(p.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else v||rT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zL),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$R(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aT);return}this.isUpdating||this.nodes.forEach(IL),this.isUpdating=!1,this.nodes.forEach(PL),this.nodes.forEach(DL),this.nodes.forEach(UL),this.clearAllSnapshots();const u=ja.now();Ps.delta=nc(0,1e3/60,u-Ps.timestamp),Ps.timestamp=u,Ps.isProcessing=!0,lA.update.process(Ps),lA.preRender.process(Ps),lA.render.process(Ps),Ps.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qS.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(LL),this.sharedNodes.forEach(GL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ii.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ii.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ea(this.snapshot.measuredBox.x)&&!Ea(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!ZR(this.projectionDelta),d=this.getTransformTemplate(),p=d?d(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;l&&this.instance&&(u||wf(this.latestValues)||g)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),jL(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:l}=this.options;if(!l)return qi();const u=l.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(YL))){const{scroll:g}=this.root;g&&(Dd(u.x,g.offset.x),Dd(u.y,g.offset.y))}return u}removeElementScroll(l){var d;const u=qi();if(Br(u,l),(d=this.scroll)!=null&&d.wasRoot)return u;for(let p=0;p<this.path.length;p++){const g=this.path[p],{scroll:v,options:_}=g;g!==this.root&&v&&_.layoutScroll&&(v.wasRoot&&Br(u,l),Dd(u.x,v.offset.x),Dd(u.y,v.offset.y))}return u}applyTransform(l,u=!1){const d=qi();Br(d,l);for(let p=0;p<this.path.length;p++){const g=this.path[p];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Ud(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),wf(g.latestValues)&&Ud(d,g.latestValues)}return wf(this.latestValues)&&Ud(d,this.latestValues),d}removeTransform(l){const u=qi();Br(u,l);for(let d=0;d<this.path.length;d++){const p=this.path[d];if(!p.instance||!wf(p.latestValues))continue;q1(p.latestValues)&&p.updateSnapshot();const g=qi(),v=p.measurePageBox();Br(g,v),$E(u,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return wf(this.latestValues)&&$E(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ps.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var _;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=Ps.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qi(),this.relativeTargetOrigin=qi(),Km(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),Br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qi(),this.targetWithTransforms=qi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),WO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Br(this.target,this.layout.layoutBox),kR(this.target,this.targetDelta)):Br(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qi(),this.relativeTargetOrigin=qi(),Km(this.relativeTargetOrigin,this.target,x.target),Br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||q1(this.parent.latestValues)||VR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var b;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Ps.timestamp&&(d=!1),d)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;Br(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;KO(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=qi());const{target:x}=l;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(JE(this.prevProjectionDelta.x,this.projectionDelta.x),JE(this.prevProjectionDelta.y,this.projectionDelta.y)),Wm(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==_||!sT(this.projectionDelta.x,this.prevProjectionDelta.x)||!sT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Bd(),this.projectionDelta=Bd(),this.projectionDeltaWithTransform=Bd()}setAnimationOrigin(l,u=!1){const d=this.snapshot,p=d?d.latestValues:{},g={...this.latestValues},v=Bd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=qi(),x=d?d.source:void 0,b=this.layout?this.layout.source:void 0,R=x!==b,E=this.getStack(),M=!E||E.members.length<=1,w=!!(R&&!M&&this.options.crossfade===!0&&!this.path.some(kL));this.animationProgress=0;let B;this.mixTargetDelta=D=>{const I=D/1e3;oT(v.x,l.x,I),oT(v.y,l.y,I),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Km(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),VL(this.relativeTarget,this.relativeTargetOrigin,_,I),B&&EL(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=qi()),Br(B,this.relativeTarget)),R&&(this.animationValues=g,_L(g,p,this.latestValues,I,w,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var u,d,p;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(!1),(p=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||p.stop(!1),this.pendingAnimation&&(fu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ii.update(()=>{Ry.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Hd(0)),this.currentAnimation=pL(this.motionValue,[0,1e3],{...l,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),l.onUpdate&&l.onUpdate(g)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(wL),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:p,latestValues:g}=l;if(!(!u||!d||!p)){if(this!==l&&this.layout&&p&&ew(this.options.animationType,this.layout.layoutBox,p.layoutBox)){d=this.target||qi();const v=Ea(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const _=Ea(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+_}Br(u,d),Ud(u,g),Wm(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new TL),this.sharedNodes.get(l).add(u);const p=u.options.initialPromotionConfig;u.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var u;const{layoutId:l}=this.options;return l?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:l}=this.options;return l?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const p=this.getStack();p&&p.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const p={};d.z&&vA("z",l,p,this.animationValues);for(let g=0;g<gA.length;g++)vA(`rotate${gA[g]}`,l,p,this.animationValues),vA(`skew${gA[g]}`,l,p,this.animationValues);l.render();for(const g in p)l.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return RL;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Cy(l==null?void 0:l.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Cy(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!wf(this.latestValues)&&(x.transform=d?d({},""):"none",this.hasProjected=!1),x}const g=p.animationValues||p.latestValues;this.applyTransformsToTarget(),u.transform=CL(this.projectionDeltaWithTransform,this.treeScale,g),d&&(u.transform=d(g,u.transform));const{x:v,y:_}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${_.origin*100}% 0`,p.animationValues?u.opacity=p===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const x in fg){if(g[x]===void 0)continue;const{correct:b,applyTo:R,isCSSVariable:E}=fg[x],M=u.transform==="none"?g[x]:b(g[x],p);if(R){const w=R.length;for(let B=0;B<w;B++)u[R[B]]=M}else E?this.options.visualElement.renderState.vars[x]=M:u[x]=M}return this.options.layoutId&&(u.pointerEvents=p===this?Cy(l==null?void 0:l.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)==null?void 0:u.stop(!1)}),this.root.nodes.forEach(aT),this.root.sharedNodes.clear()}}}function DL(i){i.updateLayout()}function UL(i){var e;const t=((e=i.resumeFrom)==null?void 0:e.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&t&&i.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=i.layout,{animationType:r}=i.options,l=t.source!==i.layout.source;r==="size"?Ur(v=>{const _=l?t.measuredBox[v]:t.layoutBox[v],x=Ea(_);_.min=n[v].min,_.max=_.min+x}):ew(r,t.layoutBox,n)&&Ur(v=>{const _=l?t.measuredBox[v]:t.layoutBox[v],x=Ea(n[v]);_.max=_.min+x,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[v].max=i.relativeTarget[v].min+x)});const u=Bd();Wm(u,n,t.layoutBox);const d=Bd();l?Wm(d,i.applyTransform(s,!0),t.measuredBox):Wm(d,n,t.layoutBox);const p=!ZR(u);let g=!1;if(!i.resumeFrom){const v=i.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:_,layout:x}=v;if(_&&x){const b=qi();Km(b,t.layoutBox,_.layoutBox);const R=qi();Km(R,n,x.layoutBox),QR(b,R)||(g=!0),v.options.layoutRoot&&(i.relativeTarget=R,i.relativeTargetOrigin=b,i.relativeParent=v)}}}i.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:d,layoutDelta:u,hasLayoutChanged:p,hasRelativeLayoutChanged:g})}else if(i.isLead()){const{onExitComplete:n}=i.options;n&&n()}i.options.transition=void 0}function NL(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function OL(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function LL(i){i.clearSnapshot()}function aT(i){i.clearMeasurements()}function IL(i){i.isLayoutDirty=!1}function PL(i){const{visualElement:t}=i.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),i.resetTransform()}function rT(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function FL(i){i.resolveTargetDelta()}function HL(i){i.calcProjection()}function zL(i){i.resetSkewAndRotation()}function GL(i){i.removeLeadSnapshot()}function oT(i,t,e){i.translate=Ni(t.translate,0,e),i.scale=Ni(t.scale,1,e),i.origin=t.origin,i.originPoint=t.originPoint}function lT(i,t,e,n){i.min=Ni(t.min,e.min,n),i.max=Ni(t.max,e.max,n)}function VL(i,t,e,n){lT(i.x,t.x,e.x,n),lT(i.y,t.y,e.y,n)}function kL(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const XL={duration:.45,ease:[.4,0,.1,1]},cT=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),uT=cT("applewebkit/")&&!cT("chrome/")?Math.round:Pr;function fT(i){i.min=uT(i.min),i.max=uT(i.max)}function jL(i){fT(i.x),fT(i.y)}function ew(i,t,e){return i==="position"||i==="preserve-aspect"&&!qO(iT(t),iT(e),.2)}function YL(i){var t;return i!==i.root&&((t=i.scroll)==null?void 0:t.wasRoot)}const qL=tw({attachResizeListener:(i,t)=>dg(i,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yA={current:void 0},nw=tw({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!yA.current){const i=new qL({});i.mount(window),i.setOptions({layoutScroll:!0}),yA.current=i}return yA.current},resetTransform:(i,t)=>{i.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),WL={pan:{Feature:uL},drag:{Feature:cL,ProjectionNode:nw,MeasureLayout:WR}};function hT(i,t,e){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",e==="Start");const s="onHover"+e,r=n[s];r&&Ii.postRender(()=>r(t,Bg(t)))}class KL extends vu{mount(){const{current:t}=this.node;t&&(this.unmount=EN(t,(e,n)=>(hT(this.node,n,"Start"),s=>hT(this.node,s,"End"))))}unmount(){}}class JL extends vu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cg(dg(this.node.current,"focus",()=>this.onFocus()),dg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function dT(i,t,e){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",e==="Start");const s="onTap"+(e==="End"?"":e),r=n[s];r&&Ii.postRender(()=>r(t,Bg(t)))}class ZL extends vu{mount(){const{current:t}=this.node;t&&(this.unmount=wN(t,(e,n)=>(dT(this.node,n,"Start"),(s,{success:r})=>dT(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const J1=new WeakMap,_A=new WeakMap,QL=i=>{const t=J1.get(i.target);t&&t(i)},$L=i=>{i.forEach(QL)};function tI({root:i,...t}){const e=i||document;_A.has(e)||_A.set(e,{});const n=_A.get(e),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver($L,{root:i,...t})),n[s]}function eI(i,t,e){const n=tI(t);return J1.set(i,e),n.observe(i),()=>{J1.delete(i),n.unobserve(i)}}const nI={some:0,all:1};class iI extends vu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:s="some",once:r}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:nI[s]},u=d=>{const{isIntersecting:p}=d;if(this.isInView===p||(this.isInView=p,r&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),_=p?g:v;_&&_(d)};return eI(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(sI(t,e))&&this.startObserver()}unmount(){}}function sI({viewport:i={}},{viewport:t={}}={}){return e=>i[e]!==t[e]}const aI={inView:{Feature:iI},tap:{Feature:ZL},focus:{Feature:JL},hover:{Feature:KL}},rI={layout:{ProjectionNode:nw,MeasureLayout:WR}},Z1={current:null},iw={current:!1};function oI(){if(iw.current=!0,!!TS)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),t=()=>Z1.current=i.matches;i.addListener(t),t()}else Z1.current=!1}const lI=new WeakMap;function cI(i,t,e){for(const n in t){const s=t[n],r=e[n];if(ia(s))i.addValue(n,s);else if(ia(r))i.addValue(n,Hd(s,{owner:i}));else if(r!==s)if(i.hasValue(n)){const l=i.getValue(n);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=i.getStaticValue(n);i.addValue(n,Hd(l!==void 0?l:s,{owner:i}))}}for(const n in e)t[n]===void 0&&i.removeValue(n);return t}const pT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class uI{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:r,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=XS,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=ja.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Ii.render(this.render,!1,!0))};const{latestValues:d,renderState:p}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=e.initial?{...d}:{},this.renderState=p,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!r,this.isControllingVariants=I_(e),this.isVariantNode=bR(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(e,{},this);for(const _ in v){const x=v[_];d[_]!==void 0&&ia(x)&&x.set(d[_],!1)}}mount(t){this.current=t,lI.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),iw.current||oI(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Z1.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),fu(this.notifyUpdate),fu(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=sp.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=e.on("change",u=>{this.latestValues[t]=u,this.props.onUpdate&&Ii.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),r=e.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{s(),r(),l&&l(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in zd){const e=zd[t];if(!e)continue;const{isEnabled:n,Feature:s}=e;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qi()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<pT.length;n++){const s=pT[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,l=t[r];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=cI(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=Hd(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(D2(n)||N2(n))?n=parseFloat(n):!UN(n)&&hu.test(e)&&(n=mR(t,e)),this.setBaseTarget(t,ia(n)?n.get():n)),ia(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var r;const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const l=eM(this.props,e,(r=this.presenceContext)==null?void 0:r.custom);l&&(n=l[t])}if(e&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!ia(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new US),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class sw extends uI{constructor(){super(...arguments),this.KeyframeResolver=xN}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ia(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function aw(i,{style:t,vars:e},n,s){Object.assign(i.style,t,s&&s.getProjectionStyles(n));for(const r in e)i.style.setProperty(r,e[r])}function fI(i){return window.getComputedStyle(i)}class hI extends sw{constructor(){super(...arguments),this.type="html",this.renderInstance=aw}readValueFromInstance(t,e){var n;if(sp.has(e))return(n=this.projection)!=null&&n.isProjecting?F1(e):HU(t,e);{const s=fI(t),r=(LS(e)?s.getPropertyValue(e):s[e])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:e}){return XR(t,e)}build(t,e,n){QS(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return nM(t,e,n)}}const rw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function dI(i,t,e,n){aw(i,t,void 0,n);for(const s in t.attrs)i.setAttribute(rw.has(s)?s:ZS(s),t.attrs[s])}class pI extends sw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qi}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(sp.has(e)){const n=pR(e);return n&&n.default||0}return e=rw.has(e)?e:ZS(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return OR(t,e,n)}build(t,e,n){BR(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,s){dI(t,e,n,s)}mount(t){this.isSVGTag=UR(t.tagName),super.mount(t)}}const mI=(i,t)=>tM(i)?new pI(t):new hI(t,{allowProjection:i!==Rt.Fragment}),gI=dO({...HO,...aI,...WL,...rI},mI),na=FN(gI),vI=()=>it.jsx("section",{id:"about",className:"py-5",children:it.jsx("div",{className:"container mx-auto px-6",children:it.jsxs(na.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.5},children:[it.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-12 text-center",children:["About ",it.jsx("span",{className:"text-cyan-400",children:"Me"})]}),it.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12",children:[it.jsx(na.div,{className:"w-full md:w-1/3",initial:{x:-50,opacity:0},whileInView:{x:0,opacity:1},viewport:{once:!0},transition:{duration:.6},children:it.jsx("div",{className:"p-1 rounded-full",children:it.jsx("div",{className:"bg-gray-800 p-1 rounded-full",children:it.jsx("img",{src:"/Portfolio/profile.jpg",alt:"Profile",className:"rounded-full w-full aspect-square object-cover"})})})}),it.jsxs(na.div,{className:"w-full md:w-2/3",initial:{x:50,opacity:0},whileInView:{x:0,opacity:1},viewport:{once:!0},transition:{duration:.4,delay:.2},children:[it.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Who I Am"}),it.jsx("p",{className:"mb-6",children:"I'm a passionate full-stack developer with expertise in building scalable web applications. My journey began with a Computer Science degree and has evolved through working with startups and Fortune 500 companies alike."}),it.jsx("p",{className:"mb-6",children:"I believe in writing clean, maintainable code and staying at the forefront of web technologies. When I'm not coding, you can find me contributing to open-source projects or mentoring junior developers."}),it.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 p-2 rounded",children:[it.jsxs("div",{children:[it.jsx("h4",{className:"font-medium text-gray-400",children:"Name:"}),it.jsx("p",{children:"Mahadev Kumar"})]}),it.jsxs("div",{children:[it.jsx("h4",{className:"font-medium text-gray-400",children:"Email:"}),it.jsx("p",{children:"24je0035@iitism.ac.in"})]}),it.jsxs("div",{children:[it.jsx("h4",{className:"font-medium text-gray-400",children:"Experience:"}),it.jsx("p",{children:"No"})]}),it.jsxs("div",{children:[it.jsx("h4",{className:"font-medium text-gray-400",children:"Location:"}),it.jsx("p",{children:"IIT(ISM) Dhanbad, Jharkhand"})]})]})]})]})]})})});var ow={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},mT=cu.createContext&&cu.createContext(ow),yI=["attr","size","title"];function _I(i,t){if(i==null)return{};var e=xI(i,t),n,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)n=r[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(e[n]=i[n])}return e}function xI(i,t){if(i==null)return{};var e={};for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){if(t.indexOf(n)>=0)continue;e[n]=i[n]}return e}function zy(){return zy=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},zy.apply(this,arguments)}function gT(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),e.push.apply(e,n)}return e}function Gy(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?gT(Object(e),!0).forEach(function(n){AI(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):gT(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function AI(i,t,e){return t=SI(t),t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function SI(i){var t=MI(i,"string");return typeof t=="symbol"?t:t+""}function MI(i,t){if(typeof i!="object"||!i)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var n=e.call(i,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function lw(i){return i&&i.map((t,e)=>cu.createElement(t.tag,Gy({key:e},t.attr),lw(t.child)))}function ms(i){return t=>cu.createElement(bI,zy({attr:Gy({},i.attr)},t),lw(i.child))}function bI(i){var t=e=>{var{attr:n,size:s,title:r}=i,l=_I(i,yI),u=s||e.size||"1em",d;return e.className&&(d=e.className),i.className&&(d=(d?d+" ":"")+i.className),cu.createElement("svg",zy({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,n,l,{className:d,style:Gy(Gy({color:i.color||e.color},e.style),i.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),r&&cu.createElement("title",null,r),i.children)};return mT!==void 0?cu.createElement(mT.Consumer,null,e=>t(e)):t(ow)}function EI(i){return ms({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 18 22 12 16 6"},child:[]},{tag:"polyline",attr:{points:"8 6 2 12 8 18"},child:[]}]})(i)}function TI(i){return ms({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(i)}function CI(i){return ms({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"},child:[]}]})(i)}function RI(i){return ms({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"},child:[]},{tag:"polyline",attr:{points:"2 17 12 22 22 17"},child:[]},{tag:"polyline",attr:{points:"2 12 12 17 22 12"},child:[]}]})(i)}function wI(i){return ms({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"},child:[]},{tag:"rect",attr:{x:"2",y:"9",width:"4",height:"12"},child:[]},{tag:"circle",attr:{cx:"4",cy:"4",r:"2"},child:[]}]})(i)}function BI(i){return ms({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(i)}function DI(i){return ms({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(i)}function UI(i){return ms({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(i)}function NI(i){return ms({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"},child:[]}]})(i)}function OI(i){return ms({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"},child:[]}]})(i)}function LI(i){return ms({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"},child:[]}]})(i)}function II(i){return ms({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M480 32l-64 368-223.3 80L0 400l19.6-94.8h82l-8 40.6L210 390.2l134.1-44.4 18.8-97.1H29.5l16-82h333.7l10.5-52.7H56.3l16.3-82H480z"},child:[]}]})(i)}function PI(i){return ms({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"},child:[]}]})(i)}function FI(i){return ms({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M0 32l34.9 395.8L191.5 480l157.6-52.2L384 32H0zm308.2 127.9H124.4l4.1 49.4h175.6l-13.6 148.4-97.9 27v.3h-1.1l-98.7-27.3-6-75.8h47.7L138 320l53.5 14.5 53.7-14.5 6-62.2H84.3L71.5 112.2h241.1l-4.4 47.7z"},child:[]}]})(i)}function HI(i){return ms({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 508c-6.7 0-13.5-1.8-19.4-5.2l-61.7-36.5c-9.2-5.2-4.7-7-1.7-8 12.3-4.3 14.8-5.2 27.9-12.7 1.4-.8 3.2-.5 4.6.4l47.4 28.1c1.7 1 4.1 1 5.7 0l184.7-106.6c1.7-1 2.8-3 2.8-5V149.3c0-2.1-1.1-4-2.9-5.1L226.8 37.7c-1.7-1-4-1-5.7 0L36.6 144.3c-1.8 1-2.9 3-2.9 5.1v213.1c0 2 1.1 4 2.9 4.9l50.6 29.2c27.5 13.7 44.3-2.4 44.3-18.7V167.5c0-3 2.4-5.3 5.4-5.3h23.4c2.9 0 5.4 2.3 5.4 5.3V378c0 36.6-20 57.6-54.7 57.6-10.7 0-19.1 0-42.5-11.6l-48.4-27.9C8.1 389.2.7 376.3.7 362.4V149.3c0-13.8 7.4-26.8 19.4-33.7L204.6 9c11.7-6.6 27.2-6.6 38.8 0l184.7 106.7c12 6.9 19.4 19.8 19.4 33.7v213.1c0 13.8-7.4 26.7-19.4 33.7L243.4 502.8c-5.9 3.4-12.6 5.2-19.4 5.2zm149.1-210.1c0-39.9-27-50.5-83.7-58-57.4-7.6-63.2-11.5-63.2-24.9 0-11.1 4.9-25.9 47.4-25.9 37.9 0 51.9 8.2 57.7 33.8.5 2.4 2.7 4.2 5.2 4.2h24c1.5 0 2.9-.6 3.9-1.7s1.5-2.6 1.4-4.1c-3.7-44.1-33-64.6-92.2-64.6-52.7 0-84.1 22.2-84.1 59.5 0 40.4 31.3 51.6 81.8 56.6 60.5 5.9 65.2 14.8 65.2 26.7 0 20.6-16.6 29.4-55.5 29.4-48.9 0-59.6-12.3-63.2-36.6-.4-2.6-2.6-4.5-5.3-4.5h-23.9c-3 0-5.3 2.4-5.3 5.3 0 31.1 16.9 68.2 97.8 68.2 58.4-.1 92-23.2 92-63.4z"},child:[]}]})(i)}function zI(i){return ms({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M418.2 177.2c-5.4-1.8-10.8-3.5-16.2-5.1.9-3.7 1.7-7.4 2.5-11.1 12.3-59.6 4.2-107.5-23.1-123.3-26.3-15.1-69.2.6-112.6 38.4-4.3 3.7-8.5 7.6-12.5 11.5-2.7-2.6-5.5-5.2-8.3-7.7-45.5-40.4-91.1-57.4-118.4-41.5-26.2 15.2-34 60.3-23 116.7 1.1 5.6 2.3 11.1 3.7 16.7-6.4 1.8-12.7 3.8-18.6 5.9C38.3 196.2 0 225.4 0 255.6c0 31.2 40.8 62.5 96.3 81.5 4.5 1.5 9 3 13.6 4.3-1.5 6-2.8 11.9-4 18-10.5 55.5-2.3 99.5 23.9 114.6 27 15.6 72.4-.4 116.6-39.1 3.5-3.1 7-6.3 10.5-9.7 4.4 4.3 9 8.4 13.6 12.4 42.8 36.8 85.1 51.7 111.2 36.6 27-15.6 35.8-62.9 24.4-120.5-.9-4.4-1.9-8.9-3-13.5 3.2-.9 6.3-1.9 9.4-2.9 57.7-19.1 99.5-50 99.5-81.7 0-30.3-39.4-59.7-93.8-78.4zM282.9 92.3c37.2-32.4 71.9-45.1 87.7-36 16.9 9.7 23.4 48.9 12.8 100.4-.7 3.4-1.4 6.7-2.3 10-22.2-5-44.7-8.6-67.3-10.6-13-18.6-27.2-36.4-42.6-53.1 3.9-3.7 7.7-7.2 11.7-10.7zM167.2 307.5c5.1 8.7 10.3 17.4 15.8 25.9-15.6-1.7-31.1-4.2-46.4-7.5 4.4-14.4 9.9-29.3 16.3-44.5 4.6 8.8 9.3 17.5 14.3 26.1zm-30.3-120.3c14.4-3.2 29.7-5.8 45.6-7.8-5.3 8.3-10.5 16.8-15.4 25.4-4.9 8.5-9.7 17.2-14.2 26-6.3-14.9-11.6-29.5-16-43.6zm27.4 68.9c6.6-13.8 13.8-27.3 21.4-40.6s15.8-26.2 24.4-38.9c15-1.1 30.3-1.7 45.9-1.7s31 .6 45.9 1.7c8.5 12.6 16.6 25.5 24.3 38.7s14.9 26.7 21.7 40.4c-6.7 13.8-13.9 27.4-21.6 40.8-7.6 13.3-15.7 26.2-24.2 39-14.9 1.1-30.4 1.6-46.1 1.6s-30.9-.5-45.6-1.4c-8.7-12.7-16.9-25.7-24.6-39s-14.8-26.8-21.5-40.6zm180.6 51.2c5.1-8.8 9.9-17.7 14.6-26.7 6.4 14.5 12 29.2 16.9 44.3-15.5 3.5-31.2 6.2-47 8 5.4-8.4 10.5-17 15.5-25.6zm14.4-76.5c-4.7-8.8-9.5-17.6-14.5-26.2-4.9-8.5-10-16.9-15.3-25.2 16.1 2 31.5 4.7 45.9 8-4.6 14.8-10 29.2-16.1 43.4zM256.2 118.3c10.5 11.4 20.4 23.4 29.6 35.8-19.8-.9-39.7-.9-59.5 0 9.8-12.9 19.9-24.9 29.9-35.8zM140.2 57c16.8-9.8 54.1 4.2 93.4 39 2.5 2.2 5 4.6 7.6 7-15.5 16.7-29.8 34.5-42.9 53.1-22.6 2-45 5.5-67.2 10.4-1.3-5.1-2.4-10.3-3.5-15.5-9.4-48.4-3.2-84.9 12.6-94zm-24.5 263.6c-4.2-1.2-8.3-2.5-12.4-3.9-21.3-6.7-45.5-17.3-63-31.2-10.1-7-16.9-17.8-18.8-29.9 0-18.3 31.6-41.7 77.2-57.6 5.7-2 11.5-3.8 17.3-5.5 6.8 21.7 15 43 24.5 63.6-9.6 20.9-17.9 42.5-24.8 64.5zm116.6 98c-16.5 15.1-35.6 27.1-56.4 35.3-11.1 5.3-23.9 5.8-35.3 1.3-15.9-9.2-22.5-44.5-13.5-92 1.1-5.6 2.3-11.2 3.7-16.7 22.4 4.8 45 8.1 67.9 9.8 13.2 18.7 27.7 36.6 43.2 53.4-3.2 3.1-6.4 6.1-9.6 8.9zm24.5-24.3c-10.2-11-20.4-23.2-30.3-36.3 9.6.4 19.5.6 29.5.6 10.3 0 20.4-.2 30.4-.7-9.2 12.7-19.1 24.8-29.6 36.4zm130.7 30c-.9 12.2-6.9 23.6-16.5 31.3-15.9 9.2-49.8-2.8-86.4-34.2-4.2-3.6-8.4-7.5-12.7-11.5 15.3-16.9 29.4-34.8 42.2-53.6 22.9-1.9 45.7-5.4 68.2-10.5 1 4.1 1.9 8.2 2.7 12.2 4.9 21.6 5.7 44.1 2.5 66.3zm18.2-107.5c-2.8.9-5.6 1.8-8.5 2.6-7-21.8-15.6-43.1-25.5-63.8 9.6-20.4 17.7-41.4 24.5-62.9 5.2 1.5 10.2 3.1 15 4.7 46.6 16 79.3 39.8 79.3 58 0 19.6-34.9 44.9-84.8 61.4zm-149.7-15c25.3 0 45.8-20.5 45.8-45.8s-20.5-45.8-45.8-45.8c-25.3 0-45.8 20.5-45.8 45.8s20.5 45.8 45.8 45.8z"},child:[]}]})(i)}function GI(i){return ms({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17.193 9.555c-1.264-5.58-4.252-7.414-4.573-8.115-.28-.394-.53-.954-.735-1.44-.036.495-.055.685-.523 1.184-.723.566-4.438 3.682-4.74 10.02-.282 5.912 4.27 9.435 4.888 9.884l.07.05A73.49 73.49 0 0111.91 24h.481c.114-1.032.284-2.056.51-3.07.417-.296.604-.463.85-.693a11.342 11.342 0 003.639-8.464c.01-.814-.103-1.662-.197-2.218zm-5.336 8.195s0-8.291.275-8.29c.213 0 .49 10.695.49 10.695-.381-.045-.765-1.76-.765-2.405z"},child:[]}]})(i)}function VI(i){return ms({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.634 16.504c.87-.075 1.543-.84 1.5-1.754-.047-.914-.796-1.648-1.709-1.648h-.061a1.71 1.71 0 00-1.648 1.769c.03.479.226.869.494 1.153-1.048 2.038-2.621 3.536-5.005 4.795-1.603.838-3.296 1.154-4.944.93-1.378-.195-2.456-.81-3.116-1.799-.988-1.499-1.078-3.116-.255-4.734.6-1.17 1.499-2.023 2.099-2.443a9.96 9.96 0 01-.42-1.543C-.868 14.408-.416 18.752.932 20.805c1.004 1.498 3.057 2.456 5.304 2.456.6 0 1.23-.044 1.843-.194 3.897-.749 6.848-3.086 8.541-6.532zm5.348-3.746c-2.32-2.728-5.738-4.226-9.634-4.226h-.51c-.253-.554-.837-.899-1.498-.899h-.045c-.943 0-1.678.81-1.647 1.753.03.898.794 1.648 1.708 1.648h.074a1.69 1.69 0 001.499-1.049h.555c2.309 0 4.495.674 6.488 1.992 1.527 1.005 2.622 2.323 3.237 3.897.538 1.288.509 2.547-.045 3.597-.855 1.647-2.294 2.517-4.196 2.517-1.199 0-2.367-.375-2.967-.644-.36.298-.96.793-1.394 1.093 1.318.598 2.652.943 3.94.943 2.922 0 5.094-1.647 5.919-3.236.898-1.798.824-4.824-1.47-7.416zM6.49 17.042c.03.899.793 1.648 1.708 1.648h.06a1.688 1.688 0 001.648-1.768c0-.9-.779-1.647-1.693-1.647h-.06c-.06 0-.15 0-.226.029-1.243-2.098-1.768-4.347-1.572-6.772.12-1.828.72-3.417 1.797-4.735.9-1.124 2.593-1.68 3.747-1.708 3.236-.061 4.585 3.971 4.689 5.574l1.498.45C17.741 3.197 14.686.62 11.764.62 9.02.62 6.49 2.613 5.47 5.535 4.077 9.43 4.991 13.177 6.7 16.174c-.15.195-.24.539-.21.868z"},child:[]}]})(i)}function kI(i){return ms({attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M9.633 7.968h3.751v10.514c0 4.738-2.271 6.392-5.899 6.392-0.888 0-2.024-0.148-2.764-0.395l0.42-3.036c0.518 0.173 1.185 0.296 1.925 0.296 1.58 0 2.567-0.716 2.567-3.282v-10.489zM16.641 20.753c0.987 0.518 2.567 1.037 4.171 1.037 1.728 0 2.641-0.716 2.641-1.826 0-1.012-0.79-1.629-2.789-2.32-2.764-0.987-4.59-2.517-4.59-4.961 0-2.838 2.394-4.985 6.293-4.985 1.9 0 3.258 0.37 4.245 0.839l-0.839 3.011c-0.642-0.321-1.851-0.79-3.455-0.79-1.629 0-2.419 0.765-2.419 1.604 0 1.061 0.913 1.53 3.085 2.369 2.937 1.086 4.294 2.616 4.294 4.985 0 2.789-2.122 5.158-6.688 5.158-1.9 0-3.776-0.518-4.714-1.037l0.765-3.085z"},child:[]}]})(i)}const XI=()=>{const i=[{name:"React",percentage:95,icon:it.jsx(zI,{})},{name:"JavaScript",percentage:95,icon:it.jsx(kI,{})},{name:"Node.js",percentage:85,icon:it.jsx(HI,{})},{name:"HTML",percentage:90,icon:it.jsx(FI,{})},{name:"CSS",percentage:90,icon:it.jsx(II,{})},{name:"MongoDB",percentage:80,icon:it.jsx(GI,{})},{name:"Redux",percentage:85,icon:it.jsx(VI,{})},{name:"Git",percentage:90,icon:it.jsx(PI,{})}],t=[{title:"Frontend Development",icon:it.jsx(RI,{}),description:"Expertise in building responsive, accessible, and performant user interfaces with React, Next.js, and modern CSS."},{title:"Backend Development",icon:it.jsx(TI,{}),description:"Experience designing and implementing RESTful APIs, GraphQL services, and serverless architectures with Node.js."},{title:"Full-Stack Development",icon:it.jsx(UI,{}),description:"Skilled in building cross-platform web applications using React vite with vite module integration."},{title:"DevOps & Cloud",icon:it.jsx(EI,{}),description:"Proficient in CI/CD pipelines, containerization with Docker, and cloud platforms like AWS and Azure."}];return it.jsx("section",{id:"skills",className:"py-4",children:it.jsx("div",{className:"container mx-auto px-6",children:it.jsxs(na.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.8},children:[it.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-4 text-center",children:["My ",it.jsx("span",{className:"text-cyan-400",children:"Skills"})]}),it.jsx("p",{className:"text-gray-400 text-center max-w-2xl mx-auto mb-12",children:"I've worked with a variety of technologies in the web development world. Here are some of my core competencies."}),it.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((e,n)=>it.jsxs(na.div,{className:"rounded-xl bg-green-100 p-6 border border-gray-700 hover:border-cyan-400/30 transition-all",initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0},transition:{duration:.5,delay:n*.1},children:[it.jsx("div",{className:"text-4xl text-cyan-400 mb-4",children:e.icon}),it.jsx("h3",{className:"text-xl font-semibold mb-3",children:e.title}),it.jsx("p",{className:"text-gray-400 mb-4",children:e.description})]},e.title))}),it.jsxs("div",{className:"mt-16",children:[it.jsx("h3",{className:"text-2xl font-semibold mb-8 text-center",children:"Technical Proficiencies"}),it.jsx("div",{className:"max-w-3xl mx-auto space-y-6",children:i.map((e,n)=>it.jsx(na.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5,delay:n*.1},children:it.jsx("div",{className:"w-full bg-gray-700 rounded h-10 relative overflow-hidden",children:it.jsxs(na.div,{className:"bg-cyan-500 h-full flex items-center px-4 space-x-4 text-white absolute top-0 left-0",initial:{width:0},whileInView:{width:`${e.percentage}%`},viewport:{once:!0},transition:{duration:1,delay:n*.1},style:{whiteSpace:"nowrap"},children:[it.jsx("span",{className:"font-medium",children:e.name}),it.jsx("span",{className:"bg-blue-600 p-1 rounded-full",children:e.icon}),it.jsxs("span",{className:"ml-auto text-sm",children:[e.percentage,"%"]})]})})},e.name))})]})]})})})},jI=()=>{const i=[{title:"E-commerce Platform",description:"Full-featured online store with product catalog, cart, and payment integration.",tech:["React","Node.js","MongoDB","Stripe"],image:"https://via.placeholder.com/600x400?text=E-commerce",demoUrl:"#",codeUrl:"#"},{title:"Task Management App",description:"Collaborative project management tool with real-time updates and team features.",tech:["React","Firebase","Material UI","Redux"],image:"https://via.placeholder.com/600x400?text=Task+App",demoUrl:"#",codeUrl:"#"},{title:"Health & Fitness Tracker",description:"Mobile app for tracking workouts, nutrition, and health metrics with data visualization.",tech:["React Native","GraphQL","D3.js","AWS"],image:"https://via.placeholder.com/600x400?text=Fitness+App",demoUrl:"#",codeUrl:"#"}];return it.jsx("section",{id:"projects",className:"py-10",children:it.jsx("div",{className:"container mx-auto px-6",children:it.jsxs(na.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.8},children:[it.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-4 text-center",children:["My ",it.jsx("span",{className:"text-cyan-400",children:"Projects"})]}),it.jsx("p",{className:"text-gray-400 text-center max-w-2xl mx-auto mb-12",children:"Here are some of my recent projects. Each one was built to solve a specific problem or demonstrate a particular skill set."}),it.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:i.map((t,e)=>it.jsxs(na.div,{className:"rounded-b-xl border border-gray-700 hover:border-cyan-400/30 transition-all",initial:{rotateY:90,opacity:0},whileInView:{rotateY:0,opacity:1},viewport:{once:!0,margin:"-100px"},transition:{type:"spring",stiffness:60,damping:15,delay:e*.15},children:[it.jsx("div",{className:"h-48",children:it.jsx("img",{src:"/Portfolio/project.png",alt:t.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-500"})}),it.jsxs("div",{className:"p-6",children:[it.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.title}),it.jsx("p",{className:"text-gray-400 mb-4",children:t.description}),it.jsx("div",{className:"flex flex-wrap gap-4 mb-4",children:t.tech.map(n=>it.jsx(na.span,{initial:{scale:1},whileHover:{scale:1.2},transition:{type:"spring",stiffness:"500"},className:"text-xs bg-green-300 px-2 py-1 rounded",children:n},n))}),it.jsxs("div",{className:"flex space-x-3",children:[it.jsx(na.a,{href:t.demoUrl,className:"text-blue-500 text-sm font-medium",target:"_blank",rel:"noopener noreferrer",whileHover:{x:3},children:"Live Demo"}),it.jsx(na.a,{href:t.codeUrl,className:"text-sm font-medium",target:"_blank",rel:"noopener noreferrer",whileHover:{x:3},children:"View Code"})]})]})]},t.title))})]})})})},YI=()=>{const[i,t]=Rt.useState(""),[e,n]=Rt.useState(null),[s,r]=Rt.useState(!1),l=async u=>{u.preventDefault(),console.log(i,e),r(!0),t(""),n(null),setTimeout(()=>r(!1),3e3)};return it.jsx("footer",{className:"bg-gray-900 text-gray-300 pt-12 pb-8 px-4 sm:px-6 lg:px-8",children:it.jsxs("div",{className:"max-w-7xl mx-auto",children:[it.jsxs(na.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"mb-12 p-6 bg-gray-800 rounded-lg",children:[it.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"We'd love your feedback!"}),s?it.jsx("div",{className:"p-4 bg-green-900/30 text-green-400 rounded-md",children:"Thank you for your feedback! We appreciate your input."}):it.jsxs("form",{onSubmit:l,className:"space-y-4",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm mb-2",children:"How would you rate your experience?"}),it.jsxs("div",{className:"flex gap-4",children:[it.jsxs("button",{type:"button",onClick:()=>n("positive"),className:`flex items-center gap-2 px-4 py-2 rounded-lg ${e==="positive"?"bg-green-900/50 text-green-400":"bg-gray-700 hover:bg-gray-600"}`,children:[it.jsx(OI,{})," Positive"]}),it.jsxs("button",{type:"button",onClick:()=>n("negative"),className:`flex items-center gap-2 px-4 py-2 rounded-lg ${e==="negative"?"bg-red-900/50 text-red-400":"bg-gray-700 hover:bg-gray-600"}`,children:[it.jsx(NI,{})," Needs Improvement"]})]})]}),it.jsxs("div",{children:[it.jsx("label",{htmlFor:"feedback",className:"block text-sm mb-2",children:"What can we improve?"}),it.jsx("textarea",{id:"feedback",rows:"3",value:i,onChange:u=>t(u.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your suggestions..."})]}),it.jsxs("button",{type:"submit",disabled:!i||!e,className:`flex items-center gap-2 px-6 py-2 rounded-lg ${!i||!e?"bg-gray-700 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"} transition-colors`,children:[it.jsx(DI,{})," Send Feedback"]})]})]}),it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[it.jsxs("div",{children:[it.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"DevResources"}),it.jsx("p",{className:"text-sm",children:"The ultimate collection of tools and components for modern web development."})]}),it.jsxs("div",{children:[it.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Connect"}),it.jsxs("div",{className:"flex gap-4 mb-4",children:[it.jsx("a",{href:"https://github.com/Mahadev422/Portfolio.git",target:"_blank",className:"text-gray-400 hover:text-white transition-colors",children:it.jsx(CI,{className:"text-xl"})}),it.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:it.jsx(LI,{className:"text-xl"})}),it.jsx("a",{href:"https://linkedin.com/in/mahadevkumar",target:"_blank",className:"text-gray-400 hover:text-white transition-colors",children:it.jsx(wI,{className:"text-xl"})}),it.jsx("a",{href:"mailto:youremail@example.com",target:"_blank",className:"text-gray-400 hover:text-white transition-colors",children:it.jsx(BI,{className:"text-xl"})})]}),it.jsx("p",{className:"text-sm",children:"Subscribe to our newsletter for updates"})]})]}),it.jsxs("div",{className:"pt-6 border-t border-gray-800 text-sm text-gray-500 text-center",children:[" ",new Date().getFullYear()," Mahadev. All rights reserved."]})]})})},qI=()=>it.jsx(it.Fragment,{children:it.jsx(na.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"fixed top-0 left-0 right-0 z-50 h-[50px]",children:it.jsx("div",{className:"backdrop-blur-md bg-white/30 border-b-1",children:it.jsx("div",{className:"mx-auto px-4 py-3 items-center justify-between",children:it.jsx("span",{className:"text-xl font-bold text-gray-800",children:"Mahadev Portfolio"})})})})}),WI=()=>{const[i,t]=Rt.useState(0),[e,n]=Rt.useState(""),[s,r]=Rt.useState(!1),l=["Frontend Developer","Backend Developer","React.js Expert","Full-Stack Developer"],u=150,d=50,p=1500;return Rt.useEffect(()=>{const v=setTimeout(()=>{const _=l[i];n(s?_.substring(0,e.length-1):_.substring(0,e.length+1)),!s&&e===_?setTimeout(()=>r(!0),p):s&&e===""&&(r(!1),t(x=>(x+1)%l.length))},s?d:u);return()=>clearTimeout(v)},[e,i,s]),it.jsxs("section",{className:"relative p-4 z-10 flex flex-col",children:[it.jsxs(na.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-4xl sm:text-5xl md:text-6xl font-bold mb-6",children:["Hi, I'm a ",it.jsx("br",{}),it.jsxs("span",{className:"text-cyan-400",children:["_",e]})]}),it.jsx(na.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.6},className:"text-xl bg-black/50 rounded-xl p-4 text-white mb-8",children:"Welcome to my portfolio. I build beautiful and performant web experiences using modern tools like React, Tailwind CSS, and Node.js."}),it.jsxs("div",{className:"flex gap-4 mb-6",children:[it.jsx("a",{href:"https://mahadev422.github.io/resume/",target:"_blank",className:"bg-blue-500 hover:bg-cyan-600 text-white px-6 py-3 rounded-full font-medium transition",children:"View Resume"}),it.jsx("a",{href:"https://github.com/Mahadev422/Portfolio.git",className:"border border-cyan-500 hover:bg-cyan-500 hover:text-white text-cyan-400 px-6 py-3 rounded-full font-medium transition",children:"Github Code"})]})]})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Dg="176",Bf={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Df={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},cw=0,Q1=1,uw=2,KI=3,fw=0,P_=1,Jm=2,yo=3,dl=0,Ta=1,ka=2,fl=0,Yf=1,$1=2,tS=3,eS=4,hw=5,ru=100,dw=101,pw=102,mw=103,gw=104,vw=200,yw=201,_w=202,xw=203,Vy=204,ky=205,Aw=206,Sw=207,Mw=208,bw=209,Ew=210,Tw=211,Cw=212,Rw=213,ww=214,Xy=0,jy=1,Yy=2,Kf=3,qy=4,Wy=5,Ky=6,Jy=7,Ug=0,Bw=1,Dw=2,hl=0,Uw=1,Nw=2,Ow=3,sM=4,Lw=5,Iw=6,Pw=7,nS="attached",Fw="detached",du=300,pl=301,pu=302,Gd=303,pg=304,ap=306,mu=1e3,Wi=1001,Vd=1002,bs=1003,F_=1004,JI=1004,Pf=1005,ZI=1005,Wn=1006,Ld=1007,QI=1007,Lr=1008,iS=1008,Ca=1009,H_=1010,z_=1011,kd=1012,Ng=1013,ml=1014,Li=1015,Ms=1016,G_=1017,V_=1018,Xd=1020,aM=35902,rM=1021,oM=1022,Ki=1023,jd=1026,Yd=1027,Og=1028,Lg=1029,lM=1030,k_=1031,$I=1032,X_=1033,Zm=33776,Qm=33777,$m=33778,tg=33779,Zy=35840,Qy=35841,$y=35842,t_=35843,e_=36196,n_=37492,i_=37496,s_=37808,a_=37809,r_=37810,o_=37811,l_=37812,c_=37813,u_=37814,f_=37815,h_=37816,d_=37817,p_=37818,m_=37819,g_=37820,v_=37821,eg=36492,y_=36494,__=36495,cM=36283,x_=36284,A_=36285,S_=36286,Hw=2200,zw=2201,Gw=2202,qd=2300,Wd=2301,wy=2302,Ff=2400,Hf=2401,mg=2402,j_=2500,uM=2501,Vw=0,fM=1,M_=2,kw=3200,Xw=3201,t4=3202,e4=3203,yu=0,jw=1,Jl="",Fs="srgb",So="srgb-linear",gg="linear",ii="srgb",n4=0,Uf=7680,i4=7681,s4=7682,a4=7683,r4=34055,o4=34056,l4=5386,c4=512,u4=513,f4=514,h4=515,d4=516,p4=517,m4=518,sS=519,Yw=512,qw=513,Ww=514,hM=515,Kw=516,Jw=517,Zw=518,Qw=519,vg=35044,g4=35048,v4=35040,y4=35045,_4=35049,x4=35041,A4=35046,S4=35050,M4=35042,b4="100",aS="300 es",Ir=2e3,yg=2001,E4={COMPUTE:"compute",RENDER:"render"},T4={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},C4={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};let vl=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){const n=this._listeners;if(n===void 0)return;const s=n[t];if(s!==void 0){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const n=e[t.type];if(n!==void 0){t.target=this;const s=n.slice(0);for(let r=0,l=s.length;r<l;r++)s[r].call(this,t);t.target=null}}};const Qs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let vT=1234567;const qf=Math.PI/180,Kd=180/Math.PI;function cr(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Qs[i&255]+Qs[i>>8&255]+Qs[i>>16&255]+Qs[i>>24&255]+"-"+Qs[t&255]+Qs[t>>8&255]+"-"+Qs[t>>16&15|64]+Qs[t>>24&255]+"-"+Qs[e&63|128]+Qs[e>>8&255]+"-"+Qs[e>>16&255]+Qs[e>>24&255]+Qs[n&255]+Qs[n>>8&255]+Qs[n>>16&255]+Qs[n>>24&255]).toLowerCase()}function fn(i,t,e){return Math.max(t,Math.min(e,i))}function dM(i,t){return(i%t+t)%t}function R4(i,t,e,n,s){return n+(i-t)*(s-n)/(e-t)}function w4(i,t,e){return i!==t?(e-i)/(t-i):0}function ng(i,t,e){return(1-e)*i+e*t}function B4(i,t,e,n){return ng(i,t,1-Math.exp(-e*n))}function D4(i,t=1){return t-Math.abs(dM(i,t*2)-t)}function U4(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*(3-2*i))}function N4(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*i*(i*(i*6-15)+10))}function O4(i,t){return i+Math.floor(Math.random()*(t-i+1))}function L4(i,t){return i+Math.random()*(t-i)}function I4(i){return i*(.5-Math.random())}function P4(i){i!==void 0&&(vT=i);let t=vT+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function F4(i){return i*qf}function H4(i){return i*Kd}function z4(i){return(i&i-1)===0&&i!==0}function G4(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function V4(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function k4(i,t,e,n,s){const r=Math.cos,l=Math.sin,u=r(e/2),d=l(e/2),p=r((t+n)/2),g=l((t+n)/2),v=r((t-n)/2),_=l((t-n)/2),x=r((n-t)/2),b=l((n-t)/2);switch(s){case"XYX":i.set(u*g,d*v,d*_,u*p);break;case"YZY":i.set(d*_,u*g,d*v,u*p);break;case"ZXZ":i.set(d*v,d*_,u*g,u*p);break;case"XZX":i.set(u*g,d*b,d*x,u*p);break;case"YXY":i.set(d*x,u*g,d*b,u*p);break;case"ZYZ":i.set(d*b,d*x,u*g,u*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function ba(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function _n(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const $w={DEG2RAD:qf,RAD2DEG:Kd,generateUUID:cr,clamp:fn,euclideanModulo:dM,mapLinear:R4,inverseLerp:w4,lerp:ng,damp:B4,pingpong:D4,smoothstep:U4,smootherstep:N4,randInt:O4,randFloat:L4,randFloatSpread:I4,seededRandom:P4,degToRad:F4,radToDeg:H4,isPowerOfTwo:z4,ceilPowerOfTwo:G4,floorPowerOfTwo:V4,setQuaternionFromProperEuler:k4,normalize:_n,denormalize:ba};class Wt{constructor(t=0,e=0){Wt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6],this.y=s[1]*e+s[4]*n+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=fn(this.x,t.x,e.x),this.y=fn(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=fn(this.x,t,e),this.y=fn(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(fn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(fn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),s=Math.sin(e),r=this.x-t.x,l=this.y-t.y;return this.x=r*n-l*s+t.x,this.y=r*s+l*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class gn{constructor(t,e,n,s,r,l,u,d,p){gn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,n,s,r,l,u,d,p)}set(t,e,n,s,r,l,u,d,p){const g=this.elements;return g[0]=t,g[1]=s,g[2]=u,g[3]=e,g[4]=r,g[5]=d,g[6]=n,g[7]=l,g[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,s=e.elements,r=this.elements,l=n[0],u=n[3],d=n[6],p=n[1],g=n[4],v=n[7],_=n[2],x=n[5],b=n[8],R=s[0],E=s[3],M=s[6],w=s[1],B=s[4],D=s[7],I=s[2],L=s[5],V=s[8];return r[0]=l*R+u*w+d*I,r[3]=l*E+u*B+d*L,r[6]=l*M+u*D+d*V,r[1]=p*R+g*w+v*I,r[4]=p*E+g*B+v*L,r[7]=p*M+g*D+v*V,r[2]=_*R+x*w+b*I,r[5]=_*E+x*B+b*L,r[8]=_*M+x*D+b*V,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],l=t[4],u=t[5],d=t[6],p=t[7],g=t[8];return e*l*g-e*u*p-n*r*g+n*u*d+s*r*p-s*l*d}invert(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],l=t[4],u=t[5],d=t[6],p=t[7],g=t[8],v=g*l-u*p,_=u*d-g*r,x=p*r-l*d,b=e*v+n*_+s*x;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const R=1/b;return t[0]=v*R,t[1]=(s*p-g*n)*R,t[2]=(u*n-s*l)*R,t[3]=_*R,t[4]=(g*e-s*d)*R,t[5]=(s*r-u*e)*R,t[6]=x*R,t[7]=(n*d-p*e)*R,t[8]=(l*e-n*r)*R,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,s,r,l,u){const d=Math.cos(r),p=Math.sin(r);return this.set(n*d,n*p,-n*(d*l+p*u)+l+t,-s*p,s*d,-s*(-p*l+d*u)+u+e,0,0,1),this}scale(t,e){return this.premultiply(xA.makeScale(t,e)),this}rotate(t){return this.premultiply(xA.makeRotation(-t)),this}translate(t,e){return this.premultiply(xA.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let s=0;s<9;s++)if(e[s]!==n[s])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const xA=new gn;function tB(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}const X4={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Nd(i,t){return new X4[i](t)}function _g(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function eB(){const i=_g("canvas");return i.style.display="block",i}const yT={};function By(i){i in yT||(yT[i]=!0,console.warn(i))}function j4(i,t,e){return new Promise(function(n,s){function r(){switch(i.clientWaitSync(t,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(r,e);break;default:n()}}setTimeout(r,e)})}function Y4(i){const t=i.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function q4(i){const t=i.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const _T=new gn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),xT=new gn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function W4(){const i={enabled:!0,workingColorSpace:So,spaces:{},convert:function(s,r,l){return this.enabled===!1||r===l||!r||!l||(this.spaces[r].transfer===ii&&(s.r=tc(s.r),s.g=tc(s.g),s.b=tc(s.b)),this.spaces[r].primaries!==this.spaces[l].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===ii&&(s.r=Id(s.r),s.g=Id(s.g),s.b=Id(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Jl?gg:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,l){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[So]:{primaries:t,whitePoint:n,transfer:gg,toXYZ:_T,fromXYZ:xT,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Fs},outputColorSpaceConfig:{drawingBufferColorSpace:Fs}},[Fs]:{primaries:t,whitePoint:n,transfer:ii,toXYZ:_T,fromXYZ:xT,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Fs}}}),i}const Nn=W4();function tc(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Id(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let od;class nB{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{od===void 0&&(od=_g("canvas")),od.width=t.width,od.height=t.height;const s=od.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),n=od}return n.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=_g("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const s=n.getImageData(0,0,t.width,t.height),r=s.data;for(let l=0;l<r.length;l++)r[l]=tc(r[l]/255)*255;return n.putImageData(s,0,0),e}else if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(tc(e[n]/255)*255):e[n]=tc(e[n]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let K4=0;class ou{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:K4++}),this.uuid=cr(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?r.push(AA(s[l].image)):r.push(AA(s[l]))}else r=AA(s);n.url=r}return e||(t.images[this.uuid]=n),n}}function AA(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?nB.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let J4=0;class Jn extends vl{constructor(t=Jn.DEFAULT_IMAGE,e=Jn.DEFAULT_MAPPING,n=Wi,s=Wi,r=Wn,l=Lr,u=Ki,d=Ca,p=Jn.DEFAULT_ANISOTROPY,g=Jl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:J4++}),this.uuid=cr(),this.name="",this.source=new ou(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=l,this.anisotropy=p,this.format=u,this.internalFormat=null,this.type=d,this.offset=new Wt(0,0),this.repeat=new Wt(1,1),this.center=new Wt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isTextureArray=t.isTextureArray,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==du)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case mu:t.x=t.x-Math.floor(t.x);break;case Wi:t.x=t.x<0?0:1;break;case Vd:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case mu:t.y=t.y-Math.floor(t.y);break;case Wi:t.y=t.y<0?0:1;break;case Vd:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}Jn.DEFAULT_IMAGE=null;Jn.DEFAULT_MAPPING=du;Jn.DEFAULT_ANISOTROPY=1;class Hn{constructor(t=0,e=0,n=0,s=1){Hn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,s){return this.x=t,this.y=e,this.z=n,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,s=this.z,r=this.w,l=t.elements;return this.x=l[0]*e+l[4]*n+l[8]*s+l[12]*r,this.y=l[1]*e+l[5]*n+l[9]*s+l[13]*r,this.z=l[2]*e+l[6]*n+l[10]*s+l[14]*r,this.w=l[3]*e+l[7]*n+l[11]*s+l[15]*r,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,s,r;const d=t.elements,p=d[0],g=d[4],v=d[8],_=d[1],x=d[5],b=d[9],R=d[2],E=d[6],M=d[10];if(Math.abs(g-_)<.01&&Math.abs(v-R)<.01&&Math.abs(b-E)<.01){if(Math.abs(g+_)<.1&&Math.abs(v+R)<.1&&Math.abs(b+E)<.1&&Math.abs(p+x+M-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const B=(p+1)/2,D=(x+1)/2,I=(M+1)/2,L=(g+_)/4,V=(v+R)/4,H=(b+E)/4;return B>D&&B>I?B<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(B),s=L/n,r=V/n):D>I?D<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(D),n=L/s,r=H/s):I<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(I),n=V/r,s=H/r),this.set(n,s,r,e),this}let w=Math.sqrt((E-b)*(E-b)+(v-R)*(v-R)+(_-g)*(_-g));return Math.abs(w)<.001&&(w=1),this.x=(E-b)/w,this.y=(v-R)/w,this.z=(_-g)/w,this.w=Math.acos((p+x+M-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=fn(this.x,t.x,e.x),this.y=fn(this.y,t.y,e.y),this.z=fn(this.z,t.z,e.z),this.w=fn(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=fn(this.x,t,e),this.y=fn(this.y,t,e),this.z=fn(this.z,t,e),this.w=fn(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(fn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Y_ extends vl{constructor(t=1,e=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=n.depth?n.depth:1,this.scissor=new Hn(0,0,t,e),this.scissorTest=!1,this.viewport=new Hn(0,0,t,e);const s={width:t,height:e,depth:this.depth};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Wn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},n);const r=new Jn(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const l=n.count;for(let u=0;u<l;u++)this.textures[u]=r.clone(),this.textures[u].isRenderTargetTexture=!0,this.textures[u].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=t,this.textures[s].image.height=e,this.textures[s].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,n=t.textures.length;e<n;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const s=Object.assign({},t.textures[e].image);this.textures[e].source=new ou(s)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Hr extends Y_{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class Ig extends Jn{constructor(t=null,e=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:s},this.magFilter=bs,this.minFilter=bs,this.wrapR=Wi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class Z4 extends Hr{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Ig(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class q_ extends Jn{constructor(t=null,e=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:s},this.magFilter=bs,this.minFilter=bs,this.wrapR=Wi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Q4 extends Hr{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new q_(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class Es{constructor(t=0,e=0,n=0,s=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=s}static slerpFlat(t,e,n,s,r,l,u){let d=n[s+0],p=n[s+1],g=n[s+2],v=n[s+3];const _=r[l+0],x=r[l+1],b=r[l+2],R=r[l+3];if(u===0){t[e+0]=d,t[e+1]=p,t[e+2]=g,t[e+3]=v;return}if(u===1){t[e+0]=_,t[e+1]=x,t[e+2]=b,t[e+3]=R;return}if(v!==R||d!==_||p!==x||g!==b){let E=1-u;const M=d*_+p*x+g*b+v*R,w=M>=0?1:-1,B=1-M*M;if(B>Number.EPSILON){const I=Math.sqrt(B),L=Math.atan2(I,M*w);E=Math.sin(E*L)/I,u=Math.sin(u*L)/I}const D=u*w;if(d=d*E+_*D,p=p*E+x*D,g=g*E+b*D,v=v*E+R*D,E===1-u){const I=1/Math.sqrt(d*d+p*p+g*g+v*v);d*=I,p*=I,g*=I,v*=I}}t[e]=d,t[e+1]=p,t[e+2]=g,t[e+3]=v}static multiplyQuaternionsFlat(t,e,n,s,r,l){const u=n[s],d=n[s+1],p=n[s+2],g=n[s+3],v=r[l],_=r[l+1],x=r[l+2],b=r[l+3];return t[e]=u*b+g*v+d*x-p*_,t[e+1]=d*b+g*_+p*v-u*x,t[e+2]=p*b+g*x+u*_-d*v,t[e+3]=g*b-u*v-d*_-p*x,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,s){return this._x=t,this._y=e,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,s=t._y,r=t._z,l=t._order,u=Math.cos,d=Math.sin,p=u(n/2),g=u(s/2),v=u(r/2),_=d(n/2),x=d(s/2),b=d(r/2);switch(l){case"XYZ":this._x=_*g*v+p*x*b,this._y=p*x*v-_*g*b,this._z=p*g*b+_*x*v,this._w=p*g*v-_*x*b;break;case"YXZ":this._x=_*g*v+p*x*b,this._y=p*x*v-_*g*b,this._z=p*g*b-_*x*v,this._w=p*g*v+_*x*b;break;case"ZXY":this._x=_*g*v-p*x*b,this._y=p*x*v+_*g*b,this._z=p*g*b+_*x*v,this._w=p*g*v-_*x*b;break;case"ZYX":this._x=_*g*v-p*x*b,this._y=p*x*v+_*g*b,this._z=p*g*b-_*x*v,this._w=p*g*v+_*x*b;break;case"YZX":this._x=_*g*v+p*x*b,this._y=p*x*v+_*g*b,this._z=p*g*b-_*x*v,this._w=p*g*v-_*x*b;break;case"XZY":this._x=_*g*v-p*x*b,this._y=p*x*v-_*g*b,this._z=p*g*b+_*x*v,this._w=p*g*v+_*x*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,s=Math.sin(n);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],s=e[4],r=e[8],l=e[1],u=e[5],d=e[9],p=e[2],g=e[6],v=e[10],_=n+u+v;if(_>0){const x=.5/Math.sqrt(_+1);this._w=.25/x,this._x=(g-d)*x,this._y=(r-p)*x,this._z=(l-s)*x}else if(n>u&&n>v){const x=2*Math.sqrt(1+n-u-v);this._w=(g-d)/x,this._x=.25*x,this._y=(s+l)/x,this._z=(r+p)/x}else if(u>v){const x=2*Math.sqrt(1+u-n-v);this._w=(r-p)/x,this._x=(s+l)/x,this._y=.25*x,this._z=(d+g)/x}else{const x=2*Math.sqrt(1+v-n-u);this._w=(l-s)/x,this._x=(r+p)/x,this._y=(d+g)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(fn(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const s=Math.min(1,e/n);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,s=t._y,r=t._z,l=t._w,u=e._x,d=e._y,p=e._z,g=e._w;return this._x=n*g+l*u+s*p-r*d,this._y=s*g+l*d+r*u-n*p,this._z=r*g+l*p+n*d-s*u,this._w=l*g-n*u-s*d-r*p,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const n=this._x,s=this._y,r=this._z,l=this._w;let u=l*t._w+n*t._x+s*t._y+r*t._z;if(u<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,u=-u):this.copy(t),u>=1)return this._w=l,this._x=n,this._y=s,this._z=r,this;const d=1-u*u;if(d<=Number.EPSILON){const x=1-e;return this._w=x*l+e*this._w,this._x=x*n+e*this._x,this._y=x*s+e*this._y,this._z=x*r+e*this._z,this.normalize(),this}const p=Math.sqrt(d),g=Math.atan2(p,u),v=Math.sin((1-e)*g)/p,_=Math.sin(e*g)/p;return this._w=l*v+this._w*_,this._x=n*v+this._x*_,this._y=s*v+this._y*_,this._z=r*v+this._z*_,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(t),s*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Q{constructor(t=0,e=0,n=0){Q.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(AT.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(AT.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*s,this.y=r[1]*e+r[4]*n+r[7]*s,this.z=r[2]*e+r[5]*n+r[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,s=this.z,r=t.elements,l=1/(r[3]*e+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*s+r[12])*l,this.y=(r[1]*e+r[5]*n+r[9]*s+r[13])*l,this.z=(r[2]*e+r[6]*n+r[10]*s+r[14])*l,this}applyQuaternion(t){const e=this.x,n=this.y,s=this.z,r=t.x,l=t.y,u=t.z,d=t.w,p=2*(l*s-u*n),g=2*(u*e-r*s),v=2*(r*n-l*e);return this.x=e+d*p+l*v-u*g,this.y=n+d*g+u*p-r*v,this.z=s+d*v+r*g-l*p,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*s,this.y=r[1]*e+r[5]*n+r[9]*s,this.z=r[2]*e+r[6]*n+r[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=fn(this.x,t.x,e.x),this.y=fn(this.y,t.y,e.y),this.z=fn(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=fn(this.x,t,e),this.y=fn(this.y,t,e),this.z=fn(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(fn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,s=t.y,r=t.z,l=e.x,u=e.y,d=e.z;return this.x=s*d-r*u,this.y=r*l-n*d,this.z=n*u-s*l,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return SA.copy(this).projectOnVector(t),this.sub(SA)}reflect(t){return this.sub(SA.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(fn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,s=this.z-t.z;return e*e+n*n+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const s=Math.sin(e)*t;return this.x=s*Math.sin(n),this.y=Math.cos(e)*t,this.z=s*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const SA=new Q,AT=new Es;class Hs{constructor(t=new Q(1/0,1/0,1/0),e=new Q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(ho.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(ho.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=ho.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(n!==void 0){const r=n.getAttribute("position");if(e===!0&&r!==void 0&&t.isInstancedMesh!==!0)for(let l=0,u=r.count;l<u;l++)t.isMesh===!0?t.getVertexPosition(l,ho):ho.fromBufferAttribute(r,l),ho.applyMatrix4(t.matrixWorld),this.expandByPoint(ho);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Cv.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Cv.copy(n.boundingBox)),Cv.applyMatrix4(t.matrixWorld),this.union(Cv)}const s=t.children;for(let r=0,l=s.length;r<l;r++)this.expandByObject(s[r],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,ho),ho.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Tm),Rv.subVectors(this.max,Tm),ld.subVectors(t.a,Tm),cd.subVectors(t.b,Tm),ud.subVectors(t.c,Tm),Jc.subVectors(cd,ld),Zc.subVectors(ud,cd),mf.subVectors(ld,ud);let e=[0,-Jc.z,Jc.y,0,-Zc.z,Zc.y,0,-mf.z,mf.y,Jc.z,0,-Jc.x,Zc.z,0,-Zc.x,mf.z,0,-mf.x,-Jc.y,Jc.x,0,-Zc.y,Zc.x,0,-mf.y,mf.x,0];return!MA(e,ld,cd,ud,Rv)||(e=[1,0,0,0,1,0,0,0,1],!MA(e,ld,cd,ud,Rv))?!1:(wv.crossVectors(Jc,Zc),e=[wv.x,wv.y,wv.z],MA(e,ld,cd,ud,Rv))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,ho).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(ho).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Gl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Gl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Gl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Gl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Gl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Gl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Gl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Gl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Gl),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Gl=[new Q,new Q,new Q,new Q,new Q,new Q,new Q,new Q],ho=new Q,Cv=new Hs,ld=new Q,cd=new Q,ud=new Q,Jc=new Q,Zc=new Q,mf=new Q,Tm=new Q,Rv=new Q,wv=new Q,gf=new Q;function MA(i,t,e,n,s){for(let r=0,l=i.length-3;r<=l;r+=3){gf.fromArray(i,r);const u=s.x*Math.abs(gf.x)+s.y*Math.abs(gf.y)+s.z*Math.abs(gf.z),d=t.dot(gf),p=e.dot(gf),g=n.dot(gf);if(Math.max(-Math.max(d,p,g),Math.min(d,p,g))>u)return!1}return!0}const $4=new Hs,Cm=new Q,bA=new Q;class Ts{constructor(t=new Q,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;e!==void 0?n.copy(e):$4.setFromPoints(t).getCenter(n);let s=0;for(let r=0,l=t.length;r<l;r++)s=Math.max(s,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Cm.subVectors(t,this.center);const e=Cm.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),s=(n-this.radius)*.5;this.center.addScaledVector(Cm,s/n),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(bA.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Cm.copy(t.center).add(bA)),this.expandByPoint(Cm.copy(t.center).sub(bA))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Vl=new Q,EA=new Q,Bv=new Q,Qc=new Q,TA=new Q,Dv=new Q,CA=new Q;class nh{constructor(t=new Q,e=new Q(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Vl)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Vl.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Vl.copy(this.origin).addScaledVector(this.direction,e),Vl.distanceToSquared(t))}distanceSqToSegment(t,e,n,s){EA.copy(t).add(e).multiplyScalar(.5),Bv.copy(e).sub(t).normalize(),Qc.copy(this.origin).sub(EA);const r=t.distanceTo(e)*.5,l=-this.direction.dot(Bv),u=Qc.dot(this.direction),d=-Qc.dot(Bv),p=Qc.lengthSq(),g=Math.abs(1-l*l);let v,_,x,b;if(g>0)if(v=l*d-u,_=l*u-d,b=r*g,v>=0)if(_>=-b)if(_<=b){const R=1/g;v*=R,_*=R,x=v*(v+l*_+2*u)+_*(l*v+_+2*d)+p}else _=r,v=Math.max(0,-(l*_+u)),x=-v*v+_*(_+2*d)+p;else _=-r,v=Math.max(0,-(l*_+u)),x=-v*v+_*(_+2*d)+p;else _<=-b?(v=Math.max(0,-(-l*r+u)),_=v>0?-r:Math.min(Math.max(-r,-d),r),x=-v*v+_*(_+2*d)+p):_<=b?(v=0,_=Math.min(Math.max(-r,-d),r),x=_*(_+2*d)+p):(v=Math.max(0,-(l*r+u)),_=v>0?r:Math.min(Math.max(-r,-d),r),x=-v*v+_*(_+2*d)+p);else _=l>0?-r:r,v=Math.max(0,-(l*_+u)),x=-v*v+_*(_+2*d)+p;return n&&n.copy(this.origin).addScaledVector(this.direction,v),s&&s.copy(EA).addScaledVector(Bv,_),x}intersectSphere(t,e){Vl.subVectors(t.center,this.origin);const n=Vl.dot(this.direction),s=Vl.dot(Vl)-n*n,r=t.radius*t.radius;if(s>r)return null;const l=Math.sqrt(r-s),u=n-l,d=n+l;return d<0?null:u<0?this.at(d,e):this.at(u,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,s,r,l,u,d;const p=1/this.direction.x,g=1/this.direction.y,v=1/this.direction.z,_=this.origin;return p>=0?(n=(t.min.x-_.x)*p,s=(t.max.x-_.x)*p):(n=(t.max.x-_.x)*p,s=(t.min.x-_.x)*p),g>=0?(r=(t.min.y-_.y)*g,l=(t.max.y-_.y)*g):(r=(t.max.y-_.y)*g,l=(t.min.y-_.y)*g),n>l||r>s||((r>n||isNaN(n))&&(n=r),(l<s||isNaN(s))&&(s=l),v>=0?(u=(t.min.z-_.z)*v,d=(t.max.z-_.z)*v):(u=(t.max.z-_.z)*v,d=(t.min.z-_.z)*v),n>d||u>s)||((u>n||n!==n)&&(n=u),(d<s||s!==s)&&(s=d),s<0)?null:this.at(n>=0?n:s,e)}intersectsBox(t){return this.intersectBox(t,Vl)!==null}intersectTriangle(t,e,n,s,r){TA.subVectors(e,t),Dv.subVectors(n,t),CA.crossVectors(TA,Dv);let l=this.direction.dot(CA),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;Qc.subVectors(this.origin,t);const d=u*this.direction.dot(Dv.crossVectors(Qc,Dv));if(d<0)return null;const p=u*this.direction.dot(TA.cross(Qc));if(p<0||d+p>l)return null;const g=-u*Qc.dot(CA);return g<0?null:this.at(g/l,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class We{constructor(t,e,n,s,r,l,u,d,p,g,v,_,x,b,R,E){We.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,n,s,r,l,u,d,p,g,v,_,x,b,R,E)}set(t,e,n,s,r,l,u,d,p,g,v,_,x,b,R,E){const M=this.elements;return M[0]=t,M[4]=e,M[8]=n,M[12]=s,M[1]=r,M[5]=l,M[9]=u,M[13]=d,M[2]=p,M[6]=g,M[10]=v,M[14]=_,M[3]=x,M[7]=b,M[11]=R,M[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new We().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,s=1/fd.setFromMatrixColumn(t,0).length(),r=1/fd.setFromMatrixColumn(t,1).length(),l=1/fd.setFromMatrixColumn(t,2).length();return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*l,e[9]=n[9]*l,e[10]=n[10]*l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,s=t.y,r=t.z,l=Math.cos(n),u=Math.sin(n),d=Math.cos(s),p=Math.sin(s),g=Math.cos(r),v=Math.sin(r);if(t.order==="XYZ"){const _=l*g,x=l*v,b=u*g,R=u*v;e[0]=d*g,e[4]=-d*v,e[8]=p,e[1]=x+b*p,e[5]=_-R*p,e[9]=-u*d,e[2]=R-_*p,e[6]=b+x*p,e[10]=l*d}else if(t.order==="YXZ"){const _=d*g,x=d*v,b=p*g,R=p*v;e[0]=_+R*u,e[4]=b*u-x,e[8]=l*p,e[1]=l*v,e[5]=l*g,e[9]=-u,e[2]=x*u-b,e[6]=R+_*u,e[10]=l*d}else if(t.order==="ZXY"){const _=d*g,x=d*v,b=p*g,R=p*v;e[0]=_-R*u,e[4]=-l*v,e[8]=b+x*u,e[1]=x+b*u,e[5]=l*g,e[9]=R-_*u,e[2]=-l*p,e[6]=u,e[10]=l*d}else if(t.order==="ZYX"){const _=l*g,x=l*v,b=u*g,R=u*v;e[0]=d*g,e[4]=b*p-x,e[8]=_*p+R,e[1]=d*v,e[5]=R*p+_,e[9]=x*p-b,e[2]=-p,e[6]=u*d,e[10]=l*d}else if(t.order==="YZX"){const _=l*d,x=l*p,b=u*d,R=u*p;e[0]=d*g,e[4]=R-_*v,e[8]=b*v+x,e[1]=v,e[5]=l*g,e[9]=-u*g,e[2]=-p*g,e[6]=x*v+b,e[10]=_-R*v}else if(t.order==="XZY"){const _=l*d,x=l*p,b=u*d,R=u*p;e[0]=d*g,e[4]=-v,e[8]=p*g,e[1]=_*v+R,e[5]=l*g,e[9]=x*v-b,e[2]=b*v-x,e[6]=u*g,e[10]=R*v+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(tP,t,eP)}lookAt(t,e,n){const s=this.elements;return or.subVectors(t,e),or.lengthSq()===0&&(or.z=1),or.normalize(),$c.crossVectors(n,or),$c.lengthSq()===0&&(Math.abs(n.z)===1?or.x+=1e-4:or.z+=1e-4,or.normalize(),$c.crossVectors(n,or)),$c.normalize(),Uv.crossVectors(or,$c),s[0]=$c.x,s[4]=Uv.x,s[8]=or.x,s[1]=$c.y,s[5]=Uv.y,s[9]=or.y,s[2]=$c.z,s[6]=Uv.z,s[10]=or.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,s=e.elements,r=this.elements,l=n[0],u=n[4],d=n[8],p=n[12],g=n[1],v=n[5],_=n[9],x=n[13],b=n[2],R=n[6],E=n[10],M=n[14],w=n[3],B=n[7],D=n[11],I=n[15],L=s[0],V=s[4],H=s[8],N=s[12],O=s[1],Y=s[5],ht=s[9],et=s[13],dt=s[2],mt=s[6],F=s[10],K=s[14],$=s[3],yt=s[7],X=s[11],lt=s[15];return r[0]=l*L+u*O+d*dt+p*$,r[4]=l*V+u*Y+d*mt+p*yt,r[8]=l*H+u*ht+d*F+p*X,r[12]=l*N+u*et+d*K+p*lt,r[1]=g*L+v*O+_*dt+x*$,r[5]=g*V+v*Y+_*mt+x*yt,r[9]=g*H+v*ht+_*F+x*X,r[13]=g*N+v*et+_*K+x*lt,r[2]=b*L+R*O+E*dt+M*$,r[6]=b*V+R*Y+E*mt+M*yt,r[10]=b*H+R*ht+E*F+M*X,r[14]=b*N+R*et+E*K+M*lt,r[3]=w*L+B*O+D*dt+I*$,r[7]=w*V+B*Y+D*mt+I*yt,r[11]=w*H+B*ht+D*F+I*X,r[15]=w*N+B*et+D*K+I*lt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],s=t[8],r=t[12],l=t[1],u=t[5],d=t[9],p=t[13],g=t[2],v=t[6],_=t[10],x=t[14],b=t[3],R=t[7],E=t[11],M=t[15];return b*(+r*d*v-s*p*v-r*u*_+n*p*_+s*u*x-n*d*x)+R*(+e*d*x-e*p*_+r*l*_-s*l*x+s*p*g-r*d*g)+E*(+e*p*v-e*u*x-r*l*v+n*l*x+r*u*g-n*p*g)+M*(-s*u*g-e*d*v+e*u*_+s*l*v-n*l*_+n*d*g)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],l=t[4],u=t[5],d=t[6],p=t[7],g=t[8],v=t[9],_=t[10],x=t[11],b=t[12],R=t[13],E=t[14],M=t[15],w=v*E*p-R*_*p+R*d*x-u*E*x-v*d*M+u*_*M,B=b*_*p-g*E*p-b*d*x+l*E*x+g*d*M-l*_*M,D=g*R*p-b*v*p+b*u*x-l*R*x-g*u*M+l*v*M,I=b*v*d-g*R*d-b*u*_+l*R*_+g*u*E-l*v*E,L=e*w+n*B+s*D+r*I;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const V=1/L;return t[0]=w*V,t[1]=(R*_*r-v*E*r-R*s*x+n*E*x+v*s*M-n*_*M)*V,t[2]=(u*E*r-R*d*r+R*s*p-n*E*p-u*s*M+n*d*M)*V,t[3]=(v*d*r-u*_*r-v*s*p+n*_*p+u*s*x-n*d*x)*V,t[4]=B*V,t[5]=(g*E*r-b*_*r+b*s*x-e*E*x-g*s*M+e*_*M)*V,t[6]=(b*d*r-l*E*r-b*s*p+e*E*p+l*s*M-e*d*M)*V,t[7]=(l*_*r-g*d*r+g*s*p-e*_*p-l*s*x+e*d*x)*V,t[8]=D*V,t[9]=(b*v*r-g*R*r-b*n*x+e*R*x+g*n*M-e*v*M)*V,t[10]=(l*R*r-b*u*r+b*n*p-e*R*p-l*n*M+e*u*M)*V,t[11]=(g*u*r-l*v*r-g*n*p+e*v*p+l*n*x-e*u*x)*V,t[12]=I*V,t[13]=(g*R*s-b*v*s+b*n*_-e*R*_-g*n*E+e*v*E)*V,t[14]=(b*u*s-l*R*s-b*n*d+e*R*d+l*n*E-e*u*E)*V,t[15]=(l*v*s-g*u*s+g*n*d-e*v*d-l*n*_+e*u*_)*V,this}scale(t){const e=this.elements,n=t.x,s=t.y,r=t.z;return e[0]*=n,e[4]*=s,e[8]*=r,e[1]*=n,e[5]*=s,e[9]*=r,e[2]*=n,e[6]*=s,e[10]*=r,e[3]*=n,e[7]*=s,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,s))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),s=Math.sin(e),r=1-n,l=t.x,u=t.y,d=t.z,p=r*l,g=r*u;return this.set(p*l+n,p*u-s*d,p*d+s*u,0,p*u+s*d,g*u+n,g*d-s*l,0,p*d-s*u,g*d+s*l,r*d*d+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,s,r,l){return this.set(1,n,r,0,t,1,l,0,e,s,1,0,0,0,0,1),this}compose(t,e,n){const s=this.elements,r=e._x,l=e._y,u=e._z,d=e._w,p=r+r,g=l+l,v=u+u,_=r*p,x=r*g,b=r*v,R=l*g,E=l*v,M=u*v,w=d*p,B=d*g,D=d*v,I=n.x,L=n.y,V=n.z;return s[0]=(1-(R+M))*I,s[1]=(x+D)*I,s[2]=(b-B)*I,s[3]=0,s[4]=(x-D)*L,s[5]=(1-(_+M))*L,s[6]=(E+w)*L,s[7]=0,s[8]=(b+B)*V,s[9]=(E-w)*V,s[10]=(1-(_+R))*V,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,n){const s=this.elements;let r=fd.set(s[0],s[1],s[2]).length();const l=fd.set(s[4],s[5],s[6]).length(),u=fd.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),t.x=s[12],t.y=s[13],t.z=s[14],po.copy(this);const p=1/r,g=1/l,v=1/u;return po.elements[0]*=p,po.elements[1]*=p,po.elements[2]*=p,po.elements[4]*=g,po.elements[5]*=g,po.elements[6]*=g,po.elements[8]*=v,po.elements[9]*=v,po.elements[10]*=v,e.setFromRotationMatrix(po),n.x=r,n.y=l,n.z=u,this}makePerspective(t,e,n,s,r,l,u=Ir){const d=this.elements,p=2*r/(e-t),g=2*r/(n-s),v=(e+t)/(e-t),_=(n+s)/(n-s);let x,b;if(u===Ir)x=-(l+r)/(l-r),b=-2*l*r/(l-r);else if(u===yg)x=-l/(l-r),b=-l*r/(l-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return d[0]=p,d[4]=0,d[8]=v,d[12]=0,d[1]=0,d[5]=g,d[9]=_,d[13]=0,d[2]=0,d[6]=0,d[10]=x,d[14]=b,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(t,e,n,s,r,l,u=Ir){const d=this.elements,p=1/(e-t),g=1/(n-s),v=1/(l-r),_=(e+t)*p,x=(n+s)*g;let b,R;if(u===Ir)b=(l+r)*v,R=-2*v;else if(u===yg)b=r*v,R=-1*v;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return d[0]=2*p,d[4]=0,d[8]=0,d[12]=-_,d[1]=0,d[5]=2*g,d[9]=0,d[13]=-x,d[2]=0,d[6]=0,d[10]=R,d[14]=-b,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let s=0;s<16;s++)if(e[s]!==n[s])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const fd=new Q,po=new We,tP=new Q(0,0,0),eP=new Q(1,1,1),$c=new Q,Uv=new Q,or=new Q,ST=new We,MT=new Es;class ur{constructor(t=0,e=0,n=0,s=ur.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,s=this._order){return this._x=t,this._y=e,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const s=t.elements,r=s[0],l=s[4],u=s[8],d=s[1],p=s[5],g=s[9],v=s[2],_=s[6],x=s[10];switch(e){case"XYZ":this._y=Math.asin(fn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-g,x),this._z=Math.atan2(-l,r)):(this._x=Math.atan2(_,p),this._z=0);break;case"YXZ":this._x=Math.asin(-fn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(u,x),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-v,r),this._z=0);break;case"ZXY":this._x=Math.asin(fn(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-v,x),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(d,r));break;case"ZYX":this._y=Math.asin(-fn(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(_,x),this._z=Math.atan2(d,r)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(fn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-g,p),this._y=Math.atan2(-v,r)):(this._x=0,this._y=Math.atan2(u,x));break;case"XZY":this._z=Math.asin(-fn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(_,p),this._y=Math.atan2(u,r)):(this._x=Math.atan2(-g,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return ST.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ST,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return MT.setFromEuler(this),this.setFromQuaternion(MT,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ur.DEFAULT_ORDER="XYZ";class Jd{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let nP=0;const bT=new Q,hd=new Es,kl=new We,Nv=new Q,Rm=new Q,iP=new Q,sP=new Es,ET=new Q(1,0,0),TT=new Q(0,1,0),CT=new Q(0,0,1),RT={type:"added"},aP={type:"removed"},dd={type:"childadded",child:null},RA={type:"childremoved",child:null};class On extends vl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:nP++}),this.uuid=cr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=On.DEFAULT_UP.clone();const t=new Q,e=new ur,n=new Es,s=new Q(1,1,1);function r(){n.setFromEuler(e,!1)}function l(){e.setFromQuaternion(n,void 0,!1)}e._onChange(r),n._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new We},normalMatrix:{value:new gn}}),this.matrix=new We,this.matrixWorld=new We,this.matrixAutoUpdate=On.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=On.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Jd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return hd.setFromAxisAngle(t,e),this.quaternion.multiply(hd),this}rotateOnWorldAxis(t,e){return hd.setFromAxisAngle(t,e),this.quaternion.premultiply(hd),this}rotateX(t){return this.rotateOnAxis(ET,t)}rotateY(t){return this.rotateOnAxis(TT,t)}rotateZ(t){return this.rotateOnAxis(CT,t)}translateOnAxis(t,e){return bT.copy(t).applyQuaternion(this.quaternion),this.position.add(bT.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(ET,t)}translateY(t){return this.translateOnAxis(TT,t)}translateZ(t){return this.translateOnAxis(CT,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(kl.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Nv.copy(t):Nv.set(t,e,n);const s=this.parent;this.updateWorldMatrix(!0,!1),Rm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?kl.lookAt(Rm,Nv,this.up):kl.lookAt(Nv,Rm,this.up),this.quaternion.setFromRotationMatrix(kl),s&&(kl.extractRotation(s.matrixWorld),hd.setFromRotationMatrix(kl),this.quaternion.premultiply(hd.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(RT),dd.child=t,this.dispatchEvent(dd),dd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(aP),RA.child=t,this.dispatchEvent(RA),RA.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),kl.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),kl.multiply(t.parent.matrixWorld)),t.applyMatrix4(kl),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(RT),dd.child=t,this.dispatchEvent(dd),dd.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,s=this.children.length;n<s;n++){const l=this.children[n].getObjectByProperty(t,e);if(l!==void 0)return l}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const s=this.children;for(let r=0,l=s.length;r<l;r++)s[r].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rm,t,iP),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rm,sP,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const s=this.children;for(let r=0,l=s.length;r<l;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(u=>({...u,boundingBox:u.boundingBox?{min:u.boundingBox.min.toArray(),max:u.boundingBox.max.toArray()}:void 0,boundingSphere:u.boundingSphere?{radius:u.boundingSphere.radius,center:u.boundingSphere.center.toArray()}:void 0})),s.instanceInfo=this._instanceInfo.map(u=>({...u})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(t),s.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function r(u,d){return u[d.uuid]===void 0&&(u[d.uuid]=d.toJSON(t)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(t.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const d=u.shapes;if(Array.isArray(d))for(let p=0,g=d.length;p<g;p++){const v=d[p];r(t.shapes,v)}else r(t.shapes,d)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let d=0,p=this.material.length;d<p;d++)u.push(r(t.materials,this.material[d]));s.material=u}else s.material=r(t.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const d=this.animations[u];s.animations.push(r(t.animations,d))}}if(e){const u=l(t.geometries),d=l(t.materials),p=l(t.textures),g=l(t.images),v=l(t.shapes),_=l(t.skeletons),x=l(t.animations),b=l(t.nodes);u.length>0&&(n.geometries=u),d.length>0&&(n.materials=d),p.length>0&&(n.textures=p),g.length>0&&(n.images=g),v.length>0&&(n.shapes=v),_.length>0&&(n.skeletons=_),x.length>0&&(n.animations=x),b.length>0&&(n.nodes=b)}return n.object=s,n;function l(u){const d=[];for(const p in u){const g=u[p];delete g.metadata,d.push(g)}return d}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const s=t.children[n];this.add(s.clone())}return this}}On.DEFAULT_UP=new Q(0,1,0);On.DEFAULT_MATRIX_AUTO_UPDATE=!0;On.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const mo=new Q,Xl=new Q,wA=new Q,jl=new Q,pd=new Q,md=new Q,wT=new Q,BA=new Q,DA=new Q,UA=new Q,NA=new Hn,OA=new Hn,LA=new Hn;class Xa{constructor(t=new Q,e=new Q,n=new Q){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,s){s.subVectors(n,e),mo.subVectors(t,e),s.cross(mo);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(t,e,n,s,r){mo.subVectors(s,e),Xl.subVectors(n,e),wA.subVectors(t,e);const l=mo.dot(mo),u=mo.dot(Xl),d=mo.dot(wA),p=Xl.dot(Xl),g=Xl.dot(wA),v=l*p-u*u;if(v===0)return r.set(0,0,0),null;const _=1/v,x=(p*d-u*g)*_,b=(l*g-u*d)*_;return r.set(1-x-b,b,x)}static containsPoint(t,e,n,s){return this.getBarycoord(t,e,n,s,jl)===null?!1:jl.x>=0&&jl.y>=0&&jl.x+jl.y<=1}static getInterpolation(t,e,n,s,r,l,u,d){return this.getBarycoord(t,e,n,s,jl)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(r,jl.x),d.addScaledVector(l,jl.y),d.addScaledVector(u,jl.z),d)}static getInterpolatedAttribute(t,e,n,s,r,l){return NA.setScalar(0),OA.setScalar(0),LA.setScalar(0),NA.fromBufferAttribute(t,e),OA.fromBufferAttribute(t,n),LA.fromBufferAttribute(t,s),l.setScalar(0),l.addScaledVector(NA,r.x),l.addScaledVector(OA,r.y),l.addScaledVector(LA,r.z),l}static isFrontFacing(t,e,n,s){return mo.subVectors(n,e),Xl.subVectors(t,e),mo.cross(Xl).dot(s)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,s){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,e,n,s){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return mo.subVectors(this.c,this.b),Xl.subVectors(this.a,this.b),mo.cross(Xl).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Xa.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Xa.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,s,r){return Xa.getInterpolation(t,this.a,this.b,this.c,e,n,s,r)}containsPoint(t){return Xa.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Xa.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,s=this.b,r=this.c;let l,u;pd.subVectors(s,n),md.subVectors(r,n),BA.subVectors(t,n);const d=pd.dot(BA),p=md.dot(BA);if(d<=0&&p<=0)return e.copy(n);DA.subVectors(t,s);const g=pd.dot(DA),v=md.dot(DA);if(g>=0&&v<=g)return e.copy(s);const _=d*v-g*p;if(_<=0&&d>=0&&g<=0)return l=d/(d-g),e.copy(n).addScaledVector(pd,l);UA.subVectors(t,r);const x=pd.dot(UA),b=md.dot(UA);if(b>=0&&x<=b)return e.copy(r);const R=x*p-d*b;if(R<=0&&p>=0&&b<=0)return u=p/(p-b),e.copy(n).addScaledVector(md,u);const E=g*b-x*v;if(E<=0&&v-g>=0&&x-b>=0)return wT.subVectors(r,s),u=(v-g)/(v-g+(x-b)),e.copy(s).addScaledVector(wT,u);const M=1/(E+R+_);return l=R*M,u=_*M,e.copy(n).addScaledVector(pd,l).addScaledVector(md,u)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const iB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},tu={h:0,s:0,l:0},Ov={h:0,s:0,l:0};function IA(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*6*(2/3-e):i}class xe{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(e===void 0&&n===void 0){const s=t;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Fs){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Nn.toWorkingColorSpace(this,e),this}setRGB(t,e,n,s=Nn.workingColorSpace){return this.r=t,this.g=e,this.b=n,Nn.toWorkingColorSpace(this,s),this}setHSL(t,e,n,s=Nn.workingColorSpace){if(t=dM(t,1),e=fn(e,0,1),n=fn(n,0,1),e===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,l=2*n-r;this.r=IA(l,r,t+1/3),this.g=IA(l,r,t),this.b=IA(l,r,t-1/3)}return Nn.toWorkingColorSpace(this,s),this}setStyle(t,e=Fs){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=s[1],l=r.length;if(l===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,e);if(l===6)return this.setHex(parseInt(r,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Fs){const n=iB[t.toLowerCase()];return n!==void 0?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=tc(t.r),this.g=tc(t.g),this.b=tc(t.b),this}copyLinearToSRGB(t){return this.r=Id(t.r),this.g=Id(t.g),this.b=Id(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Fs){return Nn.fromWorkingColorSpace($s.copy(this),t),Math.round(fn($s.r*255,0,255))*65536+Math.round(fn($s.g*255,0,255))*256+Math.round(fn($s.b*255,0,255))}getHexString(t=Fs){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Nn.workingColorSpace){Nn.fromWorkingColorSpace($s.copy(this),e);const n=$s.r,s=$s.g,r=$s.b,l=Math.max(n,s,r),u=Math.min(n,s,r);let d,p;const g=(u+l)/2;if(u===l)d=0,p=0;else{const v=l-u;switch(p=g<=.5?v/(l+u):v/(2-l-u),l){case n:d=(s-r)/v+(s<r?6:0);break;case s:d=(r-n)/v+2;break;case r:d=(n-s)/v+4;break}d/=6}return t.h=d,t.s=p,t.l=g,t}getRGB(t,e=Nn.workingColorSpace){return Nn.fromWorkingColorSpace($s.copy(this),e),t.r=$s.r,t.g=$s.g,t.b=$s.b,t}getStyle(t=Fs){Nn.fromWorkingColorSpace($s.copy(this),t);const e=$s.r,n=$s.g,s=$s.b;return t!==Fs?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(t,e,n){return this.getHSL(tu),this.setHSL(tu.h+t,tu.s+e,tu.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(tu),t.getHSL(Ov);const n=ng(tu.h,Ov.h,e),s=ng(tu.s,Ov.s,e),r=ng(tu.l,Ov.l,e);return this.setHSL(n,s,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,s=this.b,r=t.elements;return this.r=r[0]*e+r[3]*n+r[6]*s,this.g=r[1]*e+r[4]*n+r[7]*s,this.b=r[2]*e+r[5]*n+r[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const $s=new xe;xe.NAMES=iB;let rP=0;class hs extends vl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:rP++}),this.uuid=cr(),this.name="",this.type="Material",this.blending=Yf,this.side=dl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Vy,this.blendDst=ky,this.blendEquation=ru,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new xe(0,0,0),this.blendAlpha=0,this.depthFunc=Kf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=sS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Uf,this.stencilZFail=Uf,this.stencilZPass=Uf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const s=this[e];if(s===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Yf&&(n.blending=this.blending),this.side!==dl&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Vy&&(n.blendSrc=this.blendSrc),this.blendDst!==ky&&(n.blendDst=this.blendDst),this.blendEquation!==ru&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Kf&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==sS&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Uf&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Uf&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Uf&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(r){const l=[];for(const u in r){const d=r[u];delete d.metadata,l.push(d)}return l}if(e){const r=s(t.textures),l=s(t.images);r.length>0&&(n.textures=r),l.length>0&&(n.images=l)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const s=e.length;n=new Array(s);for(let r=0;r!==s;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Ya extends hs{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new xe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.combine=Ug,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Zl=oP();function oP(){const i=new ArrayBuffer(4),t=new Float32Array(i),e=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let d=0;d<256;++d){const p=d-127;p<-27?(n[d]=0,n[d|256]=32768,s[d]=24,s[d|256]=24):p<-14?(n[d]=1024>>-p-14,n[d|256]=1024>>-p-14|32768,s[d]=-p-1,s[d|256]=-p-1):p<=15?(n[d]=p+15<<10,n[d|256]=p+15<<10|32768,s[d]=13,s[d|256]=13):p<128?(n[d]=31744,n[d|256]=64512,s[d]=24,s[d|256]=24):(n[d]=31744,n[d|256]=64512,s[d]=13,s[d|256]=13)}const r=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64);for(let d=1;d<1024;++d){let p=d<<13,g=0;for(;(p&8388608)===0;)p<<=1,g-=8388608;p&=-8388609,g+=947912704,r[d]=p|g}for(let d=1024;d<2048;++d)r[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)l[d]=d<<23;l[31]=1199570944,l[32]=2147483648;for(let d=33;d<63;++d)l[d]=2147483648+(d-32<<23);l[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(u[d]=1024);return{floatView:t,uint32View:e,baseTable:n,shiftTable:s,mantissaTable:r,exponentTable:l,offsetTable:u}}function Va(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=fn(i,-65504,65504),Zl.floatView[0]=i;const t=Zl.uint32View[0],e=t>>23&511;return Zl.baseTable[e]+((t&8388607)>>Zl.shiftTable[e])}function Vm(i){const t=i>>10;return Zl.uint32View[0]=Zl.mantissaTable[Zl.offsetTable[t]+(i&1023)]+Zl.exponentTable[t],Zl.floatView[0]}class zf{static toHalfFloat(t){return Va(t)}static fromHalfFloat(t){return Vm(t)}}const ns=new Q,Lv=new Wt;let lP=0;class zn{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:lP++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=vg,this.updateRanges=[],this.gpuType=Li,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[t+s]=e.array[n+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)Lv.fromBufferAttribute(this,e),Lv.applyMatrix3(t),this.setXY(e,Lv.x,Lv.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)ns.fromBufferAttribute(this,e),ns.applyMatrix3(t),this.setXYZ(e,ns.x,ns.y,ns.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)ns.fromBufferAttribute(this,e),ns.applyMatrix4(t),this.setXYZ(e,ns.x,ns.y,ns.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)ns.fromBufferAttribute(this,e),ns.applyNormalMatrix(t),this.setXYZ(e,ns.x,ns.y,ns.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)ns.fromBufferAttribute(this,e),ns.transformDirection(t),this.setXYZ(e,ns.x,ns.y,ns.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=ba(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=_n(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=ba(e,this.array)),e}setX(t,e){return this.normalized&&(e=_n(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=ba(e,this.array)),e}setY(t,e){return this.normalized&&(e=_n(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=ba(e,this.array)),e}setZ(t,e){return this.normalized&&(e=_n(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=ba(e,this.array)),e}setW(t,e){return this.normalized&&(e=_n(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=_n(e,this.array),n=_n(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,s){return t*=this.itemSize,this.normalized&&(e=_n(e,this.array),n=_n(n,this.array),s=_n(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=s,this}setXYZW(t,e,n,s,r){return t*=this.itemSize,this.normalized&&(e=_n(e,this.array),n=_n(n,this.array),s=_n(s,this.array),r=_n(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=s,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==vg&&(t.usage=this.usage),t}}class cP extends zn{constructor(t,e,n){super(new Int8Array(t),e,n)}}class uP extends zn{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class fP extends zn{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class hP extends zn{constructor(t,e,n){super(new Int16Array(t),e,n)}}class pM extends zn{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class dP extends zn{constructor(t,e,n){super(new Int32Array(t),e,n)}}class mM extends zn{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class pP extends zn{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=Vm(this.array[t*this.itemSize]);return this.normalized&&(e=ba(e,this.array)),e}setX(t,e){return this.normalized&&(e=_n(e,this.array)),this.array[t*this.itemSize]=Va(e),this}getY(t){let e=Vm(this.array[t*this.itemSize+1]);return this.normalized&&(e=ba(e,this.array)),e}setY(t,e){return this.normalized&&(e=_n(e,this.array)),this.array[t*this.itemSize+1]=Va(e),this}getZ(t){let e=Vm(this.array[t*this.itemSize+2]);return this.normalized&&(e=ba(e,this.array)),e}setZ(t,e){return this.normalized&&(e=_n(e,this.array)),this.array[t*this.itemSize+2]=Va(e),this}getW(t){let e=Vm(this.array[t*this.itemSize+3]);return this.normalized&&(e=ba(e,this.array)),e}setW(t,e){return this.normalized&&(e=_n(e,this.array)),this.array[t*this.itemSize+3]=Va(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=_n(e,this.array),n=_n(n,this.array)),this.array[t+0]=Va(e),this.array[t+1]=Va(n),this}setXYZ(t,e,n,s){return t*=this.itemSize,this.normalized&&(e=_n(e,this.array),n=_n(n,this.array),s=_n(s,this.array)),this.array[t+0]=Va(e),this.array[t+1]=Va(n),this.array[t+2]=Va(s),this}setXYZW(t,e,n,s,r){return t*=this.itemSize,this.normalized&&(e=_n(e,this.array),n=_n(n,this.array),s=_n(s,this.array),r=_n(r,this.array)),this.array[t+0]=Va(e),this.array[t+1]=Va(n),this.array[t+2]=Va(s),this.array[t+3]=Va(r),this}}class Oe extends zn{constructor(t,e,n){super(new Float32Array(t),e,n)}}let mP=0;const Dr=new We,PA=new On,gd=new Q,lr=new Hs,wm=new Hs,Ss=new Q;class hn extends vl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:mP++}),this.uuid=cr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(tB(t)?mM:pM)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new gn().getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Dr.makeRotationFromQuaternion(t),this.applyMatrix4(Dr),this}rotateX(t){return Dr.makeRotationX(t),this.applyMatrix4(Dr),this}rotateY(t){return Dr.makeRotationY(t),this.applyMatrix4(Dr),this}rotateZ(t){return Dr.makeRotationZ(t),this.applyMatrix4(Dr),this}translate(t,e,n){return Dr.makeTranslation(t,e,n),this.applyMatrix4(Dr),this}scale(t,e,n){return Dr.makeScale(t,e,n),this.applyMatrix4(Dr),this}lookAt(t){return PA.lookAt(t),PA.updateMatrix(),this.applyMatrix4(PA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(gd).negate(),this.translate(gd.x,gd.y,gd.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const n=[];for(let s=0,r=t.length;s<r;s++){const l=t[s];n.push(l.x,l.y,l.z||0)}this.setAttribute("position",new Oe(n,3))}else{const n=Math.min(t.length,e.count);for(let s=0;s<n;s++){const r=t[s];e.setXYZ(s,r.x,r.y,r.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hs);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Q(-1/0,-1/0,-1/0),new Q(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,s=e.length;n<s;n++){const r=e[n];lr.setFromBufferAttribute(r),this.morphTargetsRelative?(Ss.addVectors(this.boundingBox.min,lr.min),this.boundingBox.expandByPoint(Ss),Ss.addVectors(this.boundingBox.max,lr.max),this.boundingBox.expandByPoint(Ss)):(this.boundingBox.expandByPoint(lr.min),this.boundingBox.expandByPoint(lr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ts);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Q,1/0);return}if(t){const n=this.boundingSphere.center;if(lr.setFromBufferAttribute(t),e)for(let r=0,l=e.length;r<l;r++){const u=e[r];wm.setFromBufferAttribute(u),this.morphTargetsRelative?(Ss.addVectors(lr.min,wm.min),lr.expandByPoint(Ss),Ss.addVectors(lr.max,wm.max),lr.expandByPoint(Ss)):(lr.expandByPoint(wm.min),lr.expandByPoint(wm.max))}lr.getCenter(n);let s=0;for(let r=0,l=t.count;r<l;r++)Ss.fromBufferAttribute(t,r),s=Math.max(s,n.distanceToSquared(Ss));if(e)for(let r=0,l=e.length;r<l;r++){const u=e[r],d=this.morphTargetsRelative;for(let p=0,g=u.count;p<g;p++)Ss.fromBufferAttribute(u,p),d&&(gd.fromBufferAttribute(t,p),Ss.add(gd)),s=Math.max(s,n.distanceToSquared(Ss))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.position,s=e.normal,r=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new zn(new Float32Array(4*n.count),4));const l=this.getAttribute("tangent"),u=[],d=[];for(let H=0;H<n.count;H++)u[H]=new Q,d[H]=new Q;const p=new Q,g=new Q,v=new Q,_=new Wt,x=new Wt,b=new Wt,R=new Q,E=new Q;function M(H,N,O){p.fromBufferAttribute(n,H),g.fromBufferAttribute(n,N),v.fromBufferAttribute(n,O),_.fromBufferAttribute(r,H),x.fromBufferAttribute(r,N),b.fromBufferAttribute(r,O),g.sub(p),v.sub(p),x.sub(_),b.sub(_);const Y=1/(x.x*b.y-b.x*x.y);isFinite(Y)&&(R.copy(g).multiplyScalar(b.y).addScaledVector(v,-x.y).multiplyScalar(Y),E.copy(v).multiplyScalar(x.x).addScaledVector(g,-b.x).multiplyScalar(Y),u[H].add(R),u[N].add(R),u[O].add(R),d[H].add(E),d[N].add(E),d[O].add(E))}let w=this.groups;w.length===0&&(w=[{start:0,count:t.count}]);for(let H=0,N=w.length;H<N;++H){const O=w[H],Y=O.start,ht=O.count;for(let et=Y,dt=Y+ht;et<dt;et+=3)M(t.getX(et+0),t.getX(et+1),t.getX(et+2))}const B=new Q,D=new Q,I=new Q,L=new Q;function V(H){I.fromBufferAttribute(s,H),L.copy(I);const N=u[H];B.copy(N),B.sub(I.multiplyScalar(I.dot(N))).normalize(),D.crossVectors(L,N);const Y=D.dot(d[H])<0?-1:1;l.setXYZW(H,B.x,B.y,B.z,Y)}for(let H=0,N=w.length;H<N;++H){const O=w[H],Y=O.start,ht=O.count;for(let et=Y,dt=Y+ht;et<dt;et+=3)V(t.getX(et+0)),V(t.getX(et+1)),V(t.getX(et+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new zn(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let _=0,x=n.count;_<x;_++)n.setXYZ(_,0,0,0);const s=new Q,r=new Q,l=new Q,u=new Q,d=new Q,p=new Q,g=new Q,v=new Q;if(t)for(let _=0,x=t.count;_<x;_+=3){const b=t.getX(_+0),R=t.getX(_+1),E=t.getX(_+2);s.fromBufferAttribute(e,b),r.fromBufferAttribute(e,R),l.fromBufferAttribute(e,E),g.subVectors(l,r),v.subVectors(s,r),g.cross(v),u.fromBufferAttribute(n,b),d.fromBufferAttribute(n,R),p.fromBufferAttribute(n,E),u.add(g),d.add(g),p.add(g),n.setXYZ(b,u.x,u.y,u.z),n.setXYZ(R,d.x,d.y,d.z),n.setXYZ(E,p.x,p.y,p.z)}else for(let _=0,x=e.count;_<x;_+=3)s.fromBufferAttribute(e,_+0),r.fromBufferAttribute(e,_+1),l.fromBufferAttribute(e,_+2),g.subVectors(l,r),v.subVectors(s,r),g.cross(v),n.setXYZ(_+0,g.x,g.y,g.z),n.setXYZ(_+1,g.x,g.y,g.z),n.setXYZ(_+2,g.x,g.y,g.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Ss.fromBufferAttribute(t,e),Ss.normalize(),t.setXYZ(e,Ss.x,Ss.y,Ss.z)}toNonIndexed(){function t(u,d){const p=u.array,g=u.itemSize,v=u.normalized,_=new p.constructor(d.length*g);let x=0,b=0;for(let R=0,E=d.length;R<E;R++){u.isInterleavedBufferAttribute?x=d[R]*u.data.stride+u.offset:x=d[R]*g;for(let M=0;M<g;M++)_[b++]=p[x++]}return new zn(_,g,v)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new hn,n=this.index.array,s=this.attributes;for(const u in s){const d=s[u],p=t(d,n);e.setAttribute(u,p)}const r=this.morphAttributes;for(const u in r){const d=[],p=r[u];for(let g=0,v=p.length;g<v;g++){const _=p[g],x=t(_,n);d.push(x)}e.morphAttributes[u]=d}e.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,d=l.length;u<d;u++){const p=l[u];e.addGroup(p.start,p.count,p.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(t[p]=d[p]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const d in n){const p=n[d];t.data.attributes[d]=p.toJSON(t.data)}const s={};let r=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],g=[];for(let v=0,_=p.length;v<_;v++){const x=p[v];g.push(x.toJSON(t.data))}g.length>0&&(s[d]=g,r=!0)}r&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(t.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone());const s=t.attributes;for(const p in s){const g=s[p];this.setAttribute(p,g.clone(e))}const r=t.morphAttributes;for(const p in r){const g=[],v=r[p];for(let _=0,x=v.length;_<x;_++)g.push(v[_].clone(e));this.morphAttributes[p]=g}this.morphTargetsRelative=t.morphTargetsRelative;const l=t.groups;for(let p=0,g=l.length;p<g;p++){const v=l[p];this.addGroup(v.start,v.count,v.materialIndex)}const u=t.boundingBox;u!==null&&(this.boundingBox=u.clone());const d=t.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const BT=new We,vf=new nh,Iv=new Ts,DT=new Q,Pv=new Q,Fv=new Q,Hv=new Q,FA=new Q,zv=new Q,UT=new Q,Gv=new Q;class Ei extends On{constructor(t=new hn,e=new Ya){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,l=s.length;r<l;r++){const u=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=r}}}}getVertexPosition(t,e){const n=this.geometry,s=n.attributes.position,r=n.morphAttributes.position,l=n.morphTargetsRelative;e.fromBufferAttribute(s,t);const u=this.morphTargetInfluences;if(r&&u){zv.set(0,0,0);for(let d=0,p=r.length;d<p;d++){const g=u[d],v=r[d];g!==0&&(FA.fromBufferAttribute(v,t),l?zv.addScaledVector(FA,g):zv.addScaledVector(FA.sub(e),g))}e.add(zv)}return e}raycast(t,e){const n=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Iv.copy(n.boundingSphere),Iv.applyMatrix4(r),vf.copy(t.ray).recast(t.near),!(Iv.containsPoint(vf.origin)===!1&&(vf.intersectSphere(Iv,DT)===null||vf.origin.distanceToSquared(DT)>(t.far-t.near)**2))&&(BT.copy(r).invert(),vf.copy(t.ray).applyMatrix4(BT),!(n.boundingBox!==null&&vf.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,e,vf)))}_computeIntersections(t,e,n){let s;const r=this.geometry,l=this.material,u=r.index,d=r.attributes.position,p=r.attributes.uv,g=r.attributes.uv1,v=r.attributes.normal,_=r.groups,x=r.drawRange;if(u!==null)if(Array.isArray(l))for(let b=0,R=_.length;b<R;b++){const E=_[b],M=l[E.materialIndex],w=Math.max(E.start,x.start),B=Math.min(u.count,Math.min(E.start+E.count,x.start+x.count));for(let D=w,I=B;D<I;D+=3){const L=u.getX(D),V=u.getX(D+1),H=u.getX(D+2);s=Vv(this,M,t,n,p,g,v,L,V,H),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=E.materialIndex,e.push(s))}}else{const b=Math.max(0,x.start),R=Math.min(u.count,x.start+x.count);for(let E=b,M=R;E<M;E+=3){const w=u.getX(E),B=u.getX(E+1),D=u.getX(E+2);s=Vv(this,l,t,n,p,g,v,w,B,D),s&&(s.faceIndex=Math.floor(E/3),e.push(s))}}else if(d!==void 0)if(Array.isArray(l))for(let b=0,R=_.length;b<R;b++){const E=_[b],M=l[E.materialIndex],w=Math.max(E.start,x.start),B=Math.min(d.count,Math.min(E.start+E.count,x.start+x.count));for(let D=w,I=B;D<I;D+=3){const L=D,V=D+1,H=D+2;s=Vv(this,M,t,n,p,g,v,L,V,H),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=E.materialIndex,e.push(s))}}else{const b=Math.max(0,x.start),R=Math.min(d.count,x.start+x.count);for(let E=b,M=R;E<M;E+=3){const w=E,B=E+1,D=E+2;s=Vv(this,l,t,n,p,g,v,w,B,D),s&&(s.faceIndex=Math.floor(E/3),e.push(s))}}}}function gP(i,t,e,n,s,r,l,u){let d;if(t.side===Ta?d=n.intersectTriangle(l,r,s,!0,u):d=n.intersectTriangle(s,r,l,t.side===dl,u),d===null)return null;Gv.copy(u),Gv.applyMatrix4(i.matrixWorld);const p=e.ray.origin.distanceTo(Gv);return p<e.near||p>e.far?null:{distance:p,point:Gv.clone(),object:i}}function Vv(i,t,e,n,s,r,l,u,d,p){i.getVertexPosition(u,Pv),i.getVertexPosition(d,Fv),i.getVertexPosition(p,Hv);const g=gP(i,t,e,n,Pv,Fv,Hv,UT);if(g){const v=new Q;Xa.getBarycoord(UT,Pv,Fv,Hv,v),s&&(g.uv=Xa.getInterpolatedAttribute(s,u,d,p,v,new Wt)),r&&(g.uv1=Xa.getInterpolatedAttribute(r,u,d,p,v,new Wt)),l&&(g.normal=Xa.getInterpolatedAttribute(l,u,d,p,v,new Q),g.normal.dot(n.direction)>0&&g.normal.multiplyScalar(-1));const _={a:u,b:d,c:p,normal:new Q,materialIndex:0};Xa.getNormal(Pv,Fv,Hv,_.normal),g.face=_,g.barycoord=v}return g}class ih extends hn{constructor(t=1,e=1,n=1,s=1,r=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:s,heightSegments:r,depthSegments:l};const u=this;s=Math.floor(s),r=Math.floor(r),l=Math.floor(l);const d=[],p=[],g=[],v=[];let _=0,x=0;b("z","y","x",-1,-1,n,e,t,l,r,0),b("z","y","x",1,-1,n,e,-t,l,r,1),b("x","z","y",1,1,t,n,e,s,l,2),b("x","z","y",1,-1,t,n,-e,s,l,3),b("x","y","z",1,-1,t,e,n,s,r,4),b("x","y","z",-1,-1,t,e,-n,s,r,5),this.setIndex(d),this.setAttribute("position",new Oe(p,3)),this.setAttribute("normal",new Oe(g,3)),this.setAttribute("uv",new Oe(v,2));function b(R,E,M,w,B,D,I,L,V,H,N){const O=D/V,Y=I/H,ht=D/2,et=I/2,dt=L/2,mt=V+1,F=H+1;let K=0,$=0;const yt=new Q;for(let X=0;X<F;X++){const lt=X*Y-et;for(let xt=0;xt<mt;xt++){const bt=xt*O-ht;yt[R]=bt*w,yt[E]=lt*B,yt[M]=dt,p.push(yt.x,yt.y,yt.z),yt[R]=0,yt[E]=0,yt[M]=L>0?1:-1,g.push(yt.x,yt.y,yt.z),v.push(xt/V),v.push(1-X/H),K+=1}}for(let X=0;X<H;X++)for(let lt=0;lt<V;lt++){const xt=_+lt+mt*X,bt=_+lt+mt*(X+1),ot=_+(lt+1)+mt*(X+1),Ot=_+(lt+1)+mt*X;d.push(xt,bt,Ot),d.push(bt,ot,Ot),$+=6}u.addGroup(x,$,N),x+=$,_+=K}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ih(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Zd(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const s=i[e][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=s.clone():Array.isArray(s)?t[e][n]=s.slice():t[e][n]=s}}return t}function Aa(i){const t={};for(let e=0;e<i.length;e++){const n=Zd(i[e]);for(const s in n)t[s]=n[s]}return t}function vP(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}function sB(i){const t=i.getRenderTarget();return t===null?i.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Nn.workingColorSpace}const aB={clone:Zd,merge:Aa};var yP=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,_P=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class qa extends hs{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=yP,this.fragmentShader=_P,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Zd(t.uniforms),this.uniformsGroups=vP(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const s in this.uniforms){const l=this.uniforms[s].value;l&&l.isTexture?e.uniforms[s]={type:"t",value:l.toJSON(t).uuid}:l&&l.isColor?e.uniforms[s]={type:"c",value:l.getHex()}:l&&l.isVector2?e.uniforms[s]={type:"v2",value:l.toArray()}:l&&l.isVector3?e.uniforms[s]={type:"v3",value:l.toArray()}:l&&l.isVector4?e.uniforms[s]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?e.uniforms[s]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?e.uniforms[s]={type:"m4",value:l.toArray()}:e.uniforms[s]={value:l}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class W_ extends On{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new We,this.projectionMatrix=new We,this.projectionMatrixInverse=new We,this.coordinateSystem=Ir}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const eu=new Q,NT=new Wt,OT=new Wt;class bi extends W_{constructor(t=50,e=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=Kd*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(qf*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return Kd*2*Math.atan(Math.tan(qf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){eu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(eu.x,eu.y).multiplyScalar(-t/eu.z),eu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(eu.x,eu.y).multiplyScalar(-t/eu.z)}getViewSize(t,e){return this.getViewBounds(t,NT,OT),e.subVectors(OT,NT)}setViewOffset(t,e,n,s,r,l){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(qf*.5*this.fov)/this.zoom,n=2*e,s=this.aspect*n,r=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const d=l.fullWidth,p=l.fullHeight;r+=l.offsetX*s/d,e-=l.offsetY*n/p,s*=l.width/d,n*=l.height/p}const u=this.filmOffset;u!==0&&(r+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const vd=-90,yd=1;class rB extends On{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new bi(vd,yd,t,e);s.layers=this.layers,this.add(s);const r=new bi(vd,yd,t,e);r.layers=this.layers,this.add(r);const l=new bi(vd,yd,t,e);l.layers=this.layers,this.add(l);const u=new bi(vd,yd,t,e);u.layers=this.layers,this.add(u);const d=new bi(vd,yd,t,e);d.layers=this.layers,this.add(d);const p=new bi(vd,yd,t,e);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,s,r,l,u,d]=e;for(const p of e)this.remove(p);if(t===Ir)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(t===yg)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const p of e)this.add(p),p.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,l,u,d,p,g]=this.children,v=t.getRenderTarget(),_=t.getActiveCubeFace(),x=t.getActiveMipmapLevel(),b=t.xr.enabled;t.xr.enabled=!1;const R=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,s),t.render(e,r),t.setRenderTarget(n,1,s),t.render(e,l),t.setRenderTarget(n,2,s),t.render(e,u),t.setRenderTarget(n,3,s),t.render(e,d),t.setRenderTarget(n,4,s),t.render(e,p),n.texture.generateMipmaps=R,t.setRenderTarget(n,5,s),t.render(e,g),t.setRenderTarget(v,_,x),t.xr.enabled=b,n.texture.needsPMREMUpdate=!0}}class Pg extends Jn{constructor(t=[],e=pl,n,s,r,l,u,d,p,g){super(t,e,n,s,r,l,u,d,p,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class gM extends Hr{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},s=[n,n,n,n,n,n];this.texture=new Pg(s,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:Wn}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new ih(5,5,5),r=new qa({name:"CubemapFromEquirect",uniforms:Zd(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Ta,blending:fl});r.uniforms.tEquirect.value=e;const l=new Ei(s,r),u=e.minFilter;return e.minFilter===Lr&&(e.minFilter=Wn),new rB(1,10,this).update(t,l),e.minFilter=u,l.geometry.dispose(),l.material.dispose(),this}clear(t,e=!0,n=!0,s=!0){const r=t.getRenderTarget();for(let l=0;l<6;l++)t.setRenderTarget(this,l),t.clear(e,n,s);t.setRenderTarget(r)}}class Ql extends On{constructor(){super(),this.isGroup=!0,this.type="Group"}}const xP={type:"move"};class Dy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ql,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ql,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ql,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Q),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let s=null,r=null,l=null;const u=this._targetRay,d=this._grip,p=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(p&&t.hand){l=!0;for(const R of t.hand.values()){const E=e.getJointPose(R,n),M=this._getHandJoint(p,R);E!==null&&(M.matrix.fromArray(E.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=E.radius),M.visible=E!==null}const g=p.joints["index-finger-tip"],v=p.joints["thumb-tip"],_=g.position.distanceTo(v.position),x=.02,b=.005;p.inputState.pinching&&_>x+b?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!p.inputState.pinching&&_<=x-b&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else d!==null&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),r!==null&&(d.matrix.fromArray(r.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,r.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(r.linearVelocity)):d.hasLinearVelocity=!1,r.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(r.angularVelocity)):d.hasAngularVelocity=!1));u!==null&&(s=e.getPose(t.targetRaySpace,n),s===null&&r!==null&&(s=r),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(xP)))}return u!==null&&(u.visible=s!==null),d!==null&&(d.visible=r!==null),p!==null&&(p.visible=l!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const n=new Ql;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class K_{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new xe(t),this.density=e}clone(){return new K_(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class J_{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new xe(t),this.near=e,this.far=n}clone(){return new J_(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let Fg=class extends On{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ur,this.environmentIntensity=1,this.environmentRotation=new ur,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}};class Hg{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=vg,this.updateRanges=[],this.version=0,this.uuid=cr()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let s=0,r=this.stride;s<r;s++)this.array[t+s]=e.array[n+s];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cr()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cr()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const xa=new Q;class gu{constructor(t,e,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)xa.fromBufferAttribute(this,e),xa.applyMatrix4(t),this.setXYZ(e,xa.x,xa.y,xa.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)xa.fromBufferAttribute(this,e),xa.applyNormalMatrix(t),this.setXYZ(e,xa.x,xa.y,xa.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)xa.fromBufferAttribute(this,e),xa.transformDirection(t),this.setXYZ(e,xa.x,xa.y,xa.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=ba(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=_n(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=_n(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=_n(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=_n(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=_n(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=ba(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=ba(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=ba(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=ba(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=_n(e,this.array),n=_n(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=_n(e,this.array),n=_n(n,this.array),s=_n(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=s,this}setXYZW(t,e,n,s,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=_n(e,this.array),n=_n(n,this.array),s=_n(s,this.array),r=_n(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=s,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return new zn(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new gu(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class vM extends hs{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new xe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let _d;const Bm=new Q,xd=new Q,Ad=new Q,Sd=new Wt,Dm=new Wt,oB=new We,kv=new Q,Um=new Q,Xv=new Q,LT=new Wt,HA=new Wt,IT=new Wt;class lB extends On{constructor(t=new vM){if(super(),this.isSprite=!0,this.type="Sprite",_d===void 0){_d=new hn;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Hg(e,5);_d.setIndex([0,1,2,0,2,3]),_d.setAttribute("position",new gu(n,3,0,!1)),_d.setAttribute("uv",new gu(n,2,3,!1))}this.geometry=_d,this.material=t,this.center=new Wt(.5,.5)}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xd.setFromMatrixScale(this.matrixWorld),oB.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Ad.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&xd.multiplyScalar(-Ad.z);const n=this.material.rotation;let s,r;n!==0&&(r=Math.cos(n),s=Math.sin(n));const l=this.center;jv(kv.set(-.5,-.5,0),Ad,l,xd,s,r),jv(Um.set(.5,-.5,0),Ad,l,xd,s,r),jv(Xv.set(.5,.5,0),Ad,l,xd,s,r),LT.set(0,0),HA.set(1,0),IT.set(1,1);let u=t.ray.intersectTriangle(kv,Um,Xv,!1,Bm);if(u===null&&(jv(Um.set(-.5,.5,0),Ad,l,xd,s,r),HA.set(0,1),u=t.ray.intersectTriangle(kv,Xv,Um,!1,Bm),u===null))return;const d=t.ray.origin.distanceTo(Bm);d<t.near||d>t.far||e.push({distance:d,point:Bm.clone(),uv:Xa.getInterpolation(Bm,kv,Um,Xv,LT,HA,IT,new Wt),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function jv(i,t,e,n,s,r){Sd.subVectors(i,e).addScalar(.5).multiply(n),s!==void 0?(Dm.x=r*Sd.x-s*Sd.y,Dm.y=s*Sd.x+r*Sd.y):Dm.copy(Sd),i.copy(t),i.x+=Dm.x,i.y+=Dm.y,i.applyMatrix4(oB)}const Yv=new Q,PT=new Q;class cB extends On{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,s=e.length;n<s;n++){const r=e[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,n=0){e=Math.abs(e);const s=this.levels;let r;for(r=0;r<s.length&&!(e<s[r].distance);r++);return s.splice(r,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let n=0;n<e.length;n++)if(e[n].distance===t){const s=e.splice(n,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,s;for(n=1,s=e.length;n<s;n++){let r=e[n].distance;if(e[n].object.visible&&(r-=r*e[n].hysteresis),t<r)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){Yv.setFromMatrixPosition(this.matrixWorld);const s=t.ray.origin.distanceTo(Yv);this.getObjectForDistance(s).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){Yv.setFromMatrixPosition(t.matrixWorld),PT.setFromMatrixPosition(this.matrixWorld);const n=Yv.distanceTo(PT)/t.zoom;e[0].object.visible=!0;let s,r;for(s=1,r=e.length;s<r;s++){let l=e[s].distance;if(e[s].object.visible&&(l-=l*e[s].hysteresis),n>=l)e[s-1].object.visible=!1,e[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)e[s].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let s=0,r=n.length;s<r;s++){const l=n[s];e.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return e}}const FT=new Q,HT=new Hn,zT=new Hn,AP=new Q,GT=new We,qv=new Q,zA=new Ts,VT=new We,GA=new nh;class yM extends Ei{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=nS,this.bindMatrix=new We,this.bindMatrixInverse=new We,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Hs),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,qv),this.boundingBox.expandByPoint(qv)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ts),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,qv),this.boundingSphere.expandByPoint(qv)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),zA.copy(this.boundingSphere),zA.applyMatrix4(s),t.ray.intersectsSphere(zA)!==!1&&(VT.copy(s).invert(),GA.copy(t.ray).applyMatrix4(VT),!(this.boundingBox!==null&&GA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,GA)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Hn,e=this.geometry.attributes.skinWeight;for(let n=0,s=e.count;n<s;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===nS?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Fw?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,s=this.geometry;HT.fromBufferAttribute(s.attributes.skinIndex,t),zT.fromBufferAttribute(s.attributes.skinWeight,t),FT.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const l=zT.getComponent(r);if(l!==0){const u=HT.getComponent(r);GT.multiplyMatrices(n.bones[u].matrixWorld,n.boneInverses[u]),e.addScaledVector(AP.copy(FT).applyMatrix4(GT),l)}}return e.applyMatrix4(this.bindMatrixInverse)}}class Z_ extends On{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ao extends Jn{constructor(t=null,e=1,n=1,s,r,l,u,d,p=bs,g=bs,v,_){super(null,l,u,d,p,g,s,r,v,_),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const kT=new We,SP=new We;class zg{constructor(t=[],e=[]){this.uuid=cr(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new We)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new We;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let r=0,l=t.length;r<l;r++){const u=t[r]?t[r].matrixWorld:SP;kT.multiplyMatrices(u,e[r]),kT.toArray(n,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new zg(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Ao(e,t,t,Ki,Li);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const s=this.bones[e];if(s.name===t)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,s=t.bones.length;n<s;n++){const r=t.bones[n];let l=e[r];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),l=new Z_),this.bones.push(l),this.boneInverses.push(new We().fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let s=0,r=e.length;s<r;s++){const l=e[s];t.bones.push(l.uuid);const u=n[s];t.boneInverses.push(u.toArray())}return t}}class Jf extends zn{constructor(t,e,n,s=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Md=new We,XT=new We,Wv=[],jT=new Hs,MP=new We,Nm=new Ei,Om=new Ts;class _M extends Ei{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Jf(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,MP)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new Hs),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Md),jT.copy(t.boundingBox).applyMatrix4(Md),this.boundingBox.union(jT)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ts),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Md),Om.copy(t.boundingSphere).applyMatrix4(Md),this.boundingSphere.union(Om)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const n=e.morphTargetInfluences,s=this.morphTexture.source.data.data,r=n.length+1,l=t*r+1;for(let u=0;u<n.length;u++)n[u]=s[l+u]}raycast(t,e){const n=this.matrixWorld,s=this.count;if(Nm.geometry=this.geometry,Nm.material=this.material,Nm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Om.copy(this.boundingSphere),Om.applyMatrix4(n),t.ray.intersectsSphere(Om)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,Md),XT.multiplyMatrices(n,Md),Nm.matrixWorld=XT,Nm.raycast(t,Wv);for(let l=0,u=Wv.length;l<u;l++){const d=Wv[l];d.instanceId=r,d.object=this,e.push(d)}Wv.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Jf(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const n=e.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new Ao(new Float32Array(s*this.count),s,this.count,Og,Li));const r=this.morphTexture.source.data.data;let l=0;for(let p=0;p<n.length;p++)l+=n[p];const u=this.geometry.morphTargetsRelative?1:1-l,d=s*t;r[d]=u,r.set(n,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const VA=new Q,bP=new Q,EP=new gn;class Kl{constructor(t=new Q(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,s){return this.normal.set(t,e,n),this.constant=s,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const s=VA.subVectors(n,e).cross(bP.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(VA),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||EP.getNormalMatrix(t),s=this.coplanarPoint(VA).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const yf=new Ts,Kv=new Q;class rp{constructor(t=new Kl,e=new Kl,n=new Kl,s=new Kl,r=new Kl,l=new Kl){this.planes=[t,e,n,s,r,l]}set(t,e,n,s,r,l){const u=this.planes;return u[0].copy(t),u[1].copy(e),u[2].copy(n),u[3].copy(s),u[4].copy(r),u[5].copy(l),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=Ir){const n=this.planes,s=t.elements,r=s[0],l=s[1],u=s[2],d=s[3],p=s[4],g=s[5],v=s[6],_=s[7],x=s[8],b=s[9],R=s[10],E=s[11],M=s[12],w=s[13],B=s[14],D=s[15];if(n[0].setComponents(d-r,_-p,E-x,D-M).normalize(),n[1].setComponents(d+r,_+p,E+x,D+M).normalize(),n[2].setComponents(d+l,_+g,E+b,D+w).normalize(),n[3].setComponents(d-l,_-g,E-b,D-w).normalize(),n[4].setComponents(d-u,_-v,E-R,D-B).normalize(),e===Ir)n[5].setComponents(d+u,_+v,E+R,D+B).normalize();else if(e===yg)n[5].setComponents(u,v,R,B).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),yf.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),yf.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(yf)}intersectsSprite(t){return yf.center.set(0,0,0),yf.radius=.7071067811865476,yf.applyMatrix4(t.matrixWorld),this.intersectsSphere(yf)}intersectsSphere(t){const e=this.planes,n=t.center,s=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(n)<s)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const s=e[n];if(Kv.x=s.normal.x>0?t.max.x:t.min.x,Kv.y=s.normal.y>0?t.max.y:t.min.y,Kv.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(Kv)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const al=new We,rl=new rp;class Q_{constructor(){this.coordinateSystem=Ir}intersectsObject(t,e){if(!e.isArrayCamera||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(al.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),rl.setFromProjectionMatrix(al,this.coordinateSystem),rl.intersectsObject(t))return!0}return!1}intersectsSprite(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(al.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),rl.setFromProjectionMatrix(al,this.coordinateSystem),rl.intersectsSprite(t))return!0}return!1}intersectsSphere(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(al.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),rl.setFromProjectionMatrix(al,this.coordinateSystem),rl.intersectsSphere(t))return!0}return!1}intersectsBox(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(al.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),rl.setFromProjectionMatrix(al,this.coordinateSystem),rl.intersectsBox(t))return!0}return!1}containsPoint(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(al.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),rl.setFromProjectionMatrix(al,this.coordinateSystem),rl.containsPoint(t))return!0}return!1}clone(){return new Q_}}function kA(i,t){return i-t}function TP(i,t){return i.z-t.z}function CP(i,t){return t.z-i.z}class RP{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,n,s){const r=this.pool,l=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const u=r[this.index];l.push(u),this.index++,u.start=t,u.count=e,u.z=n,u.index=s}reset(){this.list.length=0,this.index=0}}const Ga=new We,wP=new xe(1,1,1),YT=new rp,BP=new Q_,Jv=new Hs,_f=new Ts,Lm=new Q,qT=new Q,DP=new Q,XA=new RP,ta=new Ei,Zv=[];function UP(i,t,e=0){const n=t.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==t.array.constructor){const s=i.count;for(let r=0;r<s;r++)for(let l=0;l<n;l++)t.setComponent(r+e,l,i.getComponent(r,l))}else t.array.set(i.array,e*n);t.needsUpdate=!0}function xf(i,t){if(i.constructor!==t.constructor){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++)t[n]=i[n]}else{const e=Math.min(i.length,t.length);t.set(new i.constructor(i.buffer,0,e))}}class uB extends Ei{constructor(t,e,n=e*2,s){super(new hn,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new Ao(e,t,t,Ki,Li);this._matricesTexture=n}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),n=new Ao(e,t,t,Lg,ml);this._indirectTexture=n}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),n=new Ao(e,t,t,Ki,Li);n.colorSpace=Nn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in t.attributes){const l=t.getAttribute(r),{array:u,itemSize:d,normalized:p}=l,g=new u.constructor(n*d),v=new zn(g,d,p);e.setAttribute(r,v)}if(t.getIndex()!==null){const r=n>65535?new Uint32Array(s):new Uint16Array(s);e.setIndex(new zn(r,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(!t.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=t.getAttribute(n),r=e.getAttribute(n);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hs);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let n=0,s=e.length;n<s;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,Ga),this.getBoundingBoxAt(r,Jv).applyMatrix4(Ga),t.union(Jv)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ts);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let n=0,s=e.length;n<s;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,Ga),this.getBoundingSphereAt(r,_f).applyMatrix4(Ga),t.union(_f)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:t};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(kA),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=n):(s=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;Ga.identity().toArray(r.image.data,s*16),r.needsUpdate=!0;const l=this._colorsTexture;return l&&(wP.toArray(l.image.data,s*4),l.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(t,e=-1,n=-1){this._initializeGeometry(t),this._validateGeometry(t);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const l=t.getIndex();if(l!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=n===-1?l.count:n),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(kA),d=this._availableGeometryIds.shift(),r[d]=s):(d=this._geometryCount,this._geometryCount++,r.push(s)),this.setGeometryAt(d,t),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,d}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,s=n.getIndex()!==null,r=n.getIndex(),l=e.getIndex(),u=this._geometryInfo[t];if(s&&l.count>u.reservedIndexCount||e.attributes.position.count>u.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=u.vertexStart,p=u.reservedVertexCount;u.vertexCount=e.getAttribute("position").count;for(const g in n.attributes){const v=e.getAttribute(g),_=n.getAttribute(g);UP(v,_,d);const x=v.itemSize;for(let b=v.count,R=p;b<R;b++){const E=d+b;for(let M=0;M<x;M++)_.setComponent(E,M,0)}_.needsUpdate=!0,_.addUpdateRange(d*x,p*x)}if(s){const g=u.indexStart,v=u.reservedIndexCount;u.indexCount=e.getIndex().count;for(let _=0;_<l.count;_++)r.setX(g+_,d+l.getX(_));for(let _=l.count,x=v;_<x;_++)r.setX(g+_,d);r.needsUpdate=!0,r.addUpdateRange(g,u.reservedIndexCount)}return u.start=s?u.indexStart:u.vertexStart,u.count=s?u.indexCount:u.vertexCount,u.boundingBox=null,e.boundingBox!==null&&(u.boundingBox=e.boundingBox.clone()),u.boundingSphere=null,e.boundingSphere!==null&&(u.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const n=this._instanceInfo;for(let s=0,r=n.length;s<r;s++)n[s].active&&n[s].geometryIndex===t&&this.deleteInstance(s);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const n=this._geometryInfo,s=n.map((l,u)=>u).sort((l,u)=>n[l].vertexStart-n[u].vertexStart),r=this.geometry;for(let l=0,u=n.length;l<u;l++){const d=s[l],p=n[d];if(p.active!==!1){if(r.index!==null){if(p.indexStart!==e){const{indexStart:g,vertexStart:v,reservedIndexCount:_}=p,x=r.index,b=x.array,R=t-v;for(let E=g;E<g+_;E++)b[E]=b[E]+R;x.array.copyWithin(e,g,g+_),x.addUpdateRange(e,_),p.indexStart=e}e+=p.reservedIndexCount}if(p.vertexStart!==t){const{vertexStart:g,reservedVertexCount:v}=p,_=r.attributes;for(const x in _){const b=_[x],{array:R,itemSize:E}=b;R.copyWithin(t*E,g*E,(g+v)*E),b.addUpdateRange(t*E,v*E)}p.vertexStart=t}t+=p.reservedVertexCount,p.start=r.index?p.indexStart:p.vertexStart,this._nextIndexStart=r.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[t];if(s.boundingBox===null){const r=new Hs,l=n.index,u=n.attributes.position;for(let d=s.start,p=s.start+s.count;d<p;d++){let g=d;l&&(g=l.getX(g)),r.expandByPoint(Lm.fromBufferAttribute(u,g))}s.boundingBox=r}return e.copy(s.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[t];if(s.boundingSphere===null){const r=new Ts;this.getBoundingBoxAt(t,Jv),Jv.getCenter(r.center);const l=n.index,u=n.attributes.position;let d=0;for(let p=s.start,g=s.start+s.count;p<g;p++){let v=p;l&&(v=l.getX(v)),Lm.fromBufferAttribute(u,v),d=Math.max(d,r.center.distanceToSquared(Lm))}r.radius=Math.sqrt(d),s.boundingSphere=r}return e.copy(s.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const n=this._matricesTexture,s=this._matricesTexture.image.data;return e.toArray(s,t*16),n.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const n=this._geometryInfo[t];return e.vertexStart=n.vertexStart,e.vertexCount=n.vertexCount,e.reservedVertexCount=n.reservedVertexCount,e.indexStart=n.indexStart,e.indexCount=n.indexCount,e.reservedIndexCount=n.reservedIndexCount,e.start=n.start,e.count=n.count,e}setInstanceCount(t){const e=this._availableInstanceIds,n=this._instanceInfo;for(e.sort(kA);e[e.length-1]===n.length;)n.pop(),e.pop();if(t<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const s=new Int32Array(t),r=new Int32Array(t);xf(this._multiDrawCounts,s),xf(this._multiDrawStarts,r),this._multiDrawCounts=s,this._multiDrawStarts=r,this._maxInstanceCount=t;const l=this._indirectTexture,u=this._matricesTexture,d=this._colorsTexture;l.dispose(),this._initIndirectTexture(),xf(l.image.data,this._indirectTexture.image.data),u.dispose(),this._initMatricesTexture(),xf(u.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),xf(d.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const n=[...this._geometryInfo].filter(u=>u.active);if(Math.max(...n.map(u=>u.vertexStart+u.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(d=>d.indexStart+d.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new hn,this._initializeGeometry(r));const l=this.geometry;r.index&&xf(r.index.array,l.index.array);for(const u in r.attributes)xf(r.attributes[u].array,l.attributes[u].array)}raycast(t,e){const n=this._instanceInfo,s=this._geometryInfo,r=this.matrixWorld,l=this.geometry;ta.material=this.material,ta.geometry.index=l.index,ta.geometry.attributes=l.attributes,ta.geometry.boundingBox===null&&(ta.geometry.boundingBox=new Hs),ta.geometry.boundingSphere===null&&(ta.geometry.boundingSphere=new Ts);for(let u=0,d=n.length;u<d;u++){if(!n[u].visible||!n[u].active)continue;const p=n[u].geometryIndex,g=s[p];ta.geometry.setDrawRange(g.start,g.count),this.getMatrixAt(u,ta.matrixWorld).premultiply(r),this.getBoundingBoxAt(p,ta.geometry.boundingBox),this.getBoundingSphereAt(p,ta.geometry.boundingSphere),ta.raycast(t,Zv);for(let v=0,_=Zv.length;v<_;v++){const x=Zv[v];x.object=this,x.batchId=u,e.push(x)}Zv.length=0}ta.material=null,ta.geometry.index=null,ta.geometry.attributes={},ta.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._availableInstanceIds=t._availableInstanceIds.slice(),this._availableGeometryIds=t._availableGeometryIds.slice(),this._nextIndexStart=t._nextIndexStart,this._nextVertexStart=t._nextVertexStart,this._geometryCount=t._geometryCount,this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._indirectTexture=t._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,n,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=s.getIndex(),u=l===null?1:l.array.BYTES_PER_ELEMENT,d=this._instanceInfo,p=this._multiDrawStarts,g=this._multiDrawCounts,v=this._geometryInfo,_=this.perObjectFrustumCulled,x=this._indirectTexture,b=x.image.data,R=n.isArrayCamera?BP:YT;_&&!n.isArrayCamera&&(Ga.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),YT.setFromProjectionMatrix(Ga,t.coordinateSystem));let E=0;if(this.sortObjects){Ga.copy(this.matrixWorld).invert(),Lm.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Ga),qT.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Ga);for(let B=0,D=d.length;B<D;B++)if(d[B].visible&&d[B].active){const I=d[B].geometryIndex;this.getMatrixAt(B,Ga),this.getBoundingSphereAt(I,_f).applyMatrix4(Ga);let L=!1;if(_&&(L=!R.intersectsSphere(_f,n)),!L){const V=v[I],H=DP.subVectors(_f.center,Lm).dot(qT);XA.push(V.start,V.count,H,B)}}const M=XA.list,w=this.customSort;w===null?M.sort(r.transparent?CP:TP):w.call(this,M,n);for(let B=0,D=M.length;B<D;B++){const I=M[B];p[E]=I.start*u,g[E]=I.count,b[E]=I.index,E++}XA.reset()}else for(let M=0,w=d.length;M<w;M++)if(d[M].visible&&d[M].active){const B=d[M].geometryIndex;let D=!1;if(_&&(this.getMatrixAt(M,Ga),this.getBoundingSphereAt(B,_f).applyMatrix4(Ga),D=!R.intersectsSphere(_f,n)),!D){const I=v[B];p[E]=I.start*u,g[E]=I.count,b[E]=M,E++}}x.needsUpdate=!0,this._multiDrawCount=E,this._visibilityChanged=!1}onBeforeShadow(t,e,n,s,r,l){this.onBeforeRender(t,null,s,r,l)}}class sa extends hs{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new xe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const b_=new Q,E_=new Q,WT=new We,Im=new nh,Qv=new Ts,jA=new Q,KT=new Q;class sc extends On{constructor(t=new hn,e=new sa){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[0];for(let s=1,r=e.count;s<r;s++)b_.fromBufferAttribute(e,s-1),E_.fromBufferAttribute(e,s),n[s]=n[s-1],n[s]+=b_.distanceTo(E_);t.setAttribute("lineDistance",new Oe(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,s=this.matrixWorld,r=t.params.Line.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Qv.copy(n.boundingSphere),Qv.applyMatrix4(s),Qv.radius+=r,t.ray.intersectsSphere(Qv)===!1)return;WT.copy(s).invert(),Im.copy(t.ray).applyMatrix4(WT);const u=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=this.isLineSegments?2:1,g=n.index,_=n.attributes.position;if(g!==null){const x=Math.max(0,l.start),b=Math.min(g.count,l.start+l.count);for(let R=x,E=b-1;R<E;R+=p){const M=g.getX(R),w=g.getX(R+1),B=$v(this,t,Im,d,M,w,R);B&&e.push(B)}if(this.isLineLoop){const R=g.getX(b-1),E=g.getX(x),M=$v(this,t,Im,d,R,E,b-1);M&&e.push(M)}}else{const x=Math.max(0,l.start),b=Math.min(_.count,l.start+l.count);for(let R=x,E=b-1;R<E;R+=p){const M=$v(this,t,Im,d,R,R+1,R);M&&e.push(M)}if(this.isLineLoop){const R=$v(this,t,Im,d,b-1,x,b-1);R&&e.push(R)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,l=s.length;r<l;r++){const u=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=r}}}}}function $v(i,t,e,n,s,r,l){const u=i.geometry.attributes.position;if(b_.fromBufferAttribute(u,s),E_.fromBufferAttribute(u,r),e.distanceSqToSegment(b_,E_,jA,KT)>n)return;jA.applyMatrix4(i.matrixWorld);const p=t.ray.origin.distanceTo(jA);if(!(p<t.near||p>t.far))return{distance:p,point:KT.clone().applyMatrix4(i.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:i}}const JT=new Q,ZT=new Q;class Mo extends sc{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[];for(let s=0,r=e.count;s<r;s+=2)JT.fromBufferAttribute(e,s),ZT.fromBufferAttribute(e,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+JT.distanceTo(ZT);t.setAttribute("lineDistance",new Oe(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class xM extends sc{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class $_ extends hs{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new xe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const QT=new We,rS=new nh,ty=new Ts,ey=new Q;class AM extends On{constructor(t=new hn,e=new $_){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,s=this.matrixWorld,r=t.params.Points.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),ty.copy(n.boundingSphere),ty.applyMatrix4(s),ty.radius+=r,t.ray.intersectsSphere(ty)===!1)return;QT.copy(s).invert(),rS.copy(t.ray).applyMatrix4(QT);const u=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=n.index,v=n.attributes.position;if(p!==null){const _=Math.max(0,l.start),x=Math.min(p.count,l.start+l.count);for(let b=_,R=x;b<R;b++){const E=p.getX(b);ey.fromBufferAttribute(v,E),$T(ey,E,d,s,t,e,this)}}else{const _=Math.max(0,l.start),x=Math.min(v.count,l.start+l.count);for(let b=_,R=x;b<R;b++)ey.fromBufferAttribute(v,b),$T(ey,b,d,s,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,l=s.length;r<l;r++){const u=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=r}}}}}function $T(i,t,e,n,s,r,l){const u=rS.distanceSqToPoint(i);if(u<e){const d=new Q;rS.closestPointToPoint(i,d),d.applyMatrix4(n);const p=s.ray.origin.distanceTo(d);if(p<s.near||p>s.far)return;r.push({distance:p,distanceToRay:Math.sqrt(u),point:d,index:t,face:null,faceIndex:null,barycoord:null,object:l})}}class fB extends Jn{constructor(t,e,n,s,r=Wn,l=Wn,u,d,p){super(t,e,n,s,r,l,u,d,p),this.isVideoTexture=!0,this.generateMipmaps=!1;const g=this;function v(){g.needsUpdate=!0,t.requestVideoFrameCallback(v)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(v)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class NP extends fB{constructor(t,e,n,s,r,l,u,d){super({},t,e,n,s,r,l,u,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class OP extends Jn{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=bs,this.minFilter=bs,this.generateMipmaps=!1,this.needsUpdate=!0}}class tx extends Jn{constructor(t,e,n,s,r,l,u,d,p,g,v,_){super(null,l,u,d,p,g,s,r,v,_),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class LP extends tx{constructor(t,e,n,s,r,l){super(t,e,n,r,l),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Wi,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class IP extends tx{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,pl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class PP extends Jn{constructor(t,e,n,s,r,l,u,d,p){super(t,e,n,s,r,l,u,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ex extends Jn{constructor(t,e,n=ml,s,r,l,u=bs,d=bs,p,g=jd){if(g!==jd&&g!==Yd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,s,r,l,u,d,g,n,p),this.isDepthTexture=!0,this.image={width:t,height:e},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new ou(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class FP extends ex{constructor(t=1,e=1,n=1){super(t,e),this.isDepthArrayTexture=!0,this.image={width:t,height:e,depth:n},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class nx extends hn{constructor(t=1,e=1,n=4,s=8,r=1){super(),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:n,radialSegments:s,heightSegments:r},e=Math.max(0,e),n=Math.max(1,Math.floor(n)),s=Math.max(3,Math.floor(s)),r=Math.max(1,Math.floor(r));const l=[],u=[],d=[],p=[],g=e/2,v=Math.PI/2*t,_=e,x=2*v+_,b=n*2+r,R=s+1,E=new Q,M=new Q;for(let w=0;w<=b;w++){let B=0,D=0,I=0,L=0;if(w<=n){const N=w/n,O=N*Math.PI/2;D=-g-t*Math.cos(O),I=t*Math.sin(O),L=-t*Math.cos(O),B=N*v}else if(w<=n+r){const N=(w-n)/r;D=-g+N*e,I=t,L=0,B=v+N*_}else{const N=(w-n-r)/n,O=N*Math.PI/2;D=g+t*Math.sin(O),I=t*Math.cos(O),L=t*Math.sin(O),B=v+_+N*v}const V=Math.max(0,Math.min(1,B/x));let H=0;w===0?H=.5/s:w===b&&(H=-.5/s);for(let N=0;N<=s;N++){const O=N/s,Y=O*Math.PI*2,ht=Math.sin(Y),et=Math.cos(Y);M.x=-I*et,M.y=D,M.z=I*ht,u.push(M.x,M.y,M.z),E.set(-I*et,L,I*ht),E.normalize(),d.push(E.x,E.y,E.z),p.push(O+H,V)}if(w>0){const N=(w-1)*R;for(let O=0;O<s;O++){const Y=N+O,ht=N+O+1,et=w*R+O,dt=w*R+O+1;l.push(Y,ht,et),l.push(ht,dt,et)}}}this.setIndex(l),this.setAttribute("position",new Oe(u,3)),this.setAttribute("normal",new Oe(d,3)),this.setAttribute("uv",new Oe(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new nx(t.radius,t.height,t.capSegments,t.radialSegments,t.heightSegments)}}class ix extends hn{constructor(t=1,e=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:s},e=Math.max(3,e);const r=[],l=[],u=[],d=[],p=new Q,g=new Wt;l.push(0,0,0),u.push(0,0,1),d.push(.5,.5);for(let v=0,_=3;v<=e;v++,_+=3){const x=n+v/e*s;p.x=t*Math.cos(x),p.y=t*Math.sin(x),l.push(p.x,p.y,p.z),u.push(0,0,1),g.x=(l[_]/t+1)/2,g.y=(l[_+1]/t+1)/2,d.push(g.x,g.y)}for(let v=1;v<=e;v++)r.push(v,v+1,0);this.setIndex(r),this.setAttribute("position",new Oe(l,3)),this.setAttribute("normal",new Oe(u,3)),this.setAttribute("uv",new Oe(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ix(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Gg extends hn{constructor(t=1,e=1,n=1,s=32,r=1,l=!1,u=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:s,heightSegments:r,openEnded:l,thetaStart:u,thetaLength:d};const p=this;s=Math.floor(s),r=Math.floor(r);const g=[],v=[],_=[],x=[];let b=0;const R=[],E=n/2;let M=0;w(),l===!1&&(t>0&&B(!0),e>0&&B(!1)),this.setIndex(g),this.setAttribute("position",new Oe(v,3)),this.setAttribute("normal",new Oe(_,3)),this.setAttribute("uv",new Oe(x,2));function w(){const D=new Q,I=new Q;let L=0;const V=(e-t)/n;for(let H=0;H<=r;H++){const N=[],O=H/r,Y=O*(e-t)+t;for(let ht=0;ht<=s;ht++){const et=ht/s,dt=et*d+u,mt=Math.sin(dt),F=Math.cos(dt);I.x=Y*mt,I.y=-O*n+E,I.z=Y*F,v.push(I.x,I.y,I.z),D.set(mt,V,F).normalize(),_.push(D.x,D.y,D.z),x.push(et,1-O),N.push(b++)}R.push(N)}for(let H=0;H<s;H++)for(let N=0;N<r;N++){const O=R[N][H],Y=R[N+1][H],ht=R[N+1][H+1],et=R[N][H+1];(t>0||N!==0)&&(g.push(O,Y,et),L+=3),(e>0||N!==r-1)&&(g.push(Y,ht,et),L+=3)}p.addGroup(M,L,0),M+=L}function B(D){const I=b,L=new Wt,V=new Q;let H=0;const N=D===!0?t:e,O=D===!0?1:-1;for(let ht=1;ht<=s;ht++)v.push(0,E*O,0),_.push(0,O,0),x.push(.5,.5),b++;const Y=b;for(let ht=0;ht<=s;ht++){const dt=ht/s*d+u,mt=Math.cos(dt),F=Math.sin(dt);V.x=N*F,V.y=E*O,V.z=N*mt,v.push(V.x,V.y,V.z),_.push(0,O,0),L.x=mt*.5+.5,L.y=F*.5*O+.5,x.push(L.x,L.y),b++}for(let ht=0;ht<s;ht++){const et=I+ht,dt=Y+ht;D===!0?g.push(dt,dt+1,et):g.push(dt+1,dt,et),H+=3}p.addGroup(M,H,D===!0?1:2),M+=H}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Gg(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Vg extends Gg{constructor(t=1,e=1,n=32,s=1,r=!1,l=0,u=Math.PI*2){super(0,t,e,n,s,r,l,u),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:l,thetaLength:u}}static fromJSON(t){return new Vg(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class _u extends hn{constructor(t=[],e=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:s};const r=[],l=[];u(s),p(n),g(),this.setAttribute("position",new Oe(r,3)),this.setAttribute("normal",new Oe(r.slice(),3)),this.setAttribute("uv",new Oe(l,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function u(w){const B=new Q,D=new Q,I=new Q;for(let L=0;L<e.length;L+=3)x(e[L+0],B),x(e[L+1],D),x(e[L+2],I),d(B,D,I,w)}function d(w,B,D,I){const L=I+1,V=[];for(let H=0;H<=L;H++){V[H]=[];const N=w.clone().lerp(D,H/L),O=B.clone().lerp(D,H/L),Y=L-H;for(let ht=0;ht<=Y;ht++)ht===0&&H===L?V[H][ht]=N:V[H][ht]=N.clone().lerp(O,ht/Y)}for(let H=0;H<L;H++)for(let N=0;N<2*(L-H)-1;N++){const O=Math.floor(N/2);N%2===0?(_(V[H][O+1]),_(V[H+1][O]),_(V[H][O])):(_(V[H][O+1]),_(V[H+1][O+1]),_(V[H+1][O]))}}function p(w){const B=new Q;for(let D=0;D<r.length;D+=3)B.x=r[D+0],B.y=r[D+1],B.z=r[D+2],B.normalize().multiplyScalar(w),r[D+0]=B.x,r[D+1]=B.y,r[D+2]=B.z}function g(){const w=new Q;for(let B=0;B<r.length;B+=3){w.x=r[B+0],w.y=r[B+1],w.z=r[B+2];const D=E(w)/2/Math.PI+.5,I=M(w)/Math.PI+.5;l.push(D,1-I)}b(),v()}function v(){for(let w=0;w<l.length;w+=6){const B=l[w+0],D=l[w+2],I=l[w+4],L=Math.max(B,D,I),V=Math.min(B,D,I);L>.9&&V<.1&&(B<.2&&(l[w+0]+=1),D<.2&&(l[w+2]+=1),I<.2&&(l[w+4]+=1))}}function _(w){r.push(w.x,w.y,w.z)}function x(w,B){const D=w*3;B.x=t[D+0],B.y=t[D+1],B.z=t[D+2]}function b(){const w=new Q,B=new Q,D=new Q,I=new Q,L=new Wt,V=new Wt,H=new Wt;for(let N=0,O=0;N<r.length;N+=9,O+=6){w.set(r[N+0],r[N+1],r[N+2]),B.set(r[N+3],r[N+4],r[N+5]),D.set(r[N+6],r[N+7],r[N+8]),L.set(l[O+0],l[O+1]),V.set(l[O+2],l[O+3]),H.set(l[O+4],l[O+5]),I.copy(w).add(B).add(D).divideScalar(3);const Y=E(I);R(L,O+0,w,Y),R(V,O+2,B,Y),R(H,O+4,D,Y)}}function R(w,B,D,I){I<0&&w.x===1&&(l[B]=w.x-1),D.x===0&&D.z===0&&(l[B]=I/2/Math.PI+.5)}function E(w){return Math.atan2(w.z,-w.x)}function M(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new _u(t.vertices,t.indices,t.radius,t.details)}}class sx extends _u{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,s=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,l,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new sx(t.radius,t.detail)}}const ny=new Q,iy=new Q,YA=new Q,sy=new Xa;class hB extends hn{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const s=Math.pow(10,4),r=Math.cos(qf*e),l=t.getIndex(),u=t.getAttribute("position"),d=l?l.count:u.count,p=[0,0,0],g=["a","b","c"],v=new Array(3),_={},x=[];for(let b=0;b<d;b+=3){l?(p[0]=l.getX(b),p[1]=l.getX(b+1),p[2]=l.getX(b+2)):(p[0]=b,p[1]=b+1,p[2]=b+2);const{a:R,b:E,c:M}=sy;if(R.fromBufferAttribute(u,p[0]),E.fromBufferAttribute(u,p[1]),M.fromBufferAttribute(u,p[2]),sy.getNormal(YA),v[0]=`${Math.round(R.x*s)},${Math.round(R.y*s)},${Math.round(R.z*s)}`,v[1]=`${Math.round(E.x*s)},${Math.round(E.y*s)},${Math.round(E.z*s)}`,v[2]=`${Math.round(M.x*s)},${Math.round(M.y*s)},${Math.round(M.z*s)}`,!(v[0]===v[1]||v[1]===v[2]||v[2]===v[0]))for(let w=0;w<3;w++){const B=(w+1)%3,D=v[w],I=v[B],L=sy[g[w]],V=sy[g[B]],H=`${D}_${I}`,N=`${I}_${D}`;N in _&&_[N]?(YA.dot(_[N].normal)<=r&&(x.push(L.x,L.y,L.z),x.push(V.x,V.y,V.z)),_[N]=null):H in _||(_[H]={index0:p[w],index1:p[B],normal:YA.clone()})}}for(const b in _)if(_[b]){const{index0:R,index1:E}=_[b];ny.fromBufferAttribute(u,R),iy.fromBufferAttribute(u,E),x.push(ny.x,ny.y,ny.z),x.push(iy.x,iy.y,iy.z)}this.setAttribute("position",new Oe(x,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class bo{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,s=this.getPoint(0),r=0;e.push(0);for(let l=1;l<=t;l++)n=this.getPoint(l/t),r+=n.distanceTo(s),e.push(r),s=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const n=this.getLengths();let s=0;const r=n.length;let l;e?l=e:l=t*n[r-1];let u=0,d=r-1,p;for(;u<=d;)if(s=Math.floor(u+(d-u)/2),p=n[s]-l,p<0)u=s+1;else if(p>0)d=s-1;else{d=s;break}if(s=d,n[s]===l)return s/(r-1);const g=n[s],_=n[s+1]-g,x=(l-g)/_;return(s+x)/(r-1)}getTangent(t,e){let s=t-1e-4,r=t+1e-4;s<0&&(s=0),r>1&&(r=1);const l=this.getPoint(s),u=this.getPoint(r),d=e||(l.isVector2?new Wt:new Q);return d.copy(u).sub(l).normalize(),d}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e=!1){const n=new Q,s=[],r=[],l=[],u=new Q,d=new We;for(let x=0;x<=t;x++){const b=x/t;s[x]=this.getTangentAt(b,new Q)}r[0]=new Q,l[0]=new Q;let p=Number.MAX_VALUE;const g=Math.abs(s[0].x),v=Math.abs(s[0].y),_=Math.abs(s[0].z);g<=p&&(p=g,n.set(1,0,0)),v<=p&&(p=v,n.set(0,1,0)),_<=p&&n.set(0,0,1),u.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],u),l[0].crossVectors(s[0],r[0]);for(let x=1;x<=t;x++){if(r[x]=r[x-1].clone(),l[x]=l[x-1].clone(),u.crossVectors(s[x-1],s[x]),u.length()>Number.EPSILON){u.normalize();const b=Math.acos(fn(s[x-1].dot(s[x]),-1,1));r[x].applyMatrix4(d.makeRotationAxis(u,b))}l[x].crossVectors(s[x],r[x])}if(e===!0){let x=Math.acos(fn(r[0].dot(r[t]),-1,1));x/=t,s[0].dot(u.crossVectors(r[0],r[t]))>0&&(x=-x);for(let b=1;b<=t;b++)r[b].applyMatrix4(d.makeRotationAxis(s[b],x*b)),l[b].crossVectors(s[b],r[b])}return{tangents:s,normals:r,binormals:l}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class ax extends bo{constructor(t=0,e=0,n=1,s=1,r=0,l=Math.PI*2,u=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=l,this.aClockwise=u,this.aRotation=d}getPoint(t,e=new Wt){const n=e,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const l=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(l?r=0:r=s),this.aClockwise===!0&&!l&&(r===s?r=-s:r=r-s);const u=this.aStartAngle+t*r;let d=this.aX+this.xRadius*Math.cos(u),p=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const g=Math.cos(this.aRotation),v=Math.sin(this.aRotation),_=d-this.aX,x=p-this.aY;d=_*g-x*v+this.aX,p=_*v+x*g+this.aY}return n.set(d,p)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class dB extends ax{constructor(t,e,n,s,r,l){super(t,e,n,n,s,r,l),this.isArcCurve=!0,this.type="ArcCurve"}}function SM(){let i=0,t=0,e=0,n=0;function s(r,l,u,d){i=r,t=u,e=-3*r+3*l-2*u-d,n=2*r-2*l+u+d}return{initCatmullRom:function(r,l,u,d,p){s(l,u,p*(u-r),p*(d-l))},initNonuniformCatmullRom:function(r,l,u,d,p,g,v){let _=(l-r)/p-(u-r)/(p+g)+(u-l)/g,x=(u-l)/g-(d-l)/(g+v)+(d-u)/v;_*=g,x*=g,s(l,u,_,x)},calc:function(r){const l=r*r,u=l*r;return i+t*r+e*l+n*u}}}const ay=new Q,qA=new SM,WA=new SM,KA=new SM;class pB extends bo{constructor(t=[],e=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=s}getPoint(t,e=new Q){const n=e,s=this.points,r=s.length,l=(r-(this.closed?0:1))*t;let u=Math.floor(l),d=l-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/r)+1)*r:d===0&&u===r-1&&(u=r-2,d=1);let p,g;this.closed||u>0?p=s[(u-1)%r]:(ay.subVectors(s[0],s[1]).add(s[0]),p=ay);const v=s[u%r],_=s[(u+1)%r];if(this.closed||u+2<r?g=s[(u+2)%r]:(ay.subVectors(s[r-1],s[r-2]).add(s[r-1]),g=ay),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let b=Math.pow(p.distanceToSquared(v),x),R=Math.pow(v.distanceToSquared(_),x),E=Math.pow(_.distanceToSquared(g),x);R<1e-4&&(R=1),b<1e-4&&(b=R),E<1e-4&&(E=R),qA.initNonuniformCatmullRom(p.x,v.x,_.x,g.x,b,R,E),WA.initNonuniformCatmullRom(p.y,v.y,_.y,g.y,b,R,E),KA.initNonuniformCatmullRom(p.z,v.z,_.z,g.z,b,R,E)}else this.curveType==="catmullrom"&&(qA.initCatmullRom(p.x,v.x,_.x,g.x,this.tension),WA.initCatmullRom(p.y,v.y,_.y,g.y,this.tension),KA.initCatmullRom(p.z,v.z,_.z,g.z,this.tension));return n.set(qA.calc(d),WA.calc(d),KA.calc(d)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(s.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const s=this.points[e];t.points.push(s.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(new Q().fromArray(s))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function tC(i,t,e,n,s){const r=(n-t)*.5,l=(s-e)*.5,u=i*i,d=i*u;return(2*e-2*n+r+l)*d+(-3*e+3*n-2*r-l)*u+r*i+e}function HP(i,t){const e=1-i;return e*e*t}function zP(i,t){return 2*(1-i)*i*t}function GP(i,t){return i*i*t}function ig(i,t,e,n){return HP(i,t)+zP(i,e)+GP(i,n)}function VP(i,t){const e=1-i;return e*e*e*t}function kP(i,t){const e=1-i;return 3*e*e*i*t}function XP(i,t){return 3*(1-i)*i*i*t}function jP(i,t){return i*i*i*t}function sg(i,t,e,n,s){return VP(i,t)+kP(i,e)+XP(i,n)+jP(i,s)}class MM extends bo{constructor(t=new Wt,e=new Wt,n=new Wt,s=new Wt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=s}getPoint(t,e=new Wt){const n=e,s=this.v0,r=this.v1,l=this.v2,u=this.v3;return n.set(sg(t,s.x,r.x,l.x,u.x),sg(t,s.y,r.y,l.y,u.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class mB extends bo{constructor(t=new Q,e=new Q,n=new Q,s=new Q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=s}getPoint(t,e=new Q){const n=e,s=this.v0,r=this.v1,l=this.v2,u=this.v3;return n.set(sg(t,s.x,r.x,l.x,u.x),sg(t,s.y,r.y,l.y,u.y),sg(t,s.z,r.z,l.z,u.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class bM extends bo{constructor(t=new Wt,e=new Wt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Wt){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Wt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class gB extends bo{constructor(t=new Q,e=new Q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new Q){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Q){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class EM extends bo{constructor(t=new Wt,e=new Wt,n=new Wt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Wt){const n=e,s=this.v0,r=this.v1,l=this.v2;return n.set(ig(t,s.x,r.x,l.x),ig(t,s.y,r.y,l.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class TM extends bo{constructor(t=new Q,e=new Q,n=new Q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Q){const n=e,s=this.v0,r=this.v1,l=this.v2;return n.set(ig(t,s.x,r.x,l.x),ig(t,s.y,r.y,l.y),ig(t,s.z,r.z,l.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class CM extends bo{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Wt){const n=e,s=this.points,r=(s.length-1)*t,l=Math.floor(r),u=r-l,d=s[l===0?l:l-1],p=s[l],g=s[l>s.length-2?s.length-1:l+1],v=s[l>s.length-3?s.length-1:l+2];return n.set(tC(u,d.x,p.x,g.x,v.x),tC(u,d.y,p.y,g.y,v.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const s=this.points[e];t.points.push(s.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(new Wt().fromArray(s))}return this}}var T_=Object.freeze({__proto__:null,ArcCurve:dB,CatmullRomCurve3:pB,CubicBezierCurve:MM,CubicBezierCurve3:mB,EllipseCurve:ax,LineCurve:bM,LineCurve3:gB,QuadraticBezierCurve:EM,QuadraticBezierCurve3:TM,SplineCurve:CM});class vB extends bo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new T_[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=n){const l=s[r]-n,u=this.curves[r],d=u.getLength(),p=d===0?0:1-l/d;return u.getPointAt(p,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,s=this.curves.length;n<s;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let s=0,r=this.curves;s<r.length;s++){const l=r[s],u=l.isEllipseCurve?t*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?t*l.points.length:t,d=l.getPoints(u);for(let p=0;p<d.length;p++){const g=d[p];n&&n.equals(g)||(e.push(g),n=g)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const s=t.curves[e];this.curves.push(s.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const s=this.curves[e];t.curves.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const s=t.curves[e];this.curves.push(new T_[s.type]().fromJSON(s))}return this}}class C_ extends vB{constructor(t){super(),this.type="Path",this.currentPoint=new Wt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new bM(this.currentPoint.clone(),new Wt(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,s){const r=new EM(this.currentPoint.clone(),new Wt(t,e),new Wt(n,s));return this.curves.push(r),this.currentPoint.set(n,s),this}bezierCurveTo(t,e,n,s,r,l){const u=new MM(this.currentPoint.clone(),new Wt(t,e),new Wt(n,s),new Wt(r,l));return this.curves.push(u),this.currentPoint.set(r,l),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new CM(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,s,r,l){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(t+u,e+d,n,s,r,l),this}absarc(t,e,n,s,r,l){return this.absellipse(t,e,n,n,s,r,l),this}ellipse(t,e,n,s,r,l,u,d){const p=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(t+p,e+g,n,s,r,l,u,d),this}absellipse(t,e,n,s,r,l,u,d){const p=new ax(t,e,n,s,r,l,u,d);if(this.curves.length>0){const v=p.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(p);const g=p.getPoint(1);return this.currentPoint.copy(g),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Wf extends C_{constructor(t){super(t),this.uuid=cr(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,s=this.holes.length;n<s;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const s=t.holes[e];this.holes.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const s=this.holes[e];t.holes.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const s=t.holes[e];this.holes.push(new C_().fromJSON(s))}return this}}function YP(i,t,e=2){const n=t&&t.length,s=n?t[0]*e:i.length;let r=yB(i,0,s,e,!0);const l=[];if(!r||r.next===r.prev)return l;let u,d,p;if(n&&(r=ZP(i,t,r,e)),i.length>80*e){u=1/0,d=1/0;let g=-1/0,v=-1/0;for(let _=e;_<s;_+=e){const x=i[_],b=i[_+1];x<u&&(u=x),b<d&&(d=b),x>g&&(g=x),b>v&&(v=b)}p=Math.max(g-u,v-d),p=p!==0?32767/p:0}return xg(r,l,e,u,d,p,0),l}function yB(i,t,e,n,s){let r;if(s===lF(i,t,e,n)>0)for(let l=t;l<e;l+=n)r=eC(l/n|0,i[l],i[l+1],r);else for(let l=e-n;l>=t;l-=n)r=eC(l/n|0,i[l],i[l+1],r);return r&&Qd(r,r.next)&&(Sg(r),r=r.next),r}function Zf(i,t){if(!i)return i;t||(t=i);let e=i,n;do if(n=!1,!e.steiner&&(Qd(e,e.next)||Oi(e.prev,e,e.next)===0)){if(Sg(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function xg(i,t,e,n,s,r,l){if(!i)return;!l&&r&&nF(i,n,s,r);let u=i;for(;i.prev!==i.next;){const d=i.prev,p=i.next;if(r?WP(i,n,s,r):qP(i)){t.push(d.i,i.i,p.i),Sg(i),i=p.next,u=p.next;continue}if(i=p,i===u){l?l===1?(i=KP(Zf(i),t),xg(i,t,e,n,s,r,2)):l===2&&JP(i,t,e,n,s,r):xg(Zf(i),t,e,n,s,r,1);break}}}function qP(i){const t=i.prev,e=i,n=i.next;if(Oi(t,e,n)>=0)return!1;const s=t.x,r=e.x,l=n.x,u=t.y,d=e.y,p=n.y,g=Math.min(s,r,l),v=Math.min(u,d,p),_=Math.max(s,r,l),x=Math.max(u,d,p);let b=n.next;for(;b!==t;){if(b.x>=g&&b.x<=_&&b.y>=v&&b.y<=x&&km(s,u,r,d,l,p,b.x,b.y)&&Oi(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function WP(i,t,e,n){const s=i.prev,r=i,l=i.next;if(Oi(s,r,l)>=0)return!1;const u=s.x,d=r.x,p=l.x,g=s.y,v=r.y,_=l.y,x=Math.min(u,d,p),b=Math.min(g,v,_),R=Math.max(u,d,p),E=Math.max(g,v,_),M=oS(x,b,t,e,n),w=oS(R,E,t,e,n);let B=i.prevZ,D=i.nextZ;for(;B&&B.z>=M&&D&&D.z<=w;){if(B.x>=x&&B.x<=R&&B.y>=b&&B.y<=E&&B!==s&&B!==l&&km(u,g,d,v,p,_,B.x,B.y)&&Oi(B.prev,B,B.next)>=0||(B=B.prevZ,D.x>=x&&D.x<=R&&D.y>=b&&D.y<=E&&D!==s&&D!==l&&km(u,g,d,v,p,_,D.x,D.y)&&Oi(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;B&&B.z>=M;){if(B.x>=x&&B.x<=R&&B.y>=b&&B.y<=E&&B!==s&&B!==l&&km(u,g,d,v,p,_,B.x,B.y)&&Oi(B.prev,B,B.next)>=0)return!1;B=B.prevZ}for(;D&&D.z<=w;){if(D.x>=x&&D.x<=R&&D.y>=b&&D.y<=E&&D!==s&&D!==l&&km(u,g,d,v,p,_,D.x,D.y)&&Oi(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function KP(i,t){let e=i;do{const n=e.prev,s=e.next.next;!Qd(n,s)&&xB(n,e,e.next,s)&&Ag(n,s)&&Ag(s,n)&&(t.push(n.i,e.i,s.i),Sg(e),Sg(e.next),e=i=s),e=e.next}while(e!==i);return Zf(e)}function JP(i,t,e,n,s,r){let l=i;do{let u=l.next.next;for(;u!==l.prev;){if(l.i!==u.i&&aF(l,u)){let d=AB(l,u);l=Zf(l,l.next),d=Zf(d,d.next),xg(l,t,e,n,s,r,0),xg(d,t,e,n,s,r,0);return}u=u.next}l=l.next}while(l!==i)}function ZP(i,t,e,n){const s=[];for(let r=0,l=t.length;r<l;r++){const u=t[r]*n,d=r<l-1?t[r+1]*n:i.length,p=yB(i,u,d,n,!1);p===p.next&&(p.steiner=!0),s.push(sF(p))}s.sort(QP);for(let r=0;r<s.length;r++)e=$P(s[r],e);return e}function QP(i,t){let e=i.x-t.x;if(e===0&&(e=i.y-t.y,e===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),s=(t.next.y-t.y)/(t.next.x-t.x);e=n-s}return e}function $P(i,t){const e=tF(i,t);if(!e)return t;const n=AB(e,i);return Zf(n,n.next),Zf(e,e.next)}function tF(i,t){let e=t;const n=i.x,s=i.y;let r=-1/0,l;if(Qd(i,e))return e;do{if(Qd(i,e.next))return e.next;if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){const v=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(v<=n&&v>r&&(r=v,l=e.x<e.next.x?e:e.next,v===n))return l}e=e.next}while(e!==t);if(!l)return null;const u=l,d=l.x,p=l.y;let g=1/0;e=l;do{if(n>=e.x&&e.x>=d&&n!==e.x&&_B(s<p?n:r,s,d,p,s<p?r:n,s,e.x,e.y)){const v=Math.abs(s-e.y)/(n-e.x);Ag(e,i)&&(v<g||v===g&&(e.x>l.x||e.x===l.x&&eF(l,e)))&&(l=e,g=v)}e=e.next}while(e!==u);return l}function eF(i,t){return Oi(i.prev,i,t.prev)<0&&Oi(t.next,i,i.next)<0}function nF(i,t,e,n){let s=i;do s.z===0&&(s.z=oS(s.x,s.y,t,e,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,iF(s)}function iF(i){let t,e=1;do{let n=i,s;i=null;let r=null;for(t=0;n;){t++;let l=n,u=0;for(let p=0;p<e&&(u++,l=l.nextZ,!!l);p++);let d=e;for(;u>0||d>0&&l;)u!==0&&(d===0||!l||n.z<=l.z)?(s=n,n=n.nextZ,u--):(s=l,l=l.nextZ,d--),r?r.nextZ=s:i=s,s.prevZ=r,r=s;n=l}r.nextZ=null,e*=2}while(t>1);return i}function oS(i,t,e,n,s){return i=(i-e)*s|0,t=(t-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function sF(i){let t=i,e=i;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==i);return e}function _B(i,t,e,n,s,r,l,u){return(s-l)*(t-u)>=(i-l)*(r-u)&&(i-l)*(n-u)>=(e-l)*(t-u)&&(e-l)*(r-u)>=(s-l)*(n-u)}function km(i,t,e,n,s,r,l,u){return!(i===l&&t===u)&&_B(i,t,e,n,s,r,l,u)}function aF(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!rF(i,t)&&(Ag(i,t)&&Ag(t,i)&&oF(i,t)&&(Oi(i.prev,i,t.prev)||Oi(i,t.prev,t))||Qd(i,t)&&Oi(i.prev,i,i.next)>0&&Oi(t.prev,t,t.next)>0)}function Oi(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function Qd(i,t){return i.x===t.x&&i.y===t.y}function xB(i,t,e,n){const s=oy(Oi(i,t,e)),r=oy(Oi(i,t,n)),l=oy(Oi(e,n,i)),u=oy(Oi(e,n,t));return!!(s!==r&&l!==u||s===0&&ry(i,e,t)||r===0&&ry(i,n,t)||l===0&&ry(e,i,n)||u===0&&ry(e,t,n))}function ry(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function oy(i){return i>0?1:i<0?-1:0}function rF(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&xB(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}function Ag(i,t){return Oi(i.prev,i,i.next)<0?Oi(i,t,i.next)>=0&&Oi(i,i.prev,t)>=0:Oi(i,t,i.prev)<0||Oi(i,i.next,t)<0}function oF(i,t){let e=i,n=!1;const s=(i.x+t.x)/2,r=(i.y+t.y)/2;do e.y>r!=e.next.y>r&&e.next.y!==e.y&&s<(e.next.x-e.x)*(r-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==i);return n}function AB(i,t){const e=lS(i.i,i.x,i.y),n=lS(t.i,t.x,t.y),s=i.next,r=t.prev;return i.next=t,t.prev=i,e.next=s,s.prev=e,n.next=e,e.prev=n,r.next=n,n.prev=r,n}function eC(i,t,e,n){const s=lS(i,t,e);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function Sg(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function lS(i,t,e){return{i,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function lF(i,t,e,n){let s=0;for(let r=t,l=e-n;r<e;r+=n)s+=(i[l]-i[r])*(i[r+1]+i[l+1]),l=r;return s}class cF{static triangulate(t,e,n=2){return YP(t,e,n)}}class xo{static area(t){const e=t.length;let n=0;for(let s=e-1,r=0;r<e;s=r++)n+=t[s].x*t[r].y-t[r].x*t[s].y;return n*.5}static isClockWise(t){return xo.area(t)<0}static triangulateShape(t,e){const n=[],s=[],r=[];nC(t),iC(n,t);let l=t.length;e.forEach(nC);for(let d=0;d<e.length;d++)s.push(l),l+=e[d].length,iC(n,e[d]);const u=cF.triangulate(n,s);for(let d=0;d<u.length;d+=3)r.push(u.slice(d,d+3));return r}}function nC(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function iC(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class rx extends hn{constructor(t=new Wf([new Wt(.5,.5),new Wt(-.5,.5),new Wt(-.5,-.5),new Wt(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,s=[],r=[];for(let u=0,d=t.length;u<d;u++){const p=t[u];l(p)}this.setAttribute("position",new Oe(s,3)),this.setAttribute("uv",new Oe(r,2)),this.computeVertexNormals();function l(u){const d=[],p=e.curveSegments!==void 0?e.curveSegments:12,g=e.steps!==void 0?e.steps:1,v=e.depth!==void 0?e.depth:1;let _=e.bevelEnabled!==void 0?e.bevelEnabled:!0,x=e.bevelThickness!==void 0?e.bevelThickness:.2,b=e.bevelSize!==void 0?e.bevelSize:x-.1,R=e.bevelOffset!==void 0?e.bevelOffset:0,E=e.bevelSegments!==void 0?e.bevelSegments:3;const M=e.extrudePath,w=e.UVGenerator!==void 0?e.UVGenerator:uF;let B,D=!1,I,L,V,H;M&&(B=M.getSpacedPoints(g),D=!0,_=!1,I=M.computeFrenetFrames(g,!1),L=new Q,V=new Q,H=new Q),_||(E=0,x=0,b=0,R=0);const N=u.extractPoints(p);let O=N.shape;const Y=N.holes;if(!xo.isClockWise(O)){O=O.reverse();for(let Z=0,le=Y.length;Z<le;Z++){const te=Y[Z];xo.isClockWise(te)&&(Y[Z]=te.reverse())}}function et(Z){const te=10000000000000001e-36;let Kt=Z[0];for(let Xt=1;Xt<=Z.length;Xt++){const Te=Xt%Z.length,Qt=Z[Te],J=Qt.x-Kt.x,k=Qt.y-Kt.y,_t=J*J+k*k,zt=Math.max(Math.abs(Qt.x),Math.abs(Qt.y),Math.abs(Kt.x),Math.abs(Kt.y)),Jt=te*zt*zt;if(_t<=Jt){Z.splice(Te,1),Xt--;continue}Kt=Qt}}et(O),Y.forEach(et);const dt=Y.length,mt=O;for(let Z=0;Z<dt;Z++){const le=Y[Z];O=O.concat(le)}function F(Z,le,te){return le||console.error("THREE.ExtrudeGeometry: vec does not exist"),Z.clone().addScaledVector(le,te)}const K=O.length;function $(Z,le,te){let Kt,Xt,Te;const Qt=Z.x-le.x,J=Z.y-le.y,k=te.x-Z.x,_t=te.y-Z.y,zt=Qt*Qt+J*J,Jt=Qt*_t-J*k;if(Math.abs(Jt)>Number.EPSILON){const Ht=Math.sqrt(zt),fe=Math.sqrt(k*k+_t*_t),ue=le.x-J/Ht,Se=le.y+Qt/Ht,He=te.x-_t/fe,ae=te.y+k/fe,Me=((He-ue)*_t-(ae-Se)*k)/(Qt*_t-J*k);Kt=ue+Qt*Me-Z.x,Xt=Se+J*Me-Z.y;const Re=Kt*Kt+Xt*Xt;if(Re<=2)return new Wt(Kt,Xt);Te=Math.sqrt(Re/2)}else{let Ht=!1;Qt>Number.EPSILON?k>Number.EPSILON&&(Ht=!0):Qt<-Number.EPSILON?k<-Number.EPSILON&&(Ht=!0):Math.sign(J)===Math.sign(_t)&&(Ht=!0),Ht?(Kt=-J,Xt=Qt,Te=Math.sqrt(zt)):(Kt=Qt,Xt=J,Te=Math.sqrt(zt/2))}return new Wt(Kt/Te,Xt/Te)}const yt=[];for(let Z=0,le=mt.length,te=le-1,Kt=Z+1;Z<le;Z++,te++,Kt++)te===le&&(te=0),Kt===le&&(Kt=0),yt[Z]=$(mt[Z],mt[te],mt[Kt]);const X=[];let lt,xt=yt.concat();for(let Z=0,le=dt;Z<le;Z++){const te=Y[Z];lt=[];for(let Kt=0,Xt=te.length,Te=Xt-1,Qt=Kt+1;Kt<Xt;Kt++,Te++,Qt++)Te===Xt&&(Te=0),Qt===Xt&&(Qt=0),lt[Kt]=$(te[Kt],te[Te],te[Qt]);X.push(lt),xt=xt.concat(lt)}let bt;if(E===0)bt=xo.triangulateShape(mt,Y);else{const Z=[],le=[];for(let te=0;te<E;te++){const Kt=te/E,Xt=x*Math.cos(Kt*Math.PI/2),Te=b*Math.sin(Kt*Math.PI/2)+R;for(let Qt=0,J=mt.length;Qt<J;Qt++){const k=F(mt[Qt],yt[Qt],Te);Ie(k.x,k.y,-Xt),Kt===0&&Z.push(k)}for(let Qt=0,J=dt;Qt<J;Qt++){const k=Y[Qt];lt=X[Qt];const _t=[];for(let zt=0,Jt=k.length;zt<Jt;zt++){const Ht=F(k[zt],lt[zt],Te);Ie(Ht.x,Ht.y,-Xt),Kt===0&&_t.push(Ht)}Kt===0&&le.push(_t)}}bt=xo.triangulateShape(Z,le)}const ot=bt.length,Ot=b+R;for(let Z=0;Z<K;Z++){const le=_?F(O[Z],xt[Z],Ot):O[Z];D?(V.copy(I.normals[0]).multiplyScalar(le.x),L.copy(I.binormals[0]).multiplyScalar(le.y),H.copy(B[0]).add(V).add(L),Ie(H.x,H.y,H.z)):Ie(le.x,le.y,0)}for(let Z=1;Z<=g;Z++)for(let le=0;le<K;le++){const te=_?F(O[le],xt[le],Ot):O[le];D?(V.copy(I.normals[Z]).multiplyScalar(te.x),L.copy(I.binormals[Z]).multiplyScalar(te.y),H.copy(B[Z]).add(V).add(L),Ie(H.x,H.y,H.z)):Ie(te.x,te.y,v/g*Z)}for(let Z=E-1;Z>=0;Z--){const le=Z/E,te=x*Math.cos(le*Math.PI/2),Kt=b*Math.sin(le*Math.PI/2)+R;for(let Xt=0,Te=mt.length;Xt<Te;Xt++){const Qt=F(mt[Xt],yt[Xt],Kt);Ie(Qt.x,Qt.y,v+te)}for(let Xt=0,Te=Y.length;Xt<Te;Xt++){const Qt=Y[Xt];lt=X[Xt];for(let J=0,k=Qt.length;J<k;J++){const _t=F(Qt[J],lt[J],Kt);D?Ie(_t.x,_t.y+B[g-1].y,B[g-1].x+te):Ie(_t.x,_t.y,v+te)}}}It(),ie();function It(){const Z=s.length/3;if(_){let le=0,te=K*le;for(let Kt=0;Kt<ot;Kt++){const Xt=bt[Kt];Ae(Xt[2]+te,Xt[1]+te,Xt[0]+te)}le=g+E*2,te=K*le;for(let Kt=0;Kt<ot;Kt++){const Xt=bt[Kt];Ae(Xt[0]+te,Xt[1]+te,Xt[2]+te)}}else{for(let le=0;le<ot;le++){const te=bt[le];Ae(te[2],te[1],te[0])}for(let le=0;le<ot;le++){const te=bt[le];Ae(te[0]+K*g,te[1]+K*g,te[2]+K*g)}}n.addGroup(Z,s.length/3-Z,0)}function ie(){const Z=s.length/3;let le=0;se(mt,le),le+=mt.length;for(let te=0,Kt=Y.length;te<Kt;te++){const Xt=Y[te];se(Xt,le),le+=Xt.length}n.addGroup(Z,s.length/3-Z,1)}function se(Z,le){let te=Z.length;for(;--te>=0;){const Kt=te;let Xt=te-1;Xt<0&&(Xt=Z.length-1);for(let Te=0,Qt=g+E*2;Te<Qt;Te++){const J=K*Te,k=K*(Te+1),_t=le+Kt+J,zt=le+Xt+J,Jt=le+Xt+k,Ht=le+Kt+k;Be(_t,zt,Jt,Ht)}}}function Ie(Z,le,te){d.push(Z),d.push(le),d.push(te)}function Ae(Z,le,te){Ve(Z),Ve(le),Ve(te);const Kt=s.length/3,Xt=w.generateTopUV(n,s,Kt-3,Kt-2,Kt-1);we(Xt[0]),we(Xt[1]),we(Xt[2])}function Be(Z,le,te,Kt){Ve(Z),Ve(le),Ve(Kt),Ve(le),Ve(te),Ve(Kt);const Xt=s.length/3,Te=w.generateSideWallUV(n,s,Xt-6,Xt-3,Xt-2,Xt-1);we(Te[0]),we(Te[1]),we(Te[3]),we(Te[1]),we(Te[2]),we(Te[3])}function Ve(Z){s.push(d[Z*3+0]),s.push(d[Z*3+1]),s.push(d[Z*3+2])}function we(Z){r.push(Z.x),r.push(Z.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,n=this.parameters.options;return fF(e,n,t)}static fromJSON(t,e){const n=[];for(let r=0,l=t.shapes.length;r<l;r++){const u=e[t.shapes[r]];n.push(u)}const s=t.options.extrudePath;return s!==void 0&&(t.options.extrudePath=new T_[s.type]().fromJSON(s)),new rx(n,t.options)}}const uF={generateTopUV:function(i,t,e,n,s){const r=t[e*3],l=t[e*3+1],u=t[n*3],d=t[n*3+1],p=t[s*3],g=t[s*3+1];return[new Wt(r,l),new Wt(u,d),new Wt(p,g)]},generateSideWallUV:function(i,t,e,n,s,r){const l=t[e*3],u=t[e*3+1],d=t[e*3+2],p=t[n*3],g=t[n*3+1],v=t[n*3+2],_=t[s*3],x=t[s*3+1],b=t[s*3+2],R=t[r*3],E=t[r*3+1],M=t[r*3+2];return Math.abs(u-g)<Math.abs(l-p)?[new Wt(l,1-d),new Wt(p,1-v),new Wt(_,1-b),new Wt(R,1-M)]:[new Wt(u,1-d),new Wt(g,1-v),new Wt(x,1-b),new Wt(E,1-M)]}};function fF(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const r=i[n];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class kg extends _u{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new kg(t.radius,t.detail)}}class ox extends hn{constructor(t=[new Wt(0,-.5),new Wt(.5,0),new Wt(0,.5)],e=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:s},e=Math.floor(e),s=fn(s,0,Math.PI*2);const r=[],l=[],u=[],d=[],p=[],g=1/e,v=new Q,_=new Wt,x=new Q,b=new Q,R=new Q;let E=0,M=0;for(let w=0;w<=t.length-1;w++)switch(w){case 0:E=t[w+1].x-t[w].x,M=t[w+1].y-t[w].y,x.x=M*1,x.y=-E,x.z=M*0,R.copy(x),x.normalize(),d.push(x.x,x.y,x.z);break;case t.length-1:d.push(R.x,R.y,R.z);break;default:E=t[w+1].x-t[w].x,M=t[w+1].y-t[w].y,x.x=M*1,x.y=-E,x.z=M*0,b.copy(x),x.x+=R.x,x.y+=R.y,x.z+=R.z,x.normalize(),d.push(x.x,x.y,x.z),R.copy(b)}for(let w=0;w<=e;w++){const B=n+w*g*s,D=Math.sin(B),I=Math.cos(B);for(let L=0;L<=t.length-1;L++){v.x=t[L].x*D,v.y=t[L].y,v.z=t[L].x*I,l.push(v.x,v.y,v.z),_.x=w/e,_.y=L/(t.length-1),u.push(_.x,_.y);const V=d[3*L+0]*D,H=d[3*L+1],N=d[3*L+0]*I;p.push(V,H,N)}}for(let w=0;w<e;w++)for(let B=0;B<t.length-1;B++){const D=B+w*t.length,I=D,L=D+t.length,V=D+t.length+1,H=D+1;r.push(I,L,H),r.push(V,H,L)}this.setIndex(r),this.setAttribute("position",new Oe(l,3)),this.setAttribute("uv",new Oe(u,2)),this.setAttribute("normal",new Oe(p,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ox(t.points,t.segments,t.phiStart,t.phiLength)}}class Xg extends _u{constructor(t=1,e=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Xg(t.radius,t.detail)}}class xu extends hn{constructor(t=1,e=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:s};const r=t/2,l=e/2,u=Math.floor(n),d=Math.floor(s),p=u+1,g=d+1,v=t/u,_=e/d,x=[],b=[],R=[],E=[];for(let M=0;M<g;M++){const w=M*_-l;for(let B=0;B<p;B++){const D=B*v-r;b.push(D,-w,0),R.push(0,0,1),E.push(B/u),E.push(1-M/d)}}for(let M=0;M<d;M++)for(let w=0;w<u;w++){const B=w+p*M,D=w+p*(M+1),I=w+1+p*(M+1),L=w+1+p*M;x.push(B,D,L),x.push(D,I,L)}this.setIndex(x),this.setAttribute("position",new Oe(b,3)),this.setAttribute("normal",new Oe(R,3)),this.setAttribute("uv",new Oe(E,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new xu(t.width,t.height,t.widthSegments,t.heightSegments)}}class lx extends hn{constructor(t=.5,e=1,n=32,s=1,r=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:s,thetaStart:r,thetaLength:l},n=Math.max(3,n),s=Math.max(1,s);const u=[],d=[],p=[],g=[];let v=t;const _=(e-t)/s,x=new Q,b=new Wt;for(let R=0;R<=s;R++){for(let E=0;E<=n;E++){const M=r+E/n*l;x.x=v*Math.cos(M),x.y=v*Math.sin(M),d.push(x.x,x.y,x.z),p.push(0,0,1),b.x=(x.x/e+1)/2,b.y=(x.y/e+1)/2,g.push(b.x,b.y)}v+=_}for(let R=0;R<s;R++){const E=R*(n+1);for(let M=0;M<n;M++){const w=M+E,B=w,D=w+n+1,I=w+n+2,L=w+1;u.push(B,D,L),u.push(D,I,L)}}this.setIndex(u),this.setAttribute("position",new Oe(d,3)),this.setAttribute("normal",new Oe(p,3)),this.setAttribute("uv",new Oe(g,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new lx(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class cx extends hn{constructor(t=new Wf([new Wt(0,.5),new Wt(-.5,-.5),new Wt(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],s=[],r=[],l=[];let u=0,d=0;if(Array.isArray(t)===!1)p(t);else for(let g=0;g<t.length;g++)p(t[g]),this.addGroup(u,d,g),u+=d,d=0;this.setIndex(n),this.setAttribute("position",new Oe(s,3)),this.setAttribute("normal",new Oe(r,3)),this.setAttribute("uv",new Oe(l,2));function p(g){const v=s.length/3,_=g.extractPoints(e);let x=_.shape;const b=_.holes;xo.isClockWise(x)===!1&&(x=x.reverse());for(let E=0,M=b.length;E<M;E++){const w=b[E];xo.isClockWise(w)===!0&&(b[E]=w.reverse())}const R=xo.triangulateShape(x,b);for(let E=0,M=b.length;E<M;E++){const w=b[E];x=x.concat(w)}for(let E=0,M=x.length;E<M;E++){const w=x[E];s.push(w.x,w.y,0),r.push(0,0,1),l.push(w.x,w.y)}for(let E=0,M=R.length;E<M;E++){const w=R[E],B=w[0]+v,D=w[1]+v,I=w[2]+v;n.push(B,D,I),d+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return hF(e,t)}static fromJSON(t,e){const n=[];for(let s=0,r=t.shapes.length;s<r;s++){const l=e[t.shapes[s]];n.push(l)}return new cx(n,t.curveSegments)}}function hF(i,t){if(t.shapes=[],Array.isArray(i))for(let e=0,n=i.length;e<n;e++){const s=i[e];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t}class jg extends hn{constructor(t=1,e=32,n=16,s=0,r=Math.PI*2,l=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:s,phiLength:r,thetaStart:l,thetaLength:u},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const d=Math.min(l+u,Math.PI);let p=0;const g=[],v=new Q,_=new Q,x=[],b=[],R=[],E=[];for(let M=0;M<=n;M++){const w=[],B=M/n;let D=0;M===0&&l===0?D=.5/e:M===n&&d===Math.PI&&(D=-.5/e);for(let I=0;I<=e;I++){const L=I/e;v.x=-t*Math.cos(s+L*r)*Math.sin(l+B*u),v.y=t*Math.cos(l+B*u),v.z=t*Math.sin(s+L*r)*Math.sin(l+B*u),b.push(v.x,v.y,v.z),_.copy(v).normalize(),R.push(_.x,_.y,_.z),E.push(L+D,1-B),w.push(p++)}g.push(w)}for(let M=0;M<n;M++)for(let w=0;w<e;w++){const B=g[M][w+1],D=g[M][w],I=g[M+1][w],L=g[M+1][w+1];(M!==0||l>0)&&x.push(B,D,L),(M!==n-1||d<Math.PI)&&x.push(D,I,L)}this.setIndex(x),this.setAttribute("position",new Oe(b,3)),this.setAttribute("normal",new Oe(R,3)),this.setAttribute("uv",new Oe(E,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new jg(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class ux extends _u{constructor(t=1,e=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new ux(t.radius,t.detail)}}class fx extends hn{constructor(t=1,e=.4,n=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:s,arc:r},n=Math.floor(n),s=Math.floor(s);const l=[],u=[],d=[],p=[],g=new Q,v=new Q,_=new Q;for(let x=0;x<=n;x++)for(let b=0;b<=s;b++){const R=b/s*r,E=x/n*Math.PI*2;v.x=(t+e*Math.cos(E))*Math.cos(R),v.y=(t+e*Math.cos(E))*Math.sin(R),v.z=e*Math.sin(E),u.push(v.x,v.y,v.z),g.x=t*Math.cos(R),g.y=t*Math.sin(R),_.subVectors(v,g).normalize(),d.push(_.x,_.y,_.z),p.push(b/s),p.push(x/n)}for(let x=1;x<=n;x++)for(let b=1;b<=s;b++){const R=(s+1)*x+b-1,E=(s+1)*(x-1)+b-1,M=(s+1)*(x-1)+b,w=(s+1)*x+b;l.push(R,E,w),l.push(E,M,w)}this.setIndex(l),this.setAttribute("position",new Oe(u,3)),this.setAttribute("normal",new Oe(d,3)),this.setAttribute("uv",new Oe(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new fx(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class hx extends hn{constructor(t=1,e=.4,n=64,s=8,r=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:s,p:r,q:l},n=Math.floor(n),s=Math.floor(s);const u=[],d=[],p=[],g=[],v=new Q,_=new Q,x=new Q,b=new Q,R=new Q,E=new Q,M=new Q;for(let B=0;B<=n;++B){const D=B/n*r*Math.PI*2;w(D,r,l,t,x),w(D+.01,r,l,t,b),E.subVectors(b,x),M.addVectors(b,x),R.crossVectors(E,M),M.crossVectors(R,E),R.normalize(),M.normalize();for(let I=0;I<=s;++I){const L=I/s*Math.PI*2,V=-e*Math.cos(L),H=e*Math.sin(L);v.x=x.x+(V*M.x+H*R.x),v.y=x.y+(V*M.y+H*R.y),v.z=x.z+(V*M.z+H*R.z),d.push(v.x,v.y,v.z),_.subVectors(v,x).normalize(),p.push(_.x,_.y,_.z),g.push(B/n),g.push(I/s)}}for(let B=1;B<=n;B++)for(let D=1;D<=s;D++){const I=(s+1)*(B-1)+(D-1),L=(s+1)*B+(D-1),V=(s+1)*B+D,H=(s+1)*(B-1)+D;u.push(I,L,H),u.push(L,V,H)}this.setIndex(u),this.setAttribute("position",new Oe(d,3)),this.setAttribute("normal",new Oe(p,3)),this.setAttribute("uv",new Oe(g,2));function w(B,D,I,L,V){const H=Math.cos(B),N=Math.sin(B),O=I/D*B,Y=Math.cos(O);V.x=L*(2+Y)*.5*H,V.y=L*(2+Y)*N*.5,V.z=L*Math.sin(O)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new hx(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class dx extends hn{constructor(t=new TM(new Q(-1,-1,0),new Q(-1,1,0),new Q(1,1,0)),e=64,n=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:s,closed:r};const l=t.computeFrenetFrames(e,r);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const u=new Q,d=new Q,p=new Wt;let g=new Q;const v=[],_=[],x=[],b=[];R(),this.setIndex(b),this.setAttribute("position",new Oe(v,3)),this.setAttribute("normal",new Oe(_,3)),this.setAttribute("uv",new Oe(x,2));function R(){for(let B=0;B<e;B++)E(B);E(r===!1?e:0),w(),M()}function E(B){g=t.getPointAt(B/e,g);const D=l.normals[B],I=l.binormals[B];for(let L=0;L<=s;L++){const V=L/s*Math.PI*2,H=Math.sin(V),N=-Math.cos(V);d.x=N*D.x+H*I.x,d.y=N*D.y+H*I.y,d.z=N*D.z+H*I.z,d.normalize(),_.push(d.x,d.y,d.z),u.x=g.x+n*d.x,u.y=g.y+n*d.y,u.z=g.z+n*d.z,v.push(u.x,u.y,u.z)}}function M(){for(let B=1;B<=e;B++)for(let D=1;D<=s;D++){const I=(s+1)*(B-1)+(D-1),L=(s+1)*B+(D-1),V=(s+1)*B+D,H=(s+1)*(B-1)+D;b.push(I,L,H),b.push(L,V,H)}}function w(){for(let B=0;B<=e;B++)for(let D=0;D<=s;D++)p.x=B/e,p.y=D/s,x.push(p.x,p.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new dx(new T_[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class SB extends hn{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],n=new Set,s=new Q,r=new Q;if(t.index!==null){const l=t.attributes.position,u=t.index;let d=t.groups;d.length===0&&(d=[{start:0,count:u.count,materialIndex:0}]);for(let p=0,g=d.length;p<g;++p){const v=d[p],_=v.start,x=v.count;for(let b=_,R=_+x;b<R;b+=3)for(let E=0;E<3;E++){const M=u.getX(b+E),w=u.getX(b+(E+1)%3);s.fromBufferAttribute(l,M),r.fromBufferAttribute(l,w),sC(s,r,n)===!0&&(e.push(s.x,s.y,s.z),e.push(r.x,r.y,r.z))}}}else{const l=t.attributes.position;for(let u=0,d=l.count/3;u<d;u++)for(let p=0;p<3;p++){const g=3*u+p,v=3*u+(p+1)%3;s.fromBufferAttribute(l,g),r.fromBufferAttribute(l,v),sC(s,r,n)===!0&&(e.push(s.x,s.y,s.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new Oe(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function sC(i,t,e){const n=`${i.x},${i.y},${i.z}-${t.x},${t.y},${t.z}`,s=`${t.x},${t.y},${t.z}-${i.x},${i.y},${i.z}`;return e.has(n)===!0||e.has(s)===!0?!1:(e.add(n),e.add(s),!0)}var aC=Object.freeze({__proto__:null,BoxGeometry:ih,CapsuleGeometry:nx,CircleGeometry:ix,ConeGeometry:Vg,CylinderGeometry:Gg,DodecahedronGeometry:sx,EdgesGeometry:hB,ExtrudeGeometry:rx,IcosahedronGeometry:kg,LatheGeometry:ox,OctahedronGeometry:Xg,PlaneGeometry:xu,PolyhedronGeometry:_u,RingGeometry:lx,ShapeGeometry:cx,SphereGeometry:jg,TetrahedronGeometry:ux,TorusGeometry:fx,TorusKnotGeometry:hx,TubeGeometry:dx,WireframeGeometry:SB});class MB extends hs{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new xe(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class bB extends qa{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Yg extends hs{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new xe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yu,this.normalScale=new Wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class zr extends Yg{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Wt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return fn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new xe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new xe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new xe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class EB extends hs{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new xe(16777215),this.specular=new xe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yu,this.normalScale=new Wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.combine=Ug,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class TB extends hs{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new xe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yu,this.normalScale=new Wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class CB extends hs{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yu,this.normalScale=new Wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class RB extends hs{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new xe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yu,this.normalScale=new Wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.combine=Ug,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class RM extends hs{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=kw,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class wM extends hs{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class wB extends hs{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new xe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yu,this.normalScale=new Wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class BB extends sa{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function Gf(i,t){return!i||i.constructor===t?i:typeof t.BYTES_PER_ELEMENT=="number"?new t(i):Array.prototype.slice.call(i)}function DB(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function UB(i){function t(s,r){return i[s]-i[r]}const e=i.length,n=new Array(e);for(let s=0;s!==e;++s)n[s]=s;return n.sort(t),n}function cS(i,t,e){const n=i.length,s=new i.constructor(n);for(let r=0,l=0;l!==n;++r){const u=e[r]*t;for(let d=0;d!==t;++d)s[l++]=i[u+d]}return s}function BM(i,t,e,n){let s=1,r=i[0];for(;r!==void 0&&r[n]===void 0;)r=i[s++];if(r===void 0)return;let l=r[n];if(l!==void 0)if(Array.isArray(l))do l=r[n],l!==void 0&&(t.push(r.time),e.push(...l)),r=i[s++];while(r!==void 0);else if(l.toArray!==void 0)do l=r[n],l!==void 0&&(t.push(r.time),l.toArray(e,e.length)),r=i[s++];while(r!==void 0);else do l=r[n],l!==void 0&&(t.push(r.time),e.push(l)),r=i[s++];while(r!==void 0)}function dF(i,t,e,n,s=30){const r=i.clone();r.name=t;const l=[];for(let d=0;d<r.tracks.length;++d){const p=r.tracks[d],g=p.getValueSize(),v=[],_=[];for(let x=0;x<p.times.length;++x){const b=p.times[x]*s;if(!(b<e||b>=n)){v.push(p.times[x]);for(let R=0;R<g;++R)_.push(p.values[x*g+R])}}v.length!==0&&(p.times=Gf(v,p.times.constructor),p.values=Gf(_,p.values.constructor),l.push(p))}r.tracks=l;let u=1/0;for(let d=0;d<r.tracks.length;++d)u>r.tracks[d].times[0]&&(u=r.tracks[d].times[0]);for(let d=0;d<r.tracks.length;++d)r.tracks[d].shift(-1*u);return r.resetDuration(),r}function pF(i,t=0,e=i,n=30){n<=0&&(n=30);const s=e.tracks.length,r=t/n;for(let l=0;l<s;++l){const u=e.tracks[l],d=u.ValueTypeName;if(d==="bool"||d==="string")continue;const p=i.tracks.find(function(M){return M.name===u.name&&M.ValueTypeName===d});if(p===void 0)continue;let g=0;const v=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=v/3);let _=0;const x=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=x/3);const b=u.times.length-1;let R;if(r<=u.times[0]){const M=g,w=v-g;R=u.values.slice(M,w)}else if(r>=u.times[b]){const M=b*v+g,w=M+v-g;R=u.values.slice(M,w)}else{const M=u.createInterpolant(),w=g,B=v-g;M.evaluate(r),R=M.resultBuffer.slice(w,B)}d==="quaternion"&&new Es().fromArray(R).normalize().conjugate().toArray(R);const E=p.times.length;for(let M=0;M<E;++M){const w=M*x+_;if(d==="quaternion")Es.multiplyQuaternionsFlat(p.values,w,R,0,p.values,w);else{const B=x-_*2;for(let D=0;D<B;++D)p.values[w+D]-=R[D]}}}return i.blendMode=uM,i}class mF{static convertArray(t,e){return Gf(t,e)}static isTypedArray(t){return DB(t)}static getKeyframeOrder(t){return UB(t)}static sortedArray(t,e,n){return cS(t,e,n)}static flattenJSON(t,e,n,s){BM(t,e,n,s)}static subclip(t,e,n,s,r=30){return dF(t,e,n,s,r)}static makeClipAdditive(t,e=0,n=t,s=30){return pF(t,e,n,s)}}class op{constructor(t,e,n,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,s=e[n],r=e[n-1];t:{e:{let l;n:{i:if(!(t<s)){for(let u=n+2;;){if(s===void 0){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===u)break;if(r=s,s=e[++n],t<s)break e}l=e.length;break n}if(!(t>=r)){const u=e[1];t<u&&(n=2,r=u);for(let d=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===d)break;if(s=r,r=e[--n-1],t>=r)break e}l=n,n=0;break n}break t}for(;n<l;){const u=n+l>>>1;t<e[u]?l=u:n=u+1}if(s=e[n],r=e[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,s)}return this.interpolate_(n,r,t,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=t*s;for(let l=0;l!==s;++l)e[l]=n[r+l];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class NB extends op{constructor(t,e,n,s){super(t,e,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ff,endingEnd:Ff}}intervalChanged_(t,e,n){const s=this.parameterPositions;let r=t-2,l=t+1,u=s[r],d=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case Hf:r=t,u=2*e-n;break;case mg:r=s.length-2,u=e+s[r]-s[r+1];break;default:r=t,u=n}if(d===void 0)switch(this.getSettings_().endingEnd){case Hf:l=t,d=2*n-e;break;case mg:l=1,d=n+s[1]-s[0];break;default:l=t-1,d=e}const p=(n-e)*.5,g=this.valueSize;this._weightPrev=p/(e-u),this._weightNext=p/(d-n),this._offsetPrev=r*g,this._offsetNext=l*g}interpolate_(t,e,n,s){const r=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=t*u,p=d-u,g=this._offsetPrev,v=this._offsetNext,_=this._weightPrev,x=this._weightNext,b=(n-e)/(s-e),R=b*b,E=R*b,M=-_*E+2*_*R-_*b,w=(1+_)*E+(-1.5-2*_)*R+(-.5+_)*b+1,B=(-1-x)*E+(1.5+x)*R+.5*b,D=x*E-x*R;for(let I=0;I!==u;++I)r[I]=M*l[g+I]+w*l[p+I]+B*l[d+I]+D*l[v+I];return r}}class DM extends op{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t,e,n,s){const r=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=t*u,p=d-u,g=(n-e)/(s-e),v=1-g;for(let _=0;_!==u;++_)r[_]=l[p+_]*v+l[d+_]*g;return r}}class OB extends op{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t){return this.copySampleValue_(t-1)}}class Gr{constructor(t,e,n,s){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Gf(e,this.TimeBufferType),this.values=Gf(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Gf(t.times,Array),values:Gf(t.values,Array)};const s=t.getInterpolation();s!==t.DefaultInterpolation&&(n.interpolation=s)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new OB(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new DM(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new NB(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case qd:e=this.InterpolantFactoryMethodDiscrete;break;case Wd:e=this.InterpolantFactoryMethodLinear;break;case wy:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return qd;case this.InterpolantFactoryMethodLinear:return Wd;case this.InterpolantFactoryMethodSmooth:return wy}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let n=0,s=e.length;n!==s;++n)e[n]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let n=0,s=e.length;n!==s;++n)e[n]*=t}return this}trim(t,e){const n=this.times,s=n.length;let r=0,l=s-1;for(;r!==s&&n[r]<t;)++r;for(;l!==-1&&n[l]>e;)--l;if(++l,r!==0||l!==s){r>=l&&(l=Math.max(l,1),r=l-1);const u=this.getValueSize();this.times=n.slice(r,l),this.values=this.values.slice(r*u,l*u)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,s=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let l=null;for(let u=0;u!==r;u++){const d=n[u];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,d),t=!1;break}if(l!==null&&l>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,d,l),t=!1;break}l=d}if(s!==void 0&&DB(s))for(let u=0,d=s.length;u!==d;++u){const p=s[u];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,p),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===wy,r=t.length-1;let l=1;for(let u=1;u<r;++u){let d=!1;const p=t[u],g=t[u+1];if(p!==g&&(u!==1||p!==t[0]))if(s)d=!0;else{const v=u*n,_=v-n,x=v+n;for(let b=0;b!==n;++b){const R=e[v+b];if(R!==e[_+b]||R!==e[x+b]){d=!0;break}}}if(d){if(u!==l){t[l]=t[u];const v=u*n,_=l*n;for(let x=0;x!==n;++x)e[_+x]=e[v+x]}++l}}if(r>0){t[l]=t[r];for(let u=r*n,d=l*n,p=0;p!==n;++p)e[d+p]=e[u+p];++l}return l!==t.length?(this.times=t.slice(0,l),this.values=e.slice(0,l*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=this.constructor,s=new n(this.name,t,e);return s.createInterpolant=this.createInterpolant,s}}Gr.prototype.ValueTypeName="";Gr.prototype.TimeBufferType=Float32Array;Gr.prototype.ValueBufferType=Float32Array;Gr.prototype.DefaultInterpolation=Wd;class sh extends Gr{constructor(t,e,n){super(t,e,n)}}sh.prototype.ValueTypeName="bool";sh.prototype.ValueBufferType=Array;sh.prototype.DefaultInterpolation=qd;sh.prototype.InterpolantFactoryMethodLinear=void 0;sh.prototype.InterpolantFactoryMethodSmooth=void 0;class UM extends Gr{constructor(t,e,n,s){super(t,e,n,s)}}UM.prototype.ValueTypeName="color";class Qf extends Gr{constructor(t,e,n,s){super(t,e,n,s)}}Qf.prototype.ValueTypeName="number";class LB extends op{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t,e,n,s){const r=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=(n-e)/(s-e);let p=t*u;for(let g=p+u;p!==g;p+=4)Es.slerpFlat(r,0,l,p-u,l,p,d);return r}}class $f extends Gr{constructor(t,e,n,s){super(t,e,n,s)}InterpolantFactoryMethodLinear(t){return new LB(this.times,this.values,this.getValueSize(),t)}}$f.prototype.ValueTypeName="quaternion";$f.prototype.InterpolantFactoryMethodSmooth=void 0;class ah extends Gr{constructor(t,e,n){super(t,e,n)}}ah.prototype.ValueTypeName="string";ah.prototype.ValueBufferType=Array;ah.prototype.DefaultInterpolation=qd;ah.prototype.InterpolantFactoryMethodLinear=void 0;ah.prototype.InterpolantFactoryMethodSmooth=void 0;class th extends Gr{constructor(t,e,n,s){super(t,e,n,s)}}th.prototype.ValueTypeName="vector";class $d{constructor(t="",e=-1,n=[],s=j_){this.name=t,this.tracks=n,this.duration=e,this.blendMode=s,this.uuid=cr(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,s=1/(t.fps||1);for(let l=0,u=n.length;l!==u;++l)e.push(vF(n[l]).scale(s));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,s={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,l=n.length;r!==l;++r)e.push(Gr.toJSON(n[r]));return s}static CreateFromMorphTargetSequence(t,e,n,s){const r=e.length,l=[];for(let u=0;u<r;u++){let d=[],p=[];d.push((u+r-1)%r,u,(u+1)%r),p.push(0,1,0);const g=UB(d);d=cS(d,1,g),p=cS(p,1,g),!s&&d[0]===0&&(d.push(r),p.push(p[0])),l.push(new Qf(".morphTargetInfluences["+e[u].name+"]",d,p).scale(1/n))}return new this(t,-1,l)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const s=t;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===e)return n[s];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const s={},r=/^([\w-]*?)([\d]+)$/;for(let u=0,d=t.length;u<d;u++){const p=t[u],g=p.name.match(r);if(g&&g.length>1){const v=g[1];let _=s[v];_||(s[v]=_=[]),_.push(p)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],e,n));return l}static parseAnimation(t,e){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(v,_,x,b,R){if(x.length!==0){const E=[],M=[];BM(x,E,M,b),E.length!==0&&R.push(new v(_,E,M))}},s=[],r=t.name||"default",l=t.fps||30,u=t.blendMode;let d=t.length||-1;const p=t.hierarchy||[];for(let v=0;v<p.length;v++){const _=p[v].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const x={};let b;for(b=0;b<_.length;b++)if(_[b].morphTargets)for(let R=0;R<_[b].morphTargets.length;R++)x[_[b].morphTargets[R]]=-1;for(const R in x){const E=[],M=[];for(let w=0;w!==_[b].morphTargets.length;++w){const B=_[b];E.push(B.time),M.push(B.morphTarget===R?1:0)}s.push(new Qf(".morphTargetInfluence["+R+"]",E,M))}d=x.length*l}else{const x=".bones["+e[v].name+"]";n(th,x+".position",_,"pos",s),n($f,x+".quaternion",_,"rot",s),n(th,x+".scale",_,"scl",s)}}return s.length===0?null:new this(r,d,s,u)}resetDuration(){const t=this.tracks;let e=0;for(let n=0,s=t.length;n!==s;++n){const r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function gF(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Qf;case"vector":case"vector2":case"vector3":case"vector4":return th;case"color":return UM;case"quaternion":return $f;case"bool":case"boolean":return sh;case"string":return ah}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function vF(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=gF(i.type);if(i.times===void 0){const e=[],n=[];BM(i.keys,e,n,"value"),i.times=e,i.values=n}return t.parse!==void 0?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const $l={enabled:!1,files:{},add:function(i,t){this.enabled!==!1&&(this.files[i]=t)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class px{constructor(t,e,n){const s=this;let r=!1,l=0,u=0,d;const p=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(g){u++,r===!1&&s.onStart!==void 0&&s.onStart(g,l,u),r=!0},this.itemEnd=function(g){l++,s.onProgress!==void 0&&s.onProgress(g,l,u),l===u&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(g){s.onError!==void 0&&s.onError(g)},this.resolveURL=function(g){return d?d(g):g},this.setURLModifier=function(g){return d=g,this},this.addHandler=function(g,v){return p.push(g,v),this},this.removeHandler=function(g){const v=p.indexOf(g);return v!==-1&&p.splice(v,2),this},this.getHandler=function(g){for(let v=0,_=p.length;v<_;v+=2){const x=p[v],b=p[v+1];if(x.global&&(x.lastIndex=0),x.test(g))return b}return null}}}const IB=new px;class Gs{constructor(t){this.manager=t!==void 0?t:IB,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(s,r){n.load(t,s,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Gs.DEFAULT_MATERIAL_NAME="__DEFAULT";const Yl={};class yF extends Error{constructor(t,e){super(t),this.response=e}}class zs extends Gs{constructor(t){super(t),this.mimeType="",this.responseType=""}load(t,e,n,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=$l.get(t);if(r!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(Yl[t]!==void 0){Yl[t].push({onLoad:e,onProgress:n,onError:s});return}Yl[t]=[],Yl[t].push({onLoad:e,onProgress:n,onError:s});const l=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,d=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const g=Yl[t],v=p.body.getReader(),_=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),x=_?parseInt(_):0,b=x!==0;let R=0;const E=new ReadableStream({start(M){w();function w(){v.read().then(({done:B,value:D})=>{if(B)M.close();else{R+=D.byteLength;const I=new ProgressEvent("progress",{lengthComputable:b,loaded:R,total:x});for(let L=0,V=g.length;L<V;L++){const H=g[L];H.onProgress&&H.onProgress(I)}M.enqueue(D),w()}},B=>{M.error(B)})}}});return new Response(E)}else throw new yF(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(g=>new DOMParser().parseFromString(g,u));case"json":return p.json();default:if(u==="")return p.text();{const v=/charset="?([^;"\s]*)"?/i.exec(u),_=v&&v[1]?v[1].toLowerCase():void 0,x=new TextDecoder(_);return p.arrayBuffer().then(b=>x.decode(b))}}}).then(p=>{$l.add(t,p);const g=Yl[t];delete Yl[t];for(let v=0,_=g.length;v<_;v++){const x=g[v];x.onLoad&&x.onLoad(p)}}).catch(p=>{const g=Yl[t];if(g===void 0)throw this.manager.itemError(t),p;delete Yl[t];for(let v=0,_=g.length;v<_;v++){const x=g[v];x.onError&&x.onError(p)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class _F extends Gs{constructor(t){super(t)}load(t,e,n,s){const r=this,l=new zs(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(u){try{e(r.parse(JSON.parse(u)))}catch(d){s?s(d):console.error(d),r.manager.itemError(t)}},n,s)}parse(t){const e=[];for(let n=0;n<t.length;n++){const s=$d.parse(t[n]);e.push(s)}return e}}class xF extends Gs{constructor(t){super(t)}load(t,e,n,s){const r=this,l=[],u=new tx,d=new zs(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(r.withCredentials);let p=0;function g(v){d.load(t[v],function(_){const x=r.parse(_,!0);l[v]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},p+=1,p===6&&(x.mipmapCount===1&&(u.minFilter=Wn),u.image=l,u.format=x.format,u.needsUpdate=!0,e&&e(u))},n,s)}if(Array.isArray(t))for(let v=0,_=t.length;v<_;++v)g(v);else d.load(t,function(v){const _=r.parse(v,!0);if(_.isCubemap){const x=_.mipmaps.length/_.mipmapCount;for(let b=0;b<x;b++){l[b]={mipmaps:[]};for(let R=0;R<_.mipmapCount;R++)l[b].mipmaps.push(_.mipmaps[b*_.mipmapCount+R]),l[b].format=_.format,l[b].width=_.width,l[b].height=_.height}u.image=l}else u.image.width=_.width,u.image.height=_.height,u.mipmaps=_.mipmaps;_.mipmapCount===1&&(u.minFilter=Wn),u.format=_.format,u.needsUpdate=!0,e&&e(u)},n,s);return u}}class Mg extends Gs{constructor(t){super(t)}load(t,e,n,s){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,l=$l.get(t);if(l!==void 0)return r.manager.itemStart(t),setTimeout(function(){e&&e(l),r.manager.itemEnd(t)},0),l;const u=_g("img");function d(){g(),$l.add(t,this),e&&e(this),r.manager.itemEnd(t)}function p(v){g(),s&&s(v),r.manager.itemError(t),r.manager.itemEnd(t)}function g(){u.removeEventListener("load",d,!1),u.removeEventListener("error",p,!1)}return u.addEventListener("load",d,!1),u.addEventListener("error",p,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),r.manager.itemStart(t),u.src=t,u}}class PB extends Gs{constructor(t){super(t)}load(t,e,n,s){const r=new Pg;r.colorSpace=Fs;const l=new Mg(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let u=0;function d(p){l.load(t[p],function(g){r.images[p]=g,u++,u===6&&(r.needsUpdate=!0,e&&e(r))},void 0,s)}for(let p=0;p<t.length;++p)d(p);return r}}class NM extends Gs{constructor(t){super(t)}load(t,e,n,s){const r=this,l=new Ao,u=new zs(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(r.withCredentials),u.load(t,function(d){let p;try{p=r.parse(d)}catch(g){if(s!==void 0)s(g);else{console.error(g);return}}p.image!==void 0?l.image=p.image:p.data!==void 0&&(l.image.width=p.width,l.image.height=p.height,l.image.data=p.data),l.wrapS=p.wrapS!==void 0?p.wrapS:Wi,l.wrapT=p.wrapT!==void 0?p.wrapT:Wi,l.magFilter=p.magFilter!==void 0?p.magFilter:Wn,l.minFilter=p.minFilter!==void 0?p.minFilter:Wn,l.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(l.colorSpace=p.colorSpace),p.flipY!==void 0&&(l.flipY=p.flipY),p.format!==void 0&&(l.format=p.format),p.type!==void 0&&(l.type=p.type),p.mipmaps!==void 0&&(l.mipmaps=p.mipmaps,l.minFilter=Lr),p.mipmapCount===1&&(l.minFilter=Wn),p.generateMipmaps!==void 0&&(l.generateMipmaps=p.generateMipmaps),l.needsUpdate=!0,e&&e(l,p)},n,s),l}}class OM extends Gs{constructor(t){super(t)}load(t,e,n,s){const r=new Jn,l=new Mg(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(t,function(u){r.image=u,r.needsUpdate=!0,e!==void 0&&e(r)},n,s),r}}class Au extends On{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new xe(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}}class FB extends Au{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.groundColor=new xe(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const JA=new We,rC=new Q,oC=new Q;class LM{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Wt(512,512),this.mapType=Ca,this.map=null,this.mapPass=null,this.matrix=new We,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new rp,this._frameExtents=new Wt(1,1),this._viewportCount=1,this._viewports=[new Hn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;rC.setFromMatrixPosition(t.matrixWorld),e.position.copy(rC),oC.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(oC),e.updateMatrixWorld(),JA.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(JA),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(JA)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class AF extends LM{constructor(){super(new bi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=Kd*2*t.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;(n!==e.fov||s!==e.aspect||r!==e.far)&&(e.fov=n,e.aspect=s,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class IM extends Au{constructor(t,e,n=0,s=Math.PI/3,r=0,l=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.target=new On,this.distance=n,this.angle=s,this.penumbra=r,this.decay=l,this.map=null,this.shadow=new AF}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const lC=new We,Pm=new Q,ZA=new Q;class SF extends LM{constructor(){super(new bi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Wt(4,2),this._viewportCount=6,this._viewports=[new Hn(2,1,1,1),new Hn(0,1,1,1),new Hn(3,1,1,1),new Hn(1,1,1,1),new Hn(3,0,1,1),new Hn(1,0,1,1)],this._cubeDirections=[new Q(1,0,0),new Q(-1,0,0),new Q(0,0,1),new Q(0,0,-1),new Q(0,1,0),new Q(0,-1,0)],this._cubeUps=[new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,0,1),new Q(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,s=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Pm.setFromMatrixPosition(t.matrixWorld),n.position.copy(Pm),ZA.copy(n.position),ZA.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(ZA),n.updateMatrixWorld(),s.makeTranslation(-Pm.x,-Pm.y,-Pm.z),lC.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lC)}}class PM extends Au{constructor(t,e,n=0,s=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new SF}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Fr extends W_{constructor(t=-1,e=1,n=1,s=-1,r=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=s,this.near=r,this.far=l,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,s,r,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=n-t,l=n+t,u=s+e,d=s-e;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=p*this.view.offsetX,l=r+p*this.view.width,u-=g*this.view.offsetY,d=u-g*this.view.height}this.projectionMatrix.makeOrthographic(r,l,u,d,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class MF extends LM{constructor(){super(new Fr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class FM extends Au{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.target=new On,this.shadow=new MF}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class HB extends Au{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class zB extends Au{constructor(t,e,n=10,s=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class GB{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Q)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,s=t.y,r=t.z,l=this.coefficients;return e.copy(l[0]).multiplyScalar(.282095),e.addScaledVector(l[1],.488603*s),e.addScaledVector(l[2],.488603*r),e.addScaledVector(l[3],.488603*n),e.addScaledVector(l[4],1.092548*(n*s)),e.addScaledVector(l[5],1.092548*(s*r)),e.addScaledVector(l[6],.315392*(3*r*r-1)),e.addScaledVector(l[7],1.092548*(n*r)),e.addScaledVector(l[8],.546274*(n*n-s*s)),e}getIrradianceAt(t,e){const n=t.x,s=t.y,r=t.z,l=this.coefficients;return e.copy(l[0]).multiplyScalar(.886227),e.addScaledVector(l[1],2*.511664*s),e.addScaledVector(l[2],2*.511664*r),e.addScaledVector(l[3],2*.511664*n),e.addScaledVector(l[4],2*.429043*n*s),e.addScaledVector(l[5],2*.429043*s*r),e.addScaledVector(l[6],.743125*r*r-.247708),e.addScaledVector(l[7],2*.429043*n*r),e.addScaledVector(l[8],.429043*(n*n-s*s)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(t,e+s*3);return this}toArray(t=[],e=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(t,e+s*3);return t}static getBasisAt(t,e){const n=t.x,s=t.y,r=t.z;e[0]=.282095,e[1]=.488603*s,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*s,e[5]=1.092548*s*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-s*s)}}class VB extends Au{constructor(t=new GB,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class mx extends Gs{constructor(t){super(t),this.textures={}}load(t,e,n,s){const r=this,l=new zs(r.manager);l.setPath(r.path),l.setRequestHeader(r.requestHeader),l.setWithCredentials(r.withCredentials),l.load(t,function(u){try{e(r.parse(JSON.parse(u)))}catch(d){s?s(d):console.error(d),r.manager.itemError(t)}},n,s)}parse(t){const e=this.textures;function n(r){return e[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),e[r]}const s=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(s.uuid=t.uuid),t.name!==void 0&&(s.name=t.name),t.color!==void 0&&s.color!==void 0&&s.color.setHex(t.color),t.roughness!==void 0&&(s.roughness=t.roughness),t.metalness!==void 0&&(s.metalness=t.metalness),t.sheen!==void 0&&(s.sheen=t.sheen),t.sheenColor!==void 0&&(s.sheenColor=new xe().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(s.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(t.emissive),t.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(t.specular),t.specularIntensity!==void 0&&(s.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(s.shininess=t.shininess),t.clearcoat!==void 0&&(s.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(s.dispersion=t.dispersion),t.iridescence!==void 0&&(s.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(s.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(s.transmission=t.transmission),t.thickness!==void 0&&(s.thickness=t.thickness),t.attenuationDistance!==void 0&&(s.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(s.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(s.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(s.fog=t.fog),t.flatShading!==void 0&&(s.flatShading=t.flatShading),t.blending!==void 0&&(s.blending=t.blending),t.combine!==void 0&&(s.combine=t.combine),t.side!==void 0&&(s.side=t.side),t.shadowSide!==void 0&&(s.shadowSide=t.shadowSide),t.opacity!==void 0&&(s.opacity=t.opacity),t.transparent!==void 0&&(s.transparent=t.transparent),t.alphaTest!==void 0&&(s.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(s.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(s.depthFunc=t.depthFunc),t.depthTest!==void 0&&(s.depthTest=t.depthTest),t.depthWrite!==void 0&&(s.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(s.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(s.blendSrc=t.blendSrc),t.blendDst!==void 0&&(s.blendDst=t.blendDst),t.blendEquation!==void 0&&(s.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(s.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(s.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(s.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(s.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(s.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(s.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(s.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(s.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(s.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(s.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(s.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(s.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(s.rotation=t.rotation),t.linewidth!==void 0&&(s.linewidth=t.linewidth),t.dashSize!==void 0&&(s.dashSize=t.dashSize),t.gapSize!==void 0&&(s.gapSize=t.gapSize),t.scale!==void 0&&(s.scale=t.scale),t.polygonOffset!==void 0&&(s.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(s.dithering=t.dithering),t.alphaToCoverage!==void 0&&(s.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(s.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(s.visible=t.visible),t.toneMapped!==void 0&&(s.toneMapped=t.toneMapped),t.userData!==void 0&&(s.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?s.vertexColors=t.vertexColors>0:s.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const r in t.uniforms){const l=t.uniforms[r];switch(s.uniforms[r]={},l.type){case"t":s.uniforms[r].value=n(l.value);break;case"c":s.uniforms[r].value=new xe().setHex(l.value);break;case"v2":s.uniforms[r].value=new Wt().fromArray(l.value);break;case"v3":s.uniforms[r].value=new Q().fromArray(l.value);break;case"v4":s.uniforms[r].value=new Hn().fromArray(l.value);break;case"m3":s.uniforms[r].value=new gn().fromArray(l.value);break;case"m4":s.uniforms[r].value=new We().fromArray(l.value);break;default:s.uniforms[r].value=l.value}}if(t.defines!==void 0&&(s.defines=t.defines),t.vertexShader!==void 0&&(s.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(s.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(s.glslVersion=t.glslVersion),t.extensions!==void 0)for(const r in t.extensions)s.extensions[r]=t.extensions[r];if(t.lights!==void 0&&(s.lights=t.lights),t.clipping!==void 0&&(s.clipping=t.clipping),t.size!==void 0&&(s.size=t.size),t.sizeAttenuation!==void 0&&(s.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(s.map=n(t.map)),t.matcap!==void 0&&(s.matcap=n(t.matcap)),t.alphaMap!==void 0&&(s.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(s.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(s.bumpScale=t.bumpScale),t.normalMap!==void 0&&(s.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(s.normalMapType=t.normalMapType),t.normalScale!==void 0){let r=t.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new Wt().fromArray(r)}return t.displacementMap!==void 0&&(s.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(s.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(s.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(s.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(s.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(s.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(s.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(s.specularMap=n(t.specularMap)),t.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(t.specularIntensityMap)),t.specularColorMap!==void 0&&(s.specularColorMap=n(t.specularColorMap)),t.envMap!==void 0&&(s.envMap=n(t.envMap)),t.envMapRotation!==void 0&&s.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(s.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(s.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(s.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(s.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(s.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(s.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(s.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(s.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(s.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Wt().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(s.iridescenceMap=n(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(s.transmissionMap=n(t.transmissionMap)),t.thicknessMap!==void 0&&(s.thicknessMap=n(t.thicknessMap)),t.anisotropyMap!==void 0&&(s.anisotropyMap=n(t.anisotropyMap)),t.sheenColorMap!==void 0&&(s.sheenColorMap=n(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(t.sheenRoughnessMap)),s}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return mx.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:MB,SpriteMaterial:vM,RawShaderMaterial:bB,ShaderMaterial:qa,PointsMaterial:$_,MeshPhysicalMaterial:zr,MeshStandardMaterial:Yg,MeshPhongMaterial:EB,MeshToonMaterial:TB,MeshNormalMaterial:CB,MeshLambertMaterial:RB,MeshDepthMaterial:RM,MeshDistanceMaterial:wM,MeshBasicMaterial:Ya,MeshMatcapMaterial:wB,LineDashedMaterial:BB,LineBasicMaterial:sa,Material:hs};return new e[t]}}class uu{static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class kB extends hn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class XB extends Gs{constructor(t){super(t)}load(t,e,n,s){const r=this,l=new zs(r.manager);l.setPath(r.path),l.setRequestHeader(r.requestHeader),l.setWithCredentials(r.withCredentials),l.load(t,function(u){try{e(r.parse(JSON.parse(u)))}catch(d){s?s(d):console.error(d),r.manager.itemError(t)}},n,s)}parse(t){const e={},n={};function s(x,b){if(e[b]!==void 0)return e[b];const E=x.interleavedBuffers[b],M=r(x,E.buffer),w=Nd(E.type,M),B=new Hg(w,E.stride);return B.uuid=E.uuid,e[b]=B,B}function r(x,b){if(n[b]!==void 0)return n[b];const E=x.arrayBuffers[b],M=new Uint32Array(E).buffer;return n[b]=M,M}const l=t.isInstancedBufferGeometry?new kB:new hn,u=t.data.index;if(u!==void 0){const x=Nd(u.type,u.array);l.setIndex(new zn(x,1))}const d=t.data.attributes;for(const x in d){const b=d[x];let R;if(b.isInterleavedBufferAttribute){const E=s(t.data,b.data);R=new gu(E,b.itemSize,b.offset,b.normalized)}else{const E=Nd(b.type,b.array),M=b.isInstancedBufferAttribute?Jf:zn;R=new M(E,b.itemSize,b.normalized)}b.name!==void 0&&(R.name=b.name),b.usage!==void 0&&R.setUsage(b.usage),l.setAttribute(x,R)}const p=t.data.morphAttributes;if(p)for(const x in p){const b=p[x],R=[];for(let E=0,M=b.length;E<M;E++){const w=b[E];let B;if(w.isInterleavedBufferAttribute){const D=s(t.data,w.data);B=new gu(D,w.itemSize,w.offset,w.normalized)}else{const D=Nd(w.type,w.array);B=new zn(D,w.itemSize,w.normalized)}w.name!==void 0&&(B.name=w.name),R.push(B)}l.morphAttributes[x]=R}t.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const v=t.data.groups||t.data.drawcalls||t.data.offsets;if(v!==void 0)for(let x=0,b=v.length;x!==b;++x){const R=v[x];l.addGroup(R.start,R.count,R.materialIndex)}const _=t.data.boundingSphere;if(_!==void 0){const x=new Q;_.center!==void 0&&x.fromArray(_.center),l.boundingSphere=new Ts(x,_.radius)}return t.name&&(l.name=t.name),t.userData&&(l.userData=t.userData),l}}class bF extends Gs{constructor(t){super(t)}load(t,e,n,s){const r=this,l=this.path===""?uu.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||l;const u=new zs(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(d){let p=null;try{p=JSON.parse(d)}catch(v){s!==void 0&&s(v),console.error("THREE:ObjectLoader: Can't parse "+t+".",v.message);return}const g=p.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}r.parse(p,e)},n,s)}async loadAsync(t,e){const n=this,s=this.path===""?uu.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const r=new zs(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const l=await r.loadAsync(t,e),u=JSON.parse(l),d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await n.parseAsync(u)}parse(t,e){const n=this.parseAnimations(t.animations),s=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,s),l=this.parseImages(t.images,function(){e!==void 0&&e(p)}),u=this.parseTextures(t.textures,l),d=this.parseMaterials(t.materials,u),p=this.parseObject(t.object,r,d,u,n),g=this.parseSkeletons(t.skeletons,p);if(this.bindSkeletons(p,g),this.bindLightTargets(p),e!==void 0){let v=!1;for(const _ in l)if(l[_].data instanceof HTMLImageElement){v=!0;break}v===!1&&e(p)}return p}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),s=this.parseGeometries(t.geometries,n),r=await this.parseImagesAsync(t.images),l=this.parseTextures(t.textures,r),u=this.parseMaterials(t.materials,l),d=this.parseObject(t.object,s,u,l,e),p=this.parseSkeletons(t.skeletons,d);return this.bindSkeletons(d,p),this.bindLightTargets(d),d}parseShapes(t){const e={};if(t!==void 0)for(let n=0,s=t.length;n<s;n++){const r=new Wf().fromJSON(t[n]);e[r.uuid]=r}return e}parseSkeletons(t,e){const n={},s={};if(e.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),t!==void 0)for(let r=0,l=t.length;r<l;r++){const u=new zg().fromJSON(t[r],s);n[u.uuid]=u}return n}parseGeometries(t,e){const n={};if(t!==void 0){const s=new XB;for(let r=0,l=t.length;r<l;r++){let u;const d=t[r];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":u=s.parse(d);break;default:d.type in aC?u=aC[d.type].fromJSON(d,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}u.uuid=d.uuid,d.name!==void 0&&(u.name=d.name),d.userData!==void 0&&(u.userData=d.userData),n[d.uuid]=u}}return n}parseMaterials(t,e){const n={},s={};if(t!==void 0){const r=new mx;r.setTextures(e);for(let l=0,u=t.length;l<u;l++){const d=t[l];n[d.uuid]===void 0&&(n[d.uuid]=r.parse(d)),s[d.uuid]=n[d.uuid]}}return s}parseAnimations(t){const e={};if(t!==void 0)for(let n=0;n<t.length;n++){const s=t[n],r=$d.parse(s);e[r.uuid]=r}return e}parseImages(t,e){const n=this,s={};let r;function l(d){return n.manager.itemStart(d),r.load(d,function(){n.manager.itemEnd(d)},void 0,function(){n.manager.itemError(d),n.manager.itemEnd(d)})}function u(d){if(typeof d=="string"){const p=d,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;return l(g)}else return d.data?{data:Nd(d.type,d.data),width:d.width,height:d.height}:null}if(t!==void 0&&t.length>0){const d=new px(e);r=new Mg(d),r.setCrossOrigin(this.crossOrigin);for(let p=0,g=t.length;p<g;p++){const v=t[p],_=v.url;if(Array.isArray(_)){const x=[];for(let b=0,R=_.length;b<R;b++){const E=_[b],M=u(E);M!==null&&(M instanceof HTMLImageElement?x.push(M):x.push(new Ao(M.data,M.width,M.height)))}s[v.uuid]=new ou(x)}else{const x=u(v.url);s[v.uuid]=new ou(x)}}}return s}async parseImagesAsync(t){const e=this,n={};let s;async function r(l){if(typeof l=="string"){const u=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:e.resourcePath+u;return await s.loadAsync(d)}else return l.data?{data:Nd(l.type,l.data),width:l.width,height:l.height}:null}if(t!==void 0&&t.length>0){s=new Mg(this.manager),s.setCrossOrigin(this.crossOrigin);for(let l=0,u=t.length;l<u;l++){const d=t[l],p=d.url;if(Array.isArray(p)){const g=[];for(let v=0,_=p.length;v<_;v++){const x=p[v],b=await r(x);b!==null&&(b instanceof HTMLImageElement?g.push(b):g.push(new Ao(b.data,b.width,b.height)))}n[d.uuid]=new ou(g)}else{const g=await r(d.url);n[d.uuid]=new ou(g)}}}return n}parseTextures(t,e){function n(r,l){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),l[r])}const s={};if(t!==void 0)for(let r=0,l=t.length;r<l;r++){const u=t[r];u.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),e[u.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",u.image);const d=e[u.image],p=d.data;let g;Array.isArray(p)?(g=new Pg,p.length===6&&(g.needsUpdate=!0)):(p&&p.data?g=new Ao:g=new Jn,p&&(g.needsUpdate=!0)),g.source=d,g.uuid=u.uuid,u.name!==void 0&&(g.name=u.name),u.mapping!==void 0&&(g.mapping=n(u.mapping,EF)),u.channel!==void 0&&(g.channel=u.channel),u.offset!==void 0&&g.offset.fromArray(u.offset),u.repeat!==void 0&&g.repeat.fromArray(u.repeat),u.center!==void 0&&g.center.fromArray(u.center),u.rotation!==void 0&&(g.rotation=u.rotation),u.wrap!==void 0&&(g.wrapS=n(u.wrap[0],cC),g.wrapT=n(u.wrap[1],cC)),u.format!==void 0&&(g.format=u.format),u.internalFormat!==void 0&&(g.internalFormat=u.internalFormat),u.type!==void 0&&(g.type=u.type),u.colorSpace!==void 0&&(g.colorSpace=u.colorSpace),u.minFilter!==void 0&&(g.minFilter=n(u.minFilter,uC)),u.magFilter!==void 0&&(g.magFilter=n(u.magFilter,uC)),u.anisotropy!==void 0&&(g.anisotropy=u.anisotropy),u.flipY!==void 0&&(g.flipY=u.flipY),u.generateMipmaps!==void 0&&(g.generateMipmaps=u.generateMipmaps),u.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(g.unpackAlignment=u.unpackAlignment),u.compareFunction!==void 0&&(g.compareFunction=u.compareFunction),u.userData!==void 0&&(g.userData=u.userData),s[u.uuid]=g}return s}parseObject(t,e,n,s,r){let l;function u(_){return e[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",_),e[_]}function d(_){if(_!==void 0){if(Array.isArray(_)){const x=[];for(let b=0,R=_.length;b<R;b++){const E=_[b];n[E]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",E),x.push(n[E])}return x}return n[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),n[_]}}function p(_){return s[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",_),s[_]}let g,v;switch(t.type){case"Scene":l=new Fg,t.background!==void 0&&(Number.isInteger(t.background)?l.background=new xe(t.background):l.background=p(t.background)),t.environment!==void 0&&(l.environment=p(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?l.fog=new J_(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(l.fog=new K_(t.fog.color,t.fog.density)),t.fog.name!==""&&(l.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(l.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&l.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(l.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&l.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":l=new bi(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(l.focus=t.focus),t.zoom!==void 0&&(l.zoom=t.zoom),t.filmGauge!==void 0&&(l.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(l.filmOffset=t.filmOffset),t.view!==void 0&&(l.view=Object.assign({},t.view));break;case"OrthographicCamera":l=new Fr(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(l.zoom=t.zoom),t.view!==void 0&&(l.view=Object.assign({},t.view));break;case"AmbientLight":l=new HB(t.color,t.intensity);break;case"DirectionalLight":l=new FM(t.color,t.intensity),l.target=t.target||"";break;case"PointLight":l=new PM(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":l=new zB(t.color,t.intensity,t.width,t.height);break;case"SpotLight":l=new IM(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),l.target=t.target||"";break;case"HemisphereLight":l=new FB(t.color,t.groundColor,t.intensity);break;case"LightProbe":l=new VB().fromJSON(t);break;case"SkinnedMesh":g=u(t.geometry),v=d(t.material),l=new yM(g,v),t.bindMode!==void 0&&(l.bindMode=t.bindMode),t.bindMatrix!==void 0&&l.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(l.skeleton=t.skeleton);break;case"Mesh":g=u(t.geometry),v=d(t.material),l=new Ei(g,v);break;case"InstancedMesh":g=u(t.geometry),v=d(t.material);const _=t.count,x=t.instanceMatrix,b=t.instanceColor;l=new _M(g,v,_),l.instanceMatrix=new Jf(new Float32Array(x.array),16),b!==void 0&&(l.instanceColor=new Jf(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":g=u(t.geometry),v=d(t.material),l=new uB(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,v),l.geometry=g,l.perObjectFrustumCulled=t.perObjectFrustumCulled,l.sortObjects=t.sortObjects,l._drawRanges=t.drawRanges,l._reservedRanges=t.reservedRanges,l._geometryInfo=t.geometryInfo.map(R=>{let E=null,M=null;return R.boundingBox!==void 0&&(E=new Hs,E.min.fromArray(R.boundingBox.min),E.max.fromArray(R.boundingBox.max)),R.boundingSphere!==void 0&&(M=new Ts,M.radius=R.boundingSphere.radius,M.center.fromArray(R.boundingSphere.center)),{...R,boundingBox:E,boundingSphere:M}}),l._instanceInfo=t.instanceInfo,l._availableInstanceIds=t._availableInstanceIds,l._availableGeometryIds=t._availableGeometryIds,l._nextIndexStart=t.nextIndexStart,l._nextVertexStart=t.nextVertexStart,l._geometryCount=t.geometryCount,l._maxInstanceCount=t.maxInstanceCount,l._maxVertexCount=t.maxVertexCount,l._maxIndexCount=t.maxIndexCount,l._geometryInitialized=t.geometryInitialized,l._matricesTexture=p(t.matricesTexture.uuid),l._indirectTexture=p(t.indirectTexture.uuid),t.colorsTexture!==void 0&&(l._colorsTexture=p(t.colorsTexture.uuid)),t.boundingSphere!==void 0&&(l.boundingSphere=new Ts,l.boundingSphere.center.fromArray(t.boundingSphere.center),l.boundingSphere.radius=t.boundingSphere.radius),t.boundingBox!==void 0&&(l.boundingBox=new Hs,l.boundingBox.min.fromArray(t.boundingBox.min),l.boundingBox.max.fromArray(t.boundingBox.max));break;case"LOD":l=new cB;break;case"Line":l=new sc(u(t.geometry),d(t.material));break;case"LineLoop":l=new xM(u(t.geometry),d(t.material));break;case"LineSegments":l=new Mo(u(t.geometry),d(t.material));break;case"PointCloud":case"Points":l=new AM(u(t.geometry),d(t.material));break;case"Sprite":l=new lB(d(t.material));break;case"Group":l=new Ql;break;case"Bone":l=new Z_;break;default:l=new On}if(l.uuid=t.uuid,t.name!==void 0&&(l.name=t.name),t.matrix!==void 0?(l.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=t.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(t.position!==void 0&&l.position.fromArray(t.position),t.rotation!==void 0&&l.rotation.fromArray(t.rotation),t.quaternion!==void 0&&l.quaternion.fromArray(t.quaternion),t.scale!==void 0&&l.scale.fromArray(t.scale)),t.up!==void 0&&l.up.fromArray(t.up),t.castShadow!==void 0&&(l.castShadow=t.castShadow),t.receiveShadow!==void 0&&(l.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(l.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(l.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(l.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(l.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(l.visible=t.visible),t.frustumCulled!==void 0&&(l.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(l.renderOrder=t.renderOrder),t.userData!==void 0&&(l.userData=t.userData),t.layers!==void 0&&(l.layers.mask=t.layers),t.children!==void 0){const _=t.children;for(let x=0;x<_.length;x++)l.add(this.parseObject(_[x],e,n,s,r))}if(t.animations!==void 0){const _=t.animations;for(let x=0;x<_.length;x++){const b=_[x];l.animations.push(r[b])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(l.autoUpdate=t.autoUpdate);const _=t.levels;for(let x=0;x<_.length;x++){const b=_[x],R=l.getObjectByProperty("uuid",b.object);R!==void 0&&l.addLevel(R,b.distance,b.hysteresis)}}return l}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=e[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const n=e.target,s=t.getObjectByProperty("uuid",n);s!==void 0?e.target=s:e.target=new On}})}}const EF={UVMapping:du,CubeReflectionMapping:pl,CubeRefractionMapping:pu,EquirectangularReflectionMapping:Gd,EquirectangularRefractionMapping:pg,CubeUVReflectionMapping:ap},cC={RepeatWrapping:mu,ClampToEdgeWrapping:Wi,MirroredRepeatWrapping:Vd},uC={NearestFilter:bs,NearestMipmapNearestFilter:F_,NearestMipmapLinearFilter:Pf,LinearFilter:Wn,LinearMipmapNearestFilter:Ld,LinearMipmapLinearFilter:Lr};class jB extends Gs{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,l=$l.get(t);if(l!==void 0){if(r.manager.itemStart(t),l.then){l.then(p=>{e&&e(p),r.manager.itemEnd(t)}).catch(p=>{s&&s(p)});return}return setTimeout(function(){e&&e(l),r.manager.itemEnd(t)},0),l}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader;const d=fetch(t,u).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(p){return $l.add(t,p),e&&e(p),r.manager.itemEnd(t),p}).catch(function(p){s&&s(p),$l.remove(t),r.manager.itemError(t),r.manager.itemEnd(t)});$l.add(t,d),r.manager.itemStart(t)}}let ly;class HM{static getContext(){return ly===void 0&&(ly=new(window.AudioContext||window.webkitAudioContext)),ly}static setContext(t){ly=t}}class TF extends Gs{constructor(t){super(t)}load(t,e,n,s){const r=this,l=new zs(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(d){try{const p=d.slice(0);HM.getContext().decodeAudioData(p,function(v){e(v)}).catch(u)}catch(p){u(p)}},n,s);function u(d){s?s(d):console.error(d),r.manager.itemError(t)}}}const fC=new We,hC=new We,Af=new We;class CF{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new bi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new bi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,Af.copy(t.projectionMatrix);const s=e.eyeSep/2,r=s*e.near/e.focus,l=e.near*Math.tan(qf*e.fov*.5)/e.zoom;let u,d;hC.elements[12]=-s,fC.elements[12]=s,u=-l*e.aspect+r,d=l*e.aspect+r,Af.elements[0]=2*e.near/(d-u),Af.elements[8]=(d+u)/(d-u),this.cameraL.projectionMatrix.copy(Af),u=-l*e.aspect-r,d=l*e.aspect-r,Af.elements[0]=2*e.near/(d-u),Af.elements[8]=(d+u)/(d-u),this.cameraR.projectionMatrix.copy(Af)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(hC),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(fC)}}class YB extends bi{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}}class zM{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=dC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=dC();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function dC(){return performance.now()}const Sf=new Q,pC=new Es,RF=new Q,Mf=new Q;class wF extends On{constructor(){super(),this.type="AudioListener",this.context=HM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new zM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Sf,pC,RF),Mf.set(0,0,-1).applyQuaternion(pC),e.positionX){const s=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Sf.x,s),e.positionY.linearRampToValueAtTime(Sf.y,s),e.positionZ.linearRampToValueAtTime(Sf.z,s),e.forwardX.linearRampToValueAtTime(Mf.x,s),e.forwardY.linearRampToValueAtTime(Mf.y,s),e.forwardZ.linearRampToValueAtTime(Mf.z,s),e.upX.linearRampToValueAtTime(n.x,s),e.upY.linearRampToValueAtTime(n.y,s),e.upZ.linearRampToValueAtTime(n.z,s)}else e.setPosition(Sf.x,Sf.y,Sf.z),e.setOrientation(Mf.x,Mf.y,Mf.z,n.x,n.y,n.z)}}class qB extends On{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const bf=new Q,mC=new Es,BF=new Q,Ef=new Q;class DF extends qB{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(bf,mC,BF),Ef.set(0,0,1).applyQuaternion(mC);const e=this.panner;if(e.positionX){const n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(bf.x,n),e.positionY.linearRampToValueAtTime(bf.y,n),e.positionZ.linearRampToValueAtTime(bf.z,n),e.orientationX.linearRampToValueAtTime(Ef.x,n),e.orientationY.linearRampToValueAtTime(Ef.y,n),e.orientationZ.linearRampToValueAtTime(Ef.z,n)}else e.setPosition(bf.x,bf.y,bf.z),e.setOrientation(Ef.x,Ef.y,Ef.z)}}class UF{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class WB{constructor(t,e,n){this.binding=t,this.valueSize=n;let s,r,l;switch(e){case"quaternion":s=this._slerp,r=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,r=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,s=this.valueSize,r=t*s+s;let l=this.cumulativeWeight;if(l===0){for(let u=0;u!==s;++u)n[r+u]=n[u];l=e}else{l+=e;const u=e/l;this._mixBufferRegion(n,r,0,u,s)}this.cumulativeWeight=l}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,s,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,s=t*e+e,r=this.cumulativeWeight,l=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const d=e*this._origIndex;this._mixBufferRegion(n,s,d,1-r,e)}l>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*e,1,e);for(let d=e,p=e+e;d!==p;++d)if(n[d]!==n[d+e]){u.setValue(n,s);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,s=n*this._origIndex;t.getValue(e,s);for(let r=n,l=s;r!==l;++r)e[r]=e[s+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,s,r){if(s>=.5)for(let l=0;l!==r;++l)t[e+l]=t[n+l]}_slerp(t,e,n,s){Es.slerpFlat(t,e,t,e,t,n,s)}_slerpAdditive(t,e,n,s,r){const l=this._workIndex*r;Es.multiplyQuaternionsFlat(t,l,t,e,t,n),Es.slerpFlat(t,e,t,e,t,l,s)}_lerp(t,e,n,s,r){const l=1-s;for(let u=0;u!==r;++u){const d=e+u;t[d]=t[d]*l+t[n+u]*s}}_lerpAdditive(t,e,n,s,r){for(let l=0;l!==r;++l){const u=e+l;t[u]=t[u]+t[n+l]*s}}}const GM="\\[\\]\\.:\\/",NF=new RegExp("["+GM+"]","g"),VM="[^"+GM+"]",OF="[^"+GM.replace("\\.","")+"]",LF=/((?:WC+[\/:])*)/.source.replace("WC",VM),IF=/(WCOD+)?/.source.replace("WCOD",OF),PF=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",VM),FF=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",VM),HF=new RegExp("^"+LF+IF+PF+FF+"$"),zF=["material","materials","bones","map"];class GF{constructor(t,e,n){const s=n||Fn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,s)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=n.length;s!==r;++s)n[s].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class Fn{constructor(t,e,n){this.path=e,this.parsedPath=n||Fn.parseTrackName(e),this.node=Fn.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Fn.Composite(t,e,n):new Fn(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(NF,"")}static parseTrackName(t){const e=HF.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=n.nodeName.substring(s+1);zF.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(r){for(let l=0;l<r.length;l++){const u=r[l];if(u.name===e||u.uuid===e)return u;const d=n(u.children);if(d)return d}return null},s=n(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)t[e++]=n[s]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,s=e.propertyName;let r=e.propertyIndex;if(t||(t=Fn.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let p=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let g=0;g<t.length;g++)if(t[g].name===p){p=g;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(p!==void 0){if(t[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[p]}}const l=t[s];if(l===void 0){const p=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+s+" but it wasn't found.",t);return}let u=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?u=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[r]!==void 0&&(r=t.morphTargetDictionary[r])}d=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=r}else l.fromArray!==void 0&&l.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(d=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Fn.Composite=GF;Fn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Fn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Fn.prototype.GetterByBindingType=[Fn.prototype._getValue_direct,Fn.prototype._getValue_array,Fn.prototype._getValue_arrayElement,Fn.prototype._getValue_toArray];Fn.prototype.SetterByBindingTypeAndVersioning=[[Fn.prototype._setValue_direct,Fn.prototype._setValue_direct_setNeedsUpdate,Fn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Fn.prototype._setValue_array,Fn.prototype._setValue_array_setNeedsUpdate,Fn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Fn.prototype._setValue_arrayElement,Fn.prototype._setValue_arrayElement_setNeedsUpdate,Fn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Fn.prototype._setValue_fromArray,Fn.prototype._setValue_fromArray_setNeedsUpdate,Fn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class VF{constructor(){this.isAnimationObjectGroup=!0,this.uuid=cr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,s=arguments.length;n!==s;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,s=this._parsedPaths,r=this._bindings,l=r.length;let u,d=t.length,p=this.nCachedObjects_;for(let g=0,v=arguments.length;g!==v;++g){const _=arguments[g],x=_.uuid;let b=e[x];if(b===void 0){b=d++,e[x]=b,t.push(_);for(let R=0,E=l;R!==E;++R)r[R].push(new Fn(_,n[R],s[R]))}else if(b<p){u=t[b];const R=--p,E=t[R];e[E.uuid]=b,t[b]=E,e[x]=R,t[R]=_;for(let M=0,w=l;M!==w;++M){const B=r[M],D=B[R];let I=B[b];B[b]=D,I===void 0&&(I=new Fn(_,n[M],s[M])),B[R]=I}}else t[b]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const d=arguments[l],p=d.uuid,g=e[p];if(g!==void 0&&g>=r){const v=r++,_=t[v];e[_.uuid]=g,t[g]=_,e[p]=v,t[v]=d;for(let x=0,b=s;x!==b;++x){const R=n[x],E=R[v],M=R[g];R[g]=E,R[v]=M}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_,l=t.length;for(let u=0,d=arguments.length;u!==d;++u){const p=arguments[u],g=p.uuid,v=e[g];if(v!==void 0)if(delete e[g],v<r){const _=--r,x=t[_],b=--l,R=t[b];e[x.uuid]=v,t[v]=x,e[R.uuid]=_,t[_]=R,t.pop();for(let E=0,M=s;E!==M;++E){const w=n[E],B=w[_],D=w[b];w[v]=B,w[_]=D,w.pop()}}else{const _=--l,x=t[_];_>0&&(e[x.uuid]=v),t[v]=x,t.pop();for(let b=0,R=s;b!==R;++b){const E=n[b];E[v]=E[_],E.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const n=this._bindingsIndicesByPath;let s=n[t];const r=this._bindings;if(s!==void 0)return r[s];const l=this._paths,u=this._parsedPaths,d=this._objects,p=d.length,g=this.nCachedObjects_,v=new Array(p);s=r.length,n[t]=s,l.push(t),u.push(e),r.push(v);for(let _=g,x=d.length;_!==x;++_){const b=d[_];v[_]=new Fn(b,t,e)}return v}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){const s=this._paths,r=this._parsedPaths,l=this._bindings,u=l.length-1,d=l[u],p=t[u];e[p]=n,l[n]=d,l.pop(),r[n]=r[u],r.pop(),s[n]=s[u],s.pop()}}}class KB{constructor(t,e,n=null,s=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=s;const r=e.tracks,l=r.length,u=new Array(l),d={endingStart:Ff,endingEnd:Ff};for(let p=0;p!==l;++p){const g=r[p].createInterpolant(null);u[p]=g,g.settings=d}this._interpolantSettings=d,this._interpolants=u,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zw,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n=!1){if(t.fadeOut(e),this.fadeIn(e),n===!0){const s=this._clip.duration,r=t._clip.duration,l=r/s,u=s/r;t.warp(1,l,e),this.warp(u,1,e)}return this}crossFadeTo(t,e,n=!1){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const s=this._mixer,r=s.time,l=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=s._lendControlInterpolant(),this._timeScaleInterpolant=u);const d=u.parameterPositions,p=u.sampleValues;return d[0]=r,d[1]=r+n,p[0]=t/l,p[1]=e/l,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,s){if(!this.enabled){this._updateWeight(t);return}const r=this._startTime;if(r!==null){const d=(t-r)*n;d<0||n===0?e=0:(this._startTime=null,e=n*d)}e*=this._updateTimeScale(t);const l=this._updateTime(e),u=this._updateWeight(t);if(u>0){const d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case uM:for(let g=0,v=d.length;g!==v;++g)d[g].evaluate(l),p[g].accumulateAdditive(u);break;case j_:default:for(let g=0,v=d.length;g!==v;++g)d[g].evaluate(l),p[g].accumulate(s,u)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(t)[0];e*=s,t>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(t)[0];e*=s,t>n.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let s=this.time+t,r=this._loopCount;const l=n===Gw;if(t===0)return r===-1?s:l&&(r&1)===1?e-s:s;if(n===Hw){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(s>=e)s=e;else if(s<0)s=0;else{this.time=s;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(r===-1&&(t>=0?(r=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),s>=e||s<0){const u=Math.floor(s/e);s-=e*u,r+=Math.abs(u);const d=this.repetitions-r;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=t>0?e:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(d===1){const p=t<0;this._setEndings(p,!p,l)}else this._setEndings(!1,!1,l);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=s;if(l&&(r&1)===1)return e-s}return s}_setEndings(t,e,n){const s=this._interpolantSettings;n?(s.endingStart=Hf,s.endingEnd=Hf):(t?s.endingStart=this.zeroSlopeAtStart?Hf:Ff:s.endingStart=mg,e?s.endingEnd=this.zeroSlopeAtEnd?Hf:Ff:s.endingEnd=mg)}_scheduleFading(t,e,n){const s=this._mixer,r=s.time;let l=this._weightInterpolant;l===null&&(l=s._lendControlInterpolant(),this._weightInterpolant=l);const u=l.parameterPositions,d=l.sampleValues;return u[0]=r,d[0]=e,u[1]=r+t,d[1]=n,this}}const kF=new Float32Array(1);class XF extends vl{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,s=t._clip.tracks,r=s.length,l=t._propertyBindings,u=t._interpolants,d=n.uuid,p=this._bindingsByRootAndName;let g=p[d];g===void 0&&(g={},p[d]=g);for(let v=0;v!==r;++v){const _=s[v],x=_.name;let b=g[x];if(b!==void 0)++b.referenceCount,l[v]=b;else{if(b=l[v],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,d,x));continue}const R=e&&e._propertyBindings[v].binding.parsedPath;b=new WB(Fn.create(n,x,R),_.ValueTypeName,_.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,d,x),l[v]=b}u[v].resultBuffer=b.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,s=t._clip.uuid,r=this._actionsByClip[s];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,s,n)}const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,n){const s=this._actions,r=this._actionsByClip;let l=r[e];if(l===void 0)l={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=l;else{const u=l.knownActions;t._byClipCacheIndex=u.length,u.push(t)}t._cacheIndex=s.length,s.push(t),l.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],s=t._cacheIndex;n._cacheIndex=s,e[s]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,l=this._actionsByClip,u=l[r],d=u.knownActions,p=d[d.length-1],g=t._byClipCacheIndex;p._byClipCacheIndex=g,d[g]=p,d.pop(),t._byClipCacheIndex=null;const v=u.actionByRoot,_=(t._localRoot||this._root).uuid;delete v[_],d.length===0&&delete l[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,s=this._nActiveActions++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,s=--this._nActiveActions,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const s=this._bindingsByRootAndName,r=this._bindings;let l=s[e];l===void 0&&(l={},s[e]=l),l[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,s=n.rootNode.uuid,r=n.path,l=this._bindingsByRootAndName,u=l[s],d=e[e.length-1],p=t._cacheIndex;d._cacheIndex=p,e[p]=d,e.pop(),delete u[r],Object.keys(u).length===0&&delete l[s]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,s=this._nActiveBindings++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,s=--this._nActiveBindings,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new DM(new Float32Array(2),new Float32Array(2),1,kF),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,s=--this._nActiveControlInterpolants,r=e[s];t.__cacheIndex=s,e[s]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const s=e||this._root,r=s.uuid;let l=typeof t=="string"?$d.findByName(s,t):t;const u=l!==null?l.uuid:t,d=this._actionsByClip[u];let p=null;if(n===void 0&&(l!==null?n=l.blendMode:n=j_),d!==void 0){const v=d.actionByRoot[r];if(v!==void 0&&v.blendMode===n)return v;p=d.knownActions[0],l===null&&(l=p._clip)}if(l===null)return null;const g=new KB(this,l,e,n);return this._bindAction(g,p),this._addInactiveAction(g,u,r),g}existingAction(t,e){const n=e||this._root,s=n.uuid,r=typeof t=="string"?$d.findByName(n,t):t,l=r?r.uuid:t,u=this._actionsByClip[l];return u!==void 0&&u.actionByRoot[s]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,s=this.time+=t,r=Math.sign(t),l=this._accuIndex^=1;for(let p=0;p!==n;++p)e[p]._update(s,t,r,l);const u=this._bindings,d=this._nActiveBindings;for(let p=0;p!==d;++p)u[p].apply(l);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,s=this._actionsByClip,r=s[n];if(r!==void 0){const l=r.knownActions;for(let u=0,d=l.length;u!==d;++u){const p=l[u];this._deactivateAction(p);const g=p._cacheIndex,v=e[e.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,v._cacheIndex=g,e[g]=v,e.pop(),this._removeInactiveBindingsForAction(p)}delete s[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const l in n){const u=n[l].actionByRoot,d=u[e];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const s=this._bindingsByRootAndName,r=s[e];if(r!==void 0)for(const l in r){const u=r[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class jF extends Y_{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isRenderTarget3D=!0,this.depth=n,this.texture=new q_(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class YF extends Y_{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isRenderTargetArray=!0,this.depth=n,this.texture=new Ig(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class kM{constructor(t){this.value=t}clone(){return new kM(this.value.clone===void 0?this.value:this.value.clone())}}let qF=0;class WF extends vl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:qF++}),this.name="",this.usage=vg,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,s=e.length;n<s;n++){const r=Array.isArray(e[n])?e[n]:[e[n]];for(let l=0;l<r.length;l++)this.uniforms.push(r[l].clone())}return this}clone(){return new this.constructor().copy(this)}}class KF extends Hg{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class JF{constructor(t,e,n,s,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=s,this.count=r,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const gC=new We;class XM{constructor(t,e,n=0,s=1/0){this.ray=new nh(t,e),this.near=n,this.far=s,this.camera=null,this.layers=new Jd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return gC.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(gC),this}intersectObject(t,e=!0,n=[]){return uS(t,this,n,e),n.sort(vC),n}intersectObjects(t,e=!0,n=[]){for(let s=0,r=t.length;s<r;s++)uS(t[s],this,n,e);return n.sort(vC),n}}function vC(i,t){return i.distance-t.distance}function uS(i,t,e,n){let s=!0;if(i.layers.test(t.layers)&&i.raycast(t,e)===!1&&(s=!1),s===!0&&n===!0){const r=i.children;for(let l=0,u=r.length;l<u;l++)uS(r[l],t,e,!0)}}class fS{constructor(t=1,e=0,n=0){this.radius=t,this.phi=e,this.theta=n}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=fn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(fn(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class ZF{constructor(t=1,e=0,n=0){this.radius=t,this.theta=e,this.y=n}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return new this.constructor().copy(this)}}class jM{constructor(t,e,n,s){jM.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let n=0;n<4;n++)this.elements[n]=t[n+e];return this}set(t,e,n,s){const r=this.elements;return r[0]=t,r[2]=e,r[1]=n,r[3]=s,this}}const yC=new Wt;class QF{constructor(t=new Wt(1/0,1/0),e=new Wt(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=yC.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,yC).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const _C=new Q,cy=new Q;class $F{constructor(t=new Q,e=new Q){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){_C.subVectors(t,this.start),cy.subVectors(this.end,this.start);const n=cy.dot(cy);let r=cy.dot(_C)/n;return e&&(r=fn(r,0,1)),r}closestPointToPoint(t,e,n){const s=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(s).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const xC=new Q;class tH extends On{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new hn,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,u=1,d=32;l<d;l++,u++){const p=l/d*Math.PI*2,g=u/d*Math.PI*2;s.push(Math.cos(p),Math.sin(p),1,Math.cos(g),Math.sin(g),1)}n.setAttribute("position",new Oe(s,3));const r=new sa({fog:!1,toneMapped:!1});this.cone=new Mo(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),xC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(xC),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const nu=new Q,uy=new We,QA=new We;class eH extends Mo{constructor(t){const e=JB(t),n=new hn,s=[],r=[],l=new xe(0,0,1),u=new xe(0,1,0);for(let p=0;p<e.length;p++){const g=e[p];g.parent&&g.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(l.r,l.g,l.b),r.push(u.r,u.g,u.b))}n.setAttribute("position",new Oe(s,3)),n.setAttribute("color",new Oe(r,3));const d=new sa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,d),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,s=n.getAttribute("position");QA.copy(this.root.matrixWorld).invert();for(let r=0,l=0;r<e.length;r++){const u=e[r];u.parent&&u.parent.isBone&&(uy.multiplyMatrices(QA,u.matrixWorld),nu.setFromMatrixPosition(uy),s.setXYZ(l,nu.x,nu.y,nu.z),uy.multiplyMatrices(QA,u.parent.matrixWorld),nu.setFromMatrixPosition(uy),s.setXYZ(l+1,nu.x,nu.y,nu.z),l+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function JB(i){const t=[];i.isBone===!0&&t.push(i);for(let e=0;e<i.children.length;e++)t.push(...JB(i.children[e]));return t}class nH extends Ei{constructor(t,e,n){const s=new jg(e,4,2),r=new Ya({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const iH=new Q,AC=new xe,SC=new xe;class sH extends On{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new Xg(e);s.rotateY(Math.PI*.5),this.material=new Ya({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),l=new Float32Array(r.count*3);s.setAttribute("color",new zn(l,3)),this.add(new Ei(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");AC.copy(this.light.color),SC.copy(this.light.groundColor);for(let n=0,s=e.count;n<s;n++){const r=n<s/2?AC:SC;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(iH.setFromMatrixPosition(this.light.matrixWorld).negate())}}class aH extends Mo{constructor(t=10,e=10,n=4473924,s=8947848){n=new xe(n),s=new xe(s);const r=e/2,l=t/e,u=t/2,d=[],p=[];for(let _=0,x=0,b=-u;_<=e;_++,b+=l){d.push(-u,0,b,u,0,b),d.push(b,0,-u,b,0,u);const R=_===r?n:s;R.toArray(p,x),x+=3,R.toArray(p,x),x+=3,R.toArray(p,x),x+=3,R.toArray(p,x),x+=3}const g=new hn;g.setAttribute("position",new Oe(d,3)),g.setAttribute("color",new Oe(p,3));const v=new sa({vertexColors:!0,toneMapped:!1});super(g,v),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class rH extends Mo{constructor(t=10,e=16,n=8,s=64,r=4473924,l=8947848){r=new xe(r),l=new xe(l);const u=[],d=[];if(e>1)for(let v=0;v<e;v++){const _=v/e*(Math.PI*2),x=Math.sin(_)*t,b=Math.cos(_)*t;u.push(0,0,0),u.push(x,0,b);const R=v&1?r:l;d.push(R.r,R.g,R.b),d.push(R.r,R.g,R.b)}for(let v=0;v<n;v++){const _=v&1?r:l,x=t-t/n*v;for(let b=0;b<s;b++){let R=b/s*(Math.PI*2),E=Math.sin(R)*x,M=Math.cos(R)*x;u.push(E,0,M),d.push(_.r,_.g,_.b),R=(b+1)/s*(Math.PI*2),E=Math.sin(R)*x,M=Math.cos(R)*x,u.push(E,0,M),d.push(_.r,_.g,_.b)}}const p=new hn;p.setAttribute("position",new Oe(u,3)),p.setAttribute("color",new Oe(d,3));const g=new sa({vertexColors:!0,toneMapped:!1});super(p,g),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const MC=new Q,fy=new Q,bC=new Q;class oH extends On{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",e===void 0&&(e=1);let s=new hn;s.setAttribute("position",new Oe([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new sa({fog:!1,toneMapped:!1});this.lightPlane=new sc(s,r),this.add(this.lightPlane),s=new hn,s.setAttribute("position",new Oe([0,0,0,0,0,1],3)),this.targetLine=new sc(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),MC.setFromMatrixPosition(this.light.matrixWorld),fy.setFromMatrixPosition(this.light.target.matrixWorld),bC.subVectors(fy,MC),this.lightPlane.lookAt(fy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(fy),this.targetLine.scale.z=bC.length()}}const hy=new Q,zi=new W_;class lH extends Mo{constructor(t){const e=new hn,n=new sa({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],l={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(b,R){d(b),d(R)}function d(b){s.push(0,0,0),r.push(0,0,0),l[b]===void 0&&(l[b]=[]),l[b].push(s.length/3-1)}e.setAttribute("position",new Oe(s,3)),e.setAttribute("color",new Oe(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const p=new xe(16755200),g=new xe(16711680),v=new xe(43775),_=new xe(16777215),x=new xe(3355443);this.setColors(p,g,v,_,x)}setColors(t,e,n,s,r){const u=this.geometry.getAttribute("color");u.setXYZ(0,t.r,t.g,t.b),u.setXYZ(1,t.r,t.g,t.b),u.setXYZ(2,t.r,t.g,t.b),u.setXYZ(3,t.r,t.g,t.b),u.setXYZ(4,t.r,t.g,t.b),u.setXYZ(5,t.r,t.g,t.b),u.setXYZ(6,t.r,t.g,t.b),u.setXYZ(7,t.r,t.g,t.b),u.setXYZ(8,t.r,t.g,t.b),u.setXYZ(9,t.r,t.g,t.b),u.setXYZ(10,t.r,t.g,t.b),u.setXYZ(11,t.r,t.g,t.b),u.setXYZ(12,t.r,t.g,t.b),u.setXYZ(13,t.r,t.g,t.b),u.setXYZ(14,t.r,t.g,t.b),u.setXYZ(15,t.r,t.g,t.b),u.setXYZ(16,t.r,t.g,t.b),u.setXYZ(17,t.r,t.g,t.b),u.setXYZ(18,t.r,t.g,t.b),u.setXYZ(19,t.r,t.g,t.b),u.setXYZ(20,t.r,t.g,t.b),u.setXYZ(21,t.r,t.g,t.b),u.setXYZ(22,t.r,t.g,t.b),u.setXYZ(23,t.r,t.g,t.b),u.setXYZ(24,e.r,e.g,e.b),u.setXYZ(25,e.r,e.g,e.b),u.setXYZ(26,e.r,e.g,e.b),u.setXYZ(27,e.r,e.g,e.b),u.setXYZ(28,e.r,e.g,e.b),u.setXYZ(29,e.r,e.g,e.b),u.setXYZ(30,e.r,e.g,e.b),u.setXYZ(31,e.r,e.g,e.b),u.setXYZ(32,n.r,n.g,n.b),u.setXYZ(33,n.r,n.g,n.b),u.setXYZ(34,n.r,n.g,n.b),u.setXYZ(35,n.r,n.g,n.b),u.setXYZ(36,n.r,n.g,n.b),u.setXYZ(37,n.r,n.g,n.b),u.setXYZ(38,s.r,s.g,s.b),u.setXYZ(39,s.r,s.g,s.b),u.setXYZ(40,r.r,r.g,r.b),u.setXYZ(41,r.r,r.g,r.b),u.setXYZ(42,r.r,r.g,r.b),u.setXYZ(43,r.r,r.g,r.b),u.setXYZ(44,r.r,r.g,r.b),u.setXYZ(45,r.r,r.g,r.b),u.setXYZ(46,r.r,r.g,r.b),u.setXYZ(47,r.r,r.g,r.b),u.setXYZ(48,r.r,r.g,r.b),u.setXYZ(49,r.r,r.g,r.b),u.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap,n=1,s=1;zi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const r=this.camera.coordinateSystem===Ir?-1:0;Yi("c",e,t,zi,0,0,r),Yi("t",e,t,zi,0,0,1),Yi("n1",e,t,zi,-1,-1,r),Yi("n2",e,t,zi,n,-1,r),Yi("n3",e,t,zi,-1,s,r),Yi("n4",e,t,zi,n,s,r),Yi("f1",e,t,zi,-1,-1,1),Yi("f2",e,t,zi,n,-1,1),Yi("f3",e,t,zi,-1,s,1),Yi("f4",e,t,zi,n,s,1),Yi("u1",e,t,zi,n*.7,s*1.1,r),Yi("u2",e,t,zi,-1*.7,s*1.1,r),Yi("u3",e,t,zi,0,s*2,r),Yi("cf1",e,t,zi,-1,0,1),Yi("cf2",e,t,zi,n,0,1),Yi("cf3",e,t,zi,0,-1,1),Yi("cf4",e,t,zi,0,s,1),Yi("cn1",e,t,zi,-1,0,r),Yi("cn2",e,t,zi,n,0,r),Yi("cn3",e,t,zi,0,-1,r),Yi("cn4",e,t,zi,0,s,r),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Yi(i,t,e,n,s,r,l){hy.set(s,r,l).unproject(n);const u=t[i];if(u!==void 0){const d=e.getAttribute("position");for(let p=0,g=u.length;p<g;p++)d.setXYZ(u[p],hy.x,hy.y,hy.z)}}const dy=new Hs;class cH extends Mo{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),r=new hn;r.setIndex(new zn(n,1)),r.setAttribute("position",new zn(s,3)),super(r,new sa({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&dy.setFromObject(this.object),dy.isEmpty())return;const t=dy.min,e=dy.max,n=this.geometry.attributes.position,s=n.array;s[0]=e.x,s[1]=e.y,s[2]=e.z,s[3]=t.x,s[4]=e.y,s[5]=e.z,s[6]=t.x,s[7]=t.y,s[8]=e.z,s[9]=e.x,s[10]=t.y,s[11]=e.z,s[12]=e.x,s[13]=e.y,s[14]=t.z,s[15]=t.x,s[16]=e.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=e.x,s[22]=t.y,s[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class uH extends Mo{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new hn;r.setIndex(new zn(n,1)),r.setAttribute("position",new Oe(s,3)),super(r,new sa({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class fH extends sc{constructor(t,e=1,n=16776960){const s=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new hn;l.setAttribute("position",new Oe(r,3)),l.computeBoundingSphere(),super(l,new sa({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new hn;d.setAttribute("position",new Oe(u,3)),d.computeBoundingSphere(),this.add(new Ei(d,new Ya({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const EC=new Q;let py,$A;class hH extends On{constructor(t=new Q(0,0,1),e=new Q(0,0,0),n=1,s=16776960,r=n*.2,l=r*.2){super(),this.type="ArrowHelper",py===void 0&&(py=new hn,py.setAttribute("position",new Oe([0,0,0,0,1,0],3)),$A=new Vg(.5,1,5,1),$A.translate(0,-.5,0)),this.position.copy(e),this.line=new sc(py,new sa({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ei($A,new Ya({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,l)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{EC.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(EC,e)}}setLength(t,e=t*.2,n=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class dH extends Mo{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new hn;s.setAttribute("position",new Oe(e,3)),s.setAttribute("color",new Oe(n,3));const r=new sa({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(t,e,n){const s=new xe,r=this.geometry.attributes.color.array;return s.set(t),s.toArray(r,0),s.toArray(r,3),s.set(e),s.toArray(r,6),s.toArray(r,9),s.set(n),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class pH{constructor(){this.type="ShapePath",this.color=new xe,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new C_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,s){return this.currentPath.quadraticCurveTo(t,e,n,s),this}bezierCurveTo(t,e,n,s,r,l){return this.currentPath.bezierCurveTo(t,e,n,s,r,l),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(M){const w=[];for(let B=0,D=M.length;B<D;B++){const I=M[B],L=new Wf;L.curves=I.curves,w.push(L)}return w}function n(M,w){const B=w.length;let D=!1;for(let I=B-1,L=0;L<B;I=L++){let V=w[I],H=w[L],N=H.x-V.x,O=H.y-V.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(V=w[L],N=-N,H=w[I],O=-O),M.y<V.y||M.y>H.y)continue;if(M.y===V.y){if(M.x===V.x)return!0}else{const Y=O*(M.x-V.x)-N*(M.y-V.y);if(Y===0)return!0;if(Y<0)continue;D=!D}}else{if(M.y!==V.y)continue;if(H.x<=M.x&&M.x<=V.x||V.x<=M.x&&M.x<=H.x)return!0}}return D}const s=xo.isClockWise,r=this.subPaths;if(r.length===0)return[];let l,u,d;const p=[];if(r.length===1)return u=r[0],d=new Wf,d.curves=u.curves,p.push(d),p;let g=!s(r[0].getPoints());g=t?!g:g;const v=[],_=[];let x=[],b=0,R;_[b]=void 0,x[b]=[];for(let M=0,w=r.length;M<w;M++)u=r[M],R=u.getPoints(),l=s(R),l=t?!l:l,l?(!g&&_[b]&&b++,_[b]={s:new Wf,p:R},_[b].s.curves=u.curves,g&&b++,x[b]=[]):x[b].push({h:u,p:R[0]});if(!_[0])return e(r);if(_.length>1){let M=!1,w=0;for(let B=0,D=_.length;B<D;B++)v[B]=[];for(let B=0,D=_.length;B<D;B++){const I=x[B];for(let L=0;L<I.length;L++){const V=I[L];let H=!0;for(let N=0;N<_.length;N++)n(V.p,_[N].p)&&(B!==N&&w++,H?(H=!1,v[N].push(V)):M=!0);H&&v[B].push(V)}}w>0&&M===!1&&(x=v)}let E;for(let M=0,w=_.length;M<w;M++){d=_[M].s,p.push(d),E=x[M];for(let B=0,D=E.length;B<D;B++)d.holes.push(E[B].h)}return p}}class mH extends vl{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}}function gH(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function vH(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function yH(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function hS(i,t,e,n){const s=_H(n);switch(e){case rM:return i*t;case Og:return i*t/s.components*s.byteLength;case Lg:return i*t/s.components*s.byteLength;case lM:return i*t*2/s.components*s.byteLength;case k_:return i*t*2/s.components*s.byteLength;case oM:return i*t*3/s.components*s.byteLength;case Ki:return i*t*4/s.components*s.byteLength;case X_:return i*t*4/s.components*s.byteLength;case Zm:case Qm:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case $m:case tg:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case Qy:case t_:return Math.max(i,16)*Math.max(t,8)/4;case Zy:case $y:return Math.max(i,8)*Math.max(t,8)/2;case e_:case n_:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case i_:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case s_:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case a_:return Math.floor((i+4)/5)*Math.floor((t+3)/4)*16;case r_:return Math.floor((i+4)/5)*Math.floor((t+4)/5)*16;case o_:return Math.floor((i+5)/6)*Math.floor((t+4)/5)*16;case l_:return Math.floor((i+5)/6)*Math.floor((t+5)/6)*16;case c_:return Math.floor((i+7)/8)*Math.floor((t+4)/5)*16;case u_:return Math.floor((i+7)/8)*Math.floor((t+5)/6)*16;case f_:return Math.floor((i+7)/8)*Math.floor((t+7)/8)*16;case h_:return Math.floor((i+9)/10)*Math.floor((t+4)/5)*16;case d_:return Math.floor((i+9)/10)*Math.floor((t+5)/6)*16;case p_:return Math.floor((i+9)/10)*Math.floor((t+7)/8)*16;case m_:return Math.floor((i+9)/10)*Math.floor((t+9)/10)*16;case g_:return Math.floor((i+11)/12)*Math.floor((t+9)/10)*16;case v_:return Math.floor((i+11)/12)*Math.floor((t+11)/12)*16;case eg:case y_:case __:return Math.ceil(i/4)*Math.ceil(t/4)*16;case cM:case x_:return Math.ceil(i/4)*Math.ceil(t/4)*8;case A_:case S_:return Math.ceil(i/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function _H(i){switch(i){case Ca:case H_:return{byteLength:1,components:1};case kd:case z_:case Ms:return{byteLength:2,components:1};case G_:case V_:return{byteLength:2,components:4};case ml:case Ng:case Li:return{byteLength:4,components:1};case aM:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class xH{static contain(t,e){return gH(t,e)}static cover(t,e){return vH(t,e)}static fill(t){return yH(t)}static getByteLength(t,e,n,s){return hS(t,e,n,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Dg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Dg);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function ZB(){let i=null,t=!1,e=null,n=null;function s(r,l){e(r,l),n=i.requestAnimationFrame(s)}return{start:function(){t!==!0&&e!==null&&(n=i.requestAnimationFrame(s),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(r){e=r},setContext:function(r){i=r}}}function AH(i){const t=new WeakMap;function e(u,d){const p=u.array,g=u.usage,v=p.byteLength,_=i.createBuffer();i.bindBuffer(d,_),i.bufferData(d,p,g),u.onUploadCallback();let x;if(p instanceof Float32Array)x=i.FLOAT;else if(p instanceof Uint16Array)u.isFloat16BufferAttribute?x=i.HALF_FLOAT:x=i.UNSIGNED_SHORT;else if(p instanceof Int16Array)x=i.SHORT;else if(p instanceof Uint32Array)x=i.UNSIGNED_INT;else if(p instanceof Int32Array)x=i.INT;else if(p instanceof Int8Array)x=i.BYTE;else if(p instanceof Uint8Array)x=i.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)x=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:_,type:x,bytesPerElement:p.BYTES_PER_ELEMENT,version:u.version,size:v}}function n(u,d,p){const g=d.array,v=d.updateRanges;if(i.bindBuffer(p,u),v.length===0)i.bufferSubData(p,0,g);else{v.sort((x,b)=>x.start-b.start);let _=0;for(let x=1;x<v.length;x++){const b=v[_],R=v[x];R.start<=b.start+b.count+1?b.count=Math.max(b.count,R.start+R.count-b.start):(++_,v[_]=R)}v.length=_+1;for(let x=0,b=v.length;x<b;x++){const R=v[x];i.bufferSubData(p,R.start*g.BYTES_PER_ELEMENT,g,R.start,R.count)}d.clearUpdateRanges()}d.onUploadCallback()}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),t.get(u)}function r(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=t.get(u);d&&(i.deleteBuffer(d.buffer),t.delete(u))}function l(u,d){if(u.isInterleavedBufferAttribute&&(u=u.data),u.isGLBufferAttribute){const g=t.get(u);(!g||g.version<u.version)&&t.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}const p=t.get(u);if(p===void 0)t.set(u,e(u,d));else if(p.version<u.version){if(p.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(p.buffer,u,d),p.version=u.version}}return{get:s,remove:r,update:l}}var SH=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,MH=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,bH=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,EH=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,TH=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,CH=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,RH=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,wH=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,BH=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,DH=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,UH=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,NH=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,OH=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,LH=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,IH=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,PH=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,FH=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,HH=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,zH=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,GH=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,VH=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,kH=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,XH=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,jH=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,YH=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,qH=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,WH=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,KH=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,JH=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,ZH=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,QH="gl_FragColor = linearToOutputTexel( gl_FragColor );",$H=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,tz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ez=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,nz=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,iz=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,sz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,az=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,rz=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,oz=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,lz=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,cz=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,uz=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,fz=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,hz=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,dz=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,pz=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,mz=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,gz=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,vz=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,yz=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,_z=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,xz=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Az=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Sz=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Mz=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,bz=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Ez=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Tz=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Cz=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Rz=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,wz=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Bz=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Dz=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Uz=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Nz=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Oz=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Lz=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Iz=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Pz=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Fz=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Hz=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,zz=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Gz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Vz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kz=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Xz=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,jz=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Yz=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,qz=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Wz=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Kz=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Jz=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Zz=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Qz=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$z=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,t5=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,e5=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,n5=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,i5=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,s5=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,a5=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,r5=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,o5=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,l5=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,c5=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,u5=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,f5=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,h5=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,d5=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,p5=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,m5=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,g5=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,v5=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,y5=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_5=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,x5=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const A5=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,S5=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,M5=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,b5=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,E5=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,T5=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,C5=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,R5=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,w5=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,B5=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,D5=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,U5=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,N5=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,O5=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,L5=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,I5=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,P5=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,F5=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,H5=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,z5=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,G5=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,V5=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,k5=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,X5=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,j5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Y5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,q5=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,W5=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,K5=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,J5=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Z5=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Q5=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$5=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,An={alphahash_fragment:SH,alphahash_pars_fragment:MH,alphamap_fragment:bH,alphamap_pars_fragment:EH,alphatest_fragment:TH,alphatest_pars_fragment:CH,aomap_fragment:RH,aomap_pars_fragment:wH,batching_pars_vertex:BH,batching_vertex:DH,begin_vertex:UH,beginnormal_vertex:NH,bsdfs:OH,iridescence_fragment:LH,bumpmap_pars_fragment:IH,clipping_planes_fragment:PH,clipping_planes_pars_fragment:FH,clipping_planes_pars_vertex:HH,clipping_planes_vertex:zH,color_fragment:GH,color_pars_fragment:VH,color_pars_vertex:kH,color_vertex:XH,common:jH,cube_uv_reflection_fragment:YH,defaultnormal_vertex:qH,displacementmap_pars_vertex:WH,displacementmap_vertex:KH,emissivemap_fragment:JH,emissivemap_pars_fragment:ZH,colorspace_fragment:QH,colorspace_pars_fragment:$H,envmap_fragment:tz,envmap_common_pars_fragment:ez,envmap_pars_fragment:nz,envmap_pars_vertex:iz,envmap_physical_pars_fragment:pz,envmap_vertex:sz,fog_vertex:az,fog_pars_vertex:rz,fog_fragment:oz,fog_pars_fragment:lz,gradientmap_pars_fragment:cz,lightmap_pars_fragment:uz,lights_lambert_fragment:fz,lights_lambert_pars_fragment:hz,lights_pars_begin:dz,lights_toon_fragment:mz,lights_toon_pars_fragment:gz,lights_phong_fragment:vz,lights_phong_pars_fragment:yz,lights_physical_fragment:_z,lights_physical_pars_fragment:xz,lights_fragment_begin:Az,lights_fragment_maps:Sz,lights_fragment_end:Mz,logdepthbuf_fragment:bz,logdepthbuf_pars_fragment:Ez,logdepthbuf_pars_vertex:Tz,logdepthbuf_vertex:Cz,map_fragment:Rz,map_pars_fragment:wz,map_particle_fragment:Bz,map_particle_pars_fragment:Dz,metalnessmap_fragment:Uz,metalnessmap_pars_fragment:Nz,morphinstance_vertex:Oz,morphcolor_vertex:Lz,morphnormal_vertex:Iz,morphtarget_pars_vertex:Pz,morphtarget_vertex:Fz,normal_fragment_begin:Hz,normal_fragment_maps:zz,normal_pars_fragment:Gz,normal_pars_vertex:Vz,normal_vertex:kz,normalmap_pars_fragment:Xz,clearcoat_normal_fragment_begin:jz,clearcoat_normal_fragment_maps:Yz,clearcoat_pars_fragment:qz,iridescence_pars_fragment:Wz,opaque_fragment:Kz,packing:Jz,premultiplied_alpha_fragment:Zz,project_vertex:Qz,dithering_fragment:$z,dithering_pars_fragment:t5,roughnessmap_fragment:e5,roughnessmap_pars_fragment:n5,shadowmap_pars_fragment:i5,shadowmap_pars_vertex:s5,shadowmap_vertex:a5,shadowmask_pars_fragment:r5,skinbase_vertex:o5,skinning_pars_vertex:l5,skinning_vertex:c5,skinnormal_vertex:u5,specularmap_fragment:f5,specularmap_pars_fragment:h5,tonemapping_fragment:d5,tonemapping_pars_fragment:p5,transmission_fragment:m5,transmission_pars_fragment:g5,uv_pars_fragment:v5,uv_pars_vertex:y5,uv_vertex:_5,worldpos_vertex:x5,background_vert:A5,background_frag:S5,backgroundCube_vert:M5,backgroundCube_frag:b5,cube_vert:E5,cube_frag:T5,depth_vert:C5,depth_frag:R5,distanceRGBA_vert:w5,distanceRGBA_frag:B5,equirect_vert:D5,equirect_frag:U5,linedashed_vert:N5,linedashed_frag:O5,meshbasic_vert:L5,meshbasic_frag:I5,meshlambert_vert:P5,meshlambert_frag:F5,meshmatcap_vert:H5,meshmatcap_frag:z5,meshnormal_vert:G5,meshnormal_frag:V5,meshphong_vert:k5,meshphong_frag:X5,meshphysical_vert:j5,meshphysical_frag:Y5,meshtoon_vert:q5,meshtoon_frag:W5,points_vert:K5,points_frag:J5,shadow_vert:Z5,shadow_frag:Q5,sprite_vert:$5,sprite_frag:tG},Ee={common:{diffuse:{value:new xe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new gn},alphaMap:{value:null},alphaMapTransform:{value:new gn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new gn}},envmap:{envMap:{value:null},envMapRotation:{value:new gn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new gn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new gn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new gn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new gn},normalScale:{value:new Wt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new gn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new gn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new gn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new gn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new gn},alphaTest:{value:0},uvTransform:{value:new gn}},sprite:{diffuse:{value:new xe(16777215)},opacity:{value:1},center:{value:new Wt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new gn},alphaMap:{value:null},alphaMapTransform:{value:new gn},alphaTest:{value:0}}},_o={basic:{uniforms:Aa([Ee.common,Ee.specularmap,Ee.envmap,Ee.aomap,Ee.lightmap,Ee.fog]),vertexShader:An.meshbasic_vert,fragmentShader:An.meshbasic_frag},lambert:{uniforms:Aa([Ee.common,Ee.specularmap,Ee.envmap,Ee.aomap,Ee.lightmap,Ee.emissivemap,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,Ee.fog,Ee.lights,{emissive:{value:new xe(0)}}]),vertexShader:An.meshlambert_vert,fragmentShader:An.meshlambert_frag},phong:{uniforms:Aa([Ee.common,Ee.specularmap,Ee.envmap,Ee.aomap,Ee.lightmap,Ee.emissivemap,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,Ee.fog,Ee.lights,{emissive:{value:new xe(0)},specular:{value:new xe(1118481)},shininess:{value:30}}]),vertexShader:An.meshphong_vert,fragmentShader:An.meshphong_frag},standard:{uniforms:Aa([Ee.common,Ee.envmap,Ee.aomap,Ee.lightmap,Ee.emissivemap,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,Ee.roughnessmap,Ee.metalnessmap,Ee.fog,Ee.lights,{emissive:{value:new xe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:An.meshphysical_vert,fragmentShader:An.meshphysical_frag},toon:{uniforms:Aa([Ee.common,Ee.aomap,Ee.lightmap,Ee.emissivemap,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,Ee.gradientmap,Ee.fog,Ee.lights,{emissive:{value:new xe(0)}}]),vertexShader:An.meshtoon_vert,fragmentShader:An.meshtoon_frag},matcap:{uniforms:Aa([Ee.common,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,Ee.fog,{matcap:{value:null}}]),vertexShader:An.meshmatcap_vert,fragmentShader:An.meshmatcap_frag},points:{uniforms:Aa([Ee.points,Ee.fog]),vertexShader:An.points_vert,fragmentShader:An.points_frag},dashed:{uniforms:Aa([Ee.common,Ee.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:An.linedashed_vert,fragmentShader:An.linedashed_frag},depth:{uniforms:Aa([Ee.common,Ee.displacementmap]),vertexShader:An.depth_vert,fragmentShader:An.depth_frag},normal:{uniforms:Aa([Ee.common,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,{opacity:{value:1}}]),vertexShader:An.meshnormal_vert,fragmentShader:An.meshnormal_frag},sprite:{uniforms:Aa([Ee.sprite,Ee.fog]),vertexShader:An.sprite_vert,fragmentShader:An.sprite_frag},background:{uniforms:{uvTransform:{value:new gn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:An.background_vert,fragmentShader:An.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new gn}},vertexShader:An.backgroundCube_vert,fragmentShader:An.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:An.cube_vert,fragmentShader:An.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:An.equirect_vert,fragmentShader:An.equirect_frag},distanceRGBA:{uniforms:Aa([Ee.common,Ee.displacementmap,{referencePosition:{value:new Q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:An.distanceRGBA_vert,fragmentShader:An.distanceRGBA_frag},shadow:{uniforms:Aa([Ee.lights,Ee.fog,{color:{value:new xe(0)},opacity:{value:1}}]),vertexShader:An.shadow_vert,fragmentShader:An.shadow_frag}};_o.physical={uniforms:Aa([_o.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new gn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new gn},clearcoatNormalScale:{value:new Wt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new gn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new gn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new gn},sheen:{value:0},sheenColor:{value:new xe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new gn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new gn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new gn},transmissionSamplerSize:{value:new Wt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new gn},attenuationDistance:{value:0},attenuationColor:{value:new xe(0)},specularColor:{value:new xe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new gn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new gn},anisotropyVector:{value:new Wt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new gn}}]),vertexShader:An.meshphysical_vert,fragmentShader:An.meshphysical_frag};const my={r:0,b:0,g:0},Tf=new ur,eG=new We;function nG(i,t,e,n,s,r,l){const u=new xe(0);let d=r===!0?0:1,p,g,v=null,_=0,x=null;function b(B){let D=B.isScene===!0?B.background:null;return D&&D.isTexture&&(D=(B.backgroundBlurriness>0?e:t).get(D)),D}function R(B){let D=!1;const I=b(B);I===null?M(u,d):I&&I.isColor&&(M(I,1),D=!0);const L=i.xr.getEnvironmentBlendMode();L==="additive"?n.buffers.color.setClear(0,0,0,1,l):L==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,l),(i.autoClear||D)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function E(B,D){const I=b(D);I&&(I.isCubeTexture||I.mapping===ap)?(g===void 0&&(g=new Ei(new ih(1,1,1),new qa({name:"BackgroundCubeMaterial",uniforms:Zd(_o.backgroundCube.uniforms),vertexShader:_o.backgroundCube.vertexShader,fragmentShader:_o.backgroundCube.fragmentShader,side:Ta,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(L,V,H){this.matrixWorld.copyPosition(H.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(g)),Tf.copy(D.backgroundRotation),Tf.x*=-1,Tf.y*=-1,Tf.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(Tf.y*=-1,Tf.z*=-1),g.material.uniforms.envMap.value=I,g.material.uniforms.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4(eG.makeRotationFromEuler(Tf)),g.material.toneMapped=Nn.getTransfer(I.colorSpace)!==ii,(v!==I||_!==I.version||x!==i.toneMapping)&&(g.material.needsUpdate=!0,v=I,_=I.version,x=i.toneMapping),g.layers.enableAll(),B.unshift(g,g.geometry,g.material,0,0,null)):I&&I.isTexture&&(p===void 0&&(p=new Ei(new xu(2,2),new qa({name:"BackgroundMaterial",uniforms:Zd(_o.background.uniforms),vertexShader:_o.background.vertexShader,fragmentShader:_o.background.fragmentShader,side:dl,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(p)),p.material.uniforms.t2D.value=I,p.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,p.material.toneMapped=Nn.getTransfer(I.colorSpace)!==ii,I.matrixAutoUpdate===!0&&I.updateMatrix(),p.material.uniforms.uvTransform.value.copy(I.matrix),(v!==I||_!==I.version||x!==i.toneMapping)&&(p.material.needsUpdate=!0,v=I,_=I.version,x=i.toneMapping),p.layers.enableAll(),B.unshift(p,p.geometry,p.material,0,0,null))}function M(B,D){B.getRGB(my,sB(i)),n.buffers.color.setClear(my.r,my.g,my.b,D,l)}function w(){g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return u},setClearColor:function(B,D=1){u.set(B),d=D,M(u,d)},getClearAlpha:function(){return d},setClearAlpha:function(B){d=B,M(u,d)},render:R,addToRenderList:E,dispose:w}}function iG(i,t){const e=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=_(null);let r=s,l=!1;function u(O,Y,ht,et,dt){let mt=!1;const F=v(et,ht,Y);r!==F&&(r=F,p(r.object)),mt=x(O,et,ht,dt),mt&&b(O,et,ht,dt),dt!==null&&t.update(dt,i.ELEMENT_ARRAY_BUFFER),(mt||l)&&(l=!1,D(O,Y,ht,et),dt!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(dt).buffer))}function d(){return i.createVertexArray()}function p(O){return i.bindVertexArray(O)}function g(O){return i.deleteVertexArray(O)}function v(O,Y,ht){const et=ht.wireframe===!0;let dt=n[O.id];dt===void 0&&(dt={},n[O.id]=dt);let mt=dt[Y.id];mt===void 0&&(mt={},dt[Y.id]=mt);let F=mt[et];return F===void 0&&(F=_(d()),mt[et]=F),F}function _(O){const Y=[],ht=[],et=[];for(let dt=0;dt<e;dt++)Y[dt]=0,ht[dt]=0,et[dt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:ht,attributeDivisors:et,object:O,attributes:{},index:null}}function x(O,Y,ht,et){const dt=r.attributes,mt=Y.attributes;let F=0;const K=ht.getAttributes();for(const $ in K)if(K[$].location>=0){const X=dt[$];let lt=mt[$];if(lt===void 0&&($==="instanceMatrix"&&O.instanceMatrix&&(lt=O.instanceMatrix),$==="instanceColor"&&O.instanceColor&&(lt=O.instanceColor)),X===void 0||X.attribute!==lt||lt&&X.data!==lt.data)return!0;F++}return r.attributesNum!==F||r.index!==et}function b(O,Y,ht,et){const dt={},mt=Y.attributes;let F=0;const K=ht.getAttributes();for(const $ in K)if(K[$].location>=0){let X=mt[$];X===void 0&&($==="instanceMatrix"&&O.instanceMatrix&&(X=O.instanceMatrix),$==="instanceColor"&&O.instanceColor&&(X=O.instanceColor));const lt={};lt.attribute=X,X&&X.data&&(lt.data=X.data),dt[$]=lt,F++}r.attributes=dt,r.attributesNum=F,r.index=et}function R(){const O=r.newAttributes;for(let Y=0,ht=O.length;Y<ht;Y++)O[Y]=0}function E(O){M(O,0)}function M(O,Y){const ht=r.newAttributes,et=r.enabledAttributes,dt=r.attributeDivisors;ht[O]=1,et[O]===0&&(i.enableVertexAttribArray(O),et[O]=1),dt[O]!==Y&&(i.vertexAttribDivisor(O,Y),dt[O]=Y)}function w(){const O=r.newAttributes,Y=r.enabledAttributes;for(let ht=0,et=Y.length;ht<et;ht++)Y[ht]!==O[ht]&&(i.disableVertexAttribArray(ht),Y[ht]=0)}function B(O,Y,ht,et,dt,mt,F){F===!0?i.vertexAttribIPointer(O,Y,ht,dt,mt):i.vertexAttribPointer(O,Y,ht,et,dt,mt)}function D(O,Y,ht,et){R();const dt=et.attributes,mt=ht.getAttributes(),F=Y.defaultAttributeValues;for(const K in mt){const $=mt[K];if($.location>=0){let yt=dt[K];if(yt===void 0&&(K==="instanceMatrix"&&O.instanceMatrix&&(yt=O.instanceMatrix),K==="instanceColor"&&O.instanceColor&&(yt=O.instanceColor)),yt!==void 0){const X=yt.normalized,lt=yt.itemSize,xt=t.get(yt);if(xt===void 0)continue;const bt=xt.buffer,ot=xt.type,Ot=xt.bytesPerElement,It=ot===i.INT||ot===i.UNSIGNED_INT||yt.gpuType===Ng;if(yt.isInterleavedBufferAttribute){const ie=yt.data,se=ie.stride,Ie=yt.offset;if(ie.isInstancedInterleavedBuffer){for(let Ae=0;Ae<$.locationSize;Ae++)M($.location+Ae,ie.meshPerAttribute);O.isInstancedMesh!==!0&&et._maxInstanceCount===void 0&&(et._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let Ae=0;Ae<$.locationSize;Ae++)E($.location+Ae);i.bindBuffer(i.ARRAY_BUFFER,bt);for(let Ae=0;Ae<$.locationSize;Ae++)B($.location+Ae,lt/$.locationSize,ot,X,se*Ot,(Ie+lt/$.locationSize*Ae)*Ot,It)}else{if(yt.isInstancedBufferAttribute){for(let ie=0;ie<$.locationSize;ie++)M($.location+ie,yt.meshPerAttribute);O.isInstancedMesh!==!0&&et._maxInstanceCount===void 0&&(et._maxInstanceCount=yt.meshPerAttribute*yt.count)}else for(let ie=0;ie<$.locationSize;ie++)E($.location+ie);i.bindBuffer(i.ARRAY_BUFFER,bt);for(let ie=0;ie<$.locationSize;ie++)B($.location+ie,lt/$.locationSize,ot,X,lt*Ot,lt/$.locationSize*ie*Ot,It)}}else if(F!==void 0){const X=F[K];if(X!==void 0)switch(X.length){case 2:i.vertexAttrib2fv($.location,X);break;case 3:i.vertexAttrib3fv($.location,X);break;case 4:i.vertexAttrib4fv($.location,X);break;default:i.vertexAttrib1fv($.location,X)}}}}w()}function I(){H();for(const O in n){const Y=n[O];for(const ht in Y){const et=Y[ht];for(const dt in et)g(et[dt].object),delete et[dt];delete Y[ht]}delete n[O]}}function L(O){if(n[O.id]===void 0)return;const Y=n[O.id];for(const ht in Y){const et=Y[ht];for(const dt in et)g(et[dt].object),delete et[dt];delete Y[ht]}delete n[O.id]}function V(O){for(const Y in n){const ht=n[Y];if(ht[O.id]===void 0)continue;const et=ht[O.id];for(const dt in et)g(et[dt].object),delete et[dt];delete ht[O.id]}}function H(){N(),l=!0,r!==s&&(r=s,p(r.object))}function N(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:u,reset:H,resetDefaultState:N,dispose:I,releaseStatesOfGeometry:L,releaseStatesOfProgram:V,initAttributes:R,enableAttribute:E,disableUnusedAttributes:w}}function sG(i,t,e){let n;function s(p){n=p}function r(p,g){i.drawArrays(n,p,g),e.update(g,n,1)}function l(p,g,v){v!==0&&(i.drawArraysInstanced(n,p,g,v),e.update(g,n,v))}function u(p,g,v){if(v===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,p,0,g,0,v);let x=0;for(let b=0;b<v;b++)x+=g[b];e.update(x,n,1)}function d(p,g,v,_){if(v===0)return;const x=t.get("WEBGL_multi_draw");if(x===null)for(let b=0;b<p.length;b++)l(p[b],g[b],_[b]);else{x.multiDrawArraysInstancedWEBGL(n,p,0,g,0,_,0,v);let b=0;for(let R=0;R<v;R++)b+=g[R]*_[R];e.update(b,n,1)}}this.setMode=s,this.render=r,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function aG(i,t,e,n){let s;function r(){if(s!==void 0)return s;if(t.has("EXT_texture_filter_anisotropic")===!0){const V=t.get("EXT_texture_filter_anisotropic");s=i.getParameter(V.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function l(V){return!(V!==Ki&&n.convert(V)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function u(V){const H=V===Ms&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(V!==Ca&&n.convert(V)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&V!==Li&&!H)}function d(V){if(V==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";V="mediump"}return V==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=e.precision!==void 0?e.precision:"highp";const g=d(p);g!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",g,"instead."),p=g);const v=e.logarithmicDepthBuffer===!0,_=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),x=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),b=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),R=i.getParameter(i.MAX_TEXTURE_SIZE),E=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),M=i.getParameter(i.MAX_VERTEX_ATTRIBS),w=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),B=i.getParameter(i.MAX_VARYING_VECTORS),D=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),I=b>0,L=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:d,textureFormatReadable:l,textureTypeReadable:u,precision:p,logarithmicDepthBuffer:v,reverseDepthBuffer:_,maxTextures:x,maxVertexTextures:b,maxTextureSize:R,maxCubemapSize:E,maxAttributes:M,maxVertexUniforms:w,maxVaryings:B,maxFragmentUniforms:D,vertexTextures:I,maxSamples:L}}function rG(i){const t=this;let e=null,n=0,s=!1,r=!1;const l=new Kl,u=new gn,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(v,_){const x=v.length!==0||_||n!==0||s;return s=_,n=v.length,x},this.beginShadows=function(){r=!0,g(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(v,_){e=g(v,_,0)},this.setState=function(v,_,x){const b=v.clippingPlanes,R=v.clipIntersection,E=v.clipShadows,M=i.get(v);if(!s||b===null||b.length===0||r&&!E)r?g(null):p();else{const w=r?0:n,B=w*4;let D=M.clippingState||null;d.value=D,D=g(b,_,B,x);for(let I=0;I!==B;++I)D[I]=e[I];M.clippingState=D,this.numIntersection=R?this.numPlanes:0,this.numPlanes+=w}};function p(){d.value!==e&&(d.value=e,d.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function g(v,_,x,b){const R=v!==null?v.length:0;let E=null;if(R!==0){if(E=d.value,b!==!0||E===null){const M=x+R*4,w=_.matrixWorldInverse;u.getNormalMatrix(w),(E===null||E.length<M)&&(E=new Float32Array(M));for(let B=0,D=x;B!==R;++B,D+=4)l.copy(v[B]).applyMatrix4(w,u),l.normal.toArray(E,D),E[D+3]=l.constant}d.value=E,d.needsUpdate=!0}return t.numPlanes=R,t.numIntersection=0,E}}function oG(i){let t=new WeakMap;function e(l,u){return u===Gd?l.mapping=pl:u===pg&&(l.mapping=pu),l}function n(l){if(l&&l.isTexture){const u=l.mapping;if(u===Gd||u===pg)if(t.has(l)){const d=t.get(l).texture;return e(d,l.mapping)}else{const d=l.image;if(d&&d.height>0){const p=new gM(d.height);return p.fromEquirectangularTexture(i,l),t.set(l,p),l.addEventListener("dispose",s),e(p.texture,l.mapping)}else return null}}return l}function s(l){const u=l.target;u.removeEventListener("dispose",s);const d=t.get(u);d!==void 0&&(t.delete(u),d.dispose())}function r(){t=new WeakMap}return{get:n,dispose:r}}const Od=4,TC=[.125,.215,.35,.446,.526,.582],Of=20,t1=new Fr,CC=new xe;let e1=null,n1=0,i1=0,s1=!1;const Nf=(1+Math.sqrt(5))/2,bd=1/Nf,RC=[new Q(-Nf,bd,0),new Q(Nf,bd,0),new Q(-bd,0,Nf),new Q(bd,0,Nf),new Q(0,Nf,-bd),new Q(0,Nf,bd),new Q(-1,1,-1),new Q(1,1,-1),new Q(-1,1,1),new Q(1,1,1)],lG=new Q;class dS{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,s=100,r={}){const{size:l=256,position:u=lG}=r;e1=this._renderer.getRenderTarget(),n1=this._renderer.getActiveCubeFace(),i1=this._renderer.getActiveMipmapLevel(),s1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(l);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(t,n,s,d,u),e>0&&this._blur(d,0,0,e),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=DC(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=BC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(e1,n1,i1),this._renderer.xr.enabled=s1,t.scissorTest=!1,gy(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===pl||t.mapping===pu?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),e1=this._renderer.getRenderTarget(),n1=this._renderer.getActiveCubeFace(),i1=this._renderer.getActiveMipmapLevel(),s1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Wn,minFilter:Wn,generateMipmaps:!1,type:Ms,format:Ki,colorSpace:So,depthBuffer:!1},s=wC(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=wC(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=cG(r)),this._blurMaterial=uG(r,t,e)}return s}_compileMaterial(t){const e=new Ei(this._lodPlanes[0],t);this._renderer.compile(e,t1)}_sceneToCubeUV(t,e,n,s,r){const d=new bi(90,1,e,n),p=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],v=this._renderer,_=v.autoClear,x=v.toneMapping;v.getClearColor(CC),v.toneMapping=hl,v.autoClear=!1;const b=new Ya({name:"PMREM.Background",side:Ta,depthWrite:!1,depthTest:!1}),R=new Ei(new ih,b);let E=!1;const M=t.background;M?M.isColor&&(b.color.copy(M),t.background=null,E=!0):(b.color.copy(CC),E=!0);for(let w=0;w<6;w++){const B=w%3;B===0?(d.up.set(0,p[w],0),d.position.set(r.x,r.y,r.z),d.lookAt(r.x+g[w],r.y,r.z)):B===1?(d.up.set(0,0,p[w]),d.position.set(r.x,r.y,r.z),d.lookAt(r.x,r.y+g[w],r.z)):(d.up.set(0,p[w],0),d.position.set(r.x,r.y,r.z),d.lookAt(r.x,r.y,r.z+g[w]));const D=this._cubeSize;gy(s,B*D,w>2?D:0,D,D),v.setRenderTarget(s),E&&v.render(R,d),v.render(t,d)}R.geometry.dispose(),R.material.dispose(),v.toneMapping=x,v.autoClear=_,t.background=M}_textureToCubeUV(t,e){const n=this._renderer,s=t.mapping===pl||t.mapping===pu;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=DC()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=BC());const r=s?this._cubemapMaterial:this._equirectMaterial,l=new Ei(this._lodPlanes[0],r),u=r.uniforms;u.envMap.value=t;const d=this._cubeSize;gy(e,0,0,3*d,2*d),n.setRenderTarget(e),n.render(l,t1)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const l=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),u=RC[(s-r-1)%RC.length];this._blur(t,r-1,r,l,u)}e.autoClear=n}_blur(t,e,n,s,r){const l=this._pingPongRenderTarget;this._halfBlur(t,l,e,n,s,"latitudinal",r),this._halfBlur(l,t,n,n,s,"longitudinal",r)}_halfBlur(t,e,n,s,r,l,u){const d=this._renderer,p=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const g=3,v=new Ei(this._lodPlanes[s],p),_=p.uniforms,x=this._sizeLods[n]-1,b=isFinite(r)?Math.PI/(2*x):2*Math.PI/(2*Of-1),R=r/b,E=isFinite(r)?1+Math.floor(g*R):Of;E>Of&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${Of}`);const M=[];let w=0;for(let V=0;V<Of;++V){const H=V/R,N=Math.exp(-H*H/2);M.push(N),V===0?w+=N:V<E&&(w+=2*N)}for(let V=0;V<M.length;V++)M[V]=M[V]/w;_.envMap.value=t.texture,_.samples.value=E,_.weights.value=M,_.latitudinal.value=l==="latitudinal",u&&(_.poleAxis.value=u);const{_lodMax:B}=this;_.dTheta.value=b,_.mipInt.value=B-n;const D=this._sizeLods[s],I=3*D*(s>B-Od?s-B+Od:0),L=4*(this._cubeSize-D);gy(e,I,L,3*D,2*D),d.setRenderTarget(e),d.render(v,t1)}}function cG(i){const t=[],e=[],n=[];let s=i;const r=i-Od+1+TC.length;for(let l=0;l<r;l++){const u=Math.pow(2,s);e.push(u);let d=1/u;l>i-Od?d=TC[l-i+Od-1]:l===0&&(d=0),n.push(d);const p=1/(u-2),g=-p,v=1+p,_=[g,g,v,g,v,v,g,g,v,v,g,v],x=6,b=6,R=3,E=2,M=1,w=new Float32Array(R*b*x),B=new Float32Array(E*b*x),D=new Float32Array(M*b*x);for(let L=0;L<x;L++){const V=L%3*2/3-1,H=L>2?0:-1,N=[V,H,0,V+2/3,H,0,V+2/3,H+1,0,V,H,0,V+2/3,H+1,0,V,H+1,0];w.set(N,R*b*L),B.set(_,E*b*L);const O=[L,L,L,L,L,L];D.set(O,M*b*L)}const I=new hn;I.setAttribute("position",new zn(w,R)),I.setAttribute("uv",new zn(B,E)),I.setAttribute("faceIndex",new zn(D,M)),t.push(I),s>Od&&s--}return{lodPlanes:t,sizeLods:e,sigmas:n}}function wC(i,t,e){const n=new Hr(i,t,e);return n.texture.mapping=ap,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function gy(i,t,e,n,s){i.viewport.set(t,e,n,s),i.scissor.set(t,e,n,s)}function uG(i,t,e){const n=new Float32Array(Of),s=new Q(0,1,0);return new qa({name:"SphericalGaussianBlur",defines:{n:Of,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:YM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:fl,depthTest:!1,depthWrite:!1})}function BC(){return new qa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:YM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:fl,depthTest:!1,depthWrite:!1})}function DC(){return new qa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:YM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:fl,depthTest:!1,depthWrite:!1})}function YM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function fG(i){let t=new WeakMap,e=null;function n(u){if(u&&u.isTexture){const d=u.mapping,p=d===Gd||d===pg,g=d===pl||d===pu;if(p||g){let v=t.get(u);const _=v!==void 0?v.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==_)return e===null&&(e=new dS(i)),v=p?e.fromEquirectangular(u,v):e.fromCubemap(u,v),v.texture.pmremVersion=u.pmremVersion,t.set(u,v),v.texture;if(v!==void 0)return v.texture;{const x=u.image;return p&&x&&x.height>0||g&&x&&s(x)?(e===null&&(e=new dS(i)),v=p?e.fromEquirectangular(u):e.fromCubemap(u),v.texture.pmremVersion=u.pmremVersion,t.set(u,v),u.addEventListener("dispose",r),v.texture):null}}}return u}function s(u){let d=0;const p=6;for(let g=0;g<p;g++)u[g]!==void 0&&d++;return d===p}function r(u){const d=u.target;d.removeEventListener("dispose",r);const p=t.get(d);p!==void 0&&(t.delete(d),p.dispose())}function l(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:n,dispose:l}}function hG(i){const t={};function e(n){if(t[n]!==void 0)return t[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return t[n]=s,s}return{has:function(n){return e(n)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const s=e(n);return s===null&&By("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function dG(i,t,e,n){const s={},r=new WeakMap;function l(v){const _=v.target;_.index!==null&&t.remove(_.index);for(const b in _.attributes)t.remove(_.attributes[b]);_.removeEventListener("dispose",l),delete s[_.id];const x=r.get(_);x&&(t.remove(x),r.delete(_)),n.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,e.memory.geometries--}function u(v,_){return s[_.id]===!0||(_.addEventListener("dispose",l),s[_.id]=!0,e.memory.geometries++),_}function d(v){const _=v.attributes;for(const x in _)t.update(_[x],i.ARRAY_BUFFER)}function p(v){const _=[],x=v.index,b=v.attributes.position;let R=0;if(x!==null){const w=x.array;R=x.version;for(let B=0,D=w.length;B<D;B+=3){const I=w[B+0],L=w[B+1],V=w[B+2];_.push(I,L,L,V,V,I)}}else if(b!==void 0){const w=b.array;R=b.version;for(let B=0,D=w.length/3-1;B<D;B+=3){const I=B+0,L=B+1,V=B+2;_.push(I,L,L,V,V,I)}}else return;const E=new(tB(_)?mM:pM)(_,1);E.version=R;const M=r.get(v);M&&t.remove(M),r.set(v,E)}function g(v){const _=r.get(v);if(_){const x=v.index;x!==null&&_.version<x.version&&p(v)}else p(v);return r.get(v)}return{get:u,update:d,getWireframeAttribute:g}}function pG(i,t,e){let n;function s(_){n=_}let r,l;function u(_){r=_.type,l=_.bytesPerElement}function d(_,x){i.drawElements(n,x,r,_*l),e.update(x,n,1)}function p(_,x,b){b!==0&&(i.drawElementsInstanced(n,x,r,_*l,b),e.update(x,n,b))}function g(_,x,b){if(b===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,x,0,r,_,0,b);let E=0;for(let M=0;M<b;M++)E+=x[M];e.update(E,n,1)}function v(_,x,b,R){if(b===0)return;const E=t.get("WEBGL_multi_draw");if(E===null)for(let M=0;M<_.length;M++)p(_[M]/l,x[M],R[M]);else{E.multiDrawElementsInstancedWEBGL(n,x,0,r,_,0,R,0,b);let M=0;for(let w=0;w<b;w++)M+=x[w]*R[w];e.update(M,n,1)}}this.setMode=s,this.setIndex=u,this.render=d,this.renderInstances=p,this.renderMultiDraw=g,this.renderMultiDrawInstances=v}function mG(i){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,l,u){switch(e.calls++,l){case i.TRIANGLES:e.triangles+=u*(r/3);break;case i.LINES:e.lines+=u*(r/2);break;case i.LINE_STRIP:e.lines+=u*(r-1);break;case i.LINE_LOOP:e.lines+=u*r;break;case i.POINTS:e.points+=u*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function s(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:s,update:n}}function gG(i,t,e){const n=new WeakMap,s=new Hn;function r(l,u,d){const p=l.morphTargetInfluences,g=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,v=g!==void 0?g.length:0;let _=n.get(u);if(_===void 0||_.count!==v){let O=function(){H.dispose(),n.delete(u),u.removeEventListener("dispose",O)};var x=O;_!==void 0&&_.texture.dispose();const b=u.morphAttributes.position!==void 0,R=u.morphAttributes.normal!==void 0,E=u.morphAttributes.color!==void 0,M=u.morphAttributes.position||[],w=u.morphAttributes.normal||[],B=u.morphAttributes.color||[];let D=0;b===!0&&(D=1),R===!0&&(D=2),E===!0&&(D=3);let I=u.attributes.position.count*D,L=1;I>t.maxTextureSize&&(L=Math.ceil(I/t.maxTextureSize),I=t.maxTextureSize);const V=new Float32Array(I*L*4*v),H=new Ig(V,I,L,v);H.type=Li,H.needsUpdate=!0;const N=D*4;for(let Y=0;Y<v;Y++){const ht=M[Y],et=w[Y],dt=B[Y],mt=I*L*4*Y;for(let F=0;F<ht.count;F++){const K=F*N;b===!0&&(s.fromBufferAttribute(ht,F),V[mt+K+0]=s.x,V[mt+K+1]=s.y,V[mt+K+2]=s.z,V[mt+K+3]=0),R===!0&&(s.fromBufferAttribute(et,F),V[mt+K+4]=s.x,V[mt+K+5]=s.y,V[mt+K+6]=s.z,V[mt+K+7]=0),E===!0&&(s.fromBufferAttribute(dt,F),V[mt+K+8]=s.x,V[mt+K+9]=s.y,V[mt+K+10]=s.z,V[mt+K+11]=dt.itemSize===4?s.w:1)}}_={count:v,texture:H,size:new Wt(I,L)},n.set(u,_),u.addEventListener("dispose",O)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)d.getUniforms().setValue(i,"morphTexture",l.morphTexture,e);else{let b=0;for(let E=0;E<p.length;E++)b+=p[E];const R=u.morphTargetsRelative?1:1-b;d.getUniforms().setValue(i,"morphTargetBaseInfluence",R),d.getUniforms().setValue(i,"morphTargetInfluences",p)}d.getUniforms().setValue(i,"morphTargetsTexture",_.texture,e),d.getUniforms().setValue(i,"morphTargetsTextureSize",_.size)}return{update:r}}function vG(i,t,e,n){let s=new WeakMap;function r(d){const p=n.render.frame,g=d.geometry,v=t.get(d,g);if(s.get(v)!==p&&(t.update(v),s.set(v,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",u)===!1&&d.addEventListener("dispose",u),s.get(d)!==p&&(e.update(d.instanceMatrix,i.ARRAY_BUFFER),d.instanceColor!==null&&e.update(d.instanceColor,i.ARRAY_BUFFER),s.set(d,p))),d.isSkinnedMesh){const _=d.skeleton;s.get(_)!==p&&(_.update(),s.set(_,p))}return v}function l(){s=new WeakMap}function u(d){const p=d.target;p.removeEventListener("dispose",u),e.remove(p.instanceMatrix),p.instanceColor!==null&&e.remove(p.instanceColor)}return{update:r,dispose:l}}const QB=new Jn,UC=new ex(1,1),$B=new Ig,t3=new q_,e3=new Pg,NC=[],OC=[],LC=new Float32Array(16),IC=new Float32Array(9),PC=new Float32Array(4);function lp(i,t,e){const n=i[0];if(n<=0||n>0)return i;const s=t*e;let r=NC[s];if(r===void 0&&(r=new Float32Array(s),NC[s]=r),t!==0){n.toArray(r,0);for(let l=1,u=0;l!==t;++l)u+=e,i[l].toArray(r,u)}return r}function ds(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function ps(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function gx(i,t){let e=OC[t];e===void 0&&(e=new Int32Array(t),OC[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function yG(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function _G(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(ds(e,t))return;i.uniform2fv(this.addr,t),ps(e,t)}}function xG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(ds(e,t))return;i.uniform3fv(this.addr,t),ps(e,t)}}function AG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(ds(e,t))return;i.uniform4fv(this.addr,t),ps(e,t)}}function SG(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(ds(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),ps(e,t)}else{if(ds(e,n))return;PC.set(n),i.uniformMatrix2fv(this.addr,!1,PC),ps(e,n)}}function MG(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(ds(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),ps(e,t)}else{if(ds(e,n))return;IC.set(n),i.uniformMatrix3fv(this.addr,!1,IC),ps(e,n)}}function bG(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(ds(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),ps(e,t)}else{if(ds(e,n))return;LC.set(n),i.uniformMatrix4fv(this.addr,!1,LC),ps(e,n)}}function EG(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function TG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(ds(e,t))return;i.uniform2iv(this.addr,t),ps(e,t)}}function CG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(ds(e,t))return;i.uniform3iv(this.addr,t),ps(e,t)}}function RG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(ds(e,t))return;i.uniform4iv(this.addr,t),ps(e,t)}}function wG(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function BG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(ds(e,t))return;i.uniform2uiv(this.addr,t),ps(e,t)}}function DG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(ds(e,t))return;i.uniform3uiv(this.addr,t),ps(e,t)}}function UG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(ds(e,t))return;i.uniform4uiv(this.addr,t),ps(e,t)}}function NG(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let r;this.type===i.SAMPLER_2D_SHADOW?(UC.compareFunction=hM,r=UC):r=QB,e.setTexture2D(t||r,s)}function OG(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTexture3D(t||t3,s)}function LG(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTextureCube(t||e3,s)}function IG(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTexture2DArray(t||$B,s)}function PG(i){switch(i){case 5126:return yG;case 35664:return _G;case 35665:return xG;case 35666:return AG;case 35674:return SG;case 35675:return MG;case 35676:return bG;case 5124:case 35670:return EG;case 35667:case 35671:return TG;case 35668:case 35672:return CG;case 35669:case 35673:return RG;case 5125:return wG;case 36294:return BG;case 36295:return DG;case 36296:return UG;case 35678:case 36198:case 36298:case 36306:case 35682:return NG;case 35679:case 36299:case 36307:return OG;case 35680:case 36300:case 36308:case 36293:return LG;case 36289:case 36303:case 36311:case 36292:return IG}}function FG(i,t){i.uniform1fv(this.addr,t)}function HG(i,t){const e=lp(t,this.size,2);i.uniform2fv(this.addr,e)}function zG(i,t){const e=lp(t,this.size,3);i.uniform3fv(this.addr,e)}function GG(i,t){const e=lp(t,this.size,4);i.uniform4fv(this.addr,e)}function VG(i,t){const e=lp(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function kG(i,t){const e=lp(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function XG(i,t){const e=lp(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function jG(i,t){i.uniform1iv(this.addr,t)}function YG(i,t){i.uniform2iv(this.addr,t)}function qG(i,t){i.uniform3iv(this.addr,t)}function WG(i,t){i.uniform4iv(this.addr,t)}function KG(i,t){i.uniform1uiv(this.addr,t)}function JG(i,t){i.uniform2uiv(this.addr,t)}function ZG(i,t){i.uniform3uiv(this.addr,t)}function QG(i,t){i.uniform4uiv(this.addr,t)}function $G(i,t,e){const n=this.cache,s=t.length,r=gx(e,s);ds(n,r)||(i.uniform1iv(this.addr,r),ps(n,r));for(let l=0;l!==s;++l)e.setTexture2D(t[l]||QB,r[l])}function t6(i,t,e){const n=this.cache,s=t.length,r=gx(e,s);ds(n,r)||(i.uniform1iv(this.addr,r),ps(n,r));for(let l=0;l!==s;++l)e.setTexture3D(t[l]||t3,r[l])}function e6(i,t,e){const n=this.cache,s=t.length,r=gx(e,s);ds(n,r)||(i.uniform1iv(this.addr,r),ps(n,r));for(let l=0;l!==s;++l)e.setTextureCube(t[l]||e3,r[l])}function n6(i,t,e){const n=this.cache,s=t.length,r=gx(e,s);ds(n,r)||(i.uniform1iv(this.addr,r),ps(n,r));for(let l=0;l!==s;++l)e.setTexture2DArray(t[l]||$B,r[l])}function i6(i){switch(i){case 5126:return FG;case 35664:return HG;case 35665:return zG;case 35666:return GG;case 35674:return VG;case 35675:return kG;case 35676:return XG;case 5124:case 35670:return jG;case 35667:case 35671:return YG;case 35668:case 35672:return qG;case 35669:case 35673:return WG;case 5125:return KG;case 36294:return JG;case 36295:return ZG;case 36296:return QG;case 35678:case 36198:case 36298:case 36306:case 35682:return $G;case 35679:case 36299:case 36307:return t6;case 35680:case 36300:case 36308:case 36293:return e6;case 36289:case 36303:case 36311:case 36292:return n6}}class s6{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=PG(e.type)}}class a6{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=i6(e.type)}}class r6{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const s=this.seq;for(let r=0,l=s.length;r!==l;++r){const u=s[r];u.setValue(t,e[u.id],n)}}}const a1=/(\w+)(\])?(\[|\.)?/g;function FC(i,t){i.seq.push(t),i.map[t.id]=t}function o6(i,t,e){const n=i.name,s=n.length;for(a1.lastIndex=0;;){const r=a1.exec(n),l=a1.lastIndex;let u=r[1];const d=r[2]==="]",p=r[3];if(d&&(u=u|0),p===void 0||p==="["&&l+2===s){FC(e,p===void 0?new s6(u,i,t):new a6(u,i,t));break}else{let v=e.map[u];v===void 0&&(v=new r6(u),FC(e,v)),e=v}}}class Uy{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const r=t.getActiveUniform(e,s),l=t.getUniformLocation(e,r.name);o6(r,l,this)}}setValue(t,e,n,s){const r=this.map[e];r!==void 0&&r.setValue(t,n,s)}setOptional(t,e,n){const s=e[n];s!==void 0&&this.setValue(t,n,s)}static upload(t,e,n,s){for(let r=0,l=e.length;r!==l;++r){const u=e[r],d=n[u.id];d.needsUpdate!==!1&&u.setValue(t,d.value,s)}}static seqWithValue(t,e){const n=[];for(let s=0,r=t.length;s!==r;++s){const l=t[s];l.id in e&&n.push(l)}return n}}function HC(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}const l6=37297;let c6=0;function u6(i,t){const e=i.split(`
`),n=[],s=Math.max(t-6,0),r=Math.min(t+6,e.length);for(let l=s;l<r;l++){const u=l+1;n.push(`${u===t?">":" "} ${u}: ${e[l]}`)}return n.join(`
`)}const zC=new gn;function f6(i){Nn._getMatrix(zC,Nn.workingColorSpace,i);const t=`mat3( ${zC.elements.map(e=>e.toFixed(4))} )`;switch(Nn.getTransfer(i)){case gg:return[t,"LinearTransferOETF"];case ii:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[t,"LinearTransferOETF"]}}function GC(i,t,e){const n=i.getShaderParameter(t,i.COMPILE_STATUS),s=i.getShaderInfoLog(t).trim();if(n&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const l=parseInt(r[1]);return e.toUpperCase()+`

`+s+`

`+u6(i.getShaderSource(t),l)}else return s}function h6(i,t){const e=f6(t);return[`vec4 ${i}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function d6(i,t){let e;switch(t){case Uw:e="Linear";break;case Nw:e="Reinhard";break;case Ow:e="Cineon";break;case sM:e="ACESFilmic";break;case Iw:e="AgX";break;case Pw:e="Neutral";break;case Lw:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const vy=new Q;function p6(){Nn.getLuminanceCoefficients(vy);const i=vy.x.toFixed(4),t=vy.y.toFixed(4),e=vy.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function m6(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Xm).join(`
`)}function g6(i){const t=[];for(const e in i){const n=i[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function v6(i,t){const e={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=i.getActiveAttrib(t,s),l=r.name;let u=1;r.type===i.FLOAT_MAT2&&(u=2),r.type===i.FLOAT_MAT3&&(u=3),r.type===i.FLOAT_MAT4&&(u=4),e[l]={type:r.type,location:i.getAttribLocation(t,l),locationSize:u}}return e}function Xm(i){return i!==""}function VC(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function kC(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const y6=/^[ \t]*#include +<([\w\d./]+)>/gm;function pS(i){return i.replace(y6,x6)}const _6=new Map;function x6(i,t){let e=An[t];if(e===void 0){const n=_6.get(t);if(n!==void 0)e=An[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n);else throw new Error("Can not resolve #include <"+t+">")}return pS(e)}const A6=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function XC(i){return i.replace(A6,S6)}function S6(i,t,e,n){let s="";for(let r=parseInt(t);r<parseInt(e);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function jC(i){let t=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?t+=`
#define HIGH_PRECISION`:i.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function M6(i){let t="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===P_?t="SHADOWMAP_TYPE_PCF":i.shadowMapType===Jm?t="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===yo&&(t="SHADOWMAP_TYPE_VSM"),t}function b6(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case pl:case pu:t="ENVMAP_TYPE_CUBE";break;case ap:t="ENVMAP_TYPE_CUBE_UV";break}return t}function E6(i){let t="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case pu:t="ENVMAP_MODE_REFRACTION";break}return t}function T6(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case Ug:t="ENVMAP_BLENDING_MULTIPLY";break;case Bw:t="ENVMAP_BLENDING_MIX";break;case Dw:t="ENVMAP_BLENDING_ADD";break}return t}function C6(i){const t=i.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:n,maxMip:e}}function R6(i,t,e,n){const s=i.getContext(),r=e.defines;let l=e.vertexShader,u=e.fragmentShader;const d=M6(e),p=b6(e),g=E6(e),v=T6(e),_=C6(e),x=m6(e),b=g6(r),R=s.createProgram();let E,M,w=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(E=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(Xm).join(`
`),E.length>0&&(E+=`
`),M=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(Xm).join(`
`),M.length>0&&(M+=`
`)):(E=[jC(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+g:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Xm).join(`
`),M=[jC(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+p:"",e.envMap?"#define "+g:"",e.envMap?"#define "+v:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==hl?"#define TONE_MAPPING":"",e.toneMapping!==hl?An.tonemapping_pars_fragment:"",e.toneMapping!==hl?d6("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",An.colorspace_pars_fragment,h6("linearToOutputTexel",e.outputColorSpace),p6(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(Xm).join(`
`)),l=pS(l),l=VC(l,e),l=kC(l,e),u=pS(u),u=VC(u,e),u=kC(u,e),l=XC(l),u=XC(u),e.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,E=[x,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,M=["#define varying in",e.glslVersion===aS?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===aS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const B=w+E+l,D=w+M+u,I=HC(s,s.VERTEX_SHADER,B),L=HC(s,s.FRAGMENT_SHADER,D);s.attachShader(R,I),s.attachShader(R,L),e.index0AttributeName!==void 0?s.bindAttribLocation(R,0,e.index0AttributeName):e.morphTargets===!0&&s.bindAttribLocation(R,0,"position"),s.linkProgram(R);function V(Y){if(i.debug.checkShaderErrors){const ht=s.getProgramInfoLog(R).trim(),et=s.getShaderInfoLog(I).trim(),dt=s.getShaderInfoLog(L).trim();let mt=!0,F=!0;if(s.getProgramParameter(R,s.LINK_STATUS)===!1)if(mt=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,R,I,L);else{const K=GC(s,I,"vertex"),$=GC(s,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(R,s.VALIDATE_STATUS)+`

Material Name: `+Y.name+`
Material Type: `+Y.type+`

Program Info Log: `+ht+`
`+K+`
`+$)}else ht!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ht):(et===""||dt==="")&&(F=!1);F&&(Y.diagnostics={runnable:mt,programLog:ht,vertexShader:{log:et,prefix:E},fragmentShader:{log:dt,prefix:M}})}s.deleteShader(I),s.deleteShader(L),H=new Uy(s,R),N=v6(s,R)}let H;this.getUniforms=function(){return H===void 0&&V(this),H};let N;this.getAttributes=function(){return N===void 0&&V(this),N};let O=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=s.getProgramParameter(R,l6)),O},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(R),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=c6++,this.cacheKey=t,this.usedTimes=1,this.program=R,this.vertexShader=I,this.fragmentShader=L,this}let w6=0;class B6{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,s=this._getShaderStage(e),r=this._getShaderStage(n),l=this._getShaderCacheForMaterial(t);return l.has(s)===!1&&(l.add(s),s.usedTimes++),l.has(r)===!1&&(l.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return n===void 0&&(n=new D6(t),e.set(t,n)),n}}class D6{constructor(t){this.id=w6++,this.code=t,this.usedTimes=0}}function U6(i,t,e,n,s,r,l){const u=new Jd,d=new B6,p=new Set,g=[],v=s.logarithmicDepthBuffer,_=s.vertexTextures;let x=s.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function R(N){return p.add(N),N===0?"uv":`uv${N}`}function E(N,O,Y,ht,et){const dt=ht.fog,mt=et.geometry,F=N.isMeshStandardMaterial?ht.environment:null,K=(N.isMeshStandardMaterial?e:t).get(N.envMap||F),$=K&&K.mapping===ap?K.image.height:null,yt=b[N.type];N.precision!==null&&(x=s.getMaxPrecision(N.precision),x!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",x,"instead."));const X=mt.morphAttributes.position||mt.morphAttributes.normal||mt.morphAttributes.color,lt=X!==void 0?X.length:0;let xt=0;mt.morphAttributes.position!==void 0&&(xt=1),mt.morphAttributes.normal!==void 0&&(xt=2),mt.morphAttributes.color!==void 0&&(xt=3);let bt,ot,Ot,It;if(yt){const rn=_o[yt];bt=rn.vertexShader,ot=rn.fragmentShader}else bt=N.vertexShader,ot=N.fragmentShader,d.update(N),Ot=d.getVertexShaderID(N),It=d.getFragmentShaderID(N);const ie=i.getRenderTarget(),se=i.state.buffers.depth.getReversed(),Ie=et.isInstancedMesh===!0,Ae=et.isBatchedMesh===!0,Be=!!N.map,Ve=!!N.matcap,we=!!K,Z=!!N.aoMap,le=!!N.lightMap,te=!!N.bumpMap,Kt=!!N.normalMap,Xt=!!N.displacementMap,Te=!!N.emissiveMap,Qt=!!N.metalnessMap,J=!!N.roughnessMap,k=N.anisotropy>0,_t=N.clearcoat>0,zt=N.dispersion>0,Jt=N.iridescence>0,Ht=N.sheen>0,fe=N.transmission>0,ue=k&&!!N.anisotropyMap,Se=_t&&!!N.clearcoatMap,He=_t&&!!N.clearcoatNormalMap,ae=_t&&!!N.clearcoatRoughnessMap,Me=Jt&&!!N.iridescenceMap,Re=Jt&&!!N.iridescenceThicknessMap,_e=Ht&&!!N.sheenColorMap,de=Ht&&!!N.sheenRoughnessMap,ft=!!N.specularMap,Ft=!!N.specularColorMap,re=!!N.specularIntensityMap,ct=fe&&!!N.transmissionMap,Et=fe&&!!N.thicknessMap,Nt=!!N.gradientMap,kt=!!N.alphaMap,ge=N.alphaTest>0,me=!!N.alphaHash,Pe=!!N.extensions;let dn=hl;N.toneMapped&&(ie===null||ie.isXRRenderTarget===!0)&&(dn=i.toneMapping);const Ln={shaderID:yt,shaderType:N.type,shaderName:N.name,vertexShader:bt,fragmentShader:ot,defines:N.defines,customVertexShaderID:Ot,customFragmentShaderID:It,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:x,batching:Ae,batchingColor:Ae&&et._colorsTexture!==null,instancing:Ie,instancingColor:Ie&&et.instanceColor!==null,instancingMorph:Ie&&et.morphTexture!==null,supportsVertexTextures:_,outputColorSpace:ie===null?i.outputColorSpace:ie.isXRRenderTarget===!0?ie.texture.colorSpace:So,alphaToCoverage:!!N.alphaToCoverage,map:Be,matcap:Ve,envMap:we,envMapMode:we&&K.mapping,envMapCubeUVHeight:$,aoMap:Z,lightMap:le,bumpMap:te,normalMap:Kt,displacementMap:_&&Xt,emissiveMap:Te,normalMapObjectSpace:Kt&&N.normalMapType===jw,normalMapTangentSpace:Kt&&N.normalMapType===yu,metalnessMap:Qt,roughnessMap:J,anisotropy:k,anisotropyMap:ue,clearcoat:_t,clearcoatMap:Se,clearcoatNormalMap:He,clearcoatRoughnessMap:ae,dispersion:zt,iridescence:Jt,iridescenceMap:Me,iridescenceThicknessMap:Re,sheen:Ht,sheenColorMap:_e,sheenRoughnessMap:de,specularMap:ft,specularColorMap:Ft,specularIntensityMap:re,transmission:fe,transmissionMap:ct,thicknessMap:Et,gradientMap:Nt,opaque:N.transparent===!1&&N.blending===Yf&&N.alphaToCoverage===!1,alphaMap:kt,alphaTest:ge,alphaHash:me,combine:N.combine,mapUv:Be&&R(N.map.channel),aoMapUv:Z&&R(N.aoMap.channel),lightMapUv:le&&R(N.lightMap.channel),bumpMapUv:te&&R(N.bumpMap.channel),normalMapUv:Kt&&R(N.normalMap.channel),displacementMapUv:Xt&&R(N.displacementMap.channel),emissiveMapUv:Te&&R(N.emissiveMap.channel),metalnessMapUv:Qt&&R(N.metalnessMap.channel),roughnessMapUv:J&&R(N.roughnessMap.channel),anisotropyMapUv:ue&&R(N.anisotropyMap.channel),clearcoatMapUv:Se&&R(N.clearcoatMap.channel),clearcoatNormalMapUv:He&&R(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ae&&R(N.clearcoatRoughnessMap.channel),iridescenceMapUv:Me&&R(N.iridescenceMap.channel),iridescenceThicknessMapUv:Re&&R(N.iridescenceThicknessMap.channel),sheenColorMapUv:_e&&R(N.sheenColorMap.channel),sheenRoughnessMapUv:de&&R(N.sheenRoughnessMap.channel),specularMapUv:ft&&R(N.specularMap.channel),specularColorMapUv:Ft&&R(N.specularColorMap.channel),specularIntensityMapUv:re&&R(N.specularIntensityMap.channel),transmissionMapUv:ct&&R(N.transmissionMap.channel),thicknessMapUv:Et&&R(N.thicknessMap.channel),alphaMapUv:kt&&R(N.alphaMap.channel),vertexTangents:!!mt.attributes.tangent&&(Kt||k),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!mt.attributes.color&&mt.attributes.color.itemSize===4,pointsUvs:et.isPoints===!0&&!!mt.attributes.uv&&(Be||kt),fog:!!dt,useFog:N.fog===!0,fogExp2:!!dt&&dt.isFogExp2,flatShading:N.flatShading===!0,sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:v,reverseDepthBuffer:se,skinning:et.isSkinnedMesh===!0,morphTargets:mt.morphAttributes.position!==void 0,morphNormals:mt.morphAttributes.normal!==void 0,morphColors:mt.morphAttributes.color!==void 0,morphTargetsCount:lt,morphTextureStride:xt,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:N.dithering,shadowMapEnabled:i.shadowMap.enabled&&Y.length>0,shadowMapType:i.shadowMap.type,toneMapping:dn,decodeVideoTexture:Be&&N.map.isVideoTexture===!0&&Nn.getTransfer(N.map.colorSpace)===ii,decodeVideoTextureEmissive:Te&&N.emissiveMap.isVideoTexture===!0&&Nn.getTransfer(N.emissiveMap.colorSpace)===ii,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===ka,flipSided:N.side===Ta,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionClipCullDistance:Pe&&N.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Pe&&N.extensions.multiDraw===!0||Ae)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return Ln.vertexUv1s=p.has(1),Ln.vertexUv2s=p.has(2),Ln.vertexUv3s=p.has(3),p.clear(),Ln}function M(N){const O=[];if(N.shaderID?O.push(N.shaderID):(O.push(N.customVertexShaderID),O.push(N.customFragmentShaderID)),N.defines!==void 0)for(const Y in N.defines)O.push(Y),O.push(N.defines[Y]);return N.isRawShaderMaterial===!1&&(w(O,N),B(O,N),O.push(i.outputColorSpace)),O.push(N.customProgramCacheKey),O.join()}function w(N,O){N.push(O.precision),N.push(O.outputColorSpace),N.push(O.envMapMode),N.push(O.envMapCubeUVHeight),N.push(O.mapUv),N.push(O.alphaMapUv),N.push(O.lightMapUv),N.push(O.aoMapUv),N.push(O.bumpMapUv),N.push(O.normalMapUv),N.push(O.displacementMapUv),N.push(O.emissiveMapUv),N.push(O.metalnessMapUv),N.push(O.roughnessMapUv),N.push(O.anisotropyMapUv),N.push(O.clearcoatMapUv),N.push(O.clearcoatNormalMapUv),N.push(O.clearcoatRoughnessMapUv),N.push(O.iridescenceMapUv),N.push(O.iridescenceThicknessMapUv),N.push(O.sheenColorMapUv),N.push(O.sheenRoughnessMapUv),N.push(O.specularMapUv),N.push(O.specularColorMapUv),N.push(O.specularIntensityMapUv),N.push(O.transmissionMapUv),N.push(O.thicknessMapUv),N.push(O.combine),N.push(O.fogExp2),N.push(O.sizeAttenuation),N.push(O.morphTargetsCount),N.push(O.morphAttributeCount),N.push(O.numDirLights),N.push(O.numPointLights),N.push(O.numSpotLights),N.push(O.numSpotLightMaps),N.push(O.numHemiLights),N.push(O.numRectAreaLights),N.push(O.numDirLightShadows),N.push(O.numPointLightShadows),N.push(O.numSpotLightShadows),N.push(O.numSpotLightShadowsWithMaps),N.push(O.numLightProbes),N.push(O.shadowMapType),N.push(O.toneMapping),N.push(O.numClippingPlanes),N.push(O.numClipIntersection),N.push(O.depthPacking)}function B(N,O){u.disableAll(),O.supportsVertexTextures&&u.enable(0),O.instancing&&u.enable(1),O.instancingColor&&u.enable(2),O.instancingMorph&&u.enable(3),O.matcap&&u.enable(4),O.envMap&&u.enable(5),O.normalMapObjectSpace&&u.enable(6),O.normalMapTangentSpace&&u.enable(7),O.clearcoat&&u.enable(8),O.iridescence&&u.enable(9),O.alphaTest&&u.enable(10),O.vertexColors&&u.enable(11),O.vertexAlphas&&u.enable(12),O.vertexUv1s&&u.enable(13),O.vertexUv2s&&u.enable(14),O.vertexUv3s&&u.enable(15),O.vertexTangents&&u.enable(16),O.anisotropy&&u.enable(17),O.alphaHash&&u.enable(18),O.batching&&u.enable(19),O.dispersion&&u.enable(20),O.batchingColor&&u.enable(21),N.push(u.mask),u.disableAll(),O.fog&&u.enable(0),O.useFog&&u.enable(1),O.flatShading&&u.enable(2),O.logarithmicDepthBuffer&&u.enable(3),O.reverseDepthBuffer&&u.enable(4),O.skinning&&u.enable(5),O.morphTargets&&u.enable(6),O.morphNormals&&u.enable(7),O.morphColors&&u.enable(8),O.premultipliedAlpha&&u.enable(9),O.shadowMapEnabled&&u.enable(10),O.doubleSided&&u.enable(11),O.flipSided&&u.enable(12),O.useDepthPacking&&u.enable(13),O.dithering&&u.enable(14),O.transmission&&u.enable(15),O.sheen&&u.enable(16),O.opaque&&u.enable(17),O.pointsUvs&&u.enable(18),O.decodeVideoTexture&&u.enable(19),O.decodeVideoTextureEmissive&&u.enable(20),O.alphaToCoverage&&u.enable(21),N.push(u.mask)}function D(N){const O=b[N.type];let Y;if(O){const ht=_o[O];Y=aB.clone(ht.uniforms)}else Y=N.uniforms;return Y}function I(N,O){let Y;for(let ht=0,et=g.length;ht<et;ht++){const dt=g[ht];if(dt.cacheKey===O){Y=dt,++Y.usedTimes;break}}return Y===void 0&&(Y=new R6(i,O,N,r),g.push(Y)),Y}function L(N){if(--N.usedTimes===0){const O=g.indexOf(N);g[O]=g[g.length-1],g.pop(),N.destroy()}}function V(N){d.remove(N)}function H(){d.dispose()}return{getParameters:E,getProgramCacheKey:M,getUniforms:D,acquireProgram:I,releaseProgram:L,releaseShaderCache:V,programs:g,dispose:H}}function N6(){let i=new WeakMap;function t(l){return i.has(l)}function e(l){let u=i.get(l);return u===void 0&&(u={},i.set(l,u)),u}function n(l){i.delete(l)}function s(l,u,d){i.get(l)[u]=d}function r(){i=new WeakMap}return{has:t,get:e,remove:n,update:s,dispose:r}}function O6(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function YC(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function qC(){const i=[];let t=0;const e=[],n=[],s=[];function r(){t=0,e.length=0,n.length=0,s.length=0}function l(v,_,x,b,R,E){let M=i[t];return M===void 0?(M={id:v.id,object:v,geometry:_,material:x,groupOrder:b,renderOrder:v.renderOrder,z:R,group:E},i[t]=M):(M.id=v.id,M.object=v,M.geometry=_,M.material=x,M.groupOrder=b,M.renderOrder=v.renderOrder,M.z=R,M.group=E),t++,M}function u(v,_,x,b,R,E){const M=l(v,_,x,b,R,E);x.transmission>0?n.push(M):x.transparent===!0?s.push(M):e.push(M)}function d(v,_,x,b,R,E){const M=l(v,_,x,b,R,E);x.transmission>0?n.unshift(M):x.transparent===!0?s.unshift(M):e.unshift(M)}function p(v,_){e.length>1&&e.sort(v||O6),n.length>1&&n.sort(_||YC),s.length>1&&s.sort(_||YC)}function g(){for(let v=t,_=i.length;v<_;v++){const x=i[v];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:e,transmissive:n,transparent:s,init:r,push:u,unshift:d,finish:g,sort:p}}function L6(){let i=new WeakMap;function t(n,s){const r=i.get(n);let l;return r===void 0?(l=new qC,i.set(n,[l])):s>=r.length?(l=new qC,r.push(l)):l=r[s],l}function e(){i=new WeakMap}return{get:t,dispose:e}}function I6(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new Q,color:new xe};break;case"SpotLight":e={position:new Q,direction:new Q,color:new xe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new Q,color:new xe,distance:0,decay:0};break;case"HemisphereLight":e={direction:new Q,skyColor:new xe,groundColor:new xe};break;case"RectAreaLight":e={color:new xe,position:new Q,halfWidth:new Q,halfHeight:new Q};break}return i[t.id]=e,e}}}function P6(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wt};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wt};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Wt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[t.id]=e,e}}}let F6=0;function H6(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function z6(i){const t=new I6,e=P6(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)n.probe.push(new Q);const s=new Q,r=new We,l=new We;function u(p){let g=0,v=0,_=0;for(let N=0;N<9;N++)n.probe[N].set(0,0,0);let x=0,b=0,R=0,E=0,M=0,w=0,B=0,D=0,I=0,L=0,V=0;p.sort(H6);for(let N=0,O=p.length;N<O;N++){const Y=p[N],ht=Y.color,et=Y.intensity,dt=Y.distance,mt=Y.shadow&&Y.shadow.map?Y.shadow.map.texture:null;if(Y.isAmbientLight)g+=ht.r*et,v+=ht.g*et,_+=ht.b*et;else if(Y.isLightProbe){for(let F=0;F<9;F++)n.probe[F].addScaledVector(Y.sh.coefficients[F],et);V++}else if(Y.isDirectionalLight){const F=t.get(Y);if(F.color.copy(Y.color).multiplyScalar(Y.intensity),Y.castShadow){const K=Y.shadow,$=e.get(Y);$.shadowIntensity=K.intensity,$.shadowBias=K.bias,$.shadowNormalBias=K.normalBias,$.shadowRadius=K.radius,$.shadowMapSize=K.mapSize,n.directionalShadow[x]=$,n.directionalShadowMap[x]=mt,n.directionalShadowMatrix[x]=Y.shadow.matrix,w++}n.directional[x]=F,x++}else if(Y.isSpotLight){const F=t.get(Y);F.position.setFromMatrixPosition(Y.matrixWorld),F.color.copy(ht).multiplyScalar(et),F.distance=dt,F.coneCos=Math.cos(Y.angle),F.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),F.decay=Y.decay,n.spot[R]=F;const K=Y.shadow;if(Y.map&&(n.spotLightMap[I]=Y.map,I++,K.updateMatrices(Y),Y.castShadow&&L++),n.spotLightMatrix[R]=K.matrix,Y.castShadow){const $=e.get(Y);$.shadowIntensity=K.intensity,$.shadowBias=K.bias,$.shadowNormalBias=K.normalBias,$.shadowRadius=K.radius,$.shadowMapSize=K.mapSize,n.spotShadow[R]=$,n.spotShadowMap[R]=mt,D++}R++}else if(Y.isRectAreaLight){const F=t.get(Y);F.color.copy(ht).multiplyScalar(et),F.halfWidth.set(Y.width*.5,0,0),F.halfHeight.set(0,Y.height*.5,0),n.rectArea[E]=F,E++}else if(Y.isPointLight){const F=t.get(Y);if(F.color.copy(Y.color).multiplyScalar(Y.intensity),F.distance=Y.distance,F.decay=Y.decay,Y.castShadow){const K=Y.shadow,$=e.get(Y);$.shadowIntensity=K.intensity,$.shadowBias=K.bias,$.shadowNormalBias=K.normalBias,$.shadowRadius=K.radius,$.shadowMapSize=K.mapSize,$.shadowCameraNear=K.camera.near,$.shadowCameraFar=K.camera.far,n.pointShadow[b]=$,n.pointShadowMap[b]=mt,n.pointShadowMatrix[b]=Y.shadow.matrix,B++}n.point[b]=F,b++}else if(Y.isHemisphereLight){const F=t.get(Y);F.skyColor.copy(Y.color).multiplyScalar(et),F.groundColor.copy(Y.groundColor).multiplyScalar(et),n.hemi[M]=F,M++}}E>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ee.LTC_FLOAT_1,n.rectAreaLTC2=Ee.LTC_FLOAT_2):(n.rectAreaLTC1=Ee.LTC_HALF_1,n.rectAreaLTC2=Ee.LTC_HALF_2)),n.ambient[0]=g,n.ambient[1]=v,n.ambient[2]=_;const H=n.hash;(H.directionalLength!==x||H.pointLength!==b||H.spotLength!==R||H.rectAreaLength!==E||H.hemiLength!==M||H.numDirectionalShadows!==w||H.numPointShadows!==B||H.numSpotShadows!==D||H.numSpotMaps!==I||H.numLightProbes!==V)&&(n.directional.length=x,n.spot.length=R,n.rectArea.length=E,n.point.length=b,n.hemi.length=M,n.directionalShadow.length=w,n.directionalShadowMap.length=w,n.pointShadow.length=B,n.pointShadowMap.length=B,n.spotShadow.length=D,n.spotShadowMap.length=D,n.directionalShadowMatrix.length=w,n.pointShadowMatrix.length=B,n.spotLightMatrix.length=D+I-L,n.spotLightMap.length=I,n.numSpotLightShadowsWithMaps=L,n.numLightProbes=V,H.directionalLength=x,H.pointLength=b,H.spotLength=R,H.rectAreaLength=E,H.hemiLength=M,H.numDirectionalShadows=w,H.numPointShadows=B,H.numSpotShadows=D,H.numSpotMaps=I,H.numLightProbes=V,n.version=F6++)}function d(p,g){let v=0,_=0,x=0,b=0,R=0;const E=g.matrixWorldInverse;for(let M=0,w=p.length;M<w;M++){const B=p[M];if(B.isDirectionalLight){const D=n.directional[v];D.direction.setFromMatrixPosition(B.matrixWorld),s.setFromMatrixPosition(B.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(E),v++}else if(B.isSpotLight){const D=n.spot[x];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(E),D.direction.setFromMatrixPosition(B.matrixWorld),s.setFromMatrixPosition(B.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(E),x++}else if(B.isRectAreaLight){const D=n.rectArea[b];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(E),l.identity(),r.copy(B.matrixWorld),r.premultiply(E),l.extractRotation(r),D.halfWidth.set(B.width*.5,0,0),D.halfHeight.set(0,B.height*.5,0),D.halfWidth.applyMatrix4(l),D.halfHeight.applyMatrix4(l),b++}else if(B.isPointLight){const D=n.point[_];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(E),_++}else if(B.isHemisphereLight){const D=n.hemi[R];D.direction.setFromMatrixPosition(B.matrixWorld),D.direction.transformDirection(E),R++}}}return{setup:u,setupView:d,state:n}}function WC(i){const t=new z6(i),e=[],n=[];function s(g){p.camera=g,e.length=0,n.length=0}function r(g){e.push(g)}function l(g){n.push(g)}function u(){t.setup(e)}function d(g){t.setupView(e,g)}const p={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:s,state:p,setupLights:u,setupLightsView:d,pushLight:r,pushShadow:l}}function G6(i){let t=new WeakMap;function e(s,r=0){const l=t.get(s);let u;return l===void 0?(u=new WC(i),t.set(s,[u])):r>=l.length?(u=new WC(i),l.push(u)):u=l[r],u}function n(){t=new WeakMap}return{get:e,dispose:n}}const V6=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,k6=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function X6(i,t,e){let n=new rp;const s=new Wt,r=new Wt,l=new Hn,u=new RM({depthPacking:Xw}),d=new wM,p={},g=e.maxTextureSize,v={[dl]:Ta,[Ta]:dl,[ka]:ka},_=new qa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Wt},radius:{value:4}},vertexShader:V6,fragmentShader:k6}),x=_.clone();x.defines.HORIZONTAL_PASS=1;const b=new hn;b.setAttribute("position",new zn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const R=new Ei(b,_),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=P_;let M=this.type;this.render=function(L,V,H){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||L.length===0)return;const N=i.getRenderTarget(),O=i.getActiveCubeFace(),Y=i.getActiveMipmapLevel(),ht=i.state;ht.setBlending(fl),ht.buffers.color.setClear(1,1,1,1),ht.buffers.depth.setTest(!0),ht.setScissorTest(!1);const et=M!==yo&&this.type===yo,dt=M===yo&&this.type!==yo;for(let mt=0,F=L.length;mt<F;mt++){const K=L[mt],$=K.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;s.copy($.mapSize);const yt=$.getFrameExtents();if(s.multiply(yt),r.copy($.mapSize),(s.x>g||s.y>g)&&(s.x>g&&(r.x=Math.floor(g/yt.x),s.x=r.x*yt.x,$.mapSize.x=r.x),s.y>g&&(r.y=Math.floor(g/yt.y),s.y=r.y*yt.y,$.mapSize.y=r.y)),$.map===null||et===!0||dt===!0){const lt=this.type!==yo?{minFilter:bs,magFilter:bs}:{};$.map!==null&&$.map.dispose(),$.map=new Hr(s.x,s.y,lt),$.map.texture.name=K.name+".shadowMap",$.camera.updateProjectionMatrix()}i.setRenderTarget($.map),i.clear();const X=$.getViewportCount();for(let lt=0;lt<X;lt++){const xt=$.getViewport(lt);l.set(r.x*xt.x,r.y*xt.y,r.x*xt.z,r.y*xt.w),ht.viewport(l),$.updateMatrices(K,lt),n=$.getFrustum(),D(V,H,$.camera,K,this.type)}$.isPointLightShadow!==!0&&this.type===yo&&w($,H),$.needsUpdate=!1}M=this.type,E.needsUpdate=!1,i.setRenderTarget(N,O,Y)};function w(L,V){const H=t.update(R);_.defines.VSM_SAMPLES!==L.blurSamples&&(_.defines.VSM_SAMPLES=L.blurSamples,x.defines.VSM_SAMPLES=L.blurSamples,_.needsUpdate=!0,x.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new Hr(s.x,s.y)),_.uniforms.shadow_pass.value=L.map.texture,_.uniforms.resolution.value=L.mapSize,_.uniforms.radius.value=L.radius,i.setRenderTarget(L.mapPass),i.clear(),i.renderBufferDirect(V,null,H,_,R,null),x.uniforms.shadow_pass.value=L.mapPass.texture,x.uniforms.resolution.value=L.mapSize,x.uniforms.radius.value=L.radius,i.setRenderTarget(L.map),i.clear(),i.renderBufferDirect(V,null,H,x,R,null)}function B(L,V,H,N){let O=null;const Y=H.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(Y!==void 0)O=Y;else if(O=H.isPointLight===!0?d:u,i.localClippingEnabled&&V.clipShadows===!0&&Array.isArray(V.clippingPlanes)&&V.clippingPlanes.length!==0||V.displacementMap&&V.displacementScale!==0||V.alphaMap&&V.alphaTest>0||V.map&&V.alphaTest>0||V.alphaToCoverage===!0){const ht=O.uuid,et=V.uuid;let dt=p[ht];dt===void 0&&(dt={},p[ht]=dt);let mt=dt[et];mt===void 0&&(mt=O.clone(),dt[et]=mt,V.addEventListener("dispose",I)),O=mt}if(O.visible=V.visible,O.wireframe=V.wireframe,N===yo?O.side=V.shadowSide!==null?V.shadowSide:V.side:O.side=V.shadowSide!==null?V.shadowSide:v[V.side],O.alphaMap=V.alphaMap,O.alphaTest=V.alphaToCoverage===!0?.5:V.alphaTest,O.map=V.map,O.clipShadows=V.clipShadows,O.clippingPlanes=V.clippingPlanes,O.clipIntersection=V.clipIntersection,O.displacementMap=V.displacementMap,O.displacementScale=V.displacementScale,O.displacementBias=V.displacementBias,O.wireframeLinewidth=V.wireframeLinewidth,O.linewidth=V.linewidth,H.isPointLight===!0&&O.isMeshDistanceMaterial===!0){const ht=i.properties.get(O);ht.light=H}return O}function D(L,V,H,N,O){if(L.visible===!1)return;if(L.layers.test(V.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&O===yo)&&(!L.frustumCulled||n.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,L.matrixWorld);const et=t.update(L),dt=L.material;if(Array.isArray(dt)){const mt=et.groups;for(let F=0,K=mt.length;F<K;F++){const $=mt[F],yt=dt[$.materialIndex];if(yt&&yt.visible){const X=B(L,yt,N,O);L.onBeforeShadow(i,L,V,H,et,X,$),i.renderBufferDirect(H,null,et,X,L,$),L.onAfterShadow(i,L,V,H,et,X,$)}}}else if(dt.visible){const mt=B(L,dt,N,O);L.onBeforeShadow(i,L,V,H,et,mt,null),i.renderBufferDirect(H,null,et,mt,L,null),L.onAfterShadow(i,L,V,H,et,mt,null)}}const ht=L.children;for(let et=0,dt=ht.length;et<dt;et++)D(ht[et],V,H,N,O)}function I(L){L.target.removeEventListener("dispose",I);for(const H in p){const N=p[H],O=L.target.uuid;O in N&&(N[O].dispose(),delete N[O])}}}const j6={[Xy]:jy,[Yy]:Ky,[qy]:Jy,[Kf]:Wy,[jy]:Xy,[Ky]:Yy,[Jy]:qy,[Wy]:Kf};function Y6(i,t){function e(){let ct=!1;const Et=new Hn;let Nt=null;const kt=new Hn(0,0,0,0);return{setMask:function(ge){Nt!==ge&&!ct&&(i.colorMask(ge,ge,ge,ge),Nt=ge)},setLocked:function(ge){ct=ge},setClear:function(ge,me,Pe,dn,Ln){Ln===!0&&(ge*=dn,me*=dn,Pe*=dn),Et.set(ge,me,Pe,dn),kt.equals(Et)===!1&&(i.clearColor(ge,me,Pe,dn),kt.copy(Et))},reset:function(){ct=!1,Nt=null,kt.set(-1,0,0,0)}}}function n(){let ct=!1,Et=!1,Nt=null,kt=null,ge=null;return{setReversed:function(me){if(Et!==me){const Pe=t.get("EXT_clip_control");me?Pe.clipControlEXT(Pe.LOWER_LEFT_EXT,Pe.ZERO_TO_ONE_EXT):Pe.clipControlEXT(Pe.LOWER_LEFT_EXT,Pe.NEGATIVE_ONE_TO_ONE_EXT),Et=me;const dn=ge;ge=null,this.setClear(dn)}},getReversed:function(){return Et},setTest:function(me){me?ie(i.DEPTH_TEST):se(i.DEPTH_TEST)},setMask:function(me){Nt!==me&&!ct&&(i.depthMask(me),Nt=me)},setFunc:function(me){if(Et&&(me=j6[me]),kt!==me){switch(me){case Xy:i.depthFunc(i.NEVER);break;case jy:i.depthFunc(i.ALWAYS);break;case Yy:i.depthFunc(i.LESS);break;case Kf:i.depthFunc(i.LEQUAL);break;case qy:i.depthFunc(i.EQUAL);break;case Wy:i.depthFunc(i.GEQUAL);break;case Ky:i.depthFunc(i.GREATER);break;case Jy:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}kt=me}},setLocked:function(me){ct=me},setClear:function(me){ge!==me&&(Et&&(me=1-me),i.clearDepth(me),ge=me)},reset:function(){ct=!1,Nt=null,kt=null,ge=null,Et=!1}}}function s(){let ct=!1,Et=null,Nt=null,kt=null,ge=null,me=null,Pe=null,dn=null,Ln=null;return{setTest:function(rn){ct||(rn?ie(i.STENCIL_TEST):se(i.STENCIL_TEST))},setMask:function(rn){Et!==rn&&!ct&&(i.stencilMask(rn),Et=rn)},setFunc:function(rn,vi,si){(Nt!==rn||kt!==vi||ge!==si)&&(i.stencilFunc(rn,vi,si),Nt=rn,kt=vi,ge=si)},setOp:function(rn,vi,si){(me!==rn||Pe!==vi||dn!==si)&&(i.stencilOp(rn,vi,si),me=rn,Pe=vi,dn=si)},setLocked:function(rn){ct=rn},setClear:function(rn){Ln!==rn&&(i.clearStencil(rn),Ln=rn)},reset:function(){ct=!1,Et=null,Nt=null,kt=null,ge=null,me=null,Pe=null,dn=null,Ln=null}}}const r=new e,l=new n,u=new s,d=new WeakMap,p=new WeakMap;let g={},v={},_=new WeakMap,x=[],b=null,R=!1,E=null,M=null,w=null,B=null,D=null,I=null,L=null,V=new xe(0,0,0),H=0,N=!1,O=null,Y=null,ht=null,et=null,dt=null;const mt=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let F=!1,K=0;const $=i.getParameter(i.VERSION);$.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec($)[1]),F=K>=1):$.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),F=K>=2);let yt=null,X={};const lt=i.getParameter(i.SCISSOR_BOX),xt=i.getParameter(i.VIEWPORT),bt=new Hn().fromArray(lt),ot=new Hn().fromArray(xt);function Ot(ct,Et,Nt,kt){const ge=new Uint8Array(4),me=i.createTexture();i.bindTexture(ct,me),i.texParameteri(ct,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(ct,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Pe=0;Pe<Nt;Pe++)ct===i.TEXTURE_3D||ct===i.TEXTURE_2D_ARRAY?i.texImage3D(Et,0,i.RGBA,1,1,kt,0,i.RGBA,i.UNSIGNED_BYTE,ge):i.texImage2D(Et+Pe,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,ge);return me}const It={};It[i.TEXTURE_2D]=Ot(i.TEXTURE_2D,i.TEXTURE_2D,1),It[i.TEXTURE_CUBE_MAP]=Ot(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),It[i.TEXTURE_2D_ARRAY]=Ot(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),It[i.TEXTURE_3D]=Ot(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),l.setClear(1),u.setClear(0),ie(i.DEPTH_TEST),l.setFunc(Kf),te(!1),Kt(Q1),ie(i.CULL_FACE),Z(fl);function ie(ct){g[ct]!==!0&&(i.enable(ct),g[ct]=!0)}function se(ct){g[ct]!==!1&&(i.disable(ct),g[ct]=!1)}function Ie(ct,Et){return v[ct]!==Et?(i.bindFramebuffer(ct,Et),v[ct]=Et,ct===i.DRAW_FRAMEBUFFER&&(v[i.FRAMEBUFFER]=Et),ct===i.FRAMEBUFFER&&(v[i.DRAW_FRAMEBUFFER]=Et),!0):!1}function Ae(ct,Et){let Nt=x,kt=!1;if(ct){Nt=_.get(Et),Nt===void 0&&(Nt=[],_.set(Et,Nt));const ge=ct.textures;if(Nt.length!==ge.length||Nt[0]!==i.COLOR_ATTACHMENT0){for(let me=0,Pe=ge.length;me<Pe;me++)Nt[me]=i.COLOR_ATTACHMENT0+me;Nt.length=ge.length,kt=!0}}else Nt[0]!==i.BACK&&(Nt[0]=i.BACK,kt=!0);kt&&i.drawBuffers(Nt)}function Be(ct){return b!==ct?(i.useProgram(ct),b=ct,!0):!1}const Ve={[ru]:i.FUNC_ADD,[dw]:i.FUNC_SUBTRACT,[pw]:i.FUNC_REVERSE_SUBTRACT};Ve[mw]=i.MIN,Ve[gw]=i.MAX;const we={[vw]:i.ZERO,[yw]:i.ONE,[_w]:i.SRC_COLOR,[Vy]:i.SRC_ALPHA,[Ew]:i.SRC_ALPHA_SATURATE,[Mw]:i.DST_COLOR,[Aw]:i.DST_ALPHA,[xw]:i.ONE_MINUS_SRC_COLOR,[ky]:i.ONE_MINUS_SRC_ALPHA,[bw]:i.ONE_MINUS_DST_COLOR,[Sw]:i.ONE_MINUS_DST_ALPHA,[Tw]:i.CONSTANT_COLOR,[Cw]:i.ONE_MINUS_CONSTANT_COLOR,[Rw]:i.CONSTANT_ALPHA,[ww]:i.ONE_MINUS_CONSTANT_ALPHA};function Z(ct,Et,Nt,kt,ge,me,Pe,dn,Ln,rn){if(ct===fl){R===!0&&(se(i.BLEND),R=!1);return}if(R===!1&&(ie(i.BLEND),R=!0),ct!==hw){if(ct!==E||rn!==N){if((M!==ru||D!==ru)&&(i.blendEquation(i.FUNC_ADD),M=ru,D=ru),rn)switch(ct){case Yf:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case $1:i.blendFunc(i.ONE,i.ONE);break;case tS:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case eS:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ct);break}else switch(ct){case Yf:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case $1:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case tS:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case eS:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ct);break}w=null,B=null,I=null,L=null,V.set(0,0,0),H=0,E=ct,N=rn}return}ge=ge||Et,me=me||Nt,Pe=Pe||kt,(Et!==M||ge!==D)&&(i.blendEquationSeparate(Ve[Et],Ve[ge]),M=Et,D=ge),(Nt!==w||kt!==B||me!==I||Pe!==L)&&(i.blendFuncSeparate(we[Nt],we[kt],we[me],we[Pe]),w=Nt,B=kt,I=me,L=Pe),(dn.equals(V)===!1||Ln!==H)&&(i.blendColor(dn.r,dn.g,dn.b,Ln),V.copy(dn),H=Ln),E=ct,N=!1}function le(ct,Et){ct.side===ka?se(i.CULL_FACE):ie(i.CULL_FACE);let Nt=ct.side===Ta;Et&&(Nt=!Nt),te(Nt),ct.blending===Yf&&ct.transparent===!1?Z(fl):Z(ct.blending,ct.blendEquation,ct.blendSrc,ct.blendDst,ct.blendEquationAlpha,ct.blendSrcAlpha,ct.blendDstAlpha,ct.blendColor,ct.blendAlpha,ct.premultipliedAlpha),l.setFunc(ct.depthFunc),l.setTest(ct.depthTest),l.setMask(ct.depthWrite),r.setMask(ct.colorWrite);const kt=ct.stencilWrite;u.setTest(kt),kt&&(u.setMask(ct.stencilWriteMask),u.setFunc(ct.stencilFunc,ct.stencilRef,ct.stencilFuncMask),u.setOp(ct.stencilFail,ct.stencilZFail,ct.stencilZPass)),Te(ct.polygonOffset,ct.polygonOffsetFactor,ct.polygonOffsetUnits),ct.alphaToCoverage===!0?ie(i.SAMPLE_ALPHA_TO_COVERAGE):se(i.SAMPLE_ALPHA_TO_COVERAGE)}function te(ct){O!==ct&&(ct?i.frontFace(i.CW):i.frontFace(i.CCW),O=ct)}function Kt(ct){ct!==cw?(ie(i.CULL_FACE),ct!==Y&&(ct===Q1?i.cullFace(i.BACK):ct===uw?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):se(i.CULL_FACE),Y=ct}function Xt(ct){ct!==ht&&(F&&i.lineWidth(ct),ht=ct)}function Te(ct,Et,Nt){ct?(ie(i.POLYGON_OFFSET_FILL),(et!==Et||dt!==Nt)&&(i.polygonOffset(Et,Nt),et=Et,dt=Nt)):se(i.POLYGON_OFFSET_FILL)}function Qt(ct){ct?ie(i.SCISSOR_TEST):se(i.SCISSOR_TEST)}function J(ct){ct===void 0&&(ct=i.TEXTURE0+mt-1),yt!==ct&&(i.activeTexture(ct),yt=ct)}function k(ct,Et,Nt){Nt===void 0&&(yt===null?Nt=i.TEXTURE0+mt-1:Nt=yt);let kt=X[Nt];kt===void 0&&(kt={type:void 0,texture:void 0},X[Nt]=kt),(kt.type!==ct||kt.texture!==Et)&&(yt!==Nt&&(i.activeTexture(Nt),yt=Nt),i.bindTexture(ct,Et||It[ct]),kt.type=ct,kt.texture=Et)}function _t(){const ct=X[yt];ct!==void 0&&ct.type!==void 0&&(i.bindTexture(ct.type,null),ct.type=void 0,ct.texture=void 0)}function zt(){try{i.compressedTexImage2D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function Jt(){try{i.compressedTexImage3D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function Ht(){try{i.texSubImage2D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function fe(){try{i.texSubImage3D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function ue(){try{i.compressedTexSubImage2D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function Se(){try{i.compressedTexSubImage3D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function He(){try{i.texStorage2D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function ae(){try{i.texStorage3D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function Me(){try{i.texImage2D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function Re(){try{i.texImage3D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function _e(ct){bt.equals(ct)===!1&&(i.scissor(ct.x,ct.y,ct.z,ct.w),bt.copy(ct))}function de(ct){ot.equals(ct)===!1&&(i.viewport(ct.x,ct.y,ct.z,ct.w),ot.copy(ct))}function ft(ct,Et){let Nt=p.get(Et);Nt===void 0&&(Nt=new WeakMap,p.set(Et,Nt));let kt=Nt.get(ct);kt===void 0&&(kt=i.getUniformBlockIndex(Et,ct.name),Nt.set(ct,kt))}function Ft(ct,Et){const kt=p.get(Et).get(ct);d.get(Et)!==kt&&(i.uniformBlockBinding(Et,kt,ct.__bindingPointIndex),d.set(Et,kt))}function re(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),l.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),g={},yt=null,X={},v={},_=new WeakMap,x=[],b=null,R=!1,E=null,M=null,w=null,B=null,D=null,I=null,L=null,V=new xe(0,0,0),H=0,N=!1,O=null,Y=null,ht=null,et=null,dt=null,bt.set(0,0,i.canvas.width,i.canvas.height),ot.set(0,0,i.canvas.width,i.canvas.height),r.reset(),l.reset(),u.reset()}return{buffers:{color:r,depth:l,stencil:u},enable:ie,disable:se,bindFramebuffer:Ie,drawBuffers:Ae,useProgram:Be,setBlending:Z,setMaterial:le,setFlipSided:te,setCullFace:Kt,setLineWidth:Xt,setPolygonOffset:Te,setScissorTest:Qt,activeTexture:J,bindTexture:k,unbindTexture:_t,compressedTexImage2D:zt,compressedTexImage3D:Jt,texImage2D:Me,texImage3D:Re,updateUBOMapping:ft,uniformBlockBinding:Ft,texStorage2D:He,texStorage3D:ae,texSubImage2D:Ht,texSubImage3D:fe,compressedTexSubImage2D:ue,compressedTexSubImage3D:Se,scissor:_e,viewport:de,reset:re}}function q6(i,t,e,n,s,r,l){const u=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new Wt,g=new WeakMap;let v;const _=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(J,k){return x?new OffscreenCanvas(J,k):_g("canvas")}function R(J,k,_t){let zt=1;const Jt=Qt(J);if((Jt.width>_t||Jt.height>_t)&&(zt=_t/Math.max(Jt.width,Jt.height)),zt<1)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap||typeof VideoFrame<"u"&&J instanceof VideoFrame){const Ht=Math.floor(zt*Jt.width),fe=Math.floor(zt*Jt.height);v===void 0&&(v=b(Ht,fe));const ue=k?b(Ht,fe):v;return ue.width=Ht,ue.height=fe,ue.getContext("2d").drawImage(J,0,0,Ht,fe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Jt.width+"x"+Jt.height+") to ("+Ht+"x"+fe+")."),ue}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Jt.width+"x"+Jt.height+")."),J;return J}function E(J){return J.generateMipmaps}function M(J){i.generateMipmap(J)}function w(J){return J.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:J.isWebGL3DRenderTarget?i.TEXTURE_3D:J.isWebGLArrayRenderTarget||J.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function B(J,k,_t,zt,Jt=!1){if(J!==null){if(i[J]!==void 0)return i[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let Ht=k;if(k===i.RED&&(_t===i.FLOAT&&(Ht=i.R32F),_t===i.HALF_FLOAT&&(Ht=i.R16F),_t===i.UNSIGNED_BYTE&&(Ht=i.R8)),k===i.RED_INTEGER&&(_t===i.UNSIGNED_BYTE&&(Ht=i.R8UI),_t===i.UNSIGNED_SHORT&&(Ht=i.R16UI),_t===i.UNSIGNED_INT&&(Ht=i.R32UI),_t===i.BYTE&&(Ht=i.R8I),_t===i.SHORT&&(Ht=i.R16I),_t===i.INT&&(Ht=i.R32I)),k===i.RG&&(_t===i.FLOAT&&(Ht=i.RG32F),_t===i.HALF_FLOAT&&(Ht=i.RG16F),_t===i.UNSIGNED_BYTE&&(Ht=i.RG8)),k===i.RG_INTEGER&&(_t===i.UNSIGNED_BYTE&&(Ht=i.RG8UI),_t===i.UNSIGNED_SHORT&&(Ht=i.RG16UI),_t===i.UNSIGNED_INT&&(Ht=i.RG32UI),_t===i.BYTE&&(Ht=i.RG8I),_t===i.SHORT&&(Ht=i.RG16I),_t===i.INT&&(Ht=i.RG32I)),k===i.RGB_INTEGER&&(_t===i.UNSIGNED_BYTE&&(Ht=i.RGB8UI),_t===i.UNSIGNED_SHORT&&(Ht=i.RGB16UI),_t===i.UNSIGNED_INT&&(Ht=i.RGB32UI),_t===i.BYTE&&(Ht=i.RGB8I),_t===i.SHORT&&(Ht=i.RGB16I),_t===i.INT&&(Ht=i.RGB32I)),k===i.RGBA_INTEGER&&(_t===i.UNSIGNED_BYTE&&(Ht=i.RGBA8UI),_t===i.UNSIGNED_SHORT&&(Ht=i.RGBA16UI),_t===i.UNSIGNED_INT&&(Ht=i.RGBA32UI),_t===i.BYTE&&(Ht=i.RGBA8I),_t===i.SHORT&&(Ht=i.RGBA16I),_t===i.INT&&(Ht=i.RGBA32I)),k===i.RGB&&_t===i.UNSIGNED_INT_5_9_9_9_REV&&(Ht=i.RGB9_E5),k===i.RGBA){const fe=Jt?gg:Nn.getTransfer(zt);_t===i.FLOAT&&(Ht=i.RGBA32F),_t===i.HALF_FLOAT&&(Ht=i.RGBA16F),_t===i.UNSIGNED_BYTE&&(Ht=fe===ii?i.SRGB8_ALPHA8:i.RGBA8),_t===i.UNSIGNED_SHORT_4_4_4_4&&(Ht=i.RGBA4),_t===i.UNSIGNED_SHORT_5_5_5_1&&(Ht=i.RGB5_A1)}return(Ht===i.R16F||Ht===i.R32F||Ht===i.RG16F||Ht===i.RG32F||Ht===i.RGBA16F||Ht===i.RGBA32F)&&t.get("EXT_color_buffer_float"),Ht}function D(J,k){let _t;return J?k===null||k===ml||k===Xd?_t=i.DEPTH24_STENCIL8:k===Li?_t=i.DEPTH32F_STENCIL8:k===kd&&(_t=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):k===null||k===ml||k===Xd?_t=i.DEPTH_COMPONENT24:k===Li?_t=i.DEPTH_COMPONENT32F:k===kd&&(_t=i.DEPTH_COMPONENT16),_t}function I(J,k){return E(J)===!0||J.isFramebufferTexture&&J.minFilter!==bs&&J.minFilter!==Wn?Math.log2(Math.max(k.width,k.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?k.mipmaps.length:1}function L(J){const k=J.target;k.removeEventListener("dispose",L),H(k),k.isVideoTexture&&g.delete(k)}function V(J){const k=J.target;k.removeEventListener("dispose",V),O(k)}function H(J){const k=n.get(J);if(k.__webglInit===void 0)return;const _t=J.source,zt=_.get(_t);if(zt){const Jt=zt[k.__cacheKey];Jt.usedTimes--,Jt.usedTimes===0&&N(J),Object.keys(zt).length===0&&_.delete(_t)}n.remove(J)}function N(J){const k=n.get(J);i.deleteTexture(k.__webglTexture);const _t=J.source,zt=_.get(_t);delete zt[k.__cacheKey],l.memory.textures--}function O(J){const k=n.get(J);if(J.depthTexture&&(J.depthTexture.dispose(),n.remove(J.depthTexture)),J.isWebGLCubeRenderTarget)for(let zt=0;zt<6;zt++){if(Array.isArray(k.__webglFramebuffer[zt]))for(let Jt=0;Jt<k.__webglFramebuffer[zt].length;Jt++)i.deleteFramebuffer(k.__webglFramebuffer[zt][Jt]);else i.deleteFramebuffer(k.__webglFramebuffer[zt]);k.__webglDepthbuffer&&i.deleteRenderbuffer(k.__webglDepthbuffer[zt])}else{if(Array.isArray(k.__webglFramebuffer))for(let zt=0;zt<k.__webglFramebuffer.length;zt++)i.deleteFramebuffer(k.__webglFramebuffer[zt]);else i.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&i.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&i.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let zt=0;zt<k.__webglColorRenderbuffer.length;zt++)k.__webglColorRenderbuffer[zt]&&i.deleteRenderbuffer(k.__webglColorRenderbuffer[zt]);k.__webglDepthRenderbuffer&&i.deleteRenderbuffer(k.__webglDepthRenderbuffer)}const _t=J.textures;for(let zt=0,Jt=_t.length;zt<Jt;zt++){const Ht=n.get(_t[zt]);Ht.__webglTexture&&(i.deleteTexture(Ht.__webglTexture),l.memory.textures--),n.remove(_t[zt])}n.remove(J)}let Y=0;function ht(){Y=0}function et(){const J=Y;return J>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+s.maxTextures),Y+=1,J}function dt(J){const k=[];return k.push(J.wrapS),k.push(J.wrapT),k.push(J.wrapR||0),k.push(J.magFilter),k.push(J.minFilter),k.push(J.anisotropy),k.push(J.internalFormat),k.push(J.format),k.push(J.type),k.push(J.generateMipmaps),k.push(J.premultiplyAlpha),k.push(J.flipY),k.push(J.unpackAlignment),k.push(J.colorSpace),k.join()}function mt(J,k){const _t=n.get(J);if(J.isVideoTexture&&Xt(J),J.isRenderTargetTexture===!1&&J.version>0&&_t.__version!==J.version){const zt=J.image;if(zt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(zt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ot(_t,J,k);return}}e.bindTexture(i.TEXTURE_2D,_t.__webglTexture,i.TEXTURE0+k)}function F(J,k){const _t=n.get(J);if(J.version>0&&_t.__version!==J.version){ot(_t,J,k);return}e.bindTexture(i.TEXTURE_2D_ARRAY,_t.__webglTexture,i.TEXTURE0+k)}function K(J,k){const _t=n.get(J);if(J.version>0&&_t.__version!==J.version){ot(_t,J,k);return}e.bindTexture(i.TEXTURE_3D,_t.__webglTexture,i.TEXTURE0+k)}function $(J,k){const _t=n.get(J);if(J.version>0&&_t.__version!==J.version){Ot(_t,J,k);return}e.bindTexture(i.TEXTURE_CUBE_MAP,_t.__webglTexture,i.TEXTURE0+k)}const yt={[mu]:i.REPEAT,[Wi]:i.CLAMP_TO_EDGE,[Vd]:i.MIRRORED_REPEAT},X={[bs]:i.NEAREST,[F_]:i.NEAREST_MIPMAP_NEAREST,[Pf]:i.NEAREST_MIPMAP_LINEAR,[Wn]:i.LINEAR,[Ld]:i.LINEAR_MIPMAP_NEAREST,[Lr]:i.LINEAR_MIPMAP_LINEAR},lt={[Yw]:i.NEVER,[Qw]:i.ALWAYS,[qw]:i.LESS,[hM]:i.LEQUAL,[Ww]:i.EQUAL,[Zw]:i.GEQUAL,[Kw]:i.GREATER,[Jw]:i.NOTEQUAL};function xt(J,k){if(k.type===Li&&t.has("OES_texture_float_linear")===!1&&(k.magFilter===Wn||k.magFilter===Ld||k.magFilter===Pf||k.magFilter===Lr||k.minFilter===Wn||k.minFilter===Ld||k.minFilter===Pf||k.minFilter===Lr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(J,i.TEXTURE_WRAP_S,yt[k.wrapS]),i.texParameteri(J,i.TEXTURE_WRAP_T,yt[k.wrapT]),(J===i.TEXTURE_3D||J===i.TEXTURE_2D_ARRAY)&&i.texParameteri(J,i.TEXTURE_WRAP_R,yt[k.wrapR]),i.texParameteri(J,i.TEXTURE_MAG_FILTER,X[k.magFilter]),i.texParameteri(J,i.TEXTURE_MIN_FILTER,X[k.minFilter]),k.compareFunction&&(i.texParameteri(J,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(J,i.TEXTURE_COMPARE_FUNC,lt[k.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(k.magFilter===bs||k.minFilter!==Pf&&k.minFilter!==Lr||k.type===Li&&t.has("OES_texture_float_linear")===!1)return;if(k.anisotropy>1||n.get(k).__currentAnisotropy){const _t=t.get("EXT_texture_filter_anisotropic");i.texParameterf(J,_t.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,s.getMaxAnisotropy())),n.get(k).__currentAnisotropy=k.anisotropy}}}function bt(J,k){let _t=!1;J.__webglInit===void 0&&(J.__webglInit=!0,k.addEventListener("dispose",L));const zt=k.source;let Jt=_.get(zt);Jt===void 0&&(Jt={},_.set(zt,Jt));const Ht=dt(k);if(Ht!==J.__cacheKey){Jt[Ht]===void 0&&(Jt[Ht]={texture:i.createTexture(),usedTimes:0},l.memory.textures++,_t=!0),Jt[Ht].usedTimes++;const fe=Jt[J.__cacheKey];fe!==void 0&&(Jt[J.__cacheKey].usedTimes--,fe.usedTimes===0&&N(k)),J.__cacheKey=Ht,J.__webglTexture=Jt[Ht].texture}return _t}function ot(J,k,_t){let zt=i.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(zt=i.TEXTURE_2D_ARRAY),k.isData3DTexture&&(zt=i.TEXTURE_3D);const Jt=bt(J,k),Ht=k.source;e.bindTexture(zt,J.__webglTexture,i.TEXTURE0+_t);const fe=n.get(Ht);if(Ht.version!==fe.__version||Jt===!0){e.activeTexture(i.TEXTURE0+_t);const ue=Nn.getPrimaries(Nn.workingColorSpace),Se=k.colorSpace===Jl?null:Nn.getPrimaries(k.colorSpace),He=k.colorSpace===Jl||ue===Se?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,k.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,k.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,He);let ae=R(k.image,!1,s.maxTextureSize);ae=Te(k,ae);const Me=r.convert(k.format,k.colorSpace),Re=r.convert(k.type);let _e=B(k.internalFormat,Me,Re,k.colorSpace,k.isVideoTexture);xt(zt,k);let de;const ft=k.mipmaps,Ft=k.isVideoTexture!==!0,re=fe.__version===void 0||Jt===!0,ct=Ht.dataReady,Et=I(k,ae);if(k.isDepthTexture)_e=D(k.format===Yd,k.type),re&&(Ft?e.texStorage2D(i.TEXTURE_2D,1,_e,ae.width,ae.height):e.texImage2D(i.TEXTURE_2D,0,_e,ae.width,ae.height,0,Me,Re,null));else if(k.isDataTexture)if(ft.length>0){Ft&&re&&e.texStorage2D(i.TEXTURE_2D,Et,_e,ft[0].width,ft[0].height);for(let Nt=0,kt=ft.length;Nt<kt;Nt++)de=ft[Nt],Ft?ct&&e.texSubImage2D(i.TEXTURE_2D,Nt,0,0,de.width,de.height,Me,Re,de.data):e.texImage2D(i.TEXTURE_2D,Nt,_e,de.width,de.height,0,Me,Re,de.data);k.generateMipmaps=!1}else Ft?(re&&e.texStorage2D(i.TEXTURE_2D,Et,_e,ae.width,ae.height),ct&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,ae.width,ae.height,Me,Re,ae.data)):e.texImage2D(i.TEXTURE_2D,0,_e,ae.width,ae.height,0,Me,Re,ae.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){Ft&&re&&e.texStorage3D(i.TEXTURE_2D_ARRAY,Et,_e,ft[0].width,ft[0].height,ae.depth);for(let Nt=0,kt=ft.length;Nt<kt;Nt++)if(de=ft[Nt],k.format!==Ki)if(Me!==null)if(Ft){if(ct)if(k.layerUpdates.size>0){const ge=hS(de.width,de.height,k.format,k.type);for(const me of k.layerUpdates){const Pe=de.data.subarray(me*ge/de.data.BYTES_PER_ELEMENT,(me+1)*ge/de.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Nt,0,0,me,de.width,de.height,1,Me,Pe)}k.clearLayerUpdates()}else e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Nt,0,0,0,de.width,de.height,ae.depth,Me,de.data)}else e.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Nt,_e,de.width,de.height,ae.depth,0,de.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ft?ct&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,Nt,0,0,0,de.width,de.height,ae.depth,Me,Re,de.data):e.texImage3D(i.TEXTURE_2D_ARRAY,Nt,_e,de.width,de.height,ae.depth,0,Me,Re,de.data)}else{Ft&&re&&e.texStorage2D(i.TEXTURE_2D,Et,_e,ft[0].width,ft[0].height);for(let Nt=0,kt=ft.length;Nt<kt;Nt++)de=ft[Nt],k.format!==Ki?Me!==null?Ft?ct&&e.compressedTexSubImage2D(i.TEXTURE_2D,Nt,0,0,de.width,de.height,Me,de.data):e.compressedTexImage2D(i.TEXTURE_2D,Nt,_e,de.width,de.height,0,de.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ft?ct&&e.texSubImage2D(i.TEXTURE_2D,Nt,0,0,de.width,de.height,Me,Re,de.data):e.texImage2D(i.TEXTURE_2D,Nt,_e,de.width,de.height,0,Me,Re,de.data)}else if(k.isDataArrayTexture)if(Ft){if(re&&e.texStorage3D(i.TEXTURE_2D_ARRAY,Et,_e,ae.width,ae.height,ae.depth),ct)if(k.layerUpdates.size>0){const Nt=hS(ae.width,ae.height,k.format,k.type);for(const kt of k.layerUpdates){const ge=ae.data.subarray(kt*Nt/ae.data.BYTES_PER_ELEMENT,(kt+1)*Nt/ae.data.BYTES_PER_ELEMENT);e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,kt,ae.width,ae.height,1,Me,Re,ge)}k.clearLayerUpdates()}else e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,ae.width,ae.height,ae.depth,Me,Re,ae.data)}else e.texImage3D(i.TEXTURE_2D_ARRAY,0,_e,ae.width,ae.height,ae.depth,0,Me,Re,ae.data);else if(k.isData3DTexture)Ft?(re&&e.texStorage3D(i.TEXTURE_3D,Et,_e,ae.width,ae.height,ae.depth),ct&&e.texSubImage3D(i.TEXTURE_3D,0,0,0,0,ae.width,ae.height,ae.depth,Me,Re,ae.data)):e.texImage3D(i.TEXTURE_3D,0,_e,ae.width,ae.height,ae.depth,0,Me,Re,ae.data);else if(k.isFramebufferTexture){if(re)if(Ft)e.texStorage2D(i.TEXTURE_2D,Et,_e,ae.width,ae.height);else{let Nt=ae.width,kt=ae.height;for(let ge=0;ge<Et;ge++)e.texImage2D(i.TEXTURE_2D,ge,_e,Nt,kt,0,Me,Re,null),Nt>>=1,kt>>=1}}else if(ft.length>0){if(Ft&&re){const Nt=Qt(ft[0]);e.texStorage2D(i.TEXTURE_2D,Et,_e,Nt.width,Nt.height)}for(let Nt=0,kt=ft.length;Nt<kt;Nt++)de=ft[Nt],Ft?ct&&e.texSubImage2D(i.TEXTURE_2D,Nt,0,0,Me,Re,de):e.texImage2D(i.TEXTURE_2D,Nt,_e,Me,Re,de);k.generateMipmaps=!1}else if(Ft){if(re){const Nt=Qt(ae);e.texStorage2D(i.TEXTURE_2D,Et,_e,Nt.width,Nt.height)}ct&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,Me,Re,ae)}else e.texImage2D(i.TEXTURE_2D,0,_e,Me,Re,ae);E(k)&&M(zt),fe.__version=Ht.version,k.onUpdate&&k.onUpdate(k)}J.__version=k.version}function Ot(J,k,_t){if(k.image.length!==6)return;const zt=bt(J,k),Jt=k.source;e.bindTexture(i.TEXTURE_CUBE_MAP,J.__webglTexture,i.TEXTURE0+_t);const Ht=n.get(Jt);if(Jt.version!==Ht.__version||zt===!0){e.activeTexture(i.TEXTURE0+_t);const fe=Nn.getPrimaries(Nn.workingColorSpace),ue=k.colorSpace===Jl?null:Nn.getPrimaries(k.colorSpace),Se=k.colorSpace===Jl||fe===ue?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,k.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,k.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Se);const He=k.isCompressedTexture||k.image[0].isCompressedTexture,ae=k.image[0]&&k.image[0].isDataTexture,Me=[];for(let kt=0;kt<6;kt++)!He&&!ae?Me[kt]=R(k.image[kt],!0,s.maxCubemapSize):Me[kt]=ae?k.image[kt].image:k.image[kt],Me[kt]=Te(k,Me[kt]);const Re=Me[0],_e=r.convert(k.format,k.colorSpace),de=r.convert(k.type),ft=B(k.internalFormat,_e,de,k.colorSpace),Ft=k.isVideoTexture!==!0,re=Ht.__version===void 0||zt===!0,ct=Jt.dataReady;let Et=I(k,Re);xt(i.TEXTURE_CUBE_MAP,k);let Nt;if(He){Ft&&re&&e.texStorage2D(i.TEXTURE_CUBE_MAP,Et,ft,Re.width,Re.height);for(let kt=0;kt<6;kt++){Nt=Me[kt].mipmaps;for(let ge=0;ge<Nt.length;ge++){const me=Nt[ge];k.format!==Ki?_e!==null?Ft?ct&&e.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+kt,ge,0,0,me.width,me.height,_e,me.data):e.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+kt,ge,ft,me.width,me.height,0,me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ft?ct&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+kt,ge,0,0,me.width,me.height,_e,de,me.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+kt,ge,ft,me.width,me.height,0,_e,de,me.data)}}}else{if(Nt=k.mipmaps,Ft&&re){Nt.length>0&&Et++;const kt=Qt(Me[0]);e.texStorage2D(i.TEXTURE_CUBE_MAP,Et,ft,kt.width,kt.height)}for(let kt=0;kt<6;kt++)if(ae){Ft?ct&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+kt,0,0,0,Me[kt].width,Me[kt].height,_e,de,Me[kt].data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+kt,0,ft,Me[kt].width,Me[kt].height,0,_e,de,Me[kt].data);for(let ge=0;ge<Nt.length;ge++){const Pe=Nt[ge].image[kt].image;Ft?ct&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+kt,ge+1,0,0,Pe.width,Pe.height,_e,de,Pe.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+kt,ge+1,ft,Pe.width,Pe.height,0,_e,de,Pe.data)}}else{Ft?ct&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+kt,0,0,0,_e,de,Me[kt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+kt,0,ft,_e,de,Me[kt]);for(let ge=0;ge<Nt.length;ge++){const me=Nt[ge];Ft?ct&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+kt,ge+1,0,0,_e,de,me.image[kt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+kt,ge+1,ft,_e,de,me.image[kt])}}}E(k)&&M(i.TEXTURE_CUBE_MAP),Ht.__version=Jt.version,k.onUpdate&&k.onUpdate(k)}J.__version=k.version}function It(J,k,_t,zt,Jt,Ht){const fe=r.convert(_t.format,_t.colorSpace),ue=r.convert(_t.type),Se=B(_t.internalFormat,fe,ue,_t.colorSpace),He=n.get(k),ae=n.get(_t);if(ae.__renderTarget=k,!He.__hasExternalTextures){const Me=Math.max(1,k.width>>Ht),Re=Math.max(1,k.height>>Ht);Jt===i.TEXTURE_3D||Jt===i.TEXTURE_2D_ARRAY?e.texImage3D(Jt,Ht,Se,Me,Re,k.depth,0,fe,ue,null):e.texImage2D(Jt,Ht,Se,Me,Re,0,fe,ue,null)}e.bindFramebuffer(i.FRAMEBUFFER,J),Kt(k)?u.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,zt,Jt,ae.__webglTexture,0,te(k)):(Jt===i.TEXTURE_2D||Jt>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Jt<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,zt,Jt,ae.__webglTexture,Ht),e.bindFramebuffer(i.FRAMEBUFFER,null)}function ie(J,k,_t){if(i.bindRenderbuffer(i.RENDERBUFFER,J),k.depthBuffer){const zt=k.depthTexture,Jt=zt&&zt.isDepthTexture?zt.type:null,Ht=D(k.stencilBuffer,Jt),fe=k.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ue=te(k);Kt(k)?u.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ue,Ht,k.width,k.height):_t?i.renderbufferStorageMultisample(i.RENDERBUFFER,ue,Ht,k.width,k.height):i.renderbufferStorage(i.RENDERBUFFER,Ht,k.width,k.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,fe,i.RENDERBUFFER,J)}else{const zt=k.textures;for(let Jt=0;Jt<zt.length;Jt++){const Ht=zt[Jt],fe=r.convert(Ht.format,Ht.colorSpace),ue=r.convert(Ht.type),Se=B(Ht.internalFormat,fe,ue,Ht.colorSpace),He=te(k);_t&&Kt(k)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,He,Se,k.width,k.height):Kt(k)?u.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,He,Se,k.width,k.height):i.renderbufferStorage(i.RENDERBUFFER,Se,k.width,k.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function se(J,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(i.FRAMEBUFFER,J),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const zt=n.get(k.depthTexture);zt.__renderTarget=k,(!zt.__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),mt(k.depthTexture,0);const Jt=zt.__webglTexture,Ht=te(k);if(k.depthTexture.format===jd)Kt(k)?u.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Jt,0,Ht):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Jt,0);else if(k.depthTexture.format===Yd)Kt(k)?u.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Jt,0,Ht):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Jt,0);else throw new Error("Unknown depthTexture format")}function Ie(J){const k=n.get(J),_t=J.isWebGLCubeRenderTarget===!0;if(k.__boundDepthTexture!==J.depthTexture){const zt=J.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),zt){const Jt=()=>{delete k.__boundDepthTexture,delete k.__depthDisposeCallback,zt.removeEventListener("dispose",Jt)};zt.addEventListener("dispose",Jt),k.__depthDisposeCallback=Jt}k.__boundDepthTexture=zt}if(J.depthTexture&&!k.__autoAllocateDepthBuffer){if(_t)throw new Error("target.depthTexture not supported in Cube render targets");const zt=J.texture.mipmaps;zt&&zt.length>0?se(k.__webglFramebuffer[0],J):se(k.__webglFramebuffer,J)}else if(_t){k.__webglDepthbuffer=[];for(let zt=0;zt<6;zt++)if(e.bindFramebuffer(i.FRAMEBUFFER,k.__webglFramebuffer[zt]),k.__webglDepthbuffer[zt]===void 0)k.__webglDepthbuffer[zt]=i.createRenderbuffer(),ie(k.__webglDepthbuffer[zt],J,!1);else{const Jt=J.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ht=k.__webglDepthbuffer[zt];i.bindRenderbuffer(i.RENDERBUFFER,Ht),i.framebufferRenderbuffer(i.FRAMEBUFFER,Jt,i.RENDERBUFFER,Ht)}}else{const zt=J.texture.mipmaps;if(zt&&zt.length>0?e.bindFramebuffer(i.FRAMEBUFFER,k.__webglFramebuffer[0]):e.bindFramebuffer(i.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer===void 0)k.__webglDepthbuffer=i.createRenderbuffer(),ie(k.__webglDepthbuffer,J,!1);else{const Jt=J.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ht=k.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Ht),i.framebufferRenderbuffer(i.FRAMEBUFFER,Jt,i.RENDERBUFFER,Ht)}}e.bindFramebuffer(i.FRAMEBUFFER,null)}function Ae(J,k,_t){const zt=n.get(J);k!==void 0&&It(zt.__webglFramebuffer,J,J.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),_t!==void 0&&Ie(J)}function Be(J){const k=J.texture,_t=n.get(J),zt=n.get(k);J.addEventListener("dispose",V);const Jt=J.textures,Ht=J.isWebGLCubeRenderTarget===!0,fe=Jt.length>1;if(fe||(zt.__webglTexture===void 0&&(zt.__webglTexture=i.createTexture()),zt.__version=k.version,l.memory.textures++),Ht){_t.__webglFramebuffer=[];for(let ue=0;ue<6;ue++)if(k.mipmaps&&k.mipmaps.length>0){_t.__webglFramebuffer[ue]=[];for(let Se=0;Se<k.mipmaps.length;Se++)_t.__webglFramebuffer[ue][Se]=i.createFramebuffer()}else _t.__webglFramebuffer[ue]=i.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){_t.__webglFramebuffer=[];for(let ue=0;ue<k.mipmaps.length;ue++)_t.__webglFramebuffer[ue]=i.createFramebuffer()}else _t.__webglFramebuffer=i.createFramebuffer();if(fe)for(let ue=0,Se=Jt.length;ue<Se;ue++){const He=n.get(Jt[ue]);He.__webglTexture===void 0&&(He.__webglTexture=i.createTexture(),l.memory.textures++)}if(J.samples>0&&Kt(J)===!1){_t.__webglMultisampledFramebuffer=i.createFramebuffer(),_t.__webglColorRenderbuffer=[],e.bindFramebuffer(i.FRAMEBUFFER,_t.__webglMultisampledFramebuffer);for(let ue=0;ue<Jt.length;ue++){const Se=Jt[ue];_t.__webglColorRenderbuffer[ue]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,_t.__webglColorRenderbuffer[ue]);const He=r.convert(Se.format,Se.colorSpace),ae=r.convert(Se.type),Me=B(Se.internalFormat,He,ae,Se.colorSpace,J.isXRRenderTarget===!0),Re=te(J);i.renderbufferStorageMultisample(i.RENDERBUFFER,Re,Me,J.width,J.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ue,i.RENDERBUFFER,_t.__webglColorRenderbuffer[ue])}i.bindRenderbuffer(i.RENDERBUFFER,null),J.depthBuffer&&(_t.__webglDepthRenderbuffer=i.createRenderbuffer(),ie(_t.__webglDepthRenderbuffer,J,!0)),e.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Ht){e.bindTexture(i.TEXTURE_CUBE_MAP,zt.__webglTexture),xt(i.TEXTURE_CUBE_MAP,k);for(let ue=0;ue<6;ue++)if(k.mipmaps&&k.mipmaps.length>0)for(let Se=0;Se<k.mipmaps.length;Se++)It(_t.__webglFramebuffer[ue][Se],J,k,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ue,Se);else It(_t.__webglFramebuffer[ue],J,k,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0);E(k)&&M(i.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(fe){for(let ue=0,Se=Jt.length;ue<Se;ue++){const He=Jt[ue],ae=n.get(He);e.bindTexture(i.TEXTURE_2D,ae.__webglTexture),xt(i.TEXTURE_2D,He),It(_t.__webglFramebuffer,J,He,i.COLOR_ATTACHMENT0+ue,i.TEXTURE_2D,0),E(He)&&M(i.TEXTURE_2D)}e.unbindTexture()}else{let ue=i.TEXTURE_2D;if((J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(ue=J.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(ue,zt.__webglTexture),xt(ue,k),k.mipmaps&&k.mipmaps.length>0)for(let Se=0;Se<k.mipmaps.length;Se++)It(_t.__webglFramebuffer[Se],J,k,i.COLOR_ATTACHMENT0,ue,Se);else It(_t.__webglFramebuffer,J,k,i.COLOR_ATTACHMENT0,ue,0);E(k)&&M(ue),e.unbindTexture()}J.depthBuffer&&Ie(J)}function Ve(J){const k=J.textures;for(let _t=0,zt=k.length;_t<zt;_t++){const Jt=k[_t];if(E(Jt)){const Ht=w(J),fe=n.get(Jt).__webglTexture;e.bindTexture(Ht,fe),M(Ht),e.unbindTexture()}}}const we=[],Z=[];function le(J){if(J.samples>0){if(Kt(J)===!1){const k=J.textures,_t=J.width,zt=J.height;let Jt=i.COLOR_BUFFER_BIT;const Ht=J.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,fe=n.get(J),ue=k.length>1;if(ue)for(let He=0;He<k.length;He++)e.bindFramebuffer(i.FRAMEBUFFER,fe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+He,i.RENDERBUFFER,null),e.bindFramebuffer(i.FRAMEBUFFER,fe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+He,i.TEXTURE_2D,null,0);e.bindFramebuffer(i.READ_FRAMEBUFFER,fe.__webglMultisampledFramebuffer);const Se=J.texture.mipmaps;Se&&Se.length>0?e.bindFramebuffer(i.DRAW_FRAMEBUFFER,fe.__webglFramebuffer[0]):e.bindFramebuffer(i.DRAW_FRAMEBUFFER,fe.__webglFramebuffer);for(let He=0;He<k.length;He++){if(J.resolveDepthBuffer&&(J.depthBuffer&&(Jt|=i.DEPTH_BUFFER_BIT),J.stencilBuffer&&J.resolveStencilBuffer&&(Jt|=i.STENCIL_BUFFER_BIT)),ue){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,fe.__webglColorRenderbuffer[He]);const ae=n.get(k[He]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,ae,0)}i.blitFramebuffer(0,0,_t,zt,0,0,_t,zt,Jt,i.NEAREST),d===!0&&(we.length=0,Z.length=0,we.push(i.COLOR_ATTACHMENT0+He),J.depthBuffer&&J.resolveDepthBuffer===!1&&(we.push(Ht),Z.push(Ht),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Z)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,we))}if(e.bindFramebuffer(i.READ_FRAMEBUFFER,null),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),ue)for(let He=0;He<k.length;He++){e.bindFramebuffer(i.FRAMEBUFFER,fe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+He,i.RENDERBUFFER,fe.__webglColorRenderbuffer[He]);const ae=n.get(k[He]).__webglTexture;e.bindFramebuffer(i.FRAMEBUFFER,fe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+He,i.TEXTURE_2D,ae,0)}e.bindFramebuffer(i.DRAW_FRAMEBUFFER,fe.__webglMultisampledFramebuffer)}else if(J.depthBuffer&&J.resolveDepthBuffer===!1&&d){const k=J.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[k])}}}function te(J){return Math.min(s.maxSamples,J.samples)}function Kt(J){const k=n.get(J);return J.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Xt(J){const k=l.render.frame;g.get(J)!==k&&(g.set(J,k),J.update())}function Te(J,k){const _t=J.colorSpace,zt=J.format,Jt=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||_t!==So&&_t!==Jl&&(Nn.getTransfer(_t)===ii?(zt!==Ki||Jt!==Ca)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",_t)),k}function Qt(J){return typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement?(p.width=J.naturalWidth||J.width,p.height=J.naturalHeight||J.height):typeof VideoFrame<"u"&&J instanceof VideoFrame?(p.width=J.displayWidth,p.height=J.displayHeight):(p.width=J.width,p.height=J.height),p}this.allocateTextureUnit=et,this.resetTextureUnits=ht,this.setTexture2D=mt,this.setTexture2DArray=F,this.setTexture3D=K,this.setTextureCube=$,this.rebindTextures=Ae,this.setupRenderTarget=Be,this.updateRenderTargetMipmap=Ve,this.updateMultisampleRenderTarget=le,this.setupDepthRenderbuffer=Ie,this.setupFrameBufferTexture=It,this.useMultisampledRTT=Kt}function n3(i,t){function e(n,s=Jl){let r;const l=Nn.getTransfer(s);if(n===Ca)return i.UNSIGNED_BYTE;if(n===G_)return i.UNSIGNED_SHORT_4_4_4_4;if(n===V_)return i.UNSIGNED_SHORT_5_5_5_1;if(n===aM)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===H_)return i.BYTE;if(n===z_)return i.SHORT;if(n===kd)return i.UNSIGNED_SHORT;if(n===Ng)return i.INT;if(n===ml)return i.UNSIGNED_INT;if(n===Li)return i.FLOAT;if(n===Ms)return i.HALF_FLOAT;if(n===rM)return i.ALPHA;if(n===oM)return i.RGB;if(n===Ki)return i.RGBA;if(n===jd)return i.DEPTH_COMPONENT;if(n===Yd)return i.DEPTH_STENCIL;if(n===Og)return i.RED;if(n===Lg)return i.RED_INTEGER;if(n===lM)return i.RG;if(n===k_)return i.RG_INTEGER;if(n===X_)return i.RGBA_INTEGER;if(n===Zm||n===Qm||n===$m||n===tg)if(l===ii)if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===Zm)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Qm)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===$m)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===tg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=t.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===Zm)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Qm)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===$m)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===tg)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Zy||n===Qy||n===$y||n===t_)if(r=t.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===Zy)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Qy)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===$y)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===t_)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===e_||n===n_||n===i_)if(r=t.get("WEBGL_compressed_texture_etc"),r!==null){if(n===e_||n===n_)return l===ii?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===i_)return l===ii?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===s_||n===a_||n===r_||n===o_||n===l_||n===c_||n===u_||n===f_||n===h_||n===d_||n===p_||n===m_||n===g_||n===v_)if(r=t.get("WEBGL_compressed_texture_astc"),r!==null){if(n===s_)return l===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===a_)return l===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===r_)return l===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===o_)return l===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===l_)return l===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===c_)return l===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===u_)return l===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===f_)return l===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===h_)return l===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===d_)return l===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===p_)return l===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===m_)return l===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===g_)return l===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===v_)return l===ii?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===eg||n===y_||n===__)if(r=t.get("EXT_texture_compression_bptc"),r!==null){if(n===eg)return l===ii?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===y_)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===__)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===cM||n===x_||n===A_||n===S_)if(r=t.get("EXT_texture_compression_rgtc"),r!==null){if(n===eg)return r.COMPRESSED_RED_RGTC1_EXT;if(n===x_)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===A_)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===S_)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Xd?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:e}}const W6=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,K6=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class J6{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(this.texture===null){const s=new Jn,r=t.properties.get(s);r.__webglTexture=e.texture,(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=s}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,n=new qa({vertexShader:W6,fragmentShader:K6,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Ei(new xu(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Z6 extends vl{constructor(t,e){super();const n=this;let s=null,r=1,l=null,u="local-floor",d=1,p=null,g=null,v=null,_=null,x=null,b=null;const R=new J6,E=e.getContextAttributes();let M=null,w=null;const B=[],D=[],I=new Wt;let L=null;const V=new bi;V.viewport=new Hn;const H=new bi;H.viewport=new Hn;const N=[V,H],O=new YB;let Y=null,ht=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ot){let Ot=B[ot];return Ot===void 0&&(Ot=new Dy,B[ot]=Ot),Ot.getTargetRaySpace()},this.getControllerGrip=function(ot){let Ot=B[ot];return Ot===void 0&&(Ot=new Dy,B[ot]=Ot),Ot.getGripSpace()},this.getHand=function(ot){let Ot=B[ot];return Ot===void 0&&(Ot=new Dy,B[ot]=Ot),Ot.getHandSpace()};function et(ot){const Ot=D.indexOf(ot.inputSource);if(Ot===-1)return;const It=B[Ot];It!==void 0&&(It.update(ot.inputSource,ot.frame,p||l),It.dispatchEvent({type:ot.type,data:ot.inputSource}))}function dt(){s.removeEventListener("select",et),s.removeEventListener("selectstart",et),s.removeEventListener("selectend",et),s.removeEventListener("squeeze",et),s.removeEventListener("squeezestart",et),s.removeEventListener("squeezeend",et),s.removeEventListener("end",dt),s.removeEventListener("inputsourceschange",mt);for(let ot=0;ot<B.length;ot++){const Ot=D[ot];Ot!==null&&(D[ot]=null,B[ot].disconnect(Ot))}Y=null,ht=null,R.reset(),t.setRenderTarget(M),x=null,_=null,v=null,s=null,w=null,bt.stop(),n.isPresenting=!1,t.setPixelRatio(L),t.setSize(I.width,I.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ot){r=ot,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ot){u=ot,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||l},this.setReferenceSpace=function(ot){p=ot},this.getBaseLayer=function(){return _!==null?_:x},this.getBinding=function(){return v},this.getFrame=function(){return b},this.getSession=function(){return s},this.setSession=async function(ot){if(s=ot,s!==null){if(M=t.getRenderTarget(),s.addEventListener("select",et),s.addEventListener("selectstart",et),s.addEventListener("selectend",et),s.addEventListener("squeeze",et),s.addEventListener("squeezestart",et),s.addEventListener("squeezeend",et),s.addEventListener("end",dt),s.addEventListener("inputsourceschange",mt),E.xrCompatible!==!0&&await e.makeXRCompatible(),L=t.getPixelRatio(),t.getSize(I),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let It=null,ie=null,se=null;E.depth&&(se=E.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,It=E.stencil?Yd:jd,ie=E.stencil?Xd:ml);const Ie={colorFormat:e.RGBA8,depthFormat:se,scaleFactor:r};v=new XRWebGLBinding(s,e),_=v.createProjectionLayer(Ie),s.updateRenderState({layers:[_]}),t.setPixelRatio(1),t.setSize(_.textureWidth,_.textureHeight,!1),w=new Hr(_.textureWidth,_.textureHeight,{format:Ki,type:Ca,depthTexture:new ex(_.textureWidth,_.textureHeight,ie,void 0,void 0,void 0,void 0,void 0,void 0,It),stencilBuffer:E.stencil,colorSpace:t.outputColorSpace,samples:E.antialias?4:0,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}else{const It={antialias:E.antialias,alpha:!0,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:r};x=new XRWebGLLayer(s,e,It),s.updateRenderState({baseLayer:x}),t.setPixelRatio(1),t.setSize(x.framebufferWidth,x.framebufferHeight,!1),w=new Hr(x.framebufferWidth,x.framebufferHeight,{format:Ki,type:Ca,colorSpace:t.outputColorSpace,stencilBuffer:E.stencil,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(d),p=null,l=await s.requestReferenceSpace(u),bt.setContext(s),bt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return R.getDepthTexture()};function mt(ot){for(let Ot=0;Ot<ot.removed.length;Ot++){const It=ot.removed[Ot],ie=D.indexOf(It);ie>=0&&(D[ie]=null,B[ie].disconnect(It))}for(let Ot=0;Ot<ot.added.length;Ot++){const It=ot.added[Ot];let ie=D.indexOf(It);if(ie===-1){for(let Ie=0;Ie<B.length;Ie++)if(Ie>=D.length){D.push(It),ie=Ie;break}else if(D[Ie]===null){D[Ie]=It,ie=Ie;break}if(ie===-1)break}const se=B[ie];se&&se.connect(It)}}const F=new Q,K=new Q;function $(ot,Ot,It){F.setFromMatrixPosition(Ot.matrixWorld),K.setFromMatrixPosition(It.matrixWorld);const ie=F.distanceTo(K),se=Ot.projectionMatrix.elements,Ie=It.projectionMatrix.elements,Ae=se[14]/(se[10]-1),Be=se[14]/(se[10]+1),Ve=(se[9]+1)/se[5],we=(se[9]-1)/se[5],Z=(se[8]-1)/se[0],le=(Ie[8]+1)/Ie[0],te=Ae*Z,Kt=Ae*le,Xt=ie/(-Z+le),Te=Xt*-Z;if(Ot.matrixWorld.decompose(ot.position,ot.quaternion,ot.scale),ot.translateX(Te),ot.translateZ(Xt),ot.matrixWorld.compose(ot.position,ot.quaternion,ot.scale),ot.matrixWorldInverse.copy(ot.matrixWorld).invert(),se[10]===-1)ot.projectionMatrix.copy(Ot.projectionMatrix),ot.projectionMatrixInverse.copy(Ot.projectionMatrixInverse);else{const Qt=Ae+Xt,J=Be+Xt,k=te-Te,_t=Kt+(ie-Te),zt=Ve*Be/J*Qt,Jt=we*Be/J*Qt;ot.projectionMatrix.makePerspective(k,_t,zt,Jt,Qt,J),ot.projectionMatrixInverse.copy(ot.projectionMatrix).invert()}}function yt(ot,Ot){Ot===null?ot.matrixWorld.copy(ot.matrix):ot.matrixWorld.multiplyMatrices(Ot.matrixWorld,ot.matrix),ot.matrixWorldInverse.copy(ot.matrixWorld).invert()}this.updateCamera=function(ot){if(s===null)return;let Ot=ot.near,It=ot.far;R.texture!==null&&(R.depthNear>0&&(Ot=R.depthNear),R.depthFar>0&&(It=R.depthFar)),O.near=H.near=V.near=Ot,O.far=H.far=V.far=It,(Y!==O.near||ht!==O.far)&&(s.updateRenderState({depthNear:O.near,depthFar:O.far}),Y=O.near,ht=O.far),V.layers.mask=ot.layers.mask|2,H.layers.mask=ot.layers.mask|4,O.layers.mask=V.layers.mask|H.layers.mask;const ie=ot.parent,se=O.cameras;yt(O,ie);for(let Ie=0;Ie<se.length;Ie++)yt(se[Ie],ie);se.length===2?$(O,V,H):O.projectionMatrix.copy(V.projectionMatrix),X(ot,O,ie)};function X(ot,Ot,It){It===null?ot.matrix.copy(Ot.matrixWorld):(ot.matrix.copy(It.matrixWorld),ot.matrix.invert(),ot.matrix.multiply(Ot.matrixWorld)),ot.matrix.decompose(ot.position,ot.quaternion,ot.scale),ot.updateMatrixWorld(!0),ot.projectionMatrix.copy(Ot.projectionMatrix),ot.projectionMatrixInverse.copy(Ot.projectionMatrixInverse),ot.isPerspectiveCamera&&(ot.fov=Kd*2*Math.atan(1/ot.projectionMatrix.elements[5]),ot.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(_===null&&x===null))return d},this.setFoveation=function(ot){d=ot,_!==null&&(_.fixedFoveation=ot),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=ot)},this.hasDepthSensing=function(){return R.texture!==null},this.getDepthSensingMesh=function(){return R.getMesh(O)};let lt=null;function xt(ot,Ot){if(g=Ot.getViewerPose(p||l),b=Ot,g!==null){const It=g.views;x!==null&&(t.setRenderTargetFramebuffer(w,x.framebuffer),t.setRenderTarget(w));let ie=!1;It.length!==O.cameras.length&&(O.cameras.length=0,ie=!0);for(let Ae=0;Ae<It.length;Ae++){const Be=It[Ae];let Ve=null;if(x!==null)Ve=x.getViewport(Be);else{const Z=v.getViewSubImage(_,Be);Ve=Z.viewport,Ae===0&&(t.setRenderTargetTextures(w,Z.colorTexture,Z.depthStencilTexture),t.setRenderTarget(w))}let we=N[Ae];we===void 0&&(we=new bi,we.layers.enable(Ae),we.viewport=new Hn,N[Ae]=we),we.matrix.fromArray(Be.transform.matrix),we.matrix.decompose(we.position,we.quaternion,we.scale),we.projectionMatrix.fromArray(Be.projectionMatrix),we.projectionMatrixInverse.copy(we.projectionMatrix).invert(),we.viewport.set(Ve.x,Ve.y,Ve.width,Ve.height),Ae===0&&(O.matrix.copy(we.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),ie===!0&&O.cameras.push(we)}const se=s.enabledFeatures;if(se&&se.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&v){const Ae=v.getDepthInformation(It[0]);Ae&&Ae.isValid&&Ae.texture&&R.init(t,Ae,s.renderState)}}for(let It=0;It<B.length;It++){const ie=D[It],se=B[It];ie!==null&&se!==void 0&&se.update(ie,Ot,p||l)}lt&&lt(ot,Ot),Ot.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ot}),b=null}const bt=new ZB;bt.setAnimationLoop(xt),this.setAnimationLoop=function(ot){lt=ot},this.dispose=function(){}}}const Cf=new ur,Q6=new We;function $6(i,t){function e(E,M){E.matrixAutoUpdate===!0&&E.updateMatrix(),M.value.copy(E.matrix)}function n(E,M){M.color.getRGB(E.fogColor.value,sB(i)),M.isFog?(E.fogNear.value=M.near,E.fogFar.value=M.far):M.isFogExp2&&(E.fogDensity.value=M.density)}function s(E,M,w,B,D){M.isMeshBasicMaterial||M.isMeshLambertMaterial?r(E,M):M.isMeshToonMaterial?(r(E,M),v(E,M)):M.isMeshPhongMaterial?(r(E,M),g(E,M)):M.isMeshStandardMaterial?(r(E,M),_(E,M),M.isMeshPhysicalMaterial&&x(E,M,D)):M.isMeshMatcapMaterial?(r(E,M),b(E,M)):M.isMeshDepthMaterial?r(E,M):M.isMeshDistanceMaterial?(r(E,M),R(E,M)):M.isMeshNormalMaterial?r(E,M):M.isLineBasicMaterial?(l(E,M),M.isLineDashedMaterial&&u(E,M)):M.isPointsMaterial?d(E,M,w,B):M.isSpriteMaterial?p(E,M):M.isShadowMaterial?(E.color.value.copy(M.color),E.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function r(E,M){E.opacity.value=M.opacity,M.color&&E.diffuse.value.copy(M.color),M.emissive&&E.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(E.map.value=M.map,e(M.map,E.mapTransform)),M.alphaMap&&(E.alphaMap.value=M.alphaMap,e(M.alphaMap,E.alphaMapTransform)),M.bumpMap&&(E.bumpMap.value=M.bumpMap,e(M.bumpMap,E.bumpMapTransform),E.bumpScale.value=M.bumpScale,M.side===Ta&&(E.bumpScale.value*=-1)),M.normalMap&&(E.normalMap.value=M.normalMap,e(M.normalMap,E.normalMapTransform),E.normalScale.value.copy(M.normalScale),M.side===Ta&&E.normalScale.value.negate()),M.displacementMap&&(E.displacementMap.value=M.displacementMap,e(M.displacementMap,E.displacementMapTransform),E.displacementScale.value=M.displacementScale,E.displacementBias.value=M.displacementBias),M.emissiveMap&&(E.emissiveMap.value=M.emissiveMap,e(M.emissiveMap,E.emissiveMapTransform)),M.specularMap&&(E.specularMap.value=M.specularMap,e(M.specularMap,E.specularMapTransform)),M.alphaTest>0&&(E.alphaTest.value=M.alphaTest);const w=t.get(M),B=w.envMap,D=w.envMapRotation;B&&(E.envMap.value=B,Cf.copy(D),Cf.x*=-1,Cf.y*=-1,Cf.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(Cf.y*=-1,Cf.z*=-1),E.envMapRotation.value.setFromMatrix4(Q6.makeRotationFromEuler(Cf)),E.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=M.reflectivity,E.ior.value=M.ior,E.refractionRatio.value=M.refractionRatio),M.lightMap&&(E.lightMap.value=M.lightMap,E.lightMapIntensity.value=M.lightMapIntensity,e(M.lightMap,E.lightMapTransform)),M.aoMap&&(E.aoMap.value=M.aoMap,E.aoMapIntensity.value=M.aoMapIntensity,e(M.aoMap,E.aoMapTransform))}function l(E,M){E.diffuse.value.copy(M.color),E.opacity.value=M.opacity,M.map&&(E.map.value=M.map,e(M.map,E.mapTransform))}function u(E,M){E.dashSize.value=M.dashSize,E.totalSize.value=M.dashSize+M.gapSize,E.scale.value=M.scale}function d(E,M,w,B){E.diffuse.value.copy(M.color),E.opacity.value=M.opacity,E.size.value=M.size*w,E.scale.value=B*.5,M.map&&(E.map.value=M.map,e(M.map,E.uvTransform)),M.alphaMap&&(E.alphaMap.value=M.alphaMap,e(M.alphaMap,E.alphaMapTransform)),M.alphaTest>0&&(E.alphaTest.value=M.alphaTest)}function p(E,M){E.diffuse.value.copy(M.color),E.opacity.value=M.opacity,E.rotation.value=M.rotation,M.map&&(E.map.value=M.map,e(M.map,E.mapTransform)),M.alphaMap&&(E.alphaMap.value=M.alphaMap,e(M.alphaMap,E.alphaMapTransform)),M.alphaTest>0&&(E.alphaTest.value=M.alphaTest)}function g(E,M){E.specular.value.copy(M.specular),E.shininess.value=Math.max(M.shininess,1e-4)}function v(E,M){M.gradientMap&&(E.gradientMap.value=M.gradientMap)}function _(E,M){E.metalness.value=M.metalness,M.metalnessMap&&(E.metalnessMap.value=M.metalnessMap,e(M.metalnessMap,E.metalnessMapTransform)),E.roughness.value=M.roughness,M.roughnessMap&&(E.roughnessMap.value=M.roughnessMap,e(M.roughnessMap,E.roughnessMapTransform)),M.envMap&&(E.envMapIntensity.value=M.envMapIntensity)}function x(E,M,w){E.ior.value=M.ior,M.sheen>0&&(E.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),E.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(E.sheenColorMap.value=M.sheenColorMap,e(M.sheenColorMap,E.sheenColorMapTransform)),M.sheenRoughnessMap&&(E.sheenRoughnessMap.value=M.sheenRoughnessMap,e(M.sheenRoughnessMap,E.sheenRoughnessMapTransform))),M.clearcoat>0&&(E.clearcoat.value=M.clearcoat,E.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(E.clearcoatMap.value=M.clearcoatMap,e(M.clearcoatMap,E.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,e(M.clearcoatRoughnessMap,E.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(E.clearcoatNormalMap.value=M.clearcoatNormalMap,e(M.clearcoatNormalMap,E.clearcoatNormalMapTransform),E.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===Ta&&E.clearcoatNormalScale.value.negate())),M.dispersion>0&&(E.dispersion.value=M.dispersion),M.iridescence>0&&(E.iridescence.value=M.iridescence,E.iridescenceIOR.value=M.iridescenceIOR,E.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(E.iridescenceMap.value=M.iridescenceMap,e(M.iridescenceMap,E.iridescenceMapTransform)),M.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=M.iridescenceThicknessMap,e(M.iridescenceThicknessMap,E.iridescenceThicknessMapTransform))),M.transmission>0&&(E.transmission.value=M.transmission,E.transmissionSamplerMap.value=w.texture,E.transmissionSamplerSize.value.set(w.width,w.height),M.transmissionMap&&(E.transmissionMap.value=M.transmissionMap,e(M.transmissionMap,E.transmissionMapTransform)),E.thickness.value=M.thickness,M.thicknessMap&&(E.thicknessMap.value=M.thicknessMap,e(M.thicknessMap,E.thicknessMapTransform)),E.attenuationDistance.value=M.attenuationDistance,E.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(E.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(E.anisotropyMap.value=M.anisotropyMap,e(M.anisotropyMap,E.anisotropyMapTransform))),E.specularIntensity.value=M.specularIntensity,E.specularColor.value.copy(M.specularColor),M.specularColorMap&&(E.specularColorMap.value=M.specularColorMap,e(M.specularColorMap,E.specularColorMapTransform)),M.specularIntensityMap&&(E.specularIntensityMap.value=M.specularIntensityMap,e(M.specularIntensityMap,E.specularIntensityMapTransform))}function b(E,M){M.matcap&&(E.matcap.value=M.matcap)}function R(E,M){const w=t.get(M).light;E.referencePosition.value.setFromMatrixPosition(w.matrixWorld),E.nearDistance.value=w.shadow.camera.near,E.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function t8(i,t,e,n){let s={},r={},l=[];const u=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function d(w,B){const D=B.program;n.uniformBlockBinding(w,D)}function p(w,B){let D=s[w.id];D===void 0&&(b(w),D=g(w),s[w.id]=D,w.addEventListener("dispose",E));const I=B.program;n.updateUBOMapping(w,I);const L=t.render.frame;r[w.id]!==L&&(_(w),r[w.id]=L)}function g(w){const B=v();w.__bindingPointIndex=B;const D=i.createBuffer(),I=w.__size,L=w.usage;return i.bindBuffer(i.UNIFORM_BUFFER,D),i.bufferData(i.UNIFORM_BUFFER,I,L),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,B,D),D}function v(){for(let w=0;w<u;w++)if(l.indexOf(w)===-1)return l.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function _(w){const B=s[w.id],D=w.uniforms,I=w.__cache;i.bindBuffer(i.UNIFORM_BUFFER,B);for(let L=0,V=D.length;L<V;L++){const H=Array.isArray(D[L])?D[L]:[D[L]];for(let N=0,O=H.length;N<O;N++){const Y=H[N];if(x(Y,L,N,I)===!0){const ht=Y.__offset,et=Array.isArray(Y.value)?Y.value:[Y.value];let dt=0;for(let mt=0;mt<et.length;mt++){const F=et[mt],K=R(F);typeof F=="number"||typeof F=="boolean"?(Y.__data[0]=F,i.bufferSubData(i.UNIFORM_BUFFER,ht+dt,Y.__data)):F.isMatrix3?(Y.__data[0]=F.elements[0],Y.__data[1]=F.elements[1],Y.__data[2]=F.elements[2],Y.__data[3]=0,Y.__data[4]=F.elements[3],Y.__data[5]=F.elements[4],Y.__data[6]=F.elements[5],Y.__data[7]=0,Y.__data[8]=F.elements[6],Y.__data[9]=F.elements[7],Y.__data[10]=F.elements[8],Y.__data[11]=0):(F.toArray(Y.__data,dt),dt+=K.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,ht,Y.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function x(w,B,D,I){const L=w.value,V=B+"_"+D;if(I[V]===void 0)return typeof L=="number"||typeof L=="boolean"?I[V]=L:I[V]=L.clone(),!0;{const H=I[V];if(typeof L=="number"||typeof L=="boolean"){if(H!==L)return I[V]=L,!0}else if(H.equals(L)===!1)return H.copy(L),!0}return!1}function b(w){const B=w.uniforms;let D=0;const I=16;for(let V=0,H=B.length;V<H;V++){const N=Array.isArray(B[V])?B[V]:[B[V]];for(let O=0,Y=N.length;O<Y;O++){const ht=N[O],et=Array.isArray(ht.value)?ht.value:[ht.value];for(let dt=0,mt=et.length;dt<mt;dt++){const F=et[dt],K=R(F),$=D%I,yt=$%K.boundary,X=$+yt;D+=yt,X!==0&&I-X<K.storage&&(D+=I-X),ht.__data=new Float32Array(K.storage/Float32Array.BYTES_PER_ELEMENT),ht.__offset=D,D+=K.storage}}}const L=D%I;return L>0&&(D+=I-L),w.__size=D,w.__cache={},this}function R(w){const B={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(B.boundary=4,B.storage=4):w.isVector2?(B.boundary=8,B.storage=8):w.isVector3||w.isColor?(B.boundary=16,B.storage=12):w.isVector4?(B.boundary=16,B.storage=16):w.isMatrix3?(B.boundary=48,B.storage=48):w.isMatrix4?(B.boundary=64,B.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),B}function E(w){const B=w.target;B.removeEventListener("dispose",E);const D=l.indexOf(B.__bindingPointIndex);l.splice(D,1),i.deleteBuffer(s[B.id]),delete s[B.id],delete r[B.id]}function M(){for(const w in s)i.deleteBuffer(s[w]);l=[],s={},r={}}return{bind:d,update:p,dispose:M}}class qM{constructor(t={}){const{canvas:e=eB(),context:n=null,depth:s=!0,stencil:r=!1,alpha:l=!1,antialias:u=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:p=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:v=!1,reverseDepthBuffer:_=!1}=t;this.isWebGLRenderer=!0;let x;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");x=n.getContextAttributes().alpha}else x=l;const b=new Uint32Array(4),R=new Int32Array(4);let E=null,M=null;const w=[],B=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=hl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const D=this;let I=!1;this._outputColorSpace=Fs;let L=0,V=0,H=null,N=-1,O=null;const Y=new Hn,ht=new Hn;let et=null;const dt=new xe(0);let mt=0,F=e.width,K=e.height,$=1,yt=null,X=null;const lt=new Hn(0,0,F,K),xt=new Hn(0,0,F,K);let bt=!1;const ot=new rp;let Ot=!1,It=!1;const ie=new We,se=new We,Ie=new Q,Ae=new Hn,Be={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ve=!1;function we(){return H===null?$:1}let Z=n;function le(G,tt){return e.getContext(G,tt)}try{const G={alpha:!0,depth:s,stencil:r,antialias:u,premultipliedAlpha:d,preserveDrawingBuffer:p,powerPreference:g,failIfMajorPerformanceCaveat:v};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Dg}`),e.addEventListener("webglcontextlost",kt,!1),e.addEventListener("webglcontextrestored",ge,!1),e.addEventListener("webglcontextcreationerror",me,!1),Z===null){const tt="webgl2";if(Z=le(tt,G),Z===null)throw le(tt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}let te,Kt,Xt,Te,Qt,J,k,_t,zt,Jt,Ht,fe,ue,Se,He,ae,Me,Re,_e,de,ft,Ft,re,ct;function Et(){te=new hG(Z),te.init(),Ft=new n3(Z,te),Kt=new aG(Z,te,t,Ft),Xt=new Y6(Z,te),Kt.reverseDepthBuffer&&_&&Xt.buffers.depth.setReversed(!0),Te=new mG(Z),Qt=new N6,J=new q6(Z,te,Xt,Qt,Kt,Ft,Te),k=new oG(D),_t=new fG(D),zt=new AH(Z),re=new iG(Z,zt),Jt=new dG(Z,zt,Te,re),Ht=new vG(Z,Jt,zt,Te),_e=new gG(Z,Kt,J),ae=new rG(Qt),fe=new U6(D,k,_t,te,Kt,re,ae),ue=new $6(D,Qt),Se=new L6,He=new G6(te),Re=new nG(D,k,_t,Xt,Ht,x,d),Me=new X6(D,Ht,Kt),ct=new t8(Z,Te,Kt,Xt),de=new sG(Z,te,Te),ft=new pG(Z,te,Te),Te.programs=fe.programs,D.capabilities=Kt,D.extensions=te,D.properties=Qt,D.renderLists=Se,D.shadowMap=Me,D.state=Xt,D.info=Te}Et();const Nt=new Z6(D,Z);this.xr=Nt,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const G=te.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=te.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(G){G!==void 0&&($=G,this.setSize(F,K,!1))},this.getSize=function(G){return G.set(F,K)},this.setSize=function(G,tt,st=!0){if(Nt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=G,K=tt,e.width=Math.floor(G*$),e.height=Math.floor(tt*$),st===!0&&(e.style.width=G+"px",e.style.height=tt+"px"),this.setViewport(0,0,G,tt)},this.getDrawingBufferSize=function(G){return G.set(F*$,K*$).floor()},this.setDrawingBufferSize=function(G,tt,st){F=G,K=tt,$=st,e.width=Math.floor(G*st),e.height=Math.floor(tt*st),this.setViewport(0,0,G,tt)},this.getCurrentViewport=function(G){return G.copy(Y)},this.getViewport=function(G){return G.copy(lt)},this.setViewport=function(G,tt,st,at){G.isVector4?lt.set(G.x,G.y,G.z,G.w):lt.set(G,tt,st,at),Xt.viewport(Y.copy(lt).multiplyScalar($).round())},this.getScissor=function(G){return G.copy(xt)},this.setScissor=function(G,tt,st,at){G.isVector4?xt.set(G.x,G.y,G.z,G.w):xt.set(G,tt,st,at),Xt.scissor(ht.copy(xt).multiplyScalar($).round())},this.getScissorTest=function(){return bt},this.setScissorTest=function(G){Xt.setScissorTest(bt=G)},this.setOpaqueSort=function(G){yt=G},this.setTransparentSort=function(G){X=G},this.getClearColor=function(G){return G.copy(Re.getClearColor())},this.setClearColor=function(){Re.setClearColor(...arguments)},this.getClearAlpha=function(){return Re.getClearAlpha()},this.setClearAlpha=function(){Re.setClearAlpha(...arguments)},this.clear=function(G=!0,tt=!0,st=!0){let at=0;if(G){let gt=!1;if(H!==null){const Tt=H.texture.format;gt=Tt===X_||Tt===k_||Tt===Lg}if(gt){const Tt=H.texture.type,Vt=Tt===Ca||Tt===ml||Tt===kd||Tt===Xd||Tt===G_||Tt===V_,jt=Re.getClearColor(),ee=Re.getClearAlpha(),ve=jt.r,pe=jt.g,ye=jt.b;Vt?(b[0]=ve,b[1]=pe,b[2]=ye,b[3]=ee,Z.clearBufferuiv(Z.COLOR,0,b)):(R[0]=ve,R[1]=pe,R[2]=ye,R[3]=ee,Z.clearBufferiv(Z.COLOR,0,R))}else at|=Z.COLOR_BUFFER_BIT}tt&&(at|=Z.DEPTH_BUFFER_BIT),st&&(at|=Z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Z.clear(at)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",kt,!1),e.removeEventListener("webglcontextrestored",ge,!1),e.removeEventListener("webglcontextcreationerror",me,!1),Re.dispose(),Se.dispose(),He.dispose(),Qt.dispose(),k.dispose(),_t.dispose(),Ht.dispose(),re.dispose(),ct.dispose(),fe.dispose(),Nt.dispose(),Nt.removeEventListener("sessionstart",yi),Nt.removeEventListener("sessionend",Ti),Ci.stop()};function kt(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;const G=Te.autoReset,tt=Me.enabled,st=Me.autoUpdate,at=Me.needsUpdate,gt=Me.type;Et(),Te.autoReset=G,Me.enabled=tt,Me.autoUpdate=st,Me.needsUpdate=at,Me.type=gt}function me(G){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function Pe(G){const tt=G.target;tt.removeEventListener("dispose",Pe),dn(tt)}function dn(G){Ln(G),Qt.remove(G)}function Ln(G){const tt=Qt.get(G).programs;tt!==void 0&&(tt.forEach(function(st){fe.releaseProgram(st)}),G.isShaderMaterial&&fe.releaseShaderCache(G))}this.renderBufferDirect=function(G,tt,st,at,gt,Tt){tt===null&&(tt=Be);const Vt=gt.isMesh&&gt.matrixWorld.determinant()<0,jt=ut(G,tt,st,at,gt);Xt.setMaterial(at,Vt);let ee=st.index,ve=1;if(at.wireframe===!0){if(ee=Jt.getWireframeAttribute(st),ee===void 0)return;ve=2}const pe=st.drawRange,ye=st.attributes.position;let ke=pe.start*ve,Le=(pe.start+pe.count)*ve;Tt!==null&&(ke=Math.max(ke,Tt.start*ve),Le=Math.min(Le,(Tt.start+Tt.count)*ve)),ee!==null?(ke=Math.max(ke,0),Le=Math.min(Le,ee.count)):ye!=null&&(ke=Math.max(ke,0),Le=Math.min(Le,ye.count));const Tn=Le-ke;if(Tn<0||Tn===1/0)return;re.setup(gt,at,jt,st,ee);let De,ze=de;if(ee!==null&&(De=zt.get(ee),ze=ft,ze.setIndex(De)),gt.isMesh)at.wireframe===!0?(Xt.setLineWidth(at.wireframeLinewidth*we()),ze.setMode(Z.LINES)):ze.setMode(Z.TRIANGLES);else if(gt.isLine){let Ue=at.linewidth;Ue===void 0&&(Ue=1),Xt.setLineWidth(Ue*we()),gt.isLineSegments?ze.setMode(Z.LINES):gt.isLineLoop?ze.setMode(Z.LINE_LOOP):ze.setMode(Z.LINE_STRIP)}else gt.isPoints?ze.setMode(Z.POINTS):gt.isSprite&&ze.setMode(Z.TRIANGLES);if(gt.isBatchedMesh)if(gt._multiDrawInstances!==null)By("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),ze.renderMultiDrawInstances(gt._multiDrawStarts,gt._multiDrawCounts,gt._multiDrawCount,gt._multiDrawInstances);else if(te.get("WEBGL_multi_draw"))ze.renderMultiDraw(gt._multiDrawStarts,gt._multiDrawCounts,gt._multiDrawCount);else{const Ue=gt._multiDrawStarts,Yn=gt._multiDrawCounts,$e=gt._multiDrawCount,an=ee?zt.get(ee).bytesPerElement:1,Zn=Qt.get(at).currentProgram.getUniforms();for(let je=0;je<$e;je++)Zn.setValue(Z,"_gl_DrawID",je),ze.render(Ue[je]/an,Yn[je])}else if(gt.isInstancedMesh)ze.renderInstances(ke,Tn,gt.count);else if(st.isInstancedBufferGeometry){const Ue=st._maxInstanceCount!==void 0?st._maxInstanceCount:1/0,Yn=Math.min(st.instanceCount,Ue);ze.renderInstances(ke,Tn,Yn)}else ze.render(ke,Tn)};function rn(G,tt,st){G.transparent===!0&&G.side===ka&&G.forceSinglePass===!1?(G.side=Ta,G.needsUpdate=!0,Gn(G,tt,st),G.side=dl,G.needsUpdate=!0,Gn(G,tt,st),G.side=ka):Gn(G,tt,st)}this.compile=function(G,tt,st=null){st===null&&(st=G),M=He.get(st),M.init(tt),B.push(M),st.traverseVisible(function(gt){gt.isLight&&gt.layers.test(tt.layers)&&(M.pushLight(gt),gt.castShadow&&M.pushShadow(gt))}),G!==st&&G.traverseVisible(function(gt){gt.isLight&&gt.layers.test(tt.layers)&&(M.pushLight(gt),gt.castShadow&&M.pushShadow(gt))}),M.setupLights();const at=new Set;return G.traverse(function(gt){if(!(gt.isMesh||gt.isPoints||gt.isLine||gt.isSprite))return;const Tt=gt.material;if(Tt)if(Array.isArray(Tt))for(let Vt=0;Vt<Tt.length;Vt++){const jt=Tt[Vt];rn(jt,st,gt),at.add(jt)}else rn(Tt,st,gt),at.add(Tt)}),M=B.pop(),at},this.compileAsync=function(G,tt,st=null){const at=this.compile(G,tt,st);return new Promise(gt=>{function Tt(){if(at.forEach(function(Vt){Qt.get(Vt).currentProgram.isReady()&&at.delete(Vt)}),at.size===0){gt(G);return}setTimeout(Tt,10)}te.get("KHR_parallel_shader_compile")!==null?Tt():setTimeout(Tt,10)})};let vi=null;function si(G){vi&&vi(G)}function yi(){Ci.stop()}function Ti(){Ci.start()}const Ci=new ZB;Ci.setAnimationLoop(si),typeof self<"u"&&Ci.setContext(self),this.setAnimationLoop=function(G){vi=G,Nt.setAnimationLoop(G),G===null?Ci.stop():Ci.start()},Nt.addEventListener("sessionstart",yi),Nt.addEventListener("sessionend",Ti),this.render=function(G,tt){if(tt!==void 0&&tt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;if(G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),tt.parent===null&&tt.matrixWorldAutoUpdate===!0&&tt.updateMatrixWorld(),Nt.enabled===!0&&Nt.isPresenting===!0&&(Nt.cameraAutoUpdate===!0&&Nt.updateCamera(tt),tt=Nt.getCamera()),G.isScene===!0&&G.onBeforeRender(D,G,tt,H),M=He.get(G,B.length),M.init(tt),B.push(M),se.multiplyMatrices(tt.projectionMatrix,tt.matrixWorldInverse),ot.setFromProjectionMatrix(se),It=this.localClippingEnabled,Ot=ae.init(this.clippingPlanes,It),E=Se.get(G,w.length),E.init(),w.push(E),Nt.enabled===!0&&Nt.isPresenting===!0){const Tt=D.xr.getDepthSensingMesh();Tt!==null&&gs(Tt,tt,-1/0,D.sortObjects)}gs(G,tt,0,D.sortObjects),E.finish(),D.sortObjects===!0&&E.sort(yt,X),Ve=Nt.enabled===!1||Nt.isPresenting===!1||Nt.hasDepthSensing()===!1,Ve&&Re.addToRenderList(E,G),this.info.render.frame++,Ot===!0&&ae.beginShadows();const st=M.state.shadowsArray;Me.render(st,G,tt),Ot===!0&&ae.endShadows(),this.info.autoReset===!0&&this.info.reset();const at=E.opaque,gt=E.transmissive;if(M.setupLights(),tt.isArrayCamera){const Tt=tt.cameras;if(gt.length>0)for(let Vt=0,jt=Tt.length;Vt<jt;Vt++){const ee=Tt[Vt];is(at,gt,G,ee)}Ve&&Re.render(G);for(let Vt=0,jt=Tt.length;Vt<jt;Vt++){const ee=Tt[Vt];Wa(E,G,ee,ee.viewport)}}else gt.length>0&&is(at,gt,G,tt),Ve&&Re.render(G),Wa(E,G,tt);H!==null&&V===0&&(J.updateMultisampleRenderTarget(H),J.updateRenderTargetMipmap(H)),G.isScene===!0&&G.onAfterRender(D,G,tt),re.resetDefaultState(),N=-1,O=null,B.pop(),B.length>0?(M=B[B.length-1],Ot===!0&&ae.setGlobalState(D.clippingPlanes,M.state.camera)):M=null,w.pop(),w.length>0?E=w[w.length-1]:E=null};function gs(G,tt,st,at){if(G.visible===!1)return;if(G.layers.test(tt.layers)){if(G.isGroup)st=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(tt);else if(G.isLight)M.pushLight(G),G.castShadow&&M.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||ot.intersectsSprite(G)){at&&Ae.setFromMatrixPosition(G.matrixWorld).applyMatrix4(se);const Vt=Ht.update(G),jt=G.material;jt.visible&&E.push(G,Vt,jt,st,Ae.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||ot.intersectsObject(G))){const Vt=Ht.update(G),jt=G.material;if(at&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),Ae.copy(G.boundingSphere.center)):(Vt.boundingSphere===null&&Vt.computeBoundingSphere(),Ae.copy(Vt.boundingSphere.center)),Ae.applyMatrix4(G.matrixWorld).applyMatrix4(se)),Array.isArray(jt)){const ee=Vt.groups;for(let ve=0,pe=ee.length;ve<pe;ve++){const ye=ee[ve],ke=jt[ye.materialIndex];ke&&ke.visible&&E.push(G,Vt,ke,st,Ae.z,ye)}}else jt.visible&&E.push(G,Vt,jt,st,Ae.z,null)}}const Tt=G.children;for(let Vt=0,jt=Tt.length;Vt<jt;Vt++)gs(Tt[Vt],tt,st,at)}function Wa(G,tt,st,at){const gt=G.opaque,Tt=G.transmissive,Vt=G.transparent;M.setupLightsView(st),Ot===!0&&ae.setGlobalState(D.clippingPlanes,st),at&&Xt.viewport(Y.copy(at)),gt.length>0&&Ye(gt,tt,st),Tt.length>0&&Ye(Tt,tt,st),Vt.length>0&&Ye(Vt,tt,st),Xt.buffers.depth.setTest(!0),Xt.buffers.depth.setMask(!0),Xt.buffers.color.setMask(!0),Xt.setPolygonOffset(!1)}function is(G,tt,st,at){if((st.isScene===!0?st.overrideMaterial:null)!==null)return;M.state.transmissionRenderTarget[at.id]===void 0&&(M.state.transmissionRenderTarget[at.id]=new Hr(1,1,{generateMipmaps:!0,type:te.has("EXT_color_buffer_half_float")||te.has("EXT_color_buffer_float")?Ms:Ca,minFilter:Lr,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Nn.workingColorSpace}));const Tt=M.state.transmissionRenderTarget[at.id],Vt=at.viewport||Y;Tt.setSize(Vt.z*D.transmissionResolutionScale,Vt.w*D.transmissionResolutionScale);const jt=D.getRenderTarget();D.setRenderTarget(Tt),D.getClearColor(dt),mt=D.getClearAlpha(),mt<1&&D.setClearColor(16777215,.5),D.clear(),Ve&&Re.render(st);const ee=D.toneMapping;D.toneMapping=hl;const ve=at.viewport;if(at.viewport!==void 0&&(at.viewport=void 0),M.setupLightsView(at),Ot===!0&&ae.setGlobalState(D.clippingPlanes,at),Ye(G,st,at),J.updateMultisampleRenderTarget(Tt),J.updateRenderTargetMipmap(Tt),te.has("WEBGL_multisampled_render_to_texture")===!1){let pe=!1;for(let ye=0,ke=tt.length;ye<ke;ye++){const Le=tt[ye],Tn=Le.object,De=Le.geometry,ze=Le.material,Ue=Le.group;if(ze.side===ka&&Tn.layers.test(at.layers)){const Yn=ze.side;ze.side=Ta,ze.needsUpdate=!0,Vs(Tn,st,at,De,ze,Ue),ze.side=Yn,ze.needsUpdate=!0,pe=!0}}pe===!0&&(J.updateMultisampleRenderTarget(Tt),J.updateRenderTargetMipmap(Tt))}D.setRenderTarget(jt),D.setClearColor(dt,mt),ve!==void 0&&(at.viewport=ve),D.toneMapping=ee}function Ye(G,tt,st){const at=tt.isScene===!0?tt.overrideMaterial:null;for(let gt=0,Tt=G.length;gt<Tt;gt++){const Vt=G[gt],jt=Vt.object,ee=Vt.geometry,ve=Vt.group;let pe=Vt.material;pe.allowOverride===!0&&at!==null&&(pe=at),jt.layers.test(st.layers)&&Vs(jt,tt,st,ee,pe,ve)}}function Vs(G,tt,st,at,gt,Tt){G.onBeforeRender(D,tt,st,at,gt,Tt),G.modelViewMatrix.multiplyMatrices(st.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),gt.onBeforeRender(D,tt,st,at,G,Tt),gt.transparent===!0&&gt.side===ka&&gt.forceSinglePass===!1?(gt.side=Ta,gt.needsUpdate=!0,D.renderBufferDirect(st,tt,at,gt,G,Tt),gt.side=dl,gt.needsUpdate=!0,D.renderBufferDirect(st,tt,at,gt,G,Tt),gt.side=ka):D.renderBufferDirect(st,tt,at,gt,G,Tt),G.onAfterRender(D,tt,st,at,gt,Tt)}function Gn(G,tt,st){tt.isScene!==!0&&(tt=Be);const at=Qt.get(G),gt=M.state.lights,Tt=M.state.shadowsArray,Vt=gt.state.version,jt=fe.getParameters(G,gt.state,Tt,tt,st),ee=fe.getProgramCacheKey(jt);let ve=at.programs;at.environment=G.isMeshStandardMaterial?tt.environment:null,at.fog=tt.fog,at.envMap=(G.isMeshStandardMaterial?_t:k).get(G.envMap||at.environment),at.envMapRotation=at.environment!==null&&G.envMap===null?tt.environmentRotation:G.envMapRotation,ve===void 0&&(G.addEventListener("dispose",Pe),ve=new Map,at.programs=ve);let pe=ve.get(ee);if(pe!==void 0){if(at.currentProgram===pe&&at.lightsStateVersion===Vt)return W(G,jt),pe}else jt.uniforms=fe.getUniforms(G),G.onBeforeCompile(jt,D),pe=fe.acquireProgram(jt,ee),ve.set(ee,pe),at.uniforms=jt.uniforms;const ye=at.uniforms;return(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(ye.clippingPlanes=ae.uniform),W(G,jt),at.needsLights=Dt(G),at.lightsStateVersion=Vt,at.needsLights&&(ye.ambientLightColor.value=gt.state.ambient,ye.lightProbe.value=gt.state.probe,ye.directionalLights.value=gt.state.directional,ye.directionalLightShadows.value=gt.state.directionalShadow,ye.spotLights.value=gt.state.spot,ye.spotLightShadows.value=gt.state.spotShadow,ye.rectAreaLights.value=gt.state.rectArea,ye.ltc_1.value=gt.state.rectAreaLTC1,ye.ltc_2.value=gt.state.rectAreaLTC2,ye.pointLights.value=gt.state.point,ye.pointLightShadows.value=gt.state.pointShadow,ye.hemisphereLights.value=gt.state.hemi,ye.directionalShadowMap.value=gt.state.directionalShadowMap,ye.directionalShadowMatrix.value=gt.state.directionalShadowMatrix,ye.spotShadowMap.value=gt.state.spotShadowMap,ye.spotLightMatrix.value=gt.state.spotLightMatrix,ye.spotLightMap.value=gt.state.spotLightMap,ye.pointShadowMap.value=gt.state.pointShadowMap,ye.pointShadowMatrix.value=gt.state.pointShadowMatrix),at.currentProgram=pe,at.uniformsList=null,pe}function z(G){if(G.uniformsList===null){const tt=G.currentProgram.getUniforms();G.uniformsList=Uy.seqWithValue(tt.seq,G.uniforms)}return G.uniformsList}function W(G,tt){const st=Qt.get(G);st.outputColorSpace=tt.outputColorSpace,st.batching=tt.batching,st.batchingColor=tt.batchingColor,st.instancing=tt.instancing,st.instancingColor=tt.instancingColor,st.instancingMorph=tt.instancingMorph,st.skinning=tt.skinning,st.morphTargets=tt.morphTargets,st.morphNormals=tt.morphNormals,st.morphColors=tt.morphColors,st.morphTargetsCount=tt.morphTargetsCount,st.numClippingPlanes=tt.numClippingPlanes,st.numIntersection=tt.numClipIntersection,st.vertexAlphas=tt.vertexAlphas,st.vertexTangents=tt.vertexTangents,st.toneMapping=tt.toneMapping}function ut(G,tt,st,at,gt){tt.isScene!==!0&&(tt=Be),J.resetTextureUnits();const Tt=tt.fog,Vt=at.isMeshStandardMaterial?tt.environment:null,jt=H===null?D.outputColorSpace:H.isXRRenderTarget===!0?H.texture.colorSpace:So,ee=(at.isMeshStandardMaterial?_t:k).get(at.envMap||Vt),ve=at.vertexColors===!0&&!!st.attributes.color&&st.attributes.color.itemSize===4,pe=!!st.attributes.tangent&&(!!at.normalMap||at.anisotropy>0),ye=!!st.morphAttributes.position,ke=!!st.morphAttributes.normal,Le=!!st.morphAttributes.color;let Tn=hl;at.toneMapped&&(H===null||H.isXRRenderTarget===!0)&&(Tn=D.toneMapping);const De=st.morphAttributes.position||st.morphAttributes.normal||st.morphAttributes.color,ze=De!==void 0?De.length:0,Ue=Qt.get(at),Yn=M.state.lights;if(Ot===!0&&(It===!0||G!==O)){const Qn=G===O&&at.id===N;ae.setState(at,G,Qn)}let $e=!1;at.version===Ue.__version?(Ue.needsLights&&Ue.lightsStateVersion!==Yn.state.version||Ue.outputColorSpace!==jt||gt.isBatchedMesh&&Ue.batching===!1||!gt.isBatchedMesh&&Ue.batching===!0||gt.isBatchedMesh&&Ue.batchingColor===!0&&gt.colorTexture===null||gt.isBatchedMesh&&Ue.batchingColor===!1&&gt.colorTexture!==null||gt.isInstancedMesh&&Ue.instancing===!1||!gt.isInstancedMesh&&Ue.instancing===!0||gt.isSkinnedMesh&&Ue.skinning===!1||!gt.isSkinnedMesh&&Ue.skinning===!0||gt.isInstancedMesh&&Ue.instancingColor===!0&&gt.instanceColor===null||gt.isInstancedMesh&&Ue.instancingColor===!1&&gt.instanceColor!==null||gt.isInstancedMesh&&Ue.instancingMorph===!0&&gt.morphTexture===null||gt.isInstancedMesh&&Ue.instancingMorph===!1&&gt.morphTexture!==null||Ue.envMap!==ee||at.fog===!0&&Ue.fog!==Tt||Ue.numClippingPlanes!==void 0&&(Ue.numClippingPlanes!==ae.numPlanes||Ue.numIntersection!==ae.numIntersection)||Ue.vertexAlphas!==ve||Ue.vertexTangents!==pe||Ue.morphTargets!==ye||Ue.morphNormals!==ke||Ue.morphColors!==Le||Ue.toneMapping!==Tn||Ue.morphTargetsCount!==ze)&&($e=!0):($e=!0,Ue.__version=at.version);let an=Ue.currentProgram;$e===!0&&(an=Gn(at,tt,gt));let Zn=!1,je=!1,vn=!1;const pn=an.getUniforms(),ui=Ue.uniforms;if(Xt.useProgram(an.program)&&(Zn=!0,je=!0,vn=!0),at.id!==N&&(N=at.id,je=!0),Zn||O!==G){Xt.buffers.depth.getReversed()?(ie.copy(G.projectionMatrix),Y4(ie),q4(ie),pn.setValue(Z,"projectionMatrix",ie)):pn.setValue(Z,"projectionMatrix",G.projectionMatrix),pn.setValue(Z,"viewMatrix",G.matrixWorldInverse);const Ji=pn.map.cameraPosition;Ji!==void 0&&Ji.setValue(Z,Ie.setFromMatrixPosition(G.matrixWorld)),Kt.logarithmicDepthBuffer&&pn.setValue(Z,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),(at.isMeshPhongMaterial||at.isMeshToonMaterial||at.isMeshLambertMaterial||at.isMeshBasicMaterial||at.isMeshStandardMaterial||at.isShaderMaterial)&&pn.setValue(Z,"isOrthographic",G.isOrthographicCamera===!0),O!==G&&(O=G,je=!0,vn=!0)}if(gt.isSkinnedMesh){pn.setOptional(Z,gt,"bindMatrix"),pn.setOptional(Z,gt,"bindMatrixInverse");const Qn=gt.skeleton;Qn&&(Qn.boneTexture===null&&Qn.computeBoneTexture(),pn.setValue(Z,"boneTexture",Qn.boneTexture,J))}gt.isBatchedMesh&&(pn.setOptional(Z,gt,"batchingTexture"),pn.setValue(Z,"batchingTexture",gt._matricesTexture,J),pn.setOptional(Z,gt,"batchingIdTexture"),pn.setValue(Z,"batchingIdTexture",gt._indirectTexture,J),pn.setOptional(Z,gt,"batchingColorTexture"),gt._colorsTexture!==null&&pn.setValue(Z,"batchingColorTexture",gt._colorsTexture,J));const wn=st.morphAttributes;if((wn.position!==void 0||wn.normal!==void 0||wn.color!==void 0)&&_e.update(gt,st,an),(je||Ue.receiveShadow!==gt.receiveShadow)&&(Ue.receiveShadow=gt.receiveShadow,pn.setValue(Z,"receiveShadow",gt.receiveShadow)),at.isMeshGouraudMaterial&&at.envMap!==null&&(ui.envMap.value=ee,ui.flipEnvMap.value=ee.isCubeTexture&&ee.isRenderTargetTexture===!1?-1:1),at.isMeshStandardMaterial&&at.envMap===null&&tt.environment!==null&&(ui.envMapIntensity.value=tt.environmentIntensity),je&&(pn.setValue(Z,"toneMappingExposure",D.toneMappingExposure),Ue.needsLights&&wt(ui,vn),Tt&&at.fog===!0&&ue.refreshFogUniforms(ui,Tt),ue.refreshMaterialUniforms(ui,at,$,K,M.state.transmissionRenderTarget[G.id]),Uy.upload(Z,z(Ue),ui,J)),at.isShaderMaterial&&at.uniformsNeedUpdate===!0&&(Uy.upload(Z,z(Ue),ui,J),at.uniformsNeedUpdate=!1),at.isSpriteMaterial&&pn.setValue(Z,"center",gt.center),pn.setValue(Z,"modelViewMatrix",gt.modelViewMatrix),pn.setValue(Z,"normalMatrix",gt.normalMatrix),pn.setValue(Z,"modelMatrix",gt.matrixWorld),at.isShaderMaterial||at.isRawShaderMaterial){const Qn=at.uniformsGroups;for(let Ji=0,Cs=Qn.length;Ji<Cs;Ji++){const fr=Qn[Ji];ct.update(fr,an),ct.bind(fr,an)}}return an}function wt(G,tt){G.ambientLightColor.needsUpdate=tt,G.lightProbe.needsUpdate=tt,G.directionalLights.needsUpdate=tt,G.directionalLightShadows.needsUpdate=tt,G.pointLights.needsUpdate=tt,G.pointLightShadows.needsUpdate=tt,G.spotLights.needsUpdate=tt,G.spotLightShadows.needsUpdate=tt,G.rectAreaLights.needsUpdate=tt,G.hemisphereLights.needsUpdate=tt}function Dt(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return V},this.getRenderTarget=function(){return H},this.setRenderTargetTextures=function(G,tt,st){const at=Qt.get(G);at.__autoAllocateDepthBuffer=G.resolveDepthBuffer===!1,at.__autoAllocateDepthBuffer===!1&&(at.__useRenderToTexture=!1),Qt.get(G.texture).__webglTexture=tt,Qt.get(G.depthTexture).__webglTexture=at.__autoAllocateDepthBuffer?void 0:st,at.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(G,tt){const st=Qt.get(G);st.__webglFramebuffer=tt,st.__useDefaultFramebuffer=tt===void 0};const Gt=Z.createFramebuffer();this.setRenderTarget=function(G,tt=0,st=0){H=G,L=tt,V=st;let at=!0,gt=null,Tt=!1,Vt=!1;if(G){const ee=Qt.get(G);if(ee.__useDefaultFramebuffer!==void 0)Xt.bindFramebuffer(Z.FRAMEBUFFER,null),at=!1;else if(ee.__webglFramebuffer===void 0)J.setupRenderTarget(G);else if(ee.__hasExternalTextures)J.rebindTextures(G,Qt.get(G.texture).__webglTexture,Qt.get(G.depthTexture).__webglTexture);else if(G.depthBuffer){const ye=G.depthTexture;if(ee.__boundDepthTexture!==ye){if(ye!==null&&Qt.has(ye)&&(G.width!==ye.image.width||G.height!==ye.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");J.setupDepthRenderbuffer(G)}}const ve=G.texture;(ve.isData3DTexture||ve.isDataArrayTexture||ve.isCompressedArrayTexture)&&(Vt=!0);const pe=Qt.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(Array.isArray(pe[tt])?gt=pe[tt][st]:gt=pe[tt],Tt=!0):G.samples>0&&J.useMultisampledRTT(G)===!1?gt=Qt.get(G).__webglMultisampledFramebuffer:Array.isArray(pe)?gt=pe[st]:gt=pe,Y.copy(G.viewport),ht.copy(G.scissor),et=G.scissorTest}else Y.copy(lt).multiplyScalar($).floor(),ht.copy(xt).multiplyScalar($).floor(),et=bt;if(st!==0&&(gt=Gt),Xt.bindFramebuffer(Z.FRAMEBUFFER,gt)&&at&&Xt.drawBuffers(G,gt),Xt.viewport(Y),Xt.scissor(ht),Xt.setScissorTest(et),Tt){const ee=Qt.get(G.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+tt,ee.__webglTexture,st)}else if(Vt){const ee=Qt.get(G.texture),ve=tt;Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,ee.__webglTexture,st,ve)}else if(G!==null&&st!==0){const ee=Qt.get(G.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,ee.__webglTexture,st)}N=-1},this.readRenderTargetPixels=function(G,tt,st,at,gt,Tt,Vt){if(!(G&&G.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let jt=Qt.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&Vt!==void 0&&(jt=jt[Vt]),jt){Xt.bindFramebuffer(Z.FRAMEBUFFER,jt);try{const ee=G.texture,ve=ee.format,pe=ee.type;if(!Kt.textureFormatReadable(ve)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Kt.textureTypeReadable(pe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}tt>=0&&tt<=G.width-at&&st>=0&&st<=G.height-gt&&Z.readPixels(tt,st,at,gt,Ft.convert(ve),Ft.convert(pe),Tt)}finally{const ee=H!==null?Qt.get(H).__webglFramebuffer:null;Xt.bindFramebuffer(Z.FRAMEBUFFER,ee)}}},this.readRenderTargetPixelsAsync=async function(G,tt,st,at,gt,Tt,Vt){if(!(G&&G.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let jt=Qt.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&Vt!==void 0&&(jt=jt[Vt]),jt)if(tt>=0&&tt<=G.width-at&&st>=0&&st<=G.height-gt){Xt.bindFramebuffer(Z.FRAMEBUFFER,jt);const ee=G.texture,ve=ee.format,pe=ee.type;if(!Kt.textureFormatReadable(ve))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Kt.textureTypeReadable(pe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const ye=Z.createBuffer();Z.bindBuffer(Z.PIXEL_PACK_BUFFER,ye),Z.bufferData(Z.PIXEL_PACK_BUFFER,Tt.byteLength,Z.STREAM_READ),Z.readPixels(tt,st,at,gt,Ft.convert(ve),Ft.convert(pe),0);const ke=H!==null?Qt.get(H).__webglFramebuffer:null;Xt.bindFramebuffer(Z.FRAMEBUFFER,ke);const Le=Z.fenceSync(Z.SYNC_GPU_COMMANDS_COMPLETE,0);return Z.flush(),await j4(Z,Le,4),Z.bindBuffer(Z.PIXEL_PACK_BUFFER,ye),Z.getBufferSubData(Z.PIXEL_PACK_BUFFER,0,Tt),Z.deleteBuffer(ye),Z.deleteSync(Le),Tt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(G,tt=null,st=0){const at=Math.pow(2,-st),gt=Math.floor(G.image.width*at),Tt=Math.floor(G.image.height*at),Vt=tt!==null?tt.x:0,jt=tt!==null?tt.y:0;J.setTexture2D(G,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,st,0,0,Vt,jt,gt,Tt),Xt.unbindTexture()};const oe=Z.createFramebuffer(),ne=Z.createFramebuffer();this.copyTextureToTexture=function(G,tt,st=null,at=null,gt=0,Tt=null){Tt===null&&(gt!==0?(By("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Tt=gt,gt=0):Tt=0);let Vt,jt,ee,ve,pe,ye,ke,Le,Tn;const De=G.isCompressedTexture?G.mipmaps[Tt]:G.image;if(st!==null)Vt=st.max.x-st.min.x,jt=st.max.y-st.min.y,ee=st.isBox3?st.max.z-st.min.z:1,ve=st.min.x,pe=st.min.y,ye=st.isBox3?st.min.z:0;else{const wn=Math.pow(2,-gt);Vt=Math.floor(De.width*wn),jt=Math.floor(De.height*wn),G.isDataArrayTexture?ee=De.depth:G.isData3DTexture?ee=Math.floor(De.depth*wn):ee=1,ve=0,pe=0,ye=0}at!==null?(ke=at.x,Le=at.y,Tn=at.z):(ke=0,Le=0,Tn=0);const ze=Ft.convert(tt.format),Ue=Ft.convert(tt.type);let Yn;tt.isData3DTexture?(J.setTexture3D(tt,0),Yn=Z.TEXTURE_3D):tt.isDataArrayTexture||tt.isCompressedArrayTexture?(J.setTexture2DArray(tt,0),Yn=Z.TEXTURE_2D_ARRAY):(J.setTexture2D(tt,0),Yn=Z.TEXTURE_2D),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,tt.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,tt.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,tt.unpackAlignment);const $e=Z.getParameter(Z.UNPACK_ROW_LENGTH),an=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),Zn=Z.getParameter(Z.UNPACK_SKIP_PIXELS),je=Z.getParameter(Z.UNPACK_SKIP_ROWS),vn=Z.getParameter(Z.UNPACK_SKIP_IMAGES);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,De.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,De.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,ve),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,pe),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,ye);const pn=G.isDataArrayTexture||G.isData3DTexture,ui=tt.isDataArrayTexture||tt.isData3DTexture;if(G.isDepthTexture){const wn=Qt.get(G),Qn=Qt.get(tt),Ji=Qt.get(wn.__renderTarget),Cs=Qt.get(Qn.__renderTarget);Xt.bindFramebuffer(Z.READ_FRAMEBUFFER,Ji.__webglFramebuffer),Xt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,Cs.__webglFramebuffer);for(let fr=0;fr<ee;fr++)pn&&(Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Qt.get(G).__webglTexture,gt,ye+fr),Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Qt.get(tt).__webglTexture,Tt,Tn+fr)),Z.blitFramebuffer(ve,pe,Vt,jt,ke,Le,Vt,jt,Z.DEPTH_BUFFER_BIT,Z.NEAREST);Xt.bindFramebuffer(Z.READ_FRAMEBUFFER,null),Xt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else if(gt!==0||G.isRenderTargetTexture||Qt.has(G)){const wn=Qt.get(G),Qn=Qt.get(tt);Xt.bindFramebuffer(Z.READ_FRAMEBUFFER,oe),Xt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,ne);for(let Ji=0;Ji<ee;Ji++)pn?Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,wn.__webglTexture,gt,ye+Ji):Z.framebufferTexture2D(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,wn.__webglTexture,gt),ui?Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Qn.__webglTexture,Tt,Tn+Ji):Z.framebufferTexture2D(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,Qn.__webglTexture,Tt),gt!==0?Z.blitFramebuffer(ve,pe,Vt,jt,ke,Le,Vt,jt,Z.COLOR_BUFFER_BIT,Z.NEAREST):ui?Z.copyTexSubImage3D(Yn,Tt,ke,Le,Tn+Ji,ve,pe,Vt,jt):Z.copyTexSubImage2D(Yn,Tt,ke,Le,ve,pe,Vt,jt);Xt.bindFramebuffer(Z.READ_FRAMEBUFFER,null),Xt.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else ui?G.isDataTexture||G.isData3DTexture?Z.texSubImage3D(Yn,Tt,ke,Le,Tn,Vt,jt,ee,ze,Ue,De.data):tt.isCompressedArrayTexture?Z.compressedTexSubImage3D(Yn,Tt,ke,Le,Tn,Vt,jt,ee,ze,De.data):Z.texSubImage3D(Yn,Tt,ke,Le,Tn,Vt,jt,ee,ze,Ue,De):G.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,Tt,ke,Le,Vt,jt,ze,Ue,De.data):G.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,Tt,ke,Le,De.width,De.height,ze,De.data):Z.texSubImage2D(Z.TEXTURE_2D,Tt,ke,Le,Vt,jt,ze,Ue,De);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,$e),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,an),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Zn),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,je),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,vn),Tt===0&&tt.generateMipmaps&&Z.generateMipmap(Yn),Xt.unbindTexture()},this.copyTextureToTexture3D=function(G,tt,st=null,at=null,gt=0){return By('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(G,tt,st,at,gt)},this.initRenderTarget=function(G){Qt.get(G).__webglFramebuffer===void 0&&J.setupRenderTarget(G)},this.initTexture=function(G){G.isCubeTexture?J.setTextureCube(G,0):G.isData3DTexture?J.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?J.setTexture2DArray(G,0):J.setTexture2D(G,0),Xt.unbindTexture()},this.resetState=function(){L=0,V=0,H=null,Xt.reset(),re.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ir}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=Nn._getDrawingBufferColorSpace(t),e.unpackColorSpace=Nn._getUnpackColorSpace()}}const e8=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:sM,AddEquation:ru,AddOperation:Dw,AdditiveAnimationBlendMode:uM,AdditiveBlending:$1,AgXToneMapping:Iw,AlphaFormat:rM,AlwaysCompare:Qw,AlwaysDepth:jy,AlwaysStencilFunc:sS,AmbientLight:HB,AnimationAction:KB,AnimationClip:$d,AnimationLoader:_F,AnimationMixer:XF,AnimationObjectGroup:VF,AnimationUtils:mF,ArcCurve:dB,ArrayCamera:YB,ArrowHelper:hH,AttachedBindMode:nS,Audio:qB,AudioAnalyser:UF,AudioContext:HM,AudioListener:wF,AudioLoader:TF,AxesHelper:dH,BackSide:Ta,BasicDepthPacking:kw,BasicShadowMap:fw,BatchedMesh:uB,Bone:Z_,BooleanKeyframeTrack:sh,Box2:QF,Box3:Hs,Box3Helper:uH,BoxGeometry:ih,BoxHelper:cH,BufferAttribute:zn,BufferGeometry:hn,BufferGeometryLoader:XB,ByteType:H_,Cache:$l,Camera:W_,CameraHelper:lH,CanvasTexture:PP,CapsuleGeometry:nx,CatmullRomCurve3:pB,CineonToneMapping:Ow,CircleGeometry:ix,ClampToEdgeWrapping:Wi,Clock:zM,Color:xe,ColorKeyframeTrack:UM,ColorManagement:Nn,CompressedArrayTexture:LP,CompressedCubeTexture:IP,CompressedTexture:tx,CompressedTextureLoader:xF,ConeGeometry:Vg,ConstantAlphaFactor:Rw,ConstantColorFactor:Tw,Controls:mH,CubeCamera:rB,CubeReflectionMapping:pl,CubeRefractionMapping:pu,CubeTexture:Pg,CubeTextureLoader:PB,CubeUVReflectionMapping:ap,CubicBezierCurve:MM,CubicBezierCurve3:mB,CubicInterpolant:NB,CullFaceBack:Q1,CullFaceFront:uw,CullFaceFrontBack:KI,CullFaceNone:cw,Curve:bo,CurvePath:vB,CustomBlending:hw,CustomToneMapping:Lw,CylinderGeometry:Gg,Cylindrical:ZF,Data3DTexture:q_,DataArrayTexture:Ig,DataTexture:Ao,DataTextureLoader:NM,DataUtils:zf,DecrementStencilOp:a4,DecrementWrapStencilOp:o4,DefaultLoadingManager:IB,DepthArrayTexture:FP,DepthFormat:jd,DepthStencilFormat:Yd,DepthTexture:ex,DetachedBindMode:Fw,DirectionalLight:FM,DirectionalLightHelper:oH,DiscreteInterpolant:OB,DodecahedronGeometry:sx,DoubleSide:ka,DstAlphaFactor:Aw,DstColorFactor:Mw,DynamicCopyUsage:S4,DynamicDrawUsage:g4,DynamicReadUsage:_4,EdgesGeometry:hB,EllipseCurve:ax,EqualCompare:Ww,EqualDepth:qy,EqualStencilFunc:f4,EquirectangularReflectionMapping:Gd,EquirectangularRefractionMapping:pg,Euler:ur,EventDispatcher:vl,ExtrudeGeometry:rx,FileLoader:zs,Float16BufferAttribute:pP,Float32BufferAttribute:Oe,FloatType:Li,Fog:J_,FogExp2:K_,FramebufferTexture:OP,FrontSide:dl,Frustum:rp,FrustumArray:Q_,GLBufferAttribute:JF,GLSL1:b4,GLSL3:aS,GreaterCompare:Kw,GreaterDepth:Ky,GreaterEqualCompare:Zw,GreaterEqualDepth:Wy,GreaterEqualStencilFunc:m4,GreaterStencilFunc:d4,GridHelper:aH,Group:Ql,HalfFloatType:Ms,HemisphereLight:FB,HemisphereLightHelper:sH,IcosahedronGeometry:kg,ImageBitmapLoader:jB,ImageLoader:Mg,ImageUtils:nB,IncrementStencilOp:s4,IncrementWrapStencilOp:r4,InstancedBufferAttribute:Jf,InstancedBufferGeometry:kB,InstancedInterleavedBuffer:KF,InstancedMesh:_M,Int16BufferAttribute:hP,Int32BufferAttribute:dP,Int8BufferAttribute:cP,IntType:Ng,InterleavedBuffer:Hg,InterleavedBufferAttribute:gu,Interpolant:op,InterpolateDiscrete:qd,InterpolateLinear:Wd,InterpolateSmooth:wy,InterpolationSamplingMode:C4,InterpolationSamplingType:T4,InvertStencilOp:l4,KeepStencilOp:Uf,KeyframeTrack:Gr,LOD:cB,LatheGeometry:ox,Layers:Jd,LessCompare:qw,LessDepth:Yy,LessEqualCompare:hM,LessEqualDepth:Kf,LessEqualStencilFunc:h4,LessStencilFunc:u4,Light:Au,LightProbe:VB,Line:sc,Line3:$F,LineBasicMaterial:sa,LineCurve:bM,LineCurve3:gB,LineDashedMaterial:BB,LineLoop:xM,LineSegments:Mo,LinearFilter:Wn,LinearInterpolant:DM,LinearMipMapLinearFilter:iS,LinearMipMapNearestFilter:QI,LinearMipmapLinearFilter:Lr,LinearMipmapNearestFilter:Ld,LinearSRGBColorSpace:So,LinearToneMapping:Uw,LinearTransfer:gg,Loader:Gs,LoaderUtils:uu,LoadingManager:px,LoopOnce:Hw,LoopPingPong:Gw,LoopRepeat:zw,MOUSE:Bf,Material:hs,MaterialLoader:mx,MathUtils:$w,Matrix2:jM,Matrix3:gn,Matrix4:We,MaxEquation:gw,Mesh:Ei,MeshBasicMaterial:Ya,MeshDepthMaterial:RM,MeshDistanceMaterial:wM,MeshLambertMaterial:RB,MeshMatcapMaterial:wB,MeshNormalMaterial:CB,MeshPhongMaterial:EB,MeshPhysicalMaterial:zr,MeshStandardMaterial:Yg,MeshToonMaterial:TB,MinEquation:mw,MirroredRepeatWrapping:Vd,MixOperation:Bw,MultiplyBlending:eS,MultiplyOperation:Ug,NearestFilter:bs,NearestMipMapLinearFilter:ZI,NearestMipMapNearestFilter:JI,NearestMipmapLinearFilter:Pf,NearestMipmapNearestFilter:F_,NeutralToneMapping:Pw,NeverCompare:Yw,NeverDepth:Xy,NeverStencilFunc:c4,NoBlending:fl,NoColorSpace:Jl,NoToneMapping:hl,NormalAnimationBlendMode:j_,NormalBlending:Yf,NotEqualCompare:Jw,NotEqualDepth:Jy,NotEqualStencilFunc:p4,NumberKeyframeTrack:Qf,Object3D:On,ObjectLoader:bF,ObjectSpaceNormalMap:jw,OctahedronGeometry:Xg,OneFactor:yw,OneMinusConstantAlphaFactor:ww,OneMinusConstantColorFactor:Cw,OneMinusDstAlphaFactor:Sw,OneMinusDstColorFactor:bw,OneMinusSrcAlphaFactor:ky,OneMinusSrcColorFactor:xw,OrthographicCamera:Fr,PCFShadowMap:P_,PCFSoftShadowMap:Jm,PMREMGenerator:dS,Path:C_,PerspectiveCamera:bi,Plane:Kl,PlaneGeometry:xu,PlaneHelper:fH,PointLight:PM,PointLightHelper:nH,Points:AM,PointsMaterial:$_,PolarGridHelper:rH,PolyhedronGeometry:_u,PositionalAudio:DF,PropertyBinding:Fn,PropertyMixer:WB,QuadraticBezierCurve:EM,QuadraticBezierCurve3:TM,Quaternion:Es,QuaternionKeyframeTrack:$f,QuaternionLinearInterpolant:LB,RED_GREEN_RGTC2_Format:A_,RED_RGTC1_Format:cM,REVISION:Dg,RGBADepthPacking:Xw,RGBAFormat:Ki,RGBAIntegerFormat:X_,RGBA_ASTC_10x10_Format:m_,RGBA_ASTC_10x5_Format:h_,RGBA_ASTC_10x6_Format:d_,RGBA_ASTC_10x8_Format:p_,RGBA_ASTC_12x10_Format:g_,RGBA_ASTC_12x12_Format:v_,RGBA_ASTC_4x4_Format:s_,RGBA_ASTC_5x4_Format:a_,RGBA_ASTC_5x5_Format:r_,RGBA_ASTC_6x5_Format:o_,RGBA_ASTC_6x6_Format:l_,RGBA_ASTC_8x5_Format:c_,RGBA_ASTC_8x6_Format:u_,RGBA_ASTC_8x8_Format:f_,RGBA_BPTC_Format:eg,RGBA_ETC2_EAC_Format:i_,RGBA_PVRTC_2BPPV1_Format:t_,RGBA_PVRTC_4BPPV1_Format:$y,RGBA_S3TC_DXT1_Format:Qm,RGBA_S3TC_DXT3_Format:$m,RGBA_S3TC_DXT5_Format:tg,RGBDepthPacking:t4,RGBFormat:oM,RGBIntegerFormat:$I,RGB_BPTC_SIGNED_Format:y_,RGB_BPTC_UNSIGNED_Format:__,RGB_ETC1_Format:e_,RGB_ETC2_Format:n_,RGB_PVRTC_2BPPV1_Format:Qy,RGB_PVRTC_4BPPV1_Format:Zy,RGB_S3TC_DXT1_Format:Zm,RGDepthPacking:e4,RGFormat:lM,RGIntegerFormat:k_,RawShaderMaterial:bB,Ray:nh,Raycaster:XM,RectAreaLight:zB,RedFormat:Og,RedIntegerFormat:Lg,ReinhardToneMapping:Nw,RenderTarget:Y_,RenderTarget3D:jF,RenderTargetArray:YF,RepeatWrapping:mu,ReplaceStencilOp:i4,ReverseSubtractEquation:pw,RingGeometry:lx,SIGNED_RED_GREEN_RGTC2_Format:S_,SIGNED_RED_RGTC1_Format:x_,SRGBColorSpace:Fs,SRGBTransfer:ii,Scene:Fg,ShaderChunk:An,ShaderLib:_o,ShaderMaterial:qa,ShadowMaterial:MB,Shape:Wf,ShapeGeometry:cx,ShapePath:pH,ShapeUtils:xo,ShortType:z_,Skeleton:zg,SkeletonHelper:eH,SkinnedMesh:yM,Source:ou,Sphere:Ts,SphereGeometry:jg,Spherical:fS,SphericalHarmonics3:GB,SplineCurve:CM,SpotLight:IM,SpotLightHelper:tH,Sprite:lB,SpriteMaterial:vM,SrcAlphaFactor:Vy,SrcAlphaSaturateFactor:Ew,SrcColorFactor:_w,StaticCopyUsage:A4,StaticDrawUsage:vg,StaticReadUsage:y4,StereoCamera:CF,StreamCopyUsage:M4,StreamDrawUsage:v4,StreamReadUsage:x4,StringKeyframeTrack:ah,SubtractEquation:dw,SubtractiveBlending:tS,TOUCH:Df,TangentSpaceNormalMap:yu,TetrahedronGeometry:ux,Texture:Jn,TextureLoader:OM,TextureUtils:xH,TimestampQuery:E4,TorusGeometry:fx,TorusKnotGeometry:hx,Triangle:Xa,TriangleFanDrawMode:M_,TriangleStripDrawMode:fM,TrianglesDrawMode:Vw,TubeGeometry:dx,UVMapping:du,Uint16BufferAttribute:pM,Uint32BufferAttribute:mM,Uint8BufferAttribute:uP,Uint8ClampedBufferAttribute:fP,Uniform:kM,UniformsGroup:WF,UniformsLib:Ee,UniformsUtils:aB,UnsignedByteType:Ca,UnsignedInt248Type:Xd,UnsignedInt5999Type:aM,UnsignedIntType:ml,UnsignedShort4444Type:G_,UnsignedShort5551Type:V_,UnsignedShortType:kd,VSMShadowMap:yo,Vector2:Wt,Vector3:Q,Vector4:Hn,VectorKeyframeTrack:th,VideoFrameTexture:NP,VideoTexture:fB,WebGL3DRenderTarget:Q4,WebGLArrayRenderTarget:Z4,WebGLCoordinateSystem:Ir,WebGLCubeRenderTarget:gM,WebGLRenderTarget:Hr,WebGLRenderer:qM,WebGLUtils:n3,WebGPUCoordinateSystem:yg,WebXRController:Dy,WireframeGeometry:SB,WrapAroundEnding:mg,ZeroCurvatureEnding:Ff,ZeroFactor:vw,ZeroSlopeEnding:Hf,ZeroStencilOp:n4,createCanvasElement:eB},Symbol.toStringTag,{value:"Module"}));var r1={exports:{}},ql={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KC;function n8(){return KC||(KC=1,ql.ConcurrentRoot=1,ql.ContinuousEventPriority=8,ql.DefaultEventPriority=32,ql.DiscreteEventPriority=2,ql.IdleEventPriority=268435456,ql.LegacyRoot=0,ql.NoEventPriority=0),ql}var JC;function i8(){return JC||(JC=1,r1.exports=n8()),r1.exports}var Ny=i8(),o1={exports:{}},l1={},c1={exports:{}},u1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZC;function s8(){if(ZC)return u1;ZC=1;var i=ep();function t(v,_){return v===_&&(v!==0||1/v===1/_)||v!==v&&_!==_}var e=typeof Object.is=="function"?Object.is:t,n=i.useState,s=i.useEffect,r=i.useLayoutEffect,l=i.useDebugValue;function u(v,_){var x=_(),b=n({inst:{value:x,getSnapshot:_}}),R=b[0].inst,E=b[1];return r(function(){R.value=x,R.getSnapshot=_,d(R)&&E({inst:R})},[v,x,_]),s(function(){return d(R)&&E({inst:R}),v(function(){d(R)&&E({inst:R})})},[v]),l(x),x}function d(v){var _=v.getSnapshot;v=v.value;try{var x=_();return!e(v,x)}catch{return!0}}function p(v,_){return _()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return u1.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:g,u1}var QC;function a8(){return QC||(QC=1,c1.exports=s8()),c1.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C;function r8(){if($C)return l1;$C=1;var i=ep(),t=a8();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,s=t.useSyncExternalStore,r=i.useRef,l=i.useEffect,u=i.useMemo,d=i.useDebugValue;return l1.useSyncExternalStoreWithSelector=function(p,g,v,_,x){var b=r(null);if(b.current===null){var R={hasValue:!1,value:null};b.current=R}else R=b.current;b=u(function(){function M(L){if(!w){if(w=!0,B=L,L=_(L),x!==void 0&&R.hasValue){var V=R.value;if(x(V,L))return D=V}return D=L}if(V=D,n(B,L))return V;var H=_(L);return x!==void 0&&x(V,H)?(B=L,V):(B=L,D=H)}var w=!1,B,D,I=v===void 0?null:v;return[function(){return M(g())},I===null?void 0:function(){return M(I())}]},[g,v,_,x]);var E=s(p,b[0],b[1]);return l(function(){R.hasValue=!0,R.value=E},[E]),d(E),E},l1}var t2;function o8(){return t2||(t2=1,o1.exports=r8()),o1.exports}var l8=o8();const c8=ES(l8),e2=i=>{let t;const e=new Set,n=(p,g)=>{const v=typeof p=="function"?p(t):p;if(!Object.is(v,t)){const _=t;t=g??(typeof v!="object"||v===null)?v:Object.assign({},t,v),e.forEach(x=>x(t,_))}},s=()=>t,u={setState:n,getState:s,getInitialState:()=>d,subscribe:p=>(e.add(p),()=>e.delete(p))},d=t=i(n,s,u);return u},u8=i=>i?e2(i):e2,{useSyncExternalStoreWithSelector:f8}=c8,h8=i=>i;function d8(i,t=h8,e){const n=f8(i.subscribe,i.getState,i.getInitialState,t,e);return cu.useDebugValue(n),n}const n2=(i,t)=>{const e=u8(i),n=(s,r=t)=>d8(e,s,r);return Object.assign(n,e),n},i3=(i,t)=>i?n2(i,t):n2;var f1={exports:{}},h1={exports:{}},d1={exports:{}},p1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i2;function p8(){return i2||(i2=1,function(i){function t(F,K){var $=F.length;F.push(K);t:for(;0<$;){var yt=$-1>>>1,X=F[yt];if(0<s(X,K))F[yt]=K,F[$]=X,$=yt;else break t}}function e(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var K=F[0],$=F.pop();if($!==K){F[0]=$;t:for(var yt=0,X=F.length,lt=X>>>1;yt<lt;){var xt=2*(yt+1)-1,bt=F[xt],ot=xt+1,Ot=F[ot];if(0>s(bt,$))ot<X&&0>s(Ot,bt)?(F[yt]=Ot,F[ot]=$,yt=ot):(F[yt]=bt,F[xt]=$,yt=xt);else if(ot<X&&0>s(Ot,$))F[yt]=Ot,F[ot]=$,yt=ot;else break t}}return K}function s(F,K){var $=F.sortIndex-K.sortIndex;return $!==0?$:F.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var l=Date,u=l.now();i.unstable_now=function(){return l.now()-u}}var d=[],p=[],g=1,v=null,_=3,x=!1,b=!1,R=!1,E=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function B(F){for(var K=e(p);K!==null;){if(K.callback===null)n(p);else if(K.startTime<=F)n(p),K.sortIndex=K.expirationTime,t(d,K);else break;K=e(p)}}function D(F){if(R=!1,B(F),!b)if(e(d)!==null)b=!0,dt();else{var K=e(p);K!==null&&mt(D,K.startTime-F)}}var I=!1,L=-1,V=5,H=-1;function N(){return!(i.unstable_now()-H<V)}function O(){if(I){var F=i.unstable_now();H=F;var K=!0;try{t:{b=!1,R&&(R=!1,M(L),L=-1),x=!0;var $=_;try{e:{for(B(F),v=e(d);v!==null&&!(v.expirationTime>F&&N());){var yt=v.callback;if(typeof yt=="function"){v.callback=null,_=v.priorityLevel;var X=yt(v.expirationTime<=F);if(F=i.unstable_now(),typeof X=="function"){v.callback=X,B(F),K=!0;break e}v===e(d)&&n(d),B(F)}else n(d);v=e(d)}if(v!==null)K=!0;else{var lt=e(p);lt!==null&&mt(D,lt.startTime-F),K=!1}}break t}finally{v=null,_=$,x=!1}K=void 0}}finally{K?Y():I=!1}}}var Y;if(typeof w=="function")Y=function(){w(O)};else if(typeof MessageChannel<"u"){var ht=new MessageChannel,et=ht.port2;ht.port1.onmessage=O,Y=function(){et.postMessage(null)}}else Y=function(){E(O,0)};function dt(){I||(I=!0,Y())}function mt(F,K){L=E(function(){F(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(F){F.callback=null},i.unstable_continueExecution=function(){b||x||(b=!0,dt())},i.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<F?Math.floor(1e3/F):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return e(d)},i.unstable_next=function(F){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var $=_;_=K;try{return F()}finally{_=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(F,K){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var $=_;_=F;try{return K()}finally{_=$}},i.unstable_scheduleCallback=function(F,K,$){var yt=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?yt+$:yt):$=yt,F){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=$+X,F={id:g++,callback:K,priorityLevel:F,startTime:$,expirationTime:X,sortIndex:-1},$>yt?(F.sortIndex=$,t(p,F),e(d)===null&&F===e(p)&&(R?(M(L),L=-1):R=!0,mt(D,$-yt))):(F.sortIndex=X,t(d,F),b||x||(b=!0,dt())),F},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(F){var K=_;return function(){var $=_;_=K;try{return F.apply(this,arguments)}finally{_=$}}}}(p1)),p1}var s2;function m8(){return s2||(s2=1,d1.exports=p8()),d1.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a2;function g8(){return a2||(a2=1,function(i){i.exports=function(t){function e(c,f,y,S){return new Fp(c,f,y,S)}function n(){}function s(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(c){return c===null||typeof c!="object"?null:(c=to&&c[to]||c["@@iterator"],typeof c=="function"?c:null)}function l(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===Vp?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case zo:return"Fragment";case Da:return"Portal";case wh:return"Profiler";case Ku:return"StrictMode";case Bh:return"Suspense";case bc:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case Za:return(c.displayName||"Context")+".Provider";case zp:return(c._context.displayName||"Context")+".Consumer";case Zu:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Dh:return f=c.displayName||null,f!==null?f:l(c.type)||"Memo";case Ua:f=c._payload,c=c._init;try{return l(c(f))}catch{}}return null}function u(c){if(gr===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);gr=f&&f[1]||"",eo=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gr+c+eo}function d(c,f){if(!c||Sl)return"";Sl=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(f){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(ln){var Ce=ln}Reflect.construct(c,[],be)}else{try{be.call()}catch(ln){Ce=ln}c.call(be.prototype)}}else{try{throw Error()}catch(ln){Ce=ln}(be=c())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(ln){if(ln&&Ce&&typeof ln.stack=="string")return[ln.stack,Ce.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=S.DetermineComponentFrameRoot(),q=U[0],rt=U[1];if(q&&rt){var St=q.split(`
`),Yt=rt.split(`
`);for(C=S=0;S<St.length&&!St[S].includes("DetermineComponentFrameRoot");)S++;for(;C<Yt.length&&!Yt[C].includes("DetermineComponentFrameRoot");)C++;if(S===St.length||C===Yt.length)for(S=St.length-1,C=Yt.length-1;1<=S&&0<=C&&St[S]!==Yt[C];)C--;for(;1<=S&&0<=C;S--,C--)if(St[S]!==Yt[C]){if(S!==1||C!==1)do if(S--,C--,0>C||St[S]!==Yt[C]){var he=`
`+St[S].replace(" at new "," at ");return c.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",c.displayName)),he}while(1<=S&&0<=C);break}}}finally{Sl=!1,Error.prepareStackTrace=y}return(y=c?c.displayName||c.name:"")?u(y):""}function p(c){switch(c.tag){case 26:case 27:case 5:return u(c.type);case 16:return u("Lazy");case 13:return u("Suspense");case 19:return u("SuspenseList");case 0:case 15:return c=d(c.type,!1),c;case 11:return c=d(c.type.render,!1),c;case 1:return c=d(c.type,!0),c;default:return""}}function g(c){try{var f="";do f+=p(c),c=c.return;while(c);return f}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function v(c){var f=c,y=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(y=f.return),c=f.return;while(c)}return f.tag===3?y:null}function _(c){if(v(c)!==c)throw Error(s(188))}function x(c){var f=c.alternate;if(!f){if(f=v(c),f===null)throw Error(s(188));return f!==c?null:c}for(var y=c,S=f;;){var C=y.return;if(C===null)break;var U=C.alternate;if(U===null){if(S=C.return,S!==null){y=S;continue}break}if(C.child===U.child){for(U=C.child;U;){if(U===y)return _(C),c;if(U===S)return _(C),f;U=U.sibling}throw Error(s(188))}if(y.return!==S.return)y=C,S=U;else{for(var q=!1,rt=C.child;rt;){if(rt===y){q=!0,y=C,S=U;break}if(rt===S){q=!0,S=C,y=U;break}rt=rt.sibling}if(!q){for(rt=U.child;rt;){if(rt===y){q=!0,y=U,S=C;break}if(rt===S){q=!0,S=U,y=C;break}rt=rt.sibling}if(!q)throw Error(s(189))}}if(y.alternate!==S)throw Error(s(190))}if(y.tag!==3)throw Error(s(188));return y.stateNode.current===y?c:f}function b(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=b(c),f!==null)return f;c=c.sibling}return null}function R(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(c.tag!==4&&(f=R(c),f!==null))return f;c=c.sibling}return null}function E(c){return{current:c}}function M(c){0>ao||(c.current=Bi[ao],Bi[ao]=null,ao--)}function w(c,f){ao++,Bi[ao]=c.current,c.current=f}function B(c){return c>>>=0,c===0?32:31-(ev(c)/nv|0)|0}function D(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function I(c,f){var y=c.pendingLanes;if(y===0)return 0;var S=0,C=c.suspendedLanes,U=c.pingedLanes,q=c.warmLanes;c=c.finishedLanes!==0;var rt=y&134217727;return rt!==0?(y=rt&~C,y!==0?S=D(y):(U&=rt,U!==0?S=D(U):c||(q=rt&~q,q!==0&&(S=D(q))))):(rt=y&~C,rt!==0?S=D(rt):U!==0?S=D(U):c||(q=y&~q,q!==0&&(S=D(q)))),S===0?0:f!==0&&f!==S&&(f&C)===0&&(C=S&-S,q=f&-f,C>=q||C===32&&(q&4194176)!==0)?f:S}function L(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function V(c,f){switch(c){case 1:case 2:case 4:case 8:return f+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H(){var c=yr;return yr<<=1,(yr&4194176)===0&&(yr=128),c}function N(){var c=El;return El<<=1,(El&62914560)===0&&(El=4194304),c}function O(c){for(var f=[],y=0;31>y;y++)f.push(c);return f}function Y(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function ht(c,f,y,S,C,U){var q=c.pendingLanes;c.pendingLanes=y,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=y,c.entangledLanes&=y,c.errorRecoveryDisabledLanes&=y,c.shellSuspendCounter=0;var rt=c.entanglements,St=c.expirationTimes,Yt=c.hiddenUpdates;for(y=q&~y;0<y;){var he=31-Ns(y),be=1<<he;rt[he]=0,St[he]=-1;var Ce=Yt[he];if(Ce!==null)for(Yt[he]=null,he=0;he<Ce.length;he++){var ln=Ce[he];ln!==null&&(ln.lane&=-536870913)}y&=~be}S!==0&&et(c,S,0),U!==0&&C===0&&c.tag!==0&&(c.suspendedLanes|=U&~(q&~f))}function et(c,f,y){c.pendingLanes|=f,c.suspendedLanes&=~f;var S=31-Ns(f);c.entangledLanes|=f,c.entanglements[S]=c.entanglements[S]|1073741824|y&4194218}function dt(c,f){var y=c.entangledLanes|=f;for(c=c.entanglements;y;){var S=31-Ns(y),C=1<<S;C&f|c[S]&f&&(c[S]|=f),y&=~C}}function mt(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function F(c){if(Ks&&typeof Ks.onCommitFiberRoot=="function")try{Ks.onCommitFiberRoot(Di,c,void 0,(c.current.flags&128)===128)}catch{}}function K(c){if(typeof av=="function"&&$i(c),Ks&&typeof Ks.setStrictMode=="function")try{Ks.setStrictMode(Di,c)}catch{}}function $(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}function yt(c,f){if(typeof c=="object"&&c!==null){var y=om.get(c);return y!==void 0?y:(f={value:c,source:f,stack:g(f)},om.set(c,f),f)}return{value:c,source:f,stack:g(f)}}function X(c,f){Tl[Cl++]=Nc,Tl[Cl++]=Rl,Rl=c,Nc=f}function lt(c,f,y){ca[ua++]=tr,ca[ua++]=er,ca[ua++]=qo,qo=c;var S=tr;c=er;var C=32-Ns(S)-1;S&=~(1<<C),y+=1;var U=32-Ns(f)+C;if(30<U){var q=C-C%5;U=(S&(1<<q)-1).toString(32),S>>=q,C-=q,tr=1<<32-Ns(f)+C|y<<C|S,er=U+c}else tr=1<<U|y<<C|S,er=c}function xt(c){c.return!==null&&(X(c,1),lt(c,1,0))}function bt(c){for(;c===Rl;)Rl=Tl[--Cl],Tl[Cl]=null,Nc=Tl[--Cl],Tl[Cl]=null;for(;c===qo;)qo=ca[--ua],ca[ua]=null,er=ca[--ua],ca[ua]=null,tr=ca[--ua],ca[ua]=null}function ot(c,f){w(_r,f),w(Oc,c),w(ki,null),c=x0(f),M(ki),w(ki,c)}function Ot(){M(ki),M(Oc),M(_r)}function It(c){c.memoizedState!==null&&w(wl,c);var f=ki.current,y=Rc(f,c.type);f!==y&&(w(Oc,c),w(ki,y))}function ie(c){Oc.current===c&&(M(ki),M(Oc)),wl.current===c&&(M(wl),Ds?Qa._currentValue=Vo:Qa._currentValue2=Vo)}function se(c){var f=Error(s(418,""));throw we(yt(f,c)),of}function Ie(c,f){if(!cs)throw Error(s(175));j0(c.stateNode,c.type,c.memoizedProps,f,c)||se(c)}function Ae(c){for(us=c.return;us;)switch(us.tag){case 3:case 27:ts=!0;return;case 5:case 13:ts=!1;return;default:us=us.return}}function Be(c){if(!cs||c!==us)return!1;if(!Bn)return Ae(c),Bn=!0,!1;var f=!1;if($n?c.tag!==3&&c.tag!==27&&(c.tag!==5||zh(c.type)&&!un(c.type,c.memoizedProps))&&(f=!0):c.tag!==3&&(c.tag!==5||zh(c.type)&&!un(c.type,c.memoizedProps))&&(f=!0),f&&fs&&se(c),Ae(c),c.tag===13){if(!cs)throw Error(s(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));fs=q0(c)}else fs=us?im(c.stateNode):null;return!0}function Ve(){cs&&(fs=us=null,Bn=!1)}function we(c){La===null?La=[c]:La.push(c)}function Z(){for(var c=Bl,f=nr=Bl=0;f<c;){var y=Ia[f];Ia[f++]=null;var S=Ia[f];Ia[f++]=null;var C=Ia[f];Ia[f++]=null;var U=Ia[f];if(Ia[f++]=null,S!==null&&C!==null){var q=S.pending;q===null?C.next=C:(C.next=q.next,q.next=C),S.pending=C}U!==0&&Xt(y,C,U)}}function le(c,f,y,S){Ia[Bl++]=c,Ia[Bl++]=f,Ia[Bl++]=y,Ia[Bl++]=S,nr|=S,c.lanes|=S,c=c.alternate,c!==null&&(c.lanes|=S)}function te(c,f,y,S){return le(c,f,y,S),Te(c)}function Kt(c,f){return le(c,null,null,f),Te(c)}function Xt(c,f,y){c.lanes|=y;var S=c.alternate;S!==null&&(S.lanes|=y);for(var C=!1,U=c.return;U!==null;)U.childLanes|=y,S=U.alternate,S!==null&&(S.childLanes|=y),U.tag===22&&(c=U.stateNode,c===null||c._visibility&1||(C=!0)),c=U,U=U.return;C&&f!==null&&c.tag===3&&(U=c.stateNode,C=31-Ns(y),U=U.hiddenUpdates,c=U[C],c===null?U[C]=[f]:c.push(f),f.lane=y|536870912)}function Te(c){if(50<kc)throw kc=0,ed=null,Error(s(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}function Qt(c){c!==ro&&c.next===null&&(ro===null?lf=ro=c:ro=ro.next=c),ai=!0,Dl||(Dl=!0,Ht(k))}function J(c,f){if(!lm&&ai){lm=!0;do for(var y=!1,S=lf;S!==null;){if(c!==0){var C=S.pendingLanes;if(C===0)var U=0;else{var q=S.suspendedLanes,rt=S.pingedLanes;U=(1<<31-Ns(42|c)+1)-1,U&=C&~(q&~rt),U=U&201326677?U&201326677|1:U?U|2:0}U!==0&&(y=!0,Jt(S,U))}else U=bn,U=I(S,S===Xn?U:0),(U&3)===0||L(S,U)||(y=!0,Jt(S,U));S=S.next}while(y);lm=!1}}function k(){ai=Dl=!1;var c=0;Lc!==0&&(b0()&&(c=Lc),Lc=0);for(var f=Oa(),y=null,S=lf;S!==null;){var C=S.next,U=_t(S,f);U===0?(S.next=null,y===null?lf=C:y.next=C,C===null&&(ro=y)):(y=S,(c!==0||(U&3)!==0)&&(ai=!0)),S=C}J(c)}function _t(c,f){for(var y=c.suspendedLanes,S=c.pingedLanes,C=c.expirationTimes,U=c.pendingLanes&-62914561;0<U;){var q=31-Ns(U),rt=1<<q,St=C[q];St===-1?((rt&y)===0||(rt&S)!==0)&&(C[q]=V(rt,f)):St<=f&&(c.expiredLanes|=rt),U&=~rt}if(f=Xn,y=bn,y=I(c,c===f?y:0),S=c.callbackNode,y===0||c===f&&Kn===2||c.cancelPendingCommit!==null)return S!==null&&S!==null&&Xh(S),c.callbackNode=null,c.callbackPriority=0;if((y&3)===0||L(c,y)){if(f=y&-y,f===c.callbackPriority)return f;switch(S!==null&&Xh(S),mt(y)){case 2:case 8:y=sv;break;case 32:y=qh;break;case 268435456:y=Dx;break;default:y=qh}return S=zt.bind(null,c),y=rf(y,S),c.callbackPriority=f,c.callbackNode=y,f}return S!==null&&S!==null&&Xh(S),c.callbackPriority=2,c.callbackNode=null,2}function zt(c,f){var y=c.callbackNode;if(Ja()&&c.callbackNode!==y)return null;var S=bn;return S=I(c,c===Xn?S:0),S===0?null:(Lo(c,S,f),_t(c,Oa()),c.callbackNode!=null&&c.callbackNode===y?zt.bind(null,c):null)}function Jt(c,f){if(Ja())return null;Lo(c,f,!0)}function Ht(c){qp?so(function(){(Un&6)!==0?rf(Yh,c):c()}):rf(Yh,c)}function fe(){return Lc===0&&(Lc=H()),Lc}function ue(c,f){if(Ic===null){var y=Ic=[];Ul=0,fa=fe(),Nl={status:"pending",value:void 0,then:function(S){y.push(S)}}}return Ul++,f.then(Se,Se),f}function Se(){if(--Ul===0&&Ic!==null){Nl!==null&&(Nl.status="fulfilled");var c=Ic;Ic=null,fa=0,Nl=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function He(c,f){var y=[],S={status:"pending",value:null,reason:null,then:function(C){y.push(C)}};return c.then(function(){S.status="fulfilled",S.value=f;for(var C=0;C<y.length;C++)(0,y[C])(f)},function(C){for(S.status="rejected",S.reason=C,C=0;C<y.length;C++)(0,y[C])(void 0)}),S}function ae(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Me(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Re(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function _e(c,f,y){var S=c.updateQueue;if(S===null)return null;if(S=S.shared,(Un&2)!==0){var C=S.pending;return C===null?f.next=f:(f.next=C.next,C.next=f),S.pending=f,f=Te(c),Xt(c,null,y),f}return le(c,S,f,y),Te(c)}function de(c,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194176)!==0)){var S=f.lanes;S&=c.pendingLanes,y|=S,f.lanes=y,dt(c,y)}}function ft(c,f){var y=c.updateQueue,S=c.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var C=null,U=null;if(y=y.firstBaseUpdate,y!==null){do{var q={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};U===null?C=U=q:U=U.next=q,y=y.next}while(y!==null);U===null?C=U=f:U=U.next=f}else C=U=f;y={baseState:S.baseState,firstBaseUpdate:C,lastBaseUpdate:U,shared:S.shared,callbacks:S.callbacks},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=f:c.next=f,y.lastBaseUpdate=f}function Ft(){if(Ol){var c=Nl;if(c!==null)throw c}}function re(c,f,y,S){Ol=!1;var C=c.updateQueue;oo=!1;var U=C.firstBaseUpdate,q=C.lastBaseUpdate,rt=C.shared.pending;if(rt!==null){C.shared.pending=null;var St=rt,Yt=St.next;St.next=null,q===null?U=Yt:q.next=Yt,q=St;var he=c.alternate;he!==null&&(he=he.updateQueue,rt=he.lastBaseUpdate,rt!==q&&(rt===null?he.firstBaseUpdate=Yt:rt.next=Yt,he.lastBaseUpdate=St))}if(U!==null){var be=C.baseState;q=0,he=Yt=St=null,rt=U;do{var Ce=rt.lane&-536870913,ln=Ce!==rt.lane;if(ln?(bn&Ce)===Ce:(S&Ce)===Ce){Ce!==0&&Ce===fa&&(Ol=!0),he!==null&&(he=he.next={lane:0,tag:rt.tag,payload:rt.payload,callback:null,next:null});t:{var _a=c,nl=rt;Ce=f;var il=y;switch(nl.tag){case 1:if(_a=nl.payload,typeof _a=="function"){be=_a.call(il,be,Ce);break t}be=_a;break t;case 3:_a.flags=_a.flags&-65537|128;case 0:if(_a=nl.payload,Ce=typeof _a=="function"?_a.call(il,be,Ce):_a,Ce==null)break t;be=Rh({},be,Ce);break t;case 2:oo=!0}}Ce=rt.callback,Ce!==null&&(c.flags|=64,ln&&(c.flags|=8192),ln=C.callbacks,ln===null?C.callbacks=[Ce]:ln.push(Ce))}else ln={lane:Ce,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null},he===null?(Yt=he=ln,St=be):he=he.next=ln,q|=Ce;if(rt=rt.next,rt===null){if(rt=C.shared.pending,rt===null)break;ln=rt,rt=ln.next,ln.next=null,C.lastBaseUpdate=ln,C.shared.pending=null}}while(!0);he===null&&(St=be),C.baseState=St,C.firstBaseUpdate=Yt,C.lastBaseUpdate=he,U===null&&(C.shared.lanes=0),va|=q,c.lanes=q,c.memoizedState=be}}function ct(c,f){if(typeof c!="function")throw Error(s(191,c));c.call(f)}function Et(c,f){var y=c.callbacks;if(y!==null)for(c.callbacks=null,c=0;c<y.length;c++)ct(y[c],f)}function Nt(c,f){if(Js(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var y=Object.keys(c),S=Object.keys(f);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var C=y[S];if(!xr.call(f,C)||!Js(c[C],f[C]))return!1}return!0}function kt(c){return c=c.status,c==="fulfilled"||c==="rejected"}function ge(){}function me(c,f,y){switch(y=c[y],y===void 0?c.push(f):y!==f&&(f.then(ge,ge),f=y),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,c===Pc?Error(s(483)):c;default:if(typeof f.status=="string")f.then(ge,ge);else{if(c=Xn,c!==null&&100<c.shellSuspendCounter)throw Error(s(482));c=f,c.status="pending",c.then(function(S){if(f.status==="pending"){var C=f;C.status="fulfilled",C.value=S}},function(S){if(f.status==="pending"){var C=f;C.status="rejected",C.reason=S}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,c===Pc?Error(s(483)):c}throw Wo=f,Pc}}function Pe(){if(Wo===null)throw Error(s(459));var c=Wo;return Wo=null,c}function dn(c){var f=Jo;return Jo+=1,Ko===null&&(Ko=[]),me(Ko,c,f)}function Ln(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function rn(c,f){throw f.$$typeof===bx?Error(s(525)):(c=Object.prototype.toString.call(f),Error(s(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function vi(c){var f=c._init;return f(c._payload)}function si(c){function f(Bt,pt){if(c){var Pt=Bt.deletions;Pt===null?(Bt.deletions=[pt],Bt.flags|=16):Pt.push(pt)}}function y(Bt,pt){if(!c)return null;for(;pt!==null;)f(Bt,pt),pt=pt.sibling;return null}function S(Bt){for(var pt=new Map;Bt!==null;)Bt.key!==null?pt.set(Bt.key,Bt):pt.set(Bt.index,Bt),Bt=Bt.sibling;return pt}function C(Bt,pt){return Bt=Ba(Bt,pt),Bt.index=0,Bt.sibling=null,Bt}function U(Bt,pt,Pt){return Bt.index=Pt,c?(Pt=Bt.alternate,Pt!==null?(Pt=Pt.index,Pt<pt?(Bt.flags|=33554434,pt):Pt):(Bt.flags|=33554434,pt)):(Bt.flags|=1048576,pt)}function q(Bt){return c&&Bt.alternate===null&&(Bt.flags|=33554434),Bt}function rt(Bt,pt,Pt,ce){return pt===null||pt.tag!==6?(pt=Th(Pt,Bt.mode,ce),pt.return=Bt,pt):(pt=C(pt,Pt),pt.return=Bt,pt)}function St(Bt,pt,Pt,ce){var Fe=Pt.type;return Fe===zo?he(Bt,pt,Pt.props.children,ce,Pt.key):pt!==null&&(pt.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===Ua&&vi(Fe)===pt.type)?(pt=C(pt,Pt.props),Ln(pt,Pt),pt.return=Bt,pt):(pt=mr(Pt.type,Pt.key,Pt.props,null,Bt.mode,ce),Ln(pt,Pt),pt.return=Bt,pt)}function Yt(Bt,pt,Pt,ce){return pt===null||pt.tag!==4||pt.stateNode.containerInfo!==Pt.containerInfo||pt.stateNode.implementation!==Pt.implementation?(pt=Hp(Pt,Bt.mode,ce),pt.return=Bt,pt):(pt=C(pt,Pt.children||[]),pt.return=Bt,pt)}function he(Bt,pt,Pt,ce,Fe){return pt===null||pt.tag!==7?(pt=_i(Pt,Bt.mode,ce,Fe),pt.return=Bt,pt):(pt=C(pt,Pt),pt.return=Bt,pt)}function be(Bt,pt,Pt){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return pt=Th(""+pt,Bt.mode,Pt),pt.return=Bt,pt;if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case Wu:return Pt=mr(pt.type,pt.key,pt.props,null,Bt.mode,Pt),Ln(Pt,pt),Pt.return=Bt,Pt;case Da:return pt=Hp(pt,Bt.mode,Pt),pt.return=Bt,pt;case Ua:var ce=pt._init;return pt=ce(pt._payload),be(Bt,pt,Pt)}if(Ec(pt)||r(pt))return pt=_i(pt,Bt.mode,Pt,null),pt.return=Bt,pt;if(typeof pt.then=="function")return be(Bt,dn(pt),Pt);if(pt.$$typeof===Za)return be(Bt,Nu(Bt,pt),Pt);rn(Bt,pt)}return null}function Ce(Bt,pt,Pt,ce){var Fe=pt!==null?pt.key:null;if(typeof Pt=="string"&&Pt!==""||typeof Pt=="number"||typeof Pt=="bigint")return Fe!==null?null:rt(Bt,pt,""+Pt,ce);if(typeof Pt=="object"&&Pt!==null){switch(Pt.$$typeof){case Wu:return Pt.key===Fe?St(Bt,pt,Pt,ce):null;case Da:return Pt.key===Fe?Yt(Bt,pt,Pt,ce):null;case Ua:return Fe=Pt._init,Pt=Fe(Pt._payload),Ce(Bt,pt,Pt,ce)}if(Ec(Pt)||r(Pt))return Fe!==null?null:he(Bt,pt,Pt,ce,null);if(typeof Pt.then=="function")return Ce(Bt,pt,dn(Pt),ce);if(Pt.$$typeof===Za)return Ce(Bt,pt,Nu(Bt,Pt),ce);rn(Bt,Pt)}return null}function ln(Bt,pt,Pt,ce,Fe){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Bt=Bt.get(Pt)||null,rt(pt,Bt,""+ce,Fe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case Wu:return Bt=Bt.get(ce.key===null?Pt:ce.key)||null,St(pt,Bt,ce,Fe);case Da:return Bt=Bt.get(ce.key===null?Pt:ce.key)||null,Yt(pt,Bt,ce,Fe);case Ua:var hi=ce._init;return ce=hi(ce._payload),ln(Bt,pt,Pt,ce,Fe)}if(Ec(ce)||r(ce))return Bt=Bt.get(Pt)||null,he(pt,Bt,ce,Fe,null);if(typeof ce.then=="function")return ln(Bt,pt,Pt,dn(ce),Fe);if(ce.$$typeof===Za)return ln(Bt,pt,Pt,Nu(pt,ce),Fe);rn(pt,ce)}return null}function _a(Bt,pt,Pt,ce){for(var Fe=null,hi=null,en=pt,Pn=pt=0,Ui=null;en!==null&&Pn<Pt.length;Pn++){en.index>Pn?(Ui=en,en=null):Ui=en.sibling;var Mn=Ce(Bt,en,Pt[Pn],ce);if(Mn===null){en===null&&(en=Ui);break}c&&en&&Mn.alternate===null&&f(Bt,en),pt=U(Mn,pt,Pn),hi===null?Fe=Mn:hi.sibling=Mn,hi=Mn,en=Ui}if(Pn===Pt.length)return y(Bt,en),Bn&&X(Bt,Pn),Fe;if(en===null){for(;Pn<Pt.length;Pn++)en=be(Bt,Pt[Pn],ce),en!==null&&(pt=U(en,pt,Pn),hi===null?Fe=en:hi.sibling=en,hi=en);return Bn&&X(Bt,Pn),Fe}for(en=S(en);Pn<Pt.length;Pn++)Ui=ln(en,Bt,Pn,Pt[Pn],ce),Ui!==null&&(c&&Ui.alternate!==null&&en.delete(Ui.key===null?Pn:Ui.key),pt=U(Ui,pt,Pn),hi===null?Fe=Ui:hi.sibling=Ui,hi=Ui);return c&&en.forEach(function(Rr){return f(Bt,Rr)}),Bn&&X(Bt,Pn),Fe}function nl(Bt,pt,Pt,ce){if(Pt==null)throw Error(s(151));for(var Fe=null,hi=null,en=pt,Pn=pt=0,Ui=null,Mn=Pt.next();en!==null&&!Mn.done;Pn++,Mn=Pt.next()){en.index>Pn?(Ui=en,en=null):Ui=en.sibling;var Rr=Ce(Bt,en,Mn.value,ce);if(Rr===null){en===null&&(en=Ui);break}c&&en&&Rr.alternate===null&&f(Bt,en),pt=U(Rr,pt,Pn),hi===null?Fe=Rr:hi.sibling=Rr,hi=Rr,en=Ui}if(Mn.done)return y(Bt,en),Bn&&X(Bt,Pn),Fe;if(en===null){for(;!Mn.done;Pn++,Mn=Pt.next())Mn=be(Bt,Mn.value,ce),Mn!==null&&(pt=U(Mn,pt,Pn),hi===null?Fe=Mn:hi.sibling=Mn,hi=Mn);return Bn&&X(Bt,Pn),Fe}for(en=S(en);!Mn.done;Pn++,Mn=Pt.next())Mn=ln(en,Bt,Pn,Mn.value,ce),Mn!==null&&(c&&Mn.alternate!==null&&en.delete(Mn.key===null?Pn:Mn.key),pt=U(Mn,pt,Pn),hi===null?Fe=Mn:hi.sibling=Mn,hi=Mn);return c&&en.forEach(function(nd){return f(Bt,nd)}),Bn&&X(Bt,Pn),Fe}function il(Bt,pt,Pt,ce){if(typeof Pt=="object"&&Pt!==null&&Pt.type===zo&&Pt.key===null&&(Pt=Pt.props.children),typeof Pt=="object"&&Pt!==null){switch(Pt.$$typeof){case Wu:t:{for(var Fe=Pt.key;pt!==null;){if(pt.key===Fe){if(Fe=Pt.type,Fe===zo){if(pt.tag===7){y(Bt,pt.sibling),ce=C(pt,Pt.props.children),ce.return=Bt,Bt=ce;break t}}else if(pt.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===Ua&&vi(Fe)===pt.type){y(Bt,pt.sibling),ce=C(pt,Pt.props),Ln(ce,Pt),ce.return=Bt,Bt=ce;break t}y(Bt,pt);break}else f(Bt,pt);pt=pt.sibling}Pt.type===zo?(ce=_i(Pt.props.children,Bt.mode,ce,Pt.key),ce.return=Bt,Bt=ce):(ce=mr(Pt.type,Pt.key,Pt.props,null,Bt.mode,ce),Ln(ce,Pt),ce.return=Bt,Bt=ce)}return q(Bt);case Da:t:{for(Fe=Pt.key;pt!==null;){if(pt.key===Fe)if(pt.tag===4&&pt.stateNode.containerInfo===Pt.containerInfo&&pt.stateNode.implementation===Pt.implementation){y(Bt,pt.sibling),ce=C(pt,Pt.children||[]),ce.return=Bt,Bt=ce;break t}else{y(Bt,pt);break}else f(Bt,pt);pt=pt.sibling}ce=Hp(Pt,Bt.mode,ce),ce.return=Bt,Bt=ce}return q(Bt);case Ua:return Fe=Pt._init,Pt=Fe(Pt._payload),il(Bt,pt,Pt,ce)}if(Ec(Pt))return _a(Bt,pt,Pt,ce);if(r(Pt)){if(Fe=r(Pt),typeof Fe!="function")throw Error(s(150));return Pt=Fe.call(Pt),nl(Bt,pt,Pt,ce)}if(typeof Pt.then=="function")return il(Bt,pt,dn(Pt),ce);if(Pt.$$typeof===Za)return il(Bt,pt,Nu(Bt,Pt),ce);rn(Bt,Pt)}return typeof Pt=="string"&&Pt!==""||typeof Pt=="number"||typeof Pt=="bigint"?(Pt=""+Pt,pt!==null&&pt.tag===6?(y(Bt,pt.sibling),ce=C(pt,Pt),ce.return=Bt,Bt=ce):(y(Bt,pt),ce=Th(Pt,Bt.mode,ce),ce.return=Bt,Bt=ce),q(Bt)):y(Bt,pt)}return function(Bt,pt,Pt,ce){try{Jo=0;var Fe=il(Bt,pt,Pt,ce);return Ko=null,Fe}catch(en){if(en===Pc)throw en;var hi=e(29,en,null,Bt.mode);return hi.lanes=ce,hi.return=Bt,hi}finally{}}}function yi(c,f){c=xs,w(Fc,c),w(ri,f),xs=c|f.baseLanes}function Ti(){w(Fc,xs),w(ri,ri.current)}function Ci(){xs=Fc.current,M(ri),M(Fc)}function gs(c){var f=c.alternate;w(Xi,Xi.current&1),w(ha,c),ti===null&&(f===null||ri.current!==null||f.memoizedState!==null)&&(ti=c)}function Wa(c){if(c.tag===22){if(w(Xi,Xi.current),w(ha,c),ti===null){var f=c.alternate;f!==null&&f.memoizedState!==null&&(ti=c)}}else is()}function is(){w(Xi,Xi.current),w(ha,ha.current)}function Ye(c){M(ha),ti===c&&(ti=null),M(Xi)}function Vs(c){for(var f=c;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||Ph(y)||Fh(y)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function Gn(){throw Error(s(321))}function z(c,f){if(f===null)return!1;for(var y=0;y<f.length&&y<c.length;y++)if(!Js(c[y],f[y]))return!1;return!0}function W(c,f,y,S,C,U){return lo=U,yn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,tn.H=c===null||c.memoizedState===null?$o:Os,Qo=!1,U=y(S,C),Qo=!1,Ll&&(U=wt(f,y,S,C)),ut(c),U}function ut(c){tn.H=xi;var f=qe!==null&&qe.next!==null;if(lo=0,Dn=qe=yn=null,Pa=!1,Il=0,es=null,f)throw Error(s(300));c===null||ei||(c=c.dependencies,c!==null&&Uu(c)&&(ei=!0))}function wt(c,f,y,S){yn=c;var C=0;do{if(Ll&&(es=null),Il=0,Ll=!1,25<=C)throw Error(s(301));if(C+=1,Dn=qe=null,c.updateQueue!=null){var U=c.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}tn.H=da,U=f(y,S)}while(Ll);return U}function Dt(){var c=tn.H,f=c.useState()[0];return f=typeof f.then=="function"?st(f):f,c=c.useState()[0],(qe!==null?qe.memoizedState:null)!==c&&(yn.flags|=1024),f}function Gt(){var c=Wh!==0;return Wh=0,c}function oe(c,f,y){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~y}function ne(c){if(Pa){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Pa=!1}lo=0,Dn=qe=yn=null,Ll=!1,Il=Wh=0,es=null}function G(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?yn.memoizedState=Dn=c:Dn=Dn.next=c,Dn}function tt(){if(qe===null){var c=yn.alternate;c=c!==null?c.memoizedState:null}else c=qe.next;var f=Dn===null?yn.memoizedState:Dn.next;if(f!==null)Dn=f,qe=c;else{if(c===null)throw yn.alternate===null?Error(s(467)):Error(s(310));qe=c,c={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Dn===null?yn.memoizedState=Dn=c:Dn=Dn.next=c}return Dn}function st(c){var f=Il;return Il+=1,es===null&&(es=[]),c=me(es,c,f),f=yn,(Dn===null?f.memoizedState:Dn.next)===null&&(f=f.alternate,tn.H=f===null||f.memoizedState===null?$o:Os),c}function at(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return st(c);if(c.$$typeof===Za)return as(c)}throw Error(s(438,String(c)))}function gt(c){var f=null,y=yn.updateQueue;if(y!==null&&(f=y.memoCache),f==null){var S=yn.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(f={data:S.data.map(function(C){return C.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),y===null&&(y=Kh(),yn.updateQueue=y),y.memoCache=f,y=f.data[f.index],y===void 0)for(y=f.data[f.index]=Array(c),S=0;S<c;S++)y[S]=_0;return f.index++,y}function Tt(c,f){return typeof f=="function"?f(c):f}function Vt(c){var f=tt();return jt(f,qe,c)}function jt(c,f,y){var S=c.queue;if(S===null)throw Error(s(311));S.lastRenderedReducer=y;var C=c.baseQueue,U=S.pending;if(U!==null){if(C!==null){var q=C.next;C.next=U.next,U.next=q}f.baseQueue=C=U,S.pending=null}if(U=c.baseState,C===null)c.memoizedState=U;else{f=C.next;var rt=q=null,St=null,Yt=f,he=!1;do{var be=Yt.lane&-536870913;if(be!==Yt.lane?(bn&be)===be:(lo&be)===be){var Ce=Yt.revertLane;if(Ce===0)St!==null&&(St=St.next={lane:0,revertLane:0,action:Yt.action,hasEagerState:Yt.hasEagerState,eagerState:Yt.eagerState,next:null}),be===fa&&(he=!0);else if((lo&Ce)===Ce){Yt=Yt.next,Ce===fa&&(he=!0);continue}else be={lane:0,revertLane:Yt.revertLane,action:Yt.action,hasEagerState:Yt.hasEagerState,eagerState:Yt.eagerState,next:null},St===null?(rt=St=be,q=U):St=St.next=be,yn.lanes|=Ce,va|=Ce;be=Yt.action,Qo&&y(U,be),U=Yt.hasEagerState?Yt.eagerState:y(U,be)}else Ce={lane:be,revertLane:Yt.revertLane,action:Yt.action,hasEagerState:Yt.hasEagerState,eagerState:Yt.eagerState,next:null},St===null?(rt=St=Ce,q=U):St=St.next=Ce,yn.lanes|=be,va|=be;Yt=Yt.next}while(Yt!==null&&Yt!==f);if(St===null?q=U:St.next=rt,!Js(U,c.memoizedState)&&(ei=!0,he&&(y=Nl,y!==null)))throw y;c.memoizedState=U,c.baseState=q,c.baseQueue=St,S.lastRenderedState=U}return C===null&&(S.lanes=0),[c.memoizedState,S.dispatch]}function ee(c){var f=tt(),y=f.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=c;var S=y.dispatch,C=y.pending,U=f.memoizedState;if(C!==null){y.pending=null;var q=C=C.next;do U=c(U,q.action),q=q.next;while(q!==C);Js(U,f.memoizedState)||(ei=!0),f.memoizedState=U,f.baseQueue===null&&(f.baseState=U),y.lastRenderedState=U}return[U,S]}function ve(c,f,y){var S=yn,C=tt(),U=Bn;if(U){if(y===void 0)throw Error(s(407));y=y()}else y=f();var q=!Js((qe||C).memoizedState,y);if(q&&(C.memoizedState=y,ei=!0),C=C.queue,up(ke.bind(null,S,C,c),[c]),C.getSnapshot!==f||q||Dn!==null&&Dn.memoizedState.tag&1){if(S.flags|=2048,Cs(9,ye.bind(null,S,C,y,f),{destroy:void 0},null),Xn===null)throw Error(s(349));U||(lo&60)!==0||pe(S,f,y)}return y}function pe(c,f,y){c.flags|=16384,c={getSnapshot:f,value:y},f=yn.updateQueue,f===null?(f=Kh(),yn.updateQueue=f,f.stores=[c]):(y=f.stores,y===null?f.stores=[c]:y.push(c))}function ye(c,f,y,S){f.value=y,f.getSnapshot=S,Le(f)&&Tn(c)}function ke(c,f,y){return y(function(){Le(f)&&Tn(c)})}function Le(c){var f=c.getSnapshot;c=c.value;try{var y=f();return!Js(c,y)}catch{return!0}}function Tn(c){var f=Kt(c,2);f!==null&&Qi(f,c,2)}function De(c){var f=G();if(typeof c=="function"){var y=c;if(c=y(),Qo){K(!0);try{y()}finally{K(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tt,lastRenderedState:c},f}function ze(c,f,y,S){return c.baseState=y,jt(c,qe,typeof S=="function"?S:Tt)}function Ue(c,f,y,S,C){if(Cu(c))throw Error(s(485));if(c=f.action,c!==null){var U={payload:C,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){U.listeners.push(q)}};tn.T!==null?y(!0):U.isTransition=!1,S(U),y=f.pending,y===null?(U.next=f.pending=U,Yn(f,U)):(U.next=y.next,f.pending=y.next=U)}}function Yn(c,f){var y=f.action,S=f.payload,C=c.state;if(f.isTransition){var U=tn.T,q={};tn.T=q;try{var rt=y(C,S),St=tn.S;St!==null&&St(q,rt),$e(c,f,rt)}catch(Yt){Zn(c,f,Yt)}finally{tn.T=U}}else try{U=y(C,S),$e(c,f,U)}catch(Yt){Zn(c,f,Yt)}}function $e(c,f,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(S){an(c,f,S)},function(S){return Zn(c,f,S)}):an(c,f,y)}function an(c,f,y){f.status="fulfilled",f.value=y,je(f),c.state=y,f=c.pending,f!==null&&(y=f.next,y===f?c.pending=null:(y=y.next,f.next=y,Yn(c,y)))}function Zn(c,f,y){var S=c.pending;if(c.pending=null,S!==null){S=S.next;do f.status="rejected",f.reason=y,je(f),f=f.next;while(f!==S)}c.action=null}function je(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function vn(c,f){return f}function pn(c,f){if(Bn){var y=Xn.formState;if(y!==null){t:{var S=yn;if(Bn){if(fs){var C=nm(fs,ts);if(C){fs=im(C),S=G0(C);break t}}se(S)}S=!1}S&&(f=y[0])}}y=G(),y.memoizedState=y.baseState=f,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:f},y.queue=S,y=pp.bind(null,yn,S),S.dispatch=y,S=De(!1);var U=oc.bind(null,yn,!1,S.queue);return S=G(),C={state:f,dispatch:null,action:c,pending:null},S.queue=C,y=Ue.bind(null,yn,C,U,y),C.dispatch=y,S.memoizedState=c,[f,y,!1]}function ui(c){var f=tt();return wn(f,qe,c)}function wn(c,f,y){f=jt(c,f,vn)[0],c=Vt(Tt)[0],f=typeof f=="object"&&f!==null&&typeof f.then=="function"?st(f):f;var S=tt(),C=S.queue,U=C.dispatch;return y!==S.memoizedState&&(yn.flags|=2048,Cs(9,Qn.bind(null,C,y),{destroy:void 0},null)),[f,U,c]}function Qn(c,f){c.action=f}function Ji(c){var f=tt(),y=qe;if(y!==null)return wn(f,y,c);tt(),f=f.memoizedState,y=tt();var S=y.queue.dispatch;return y.memoizedState=c,[f,S,!1]}function Cs(c,f,y,S){return c={tag:c,create:f,inst:y,deps:S,next:null},f=yn.updateQueue,f===null&&(f=Kh(),yn.updateQueue=f),y=f.lastEffect,y===null?f.lastEffect=c.next=c:(S=y.next,y.next=c,c.next=S,f.lastEffect=c),c}function fr(){return tt().memoizedState}function Su(c,f,y,S){var C=G();yn.flags|=c,C.memoizedState=Cs(1|f,y,{destroy:void 0},S===void 0?null:S)}function Mu(c,f,y,S){var C=tt();S=S===void 0?null:S;var U=C.memoizedState.inst;qe!==null&&S!==null&&z(S,qe.memoizedState.deps)?C.memoizedState=Cs(f,y,U,S):(yn.flags|=c,C.memoizedState=Cs(1|f,y,U,S))}function rh(c,f){Su(8390656,8,c,f)}function up(c,f){Mu(2048,8,c,f)}function Zg(c,f){return Mu(4,2,c,f)}function bu(c,f){return Mu(4,4,c,f)}function oh(c,f){if(typeof f=="function"){c=c();var y=f(c);return function(){typeof y=="function"?y():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function lh(c,f,y){y=y!=null?y.concat([c]):null,Mu(4,4,oh.bind(null,f,c),y)}function Eo(){}function yl(c,f){var y=tt();f=f===void 0?null:f;var S=y.memoizedState;return f!==null&&z(f,S[1])?S[0]:(y.memoizedState=[c,f],c)}function fp(c,f){var y=tt();f=f===void 0?null:f;var S=y.memoizedState;if(f!==null&&z(f,S[1]))return S[0];if(S=c(),Qo){K(!0);try{c()}finally{K(!1)}}return y.memoizedState=[S,f],S}function Eu(c,f,y){return y===void 0||(lo&1073741824)!==0?c.memoizedState=f:(c.memoizedState=y,c=Np(),yn.lanes|=c,va|=c,y)}function hp(c,f,y,S){return Js(y,f)?y:ri.current!==null?(c=Eu(c,y,S),Js(c,f)||(ei=!0),c):(lo&42)===0?(ei=!0,c.memoizedState=y):(c=Np(),yn.lanes|=c,va|=c,f)}function ac(c,f,y,S,C){var U=io();ys(U!==0&&8>U?U:8);var q=tn.T,rt={};tn.T=rt,oc(c,!1,f,y);try{var St=C(),Yt=tn.S;if(Yt!==null&&Yt(rt,St),St!==null&&typeof St=="object"&&typeof St.then=="function"){var he=He(St,S);To(c,f,he,Ri(c))}else To(c,f,S,Ri(c))}catch(be){To(c,f,{then:function(){},status:"rejected",reason:be},Ri())}finally{ys(U),tn.T=q}}function hr(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:Vo,baseState:Vo,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tt,lastRenderedState:Vo},next:null};var y={};return f.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tt,lastRenderedState:y},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function Tu(){return as(Qa)}function rc(){return tt().memoizedState}function Vr(){return tt().memoizedState}function dp(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var y=Ri();c=Re(y);var S=_e(f,c,y);S!==null&&(Qi(S,f,y),de(S,f,y)),f={cache:Bo()},c.payload=f;return}f=f.return}}function ch(c,f,y){var S=Ri();y={lane:S,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},Cu(c)?Rs(f,y):(y=te(c,f,y,S),y!==null&&(Qi(y,c,S),Co(y,f,S)))}function pp(c,f,y){var S=Ri();To(c,f,y,S)}function To(c,f,y,S){var C={lane:S,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(Cu(c))Rs(f,C);else{var U=c.alternate;if(c.lanes===0&&(U===null||U.lanes===0)&&(U=f.lastRenderedReducer,U!==null))try{var q=f.lastRenderedState,rt=U(q,y);if(C.hasEagerState=!0,C.eagerState=rt,Js(rt,q))return le(c,f,C,0),Xn===null&&Z(),!1}catch{}finally{}if(y=te(c,f,C,S),y!==null)return Qi(y,c,S),Co(y,f,S),!0}return!1}function oc(c,f,y,S){if(S={lane:2,revertLane:fe(),action:S,hasEagerState:!1,eagerState:null,next:null},Cu(c)){if(f)throw Error(s(479))}else f=te(c,y,S,2),f!==null&&Qi(f,c,2)}function Cu(c){var f=c.alternate;return c===yn||f!==null&&f===yn}function Rs(c,f){Ll=Pa=!0;var y=c.pending;y===null?f.next=f:(f.next=y.next,y.next=f),c.pending=f}function Co(c,f,y){if((y&4194176)!==0){var S=f.lanes;S&=c.pendingLanes,y|=S,f.lanes=y,dt(c,y)}}function lc(c,f,y,S){f=c.memoizedState,y=y(S,f),y=y==null?f:Rh({},f,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}function cc(c,f,y,S,C,U,q){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(S,U,q):f.prototype&&f.prototype.isPureReactComponent?!Nt(y,S)||!Nt(C,U):!0}function Qg(c,f,y,S){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,S),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,S),f.state!==c&&Sr.enqueueReplaceState(f,f.state,null)}function kr(c,f){var y=f;if("ref"in f){y={};for(var S in f)S!=="ref"&&(y[S]=f[S])}if(c=c.defaultProps){y===f&&(y=Rh({},y));for(var C in c)y[C]===void 0&&(y[C]=c[C])}return y}function uc(c,f){try{var y=c.onUncaughtError;y(f.value,{componentStack:f.stack})}catch(S){setTimeout(function(){throw S})}}function fc(c,f,y){try{var S=c.onCaughtError;S(y.value,{componentStack:y.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function hc(c,f,y){return y=Re(y),y.tag=3,y.payload={element:null},y.callback=function(){uc(c,f)},y}function mp(c){return c=Re(c),c.tag=3,c}function $g(c,f,y,S){var C=y.type.getDerivedStateFromError;if(typeof C=="function"){var U=S.value;c.payload=function(){return C(U)},c.callback=function(){fc(f,y,S)}}var q=y.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(c.callback=function(){fc(f,y,S),typeof C!="function"&&(tl===null?tl=new Set([this]):tl.add(this));var rt=S.stack;this.componentDidCatch(S.value,{componentStack:rt!==null?rt:""})})}function xx(c,f,y,S,C){if(y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(f=y.alternate,f!==null&&Du(f,y,C,!0),y=ha.current,y!==null){switch(y.tag){case 13:return ti===null?Zr():y.alternate===null&&ni===0&&(ni=3),y.flags&=-257,y.flags|=65536,y.lanes=C,S===uf?y.flags|=16384:(f=y.updateQueue,f===null?y.updateQueue=new Set([S]):f.add(S),Al(c,S,C)),!1;case 22:return y.flags|=65536,S===uf?y.flags|=16384:(f=y.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([S])},y.updateQueue=f):(y=f.retryQueue,y===null?f.retryQueue=new Set([S]):y.add(S)),Al(c,S,C)),!1}throw Error(s(435,y.tag))}return Al(c,S,C),Zr(),!1}if(Bn)return f=ha.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=C,S!==of&&(c=Error(s(422),{cause:S}),we(yt(c,y)))):(S!==of&&(f=Error(s(423),{cause:S}),we(yt(f,y))),c=c.current.alternate,c.flags|=65536,C&=-C,c.lanes|=C,S=yt(S,y),C=hc(c.stateNode,S,C),ft(c,C),ni!==4&&(ni=2)),!1;var U=Error(s(520),{cause:S});if(U=yt(U,y),Fl===null?Fl=[U]:Fl.push(U),ni!==4&&(ni=2),f===null)return!0;S=yt(S,y),y=f;do{switch(y.tag){case 3:return y.flags|=65536,c=C&-C,y.lanes|=c,c=hc(y.stateNode,S,c),ft(y,c),!1;case 1:if(f=y.type,U=y.stateNode,(y.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(tl===null||!tl.has(U))))return y.flags|=65536,C&=-C,y.lanes|=C,C=mp(C),$g(C,c,y,S),ft(y,C),!1}y=y.return}while(y!==null);return!1}function ss(c,f,y,S){f.child=c===null?Ar(f,null,y,S):Zo(f,c.child,y,S)}function uh(c,f,y,S,C){y=y.render;var U=f.ref;if("ref"in S){var q={};for(var rt in S)rt!=="ref"&&(q[rt]=S[rt])}else q=S;return wo(f),S=W(c,f,y,q,U,C),rt=Gt(),c!==null&&!ei?(oe(c,f,C),Xr(c,f,C)):(Bn&&rt&&xt(f),f.flags|=1,ss(c,f,S,C),f.child)}function t0(c,f,y,S,C){if(c===null){var U=y.type;return typeof U=="function"&&!Xu(U)&&U.defaultProps===void 0&&y.compare===null?(f.tag=15,f.type=U,e0(c,f,U,S,C)):(c=mr(y.type,null,S,f,f.mode,C),c.ref=f.ref,c.return=f,f.child=c)}if(U=c.child,!xp(c,C)){var q=U.memoizedProps;if(y=y.compare,y=y!==null?y:Nt,y(q,S)&&c.ref===f.ref)return Xr(c,f,C)}return f.flags|=1,c=Ba(U,S),c.ref=f.ref,c.return=f,f.child=c}function e0(c,f,y,S,C){if(c!==null){var U=c.memoizedProps;if(Nt(U,S)&&c.ref===f.ref)if(ei=!1,f.pendingProps=S=U,xp(c,C))(c.flags&131072)!==0&&(ei=!0);else return f.lanes=c.lanes,Xr(c,f,C)}return fh(c,f,y,S,C)}function n0(c,f,y){var S=f.pendingProps,C=S.children,U=(f.stateNode._pendingVisibility&2)!==0,q=c!==null?c.memoizedState:null;if(Ru(c,f),S.mode==="hidden"||U){if((f.flags&128)!==0){if(S=q!==null?q.baseLanes|y:y,c!==null){for(C=f.child=c.child,U=0;C!==null;)U=U|C.lanes|C.childLanes,C=C.sibling;f.childLanes=U&~S}else f.childLanes=0,f.child=null;return i0(c,f,S,y)}if((y&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&dh(f,q!==null?q.cachePool:null),q!==null?yi(f,q):Ti(),Wa(f);else return f.lanes=f.childLanes=536870912,i0(c,f,q!==null?q.baseLanes|y:y,y)}else q!==null?(dh(f,q.cachePool),yi(f,q),is(),f.memoizedState=null):(c!==null&&dh(f,null),Ti(),is());return ss(c,f,C,y),f.child}function i0(c,f,y,S){var C=Sp();return C=C===null?null:{parent:Ds?oi._currentValue:oi._currentValue2,pool:C},f.memoizedState={baseLanes:y,cachePool:C},c!==null&&dh(f,null),Ti(),Wa(f),c!==null&&Du(c,f,S,!0),null}function Ru(c,f){var y=f.ref;if(y===null)c!==null&&c.ref!==null&&(f.flags|=2097664);else{if(typeof y!="function"&&typeof y!="object")throw Error(s(284));(c===null||c.ref!==y)&&(f.flags|=2097664)}}function fh(c,f,y,S,C){return wo(f),y=W(c,f,y,S,void 0,C),S=Gt(),c!==null&&!ei?(oe(c,f,C),Xr(c,f,C)):(Bn&&S&&xt(f),f.flags|=1,ss(c,f,y,C),f.child)}function s0(c,f,y,S,C,U){return wo(f),f.updateQueue=null,y=wt(f,S,y,C),ut(c),S=Gt(),c!==null&&!ei?(oe(c,f,U),Xr(c,f,U)):(Bn&&S&&xt(f),f.flags|=1,ss(c,f,y,U),f.child)}function a0(c,f,y,S,C){if(wo(f),f.stateNode===null){var U=Yo,q=y.contextType;typeof q=="object"&&q!==null&&(U=as(q)),U=new y(S,U),f.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=Sr,f.stateNode=U,U._reactInternals=f,U=f.stateNode,U.props=S,U.state=f.memoizedState,U.refs={},ae(f),q=y.contextType,U.context=typeof q=="object"&&q!==null?as(q):Yo,U.state=f.memoizedState,q=y.getDerivedStateFromProps,typeof q=="function"&&(lc(f,y,q,S),U.state=f.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(q=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),q!==U.state&&Sr.enqueueReplaceState(U,U.state,null),re(f,S,U,C),Ft(),U.state=f.memoizedState),typeof U.componentDidMount=="function"&&(f.flags|=4194308),S=!0}else if(c===null){U=f.stateNode;var rt=f.memoizedProps,St=kr(y,rt);U.props=St;var Yt=U.context,he=y.contextType;q=Yo,typeof he=="object"&&he!==null&&(q=as(he));var be=y.getDerivedStateFromProps;he=typeof be=="function"||typeof U.getSnapshotBeforeUpdate=="function",rt=f.pendingProps!==rt,he||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(rt||Yt!==q)&&Qg(f,U,S,q),oo=!1;var Ce=f.memoizedState;U.state=Ce,re(f,S,U,C),Ft(),Yt=f.memoizedState,rt||Ce!==Yt||oo?(typeof be=="function"&&(lc(f,y,be,S),Yt=f.memoizedState),(St=oo||cc(f,y,St,S,Ce,Yt,q))?(he||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(f.flags|=4194308)):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=S,f.memoizedState=Yt),U.props=S,U.state=Yt,U.context=q,S=St):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),S=!1)}else{U=f.stateNode,Me(c,f),q=f.memoizedProps,he=kr(y,q),U.props=he,be=f.pendingProps,Ce=U.context,Yt=y.contextType,St=Yo,typeof Yt=="object"&&Yt!==null&&(St=as(Yt)),rt=y.getDerivedStateFromProps,(Yt=typeof rt=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(q!==be||Ce!==St)&&Qg(f,U,S,St),oo=!1,Ce=f.memoizedState,U.state=Ce,re(f,S,U,C),Ft();var ln=f.memoizedState;q!==be||Ce!==ln||oo||c!==null&&c.dependencies!==null&&Uu(c.dependencies)?(typeof rt=="function"&&(lc(f,y,rt,S),ln=f.memoizedState),(he=oo||cc(f,y,he,S,Ce,ln,St)||c!==null&&c.dependencies!==null&&Uu(c.dependencies))?(Yt||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(S,ln,St),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(S,ln,St)),typeof U.componentDidUpdate=="function"&&(f.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof U.componentDidUpdate!="function"||q===c.memoizedProps&&Ce===c.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||q===c.memoizedProps&&Ce===c.memoizedState||(f.flags|=1024),f.memoizedProps=S,f.memoizedState=ln),U.props=S,U.state=ln,U.context=St,S=he):(typeof U.componentDidUpdate!="function"||q===c.memoizedProps&&Ce===c.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||q===c.memoizedProps&&Ce===c.memoizedState||(f.flags|=1024),S=!1)}return U=S,Ru(c,f),S=(f.flags&128)!==0,U||S?(U=f.stateNode,y=S&&typeof y.getDerivedStateFromError!="function"?null:U.render(),f.flags|=1,c!==null&&S?(f.child=Zo(f,c.child,null,C),f.child=Zo(f,null,y,C)):ss(c,f,y,C),f.memoizedState=U.state,c=f.child):c=Xr(c,f,C),c}function r0(c,f,y,S){return Ve(),f.flags|=256,ss(c,f,y,S),f.child}function gp(c){return{baseLanes:c,cachePool:Mp()}}function wu(c,f,y){return c=c!==null?c.childLanes&~y:0,f&&(c|=ya),c}function o0(c,f,y){var S=f.pendingProps,C=!1,U=(f.flags&128)!==0,q;if((q=U)||(q=c!==null&&c.memoizedState===null?!1:(Xi.current&2)!==0),q&&(C=!0,f.flags&=-129),q=(f.flags&32)!==0,f.flags&=-33,c===null){if(Bn){if(C?gs(f):is(),Bn){var rt=fs,St;(St=rt)&&(rt=X0(rt,ts),rt!==null?(f.memoizedState={dehydrated:rt,treeContext:qo!==null?{id:tr,overflow:er}:null,retryLane:536870912},St=e(18,null,null,0),St.stateNode=rt,St.return=f,f.child=St,us=f,fs=null,St=!0):St=!1),St||se(f)}if(rt=f.memoizedState,rt!==null&&(rt=rt.dehydrated,rt!==null))return Fh(rt)?f.lanes=16:f.lanes=536870912,null;Ye(f)}return rt=S.children,S=S.fallback,C?(is(),C=f.mode,rt=yp({mode:"hidden",children:rt},C),S=_i(S,C,y,null),rt.return=f,S.return=f,rt.sibling=S,f.child=rt,C=f.child,C.memoizedState=gp(y),C.childLanes=wu(c,q,y),f.memoizedState=Qh,S):(gs(f),vp(f,rt))}if(St=c.memoizedState,St!==null&&(rt=St.dehydrated,rt!==null)){if(U)f.flags&256?(gs(f),f.flags&=-257,f=hh(c,f,y)):f.memoizedState!==null?(is(),f.child=c.child,f.flags|=128,f=null):(is(),C=S.fallback,rt=f.mode,S=yp({mode:"visible",children:S.children},rt),C=_i(C,rt,y,null),C.flags|=2,S.return=f,C.return=f,S.sibling=C,f.child=S,Zo(f,c.child,null,y),S=f.child,S.memoizedState=gp(y),S.childLanes=wu(c,q,y),f.memoizedState=Qh,f=C);else if(gs(f),Fh(rt))q=H0(rt).digest,S=Error(s(419)),S.stack="",S.digest=q,we({value:S,source:null,stack:null}),f=hh(c,f,y);else if(ei||Du(c,f,y,!1),q=(y&c.childLanes)!==0,ei||q){if(q=Xn,q!==null){if(S=y&-y,(S&42)!==0)S=1;else switch(S){case 2:S=1;break;case 8:S=4;break;case 32:S=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:S=64;break;case 268435456:S=134217728;break;default:S=0}if(S=(S&(q.suspendedLanes|y))!==0?0:S,S!==0&&S!==St.retryLane)throw St.retryLane=S,Kt(c,S),Qi(q,c,S),Zh}Ph(rt)||Zr(),f=hh(c,f,y)}else Ph(rt)?(f.flags|=128,f.child=c.child,f=Qr.bind(null,c),z0(rt,f),f=null):(c=St.treeContext,cs&&(fs=k0(rt),us=f,Bn=!0,La=null,ts=!1,c!==null&&(ca[ua++]=tr,ca[ua++]=er,ca[ua++]=qo,tr=c.id,er=c.overflow,qo=f)),f=vp(f,S.children),f.flags|=4096);return f}return C?(is(),C=S.fallback,rt=f.mode,St=c.child,U=St.sibling,S=Ba(St,{mode:"hidden",children:S.children}),S.subtreeFlags=St.subtreeFlags&31457280,U!==null?C=Ba(U,C):(C=_i(C,rt,y,null),C.flags|=2),C.return=f,S.return=f,S.sibling=C,f.child=S,S=C,C=f.child,rt=c.child.memoizedState,rt===null?rt=gp(y):(St=rt.cachePool,St!==null?(U=Ds?oi._currentValue:oi._currentValue2,St=St.parent!==U?{parent:U,pool:U}:St):St=Mp(),rt={baseLanes:rt.baseLanes|y,cachePool:St}),C.memoizedState=rt,C.childLanes=wu(c,q,y),f.memoizedState=Qh,S):(gs(f),y=c.child,c=y.sibling,y=Ba(y,{mode:"visible",children:S.children}),y.return=f,y.sibling=null,c!==null&&(q=f.deletions,q===null?(f.deletions=[c],f.flags|=16):q.push(c)),f.child=y,f.memoizedState=null,y)}function vp(c,f){return f=yp({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function yp(c,f){return Yu(c,f,0,null)}function hh(c,f,y){return Zo(f,c.child,null,y),c=vp(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function l0(c,f,y){c.lanes|=f;var S=c.alternate;S!==null&&(S.lanes|=f),Bu(c.return,f,y)}function _p(c,f,y,S,C){var U=c.memoizedState;U===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:C}:(U.isBackwards=f,U.rendering=null,U.renderingStartTime=0,U.last=S,U.tail=y,U.tailMode=C)}function c0(c,f,y){var S=f.pendingProps,C=S.revealOrder,U=S.tail;if(ss(c,f,S.children,y),S=Xi.current,(S&2)!==0)S=S&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)t:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&l0(c,y,f);else if(c.tag===19)l0(c,y,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break t;for(;c.sibling===null;){if(c.return===null||c.return===f)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}S&=1}switch(w(Xi,S),C){case"forwards":for(y=f.child,C=null;y!==null;)c=y.alternate,c!==null&&Vs(c)===null&&(C=y),y=y.sibling;y=C,y===null?(C=f.child,f.child=null):(C=y.sibling,y.sibling=null),_p(f,!1,C,y,U);break;case"backwards":for(y=null,C=f.child,f.child=null;C!==null;){if(c=C.alternate,c!==null&&Vs(c)===null){f.child=C;break}c=C.sibling,C.sibling=y,y=C,C=c}_p(f,!0,y,null,U);break;case"together":_p(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Xr(c,f,y){if(c!==null&&(f.dependencies=c.dependencies),va|=f.lanes,(y&f.childLanes)===0)if(c!==null){if(Du(c,f,y,!1),(y&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(s(153));if(f.child!==null){for(c=f.child,y=Ba(c,c.pendingProps),f.child=y,y.return=f;c.sibling!==null;)c=c.sibling,y=y.sibling=Ba(c,c.pendingProps),y.return=f;y.sibling=null}return f.child}function xp(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&Uu(c)))}function Ax(c,f,y){switch(f.tag){case 3:ot(f,f.stateNode.containerInfo),Ro(f,oi,c.memoizedState.cache),Ve();break;case 27:case 5:It(f);break;case 4:ot(f,f.stateNode.containerInfo);break;case 10:Ro(f,f.type,f.memoizedProps.value);break;case 13:var S=f.memoizedState;if(S!==null)return S.dehydrated!==null?(gs(f),f.flags|=128,null):(y&f.child.childLanes)!==0?o0(c,f,y):(gs(f),c=Xr(c,f,y),c!==null?c.sibling:null);gs(f);break;case 19:var C=(c.flags&128)!==0;if(S=(y&f.childLanes)!==0,S||(Du(c,f,y,!1),S=(y&f.childLanes)!==0),C){if(S)return c0(c,f,y);f.flags|=128}if(C=f.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),w(Xi,Xi.current),S)break;return null;case 22:case 23:return f.lanes=0,n0(c,f,y);case 24:Ro(f,oi,c.memoizedState.cache)}return Xr(c,f,y)}function u0(c,f,y){if(c!==null)if(c.memoizedProps!==f.pendingProps)ei=!0;else{if(!xp(c,y)&&(f.flags&128)===0)return ei=!1,Ax(c,f,y);ei=(c.flags&131072)!==0}else ei=!1,Bn&&(f.flags&1048576)!==0&&lt(f,Nc,f.index);switch(f.lanes=0,f.tag){case 16:t:{c=f.pendingProps;var S=f.elementType,C=S._init;if(S=C(S._payload),f.type=S,typeof S=="function")Xu(S)?(c=kr(S,c),f.tag=1,f=a0(null,f,S,c,y)):(f.tag=0,f=fh(null,f,S,c,y));else{if(S!=null){if(C=S.$$typeof,C===Zu){f.tag=11,f=uh(null,f,S,c,y);break t}else if(C===Dh){f.tag=14,f=t0(null,f,S,c,y);break t}}throw f=l(S)||S,Error(s(306,f,""))}}return f;case 0:return fh(c,f,f.type,f.pendingProps,y);case 1:return S=f.type,C=kr(S,f.pendingProps),a0(c,f,S,C,y);case 3:t:{if(ot(f,f.stateNode.containerInfo),c===null)throw Error(s(387));var U=f.pendingProps;C=f.memoizedState,S=C.element,Me(c,f),re(f,U,null,y);var q=f.memoizedState;if(U=q.cache,Ro(f,oi,U),U!==C.cache&&_l(f,[oi],y,!0),Ft(),U=q.element,cs&&C.isDehydrated)if(C={element:U,isDehydrated:!1,cache:q.cache},f.updateQueue.baseState=C,f.memoizedState=C,f.flags&256){f=r0(c,f,U,y);break t}else if(U!==S){S=yt(Error(s(424)),f),we(S),f=r0(c,f,U,y);break t}else for(cs&&(fs=V0(f.stateNode.containerInfo),us=f,Bn=!0,La=null,ts=!0),y=Ar(f,null,U,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Ve(),U===S){f=Xr(c,f,y);break t}ss(c,f,U,y)}f=f.child}return f;case 26:if(la)return Ru(c,f),c===null?(y=rm(f.type,null,f.pendingProps,null))?f.memoizedState=y:Bn||(f.stateNode=kh(f.type,f.pendingProps,_r.current,f)):f.memoizedState=rm(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:if($n)return It(f),c===null&&$n&&Bn&&(S=f.stateNode=$a(f.type,f.pendingProps,_r.current,ki.current,!1),us=f,ts=!0,fs=Hh(S)),S=f.pendingProps.children,c!==null||Bn?ss(c,f,S,y):f.child=Zo(f,null,S,y),Ru(c,f),f.child;case 5:return c===null&&Bn&&(Gh(f.type,f.pendingProps,ki.current),(C=S=fs)&&(S=Rx(S,f.type,f.pendingProps,ts),S!==null?(f.stateNode=S,us=f,fs=Hh(S),ts=!1,C=!0):C=!1),C||se(f)),It(f),C=f.type,U=f.pendingProps,q=c!==null?c.memoizedProps:null,S=U.children,un(C,U)?S=null:q!==null&&un(C,q)&&(f.flags|=32),f.memoizedState!==null&&(C=W(c,f,Dt,null,null,y),Ds?Qa._currentValue=C:Qa._currentValue2=C),Ru(c,f),ss(c,f,S,y),f.child;case 6:return c===null&&Bn&&(K0(f.pendingProps,ki.current),(c=y=fs)&&(y=sm(y,f.pendingProps,ts),y!==null?(f.stateNode=y,us=f,fs=null,c=!0):c=!1),c||se(f)),null;case 13:return o0(c,f,y);case 4:return ot(f,f.stateNode.containerInfo),S=f.pendingProps,c===null?f.child=Zo(f,null,S,y):ss(c,f,S,y),f.child;case 11:return uh(c,f,f.type,f.pendingProps,y);case 7:return ss(c,f,f.pendingProps,y),f.child;case 8:return ss(c,f,f.pendingProps.children,y),f.child;case 12:return ss(c,f,f.pendingProps.children,y),f.child;case 10:return S=f.pendingProps,Ro(f,f.type,S.value),ss(c,f,S.children,y),f.child;case 9:return C=f.type._context,S=f.pendingProps.children,wo(f),C=as(C),S=S(C),f.flags|=1,ss(c,f,S,y),f.child;case 14:return t0(c,f,f.type,f.pendingProps,y);case 15:return e0(c,f,f.type,f.pendingProps,y);case 19:return c0(c,f,y);case 22:return n0(c,f,y);case 24:return wo(f),S=as(oi),c===null?(C=Sp(),C===null&&(C=Xn,U=Bo(),C.pooledCache=U,U.refCount++,U!==null&&(C.pooledCacheLanes|=y),C=U),f.memoizedState={parent:S,cache:C},ae(f),Ro(f,oi,C)):((c.lanes&y)!==0&&(Me(c,f),re(f,null,null,y),Ft()),C=c.memoizedState,U=f.memoizedState,C.parent!==S?(C={parent:S,cache:S},f.memoizedState=C,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=C),Ro(f,oi,S)):(S=U.cache,Ro(f,oi,S),S!==C.cache&&_l(f,[oi],y,!0))),ss(c,f,f.pendingProps.children,y),f.child;case 29:throw f.pendingProps}throw Error(s(156,f.tag))}function Ro(c,f,y){Ds?(w(co,f._currentValue),f._currentValue=y):(w(co,f._currentValue2),f._currentValue2=y)}function jr(c){var f=co.current;Ds?c._currentValue=f:c._currentValue2=f,M(co)}function Bu(c,f,y){for(;c!==null;){var S=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,S!==null&&(S.childLanes|=f)):S!==null&&(S.childLanes&f)!==f&&(S.childLanes|=f),c===y)break;c=c.return}}function _l(c,f,y,S){var C=c.child;for(C!==null&&(C.return=c);C!==null;){var U=C.dependencies;if(U!==null){var q=C.child;U=U.firstContext;t:for(;U!==null;){var rt=U;U=C;for(var St=0;St<f.length;St++)if(rt.context===f[St]){U.lanes|=y,rt=U.alternate,rt!==null&&(rt.lanes|=y),Bu(U.return,y,c),S||(q=null);break t}U=rt.next}}else if(C.tag===18){if(q=C.return,q===null)throw Error(s(341));q.lanes|=y,U=q.alternate,U!==null&&(U.lanes|=y),Bu(q,y,c),q=null}else q=C.child;if(q!==null)q.return=C;else for(q=C;q!==null;){if(q===c){q=null;break}if(C=q.sibling,C!==null){C.return=q.return,q=C;break}q=q.return}C=q}}function Du(c,f,y,S){c=null;for(var C=f,U=!1;C!==null;){if(!U){if((C.flags&524288)!==0)U=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var q=C.alternate;if(q===null)throw Error(s(387));if(q=q.memoizedProps,q!==null){var rt=C.type;Js(C.pendingProps.value,q.value)||(c!==null?c.push(rt):c=[rt])}}else if(C===wl.current){if(q=C.alternate,q===null)throw Error(s(387));q.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(c!==null?c.push(Qa):c=[Qa])}C=C.return}c!==null&&_l(f,c,y,S),f.flags|=262144}function Uu(c){for(c=c.firstContext;c!==null;){var f=c.context;if(!Js(Ds?f._currentValue:f._currentValue2,c.memoizedValue))return!0;c=c.next}return!1}function wo(c){sr=c,pa=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function as(c){return Ap(sr,c)}function Nu(c,f){return sr===null&&wo(c),Ap(c,f)}function Ap(c,f){var y=Ds?f._currentValue:f._currentValue2;if(f={context:f,memoizedValue:y,next:null},pa===null){if(c===null)throw Error(s(308));pa=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else pa=pa.next=f;return y}function Bo(){return{controller:new Hc,data:new Map,refCount:0}}function Ou(c){c.refCount--,c.refCount===0&&rv(ov,function(){c.controller.abort()})}function Sp(){var c=Mr.current;return c!==null?c:Xn.pooledCache}function dh(c,f){f===null?w(Mr,Mr.current):w(Mr,f.pool)}function Mp(){var c=Sp();return c===null?null:{parent:Ds?oi._currentValue:oi._currentValue2,pool:c}}function ks(c){c.flags|=4}function dc(c,f){if(c!==null&&c.child===f.child)return!1;if((f.flags&16)!==0)return!0;for(c=f.child;c!==null;){if((c.flags&13878)!==0||(c.subtreeFlags&13878)!==0)return!0;c=c.sibling}return!1}function xl(c,f,y,S){if(Vi)for(y=f.child;y!==null;){if(y.tag===5||y.tag===6)$u(c,y.stateNode);else if(!(y.tag===4||$n&&y.tag===27)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===f)break;for(;y.sibling===null;){if(y.return===null||y.return===f)return;y=y.return}y.sibling.return=y.return,y=y.sibling}else if(Na)for(var C=f.child;C!==null;){if(C.tag===5){var U=C.stateNode;y&&S&&(U=tm(U,C.type,C.memoizedProps)),$u(c,U)}else if(C.tag===6)U=C.stateNode,y&&S&&(U=em(U,C.memoizedProps)),$u(c,U);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)U=C.child,U!==null&&(U.return=C),xl(c,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===f)break;for(;C.sibling===null;){if(C.return===null||C.return===f)return;C=C.return}C.sibling.return=C.return,C=C.sibling}}function f0(c,f,y,S){if(Na)for(var C=f.child;C!==null;){if(C.tag===5){var U=C.stateNode;y&&S&&(U=tm(U,C.type,C.memoizedProps)),$p(c,U)}else if(C.tag===6)U=C.stateNode,y&&S&&(U=em(U,C.memoizedProps)),$p(c,U);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)U=C.child,U!==null&&(U.return=C),f0(c,C,!(C.memoizedProps!==null&&C.memoizedProps.mode==="manual"),!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===f)break;for(;C.sibling===null;){if(C.return===null||C.return===f)return;C=C.return}C.sibling.return=C.return,C=C.sibling}}function Lu(c,f){if(Na&&dc(c,f)){c=f.stateNode;var y=c.containerInfo,S=tf();f0(S,f,!1,!1),c.pendingChildren=S,ks(f),Ih(y,S)}}function ph(c,f,y,S){if(Vi)c.memoizedProps!==S&&ks(f);else if(Na){var C=c.stateNode,U=c.memoizedProps;if((c=dc(c,f))||U!==S){var q=ki.current;U=Bc(C,y,U,S,!c,null),U===C?f.stateNode=C:(no(U,y,S,q)&&ks(f),f.stateNode=U,c?xl(U,f,!1,!1):ks(f))}else f.stateNode=C}}function mh(c,f,y){if(jp(f,y)){if(c.flags|=16777216,!Oh(f,y))if(Io())c.flags|=8192;else throw Wo=uf,cf}else c.flags&=-16777217}function gh(c,f){if(Q0(f)){if(c.flags|=16777216,!bl(f))if(Io())c.flags|=8192;else throw Wo=uf,cf}else c.flags&=-16777217}function pc(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?N():536870912,c.lanes|=f,Tr|=f)}function mc(c,f){if(!Bn)switch(c.tailMode){case"hidden":f=c.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:S.sibling=null}}function di(c){var f=c.alternate!==null&&c.alternate.child===c.child,y=0,S=0;if(f)for(var C=c.child;C!==null;)y|=C.lanes|C.childLanes,S|=C.subtreeFlags&31457280,S|=C.flags&31457280,C.return=c,C=C.sibling;else for(C=c.child;C!==null;)y|=C.lanes|C.childLanes,S|=C.subtreeFlags,S|=C.flags,C.return=c,C=C.sibling;return c.subtreeFlags|=S,c.childLanes=y,f}function h0(c,f,y){var S=f.pendingProps;switch(bt(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return di(f),null;case 1:return di(f),null;case 3:return y=f.stateNode,S=null,c!==null&&(S=c.memoizedState.cache),f.memoizedState.cache!==S&&(f.flags|=2048),jr(oi),Ot(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(c===null||c.child===null)&&(Be(f)?ks(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,La!==null&&(Vu(La),La=null))),Lu(c,f),di(f),null;case 26:if(la){y=f.type;var C=f.memoizedState;return c===null?(ks(f),C!==null?(di(f),gh(f,C)):(di(f),mh(f,y,S))):C?C!==c.memoizedState?(ks(f),di(f),gh(f,C)):(di(f),f.flags&=-16777217):(Vi?c.memoizedProps!==S&&ks(f):ph(c,f,y,S),di(f),mh(f,y,S)),null}case 27:if($n){if(ie(f),y=_r.current,C=f.type,c!==null&&f.stateNode!=null)Vi?c.memoizedProps!==S&&ks(f):ph(c,f,C,S);else{if(!S){if(f.stateNode===null)throw Error(s(166));return di(f),null}c=ki.current,Be(f)?Ie(f,c):(c=$a(C,S,y,c,!0),f.stateNode=c,ks(f))}return di(f),null}case 5:if(ie(f),y=f.type,c!==null&&f.stateNode!=null)ph(c,f,y,S);else{if(!S){if(f.stateNode===null)throw Error(s(166));return di(f),null}c=ki.current,Be(f)?Ie(f,c):(C=Xp(y,S,_r.current,c,f),xl(C,f,!1,!1),f.stateNode=C,no(C,y,S,c)&&ks(f))}return di(f),mh(f,f.type,f.pendingProps),null;case 6:if(c&&f.stateNode!=null)y=c.memoizedProps,Vi?y!==S&&ks(f):Na&&(y!==S?(f.stateNode=qn(S,_r.current,ki.current,f),ks(f)):f.stateNode=c.stateNode);else{if(typeof S!="string"&&f.stateNode===null)throw Error(s(166));if(c=_r.current,y=ki.current,Be(f)){if(!cs)throw Error(s(176));if(c=f.stateNode,y=f.memoizedProps,S=null,C=us,C!==null)switch(C.tag){case 27:case 5:S=C.memoizedProps}am(c,y,f,S)||se(f)}else f.stateNode=qn(S,c,y,f)}return di(f),null;case 13:if(S=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(C=Be(f),S!==null&&S.dehydrated!==null){if(c===null){if(!C)throw Error(s(318));if(!cs)throw Error(s(344));if(C=f.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(s(317));Y0(C,f)}else Ve(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;di(f),C=!1}else La!==null&&(Vu(La),La=null),C=!0;if(!C)return f.flags&256?(Ye(f),f):(Ye(f),null)}if(Ye(f),(f.flags&128)!==0)return f.lanes=y,f;if(y=S!==null,c=c!==null&&c.memoizedState!==null,y){S=f.child,C=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(C=S.alternate.memoizedState.cachePool.pool);var U=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(U=S.memoizedState.cachePool.pool),U!==C&&(S.flags|=2048)}return y!==c&&y&&(f.child.flags|=8192),pc(f,f.updateQueue),di(f),null;case 4:return Ot(),Lu(c,f),c===null&&wi(f.stateNode.containerInfo),di(f),null;case 10:return jr(f.type),di(f),null;case 19:if(M(Xi),C=f.memoizedState,C===null)return di(f),null;if(S=(f.flags&128)!==0,U=C.rendering,U===null)if(S)mc(C,!1);else{if(ni!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(U=Vs(c),U!==null){for(f.flags|=128,mc(C,!1),c=U.updateQueue,f.updateQueue=c,pc(f,c),f.subtreeFlags=0,c=y,y=f.child;y!==null;)ju(y,c),y=y.sibling;return w(Xi,Xi.current&1|2),f.child}c=c.sibling}C.tail!==null&&Oa()>Vc&&(f.flags|=128,S=!0,mc(C,!1),f.lanes=4194304)}else{if(!S)if(c=Vs(U),c!==null){if(f.flags|=128,S=!0,c=c.updateQueue,f.updateQueue=c,pc(f,c),mc(C,!0),C.tail===null&&C.tailMode==="hidden"&&!U.alternate&&!Bn)return di(f),null}else 2*Oa()-C.renderingStartTime>Vc&&y!==536870912&&(f.flags|=128,S=!0,mc(C,!1),f.lanes=4194304);C.isBackwards?(U.sibling=f.child,f.child=U):(c=C.last,c!==null?c.sibling=U:f.child=U,C.last=U)}return C.tail!==null?(f=C.tail,C.rendering=f,C.tail=f.sibling,C.renderingStartTime=Oa(),f.sibling=null,c=Xi.current,w(Xi,S?c&1|2:c&1),f):(di(f),null);case 22:case 23:return Ye(f),Ci(),S=f.memoizedState!==null,c!==null?c.memoizedState!==null!==S&&(f.flags|=8192):S&&(f.flags|=8192),S?(y&536870912)!==0&&(f.flags&128)===0&&(di(f),f.subtreeFlags&6&&(f.flags|=8192)):di(f),y=f.updateQueue,y!==null&&pc(f,y.retryQueue),y=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),S=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==y&&(f.flags|=2048),c!==null&&M(Mr),null;case 24:return y=null,c!==null&&(y=c.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),jr(oi),di(f),null;case 25:return null}throw Error(s(156,f.tag))}function Sx(c,f){switch(bt(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return jr(oi),Ot(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return ie(f),null;case 13:if(Ye(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(s(340));Ve()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return M(Xi),null;case 4:return Ot(),null;case 10:return jr(f.type),null;case 22:case 23:return Ye(f),Ci(),c!==null&&M(Mr),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return jr(oi),null;case 25:return null;default:return null}}function d0(c,f){switch(bt(f),f.tag){case 3:jr(oi),Ot();break;case 26:case 27:case 5:ie(f);break;case 4:Ot();break;case 13:Ye(f);break;case 19:M(Xi);break;case 10:jr(f.type);break;case 22:case 23:Ye(f),Ci(),c!==null&&M(Mr);break;case 24:jr(oi)}}function Iu(c,f){try{var y=f.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var C=S.next;y=C;do{if((y.tag&c)===c){S=void 0;var U=y.create,q=y.inst;S=U(),q.destroy=S}y=y.next}while(y!==C)}}catch(rt){Vn(f,f.return,rt)}}function Do(c,f,y){try{var S=f.updateQueue,C=S!==null?S.lastEffect:null;if(C!==null){var U=C.next;S=U;do{if((S.tag&c)===c){var q=S.inst,rt=q.destroy;if(rt!==void 0){q.destroy=void 0,C=f;var St=y;try{rt()}catch(Yt){Vn(C,St,Yt)}}}S=S.next}while(S!==U)}}catch(Yt){Vn(f,f.return,Yt)}}function p0(c){var f=c.updateQueue;if(f!==null){var y=c.stateNode;try{Et(f,y)}catch(S){Vn(c,c.return,S)}}}function Xs(c,f,y){y.props=kr(c.type,c.memoizedProps),y.state=c.memoizedState;try{y.componentWillUnmount()}catch(S){Vn(c,f,S)}}function Ka(c,f){try{var y=c.ref;if(y!==null){var S=c.stateNode;switch(c.tag){case 26:case 27:case 5:var C=Cc(S);break;default:C=S}typeof y=="function"?c.refCleanup=y(C):y.current=C}}catch(U){Vn(c,f,U)}}function js(c,f){var y=c.ref,S=c.refCleanup;if(y!==null)if(typeof S=="function")try{S()}catch(C){Vn(c,f,C)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(C){Vn(c,f,C)}else y.current=null}function bp(c){var f=c.type,y=c.memoizedProps,S=c.stateNode;try{Tx(S,f,y,c)}catch(C){Vn(c,c.return,C)}}function Ep(c,f,y){try{D0(c.stateNode,c.type,y,f,c)}catch(S){Vn(c,c.return,S)}}function Tp(c){return c.tag===5||c.tag===3||(la?c.tag===26:!1)||($n?c.tag===27:!1)||c.tag===4}function Pu(c){t:for(;;){for(;c.sibling===null;){if(c.return===null||Tp(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&(!$n||c.tag!==27)&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue t;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Cp(c,f,y){var S=c.tag;if(S===5||S===6)c=c.stateNode,f?N0(y,c,f):Jp(y,c);else if(!(S===4||$n&&S===27)&&(c=c.child,c!==null))for(Cp(c,f,y),c=c.sibling;c!==null;)Cp(c,f,y),c=c.sibling}function Yr(c,f,y){var S=c.tag;if(S===5||S===6)c=c.stateNode,f?U0(y,c,f):w0(y,c);else if(!(S===4||$n&&S===27)&&(c=c.child,c!==null))for(Yr(c,f,y),c=c.sibling;c!==null;)Yr(c,f,y),c=c.sibling}function vh(c,f,y){c=c.containerInfo;try{Dc(c,y)}catch(S){Vn(f,f.return,S)}}function Fu(c,f){for(Uh(c.containerInfo),on=f;on!==null;)if(c=on,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,on=f;else for(;on!==null;){c=on;var y=c.alternate;switch(f=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&y!==null){f=void 0;var S=c,C=y.memoizedProps;y=y.memoizedState;var U=S.stateNode;try{var q=kr(S.type,C,S.elementType===S.type);f=U.getSnapshotBeforeUpdate(q,y),U.__reactInternalSnapshotBeforeUpdate=f}catch(rt){Vn(S,S.return,rt)}}break;case 3:(f&1024)!==0&&Vi&&F0(c.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(s(163))}if(f=c.sibling,f!==null){f.return=c.return,on=f;break}on=c.return}return q=Sn,Sn=!1,q}function yh(c,f,y){var S=y.flags;switch(y.tag){case 0:case 11:case 15:Wr(c,y),S&4&&Iu(5,y);break;case 1:if(Wr(c,y),S&4)if(c=y.stateNode,f===null)try{c.componentDidMount()}catch(rt){Vn(y,y.return,rt)}else{var C=kr(y.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(C,f,c.__reactInternalSnapshotBeforeUpdate)}catch(rt){Vn(y,y.return,rt)}}S&64&&p0(y),S&512&&Ka(y,y.return);break;case 3:if(Wr(c,y),S&64&&(S=y.updateQueue,S!==null)){if(c=null,y.child!==null)switch(y.child.tag){case 27:case 5:c=Cc(y.child.stateNode);break;case 1:c=y.child.stateNode}try{Et(S,c)}catch(rt){Vn(y,y.return,rt)}}break;case 26:if(la){Wr(c,y),S&512&&Ka(y,y.return);break}case 27:case 5:Wr(c,y),f===null&&S&4&&bp(y),S&512&&Ka(y,y.return);break;case 12:Wr(c,y);break;case 13:Wr(c,y),S&4&&_h(c,y);break;case 22:if(C=y.memoizedState!==null||br,!C){f=f!==null&&f.memoizedState!==null||Ai;var U=br,q=Ai;br=C,(Ai=f)&&!q?Kr(c,y,(y.subtreeFlags&8772)!==0):Wr(c,y),br=U,Ai=q}S&512&&(y.memoizedProps.mode==="manual"?Ka(y,y.return):js(y,y.return));break;default:Wr(c,y)}}function Rp(c){var f=c.alternate;f!==null&&(c.alternate=null,Rp(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&Ex(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function rs(c,f,y){for(y=y.child;y!==null;)Uo(c,f,y),y=y.sibling}function Uo(c,f,y){if(Ks&&typeof Ks.onCommitFiberUnmount=="function")try{Ks.onCommitFiberUnmount(Di,y)}catch{}switch(y.tag){case 26:if(la){Ai||js(y,f),rs(c,f,y),y.memoizedState?Ml(y.memoizedState):y.stateNode&&Uc(y.stateNode);break}case 27:if($n){Ai||js(y,f);var S=Xe,C=mn;Xe=y.stateNode,rs(c,f,y),jo(y.stateNode),Xe=S,mn=C;break}case 5:Ai||js(y,f);case 6:if(Vi){if(S=Xe,C=mn,Xe=null,rs(c,f,y),Xe=S,mn=C,Xe!==null)if(mn)try{O0(Xe,y.stateNode)}catch(U){Vn(y,f,U)}else try{Zp(Xe,y.stateNode)}catch(U){Vn(y,f,U)}}else rs(c,f,y);break;case 18:Vi&&Xe!==null&&(mn?ef(Xe,y.stateNode):W0(Xe,y.stateNode));break;case 4:Vi?(S=Xe,C=mn,Xe=y.stateNode.containerInfo,mn=!0,rs(c,f,y),Xe=S,mn=C):(Na&&vh(y.stateNode,y,tf()),rs(c,f,y));break;case 0:case 11:case 14:case 15:Ai||Do(2,y,f),Ai||Do(4,y,f),rs(c,f,y);break;case 1:Ai||(js(y,f),S=y.stateNode,typeof S.componentWillUnmount=="function"&&Xs(y,f,S)),rs(c,f,y);break;case 21:rs(c,f,y);break;case 22:Ai||js(y,f),Ai=(S=Ai)||y.memoizedState!==null,rs(c,f,y),Ai=S;break;default:rs(c,f,y)}}function _h(c,f){if(cs&&f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Bx(c)}catch(y){Vn(f,f.return,y)}}function m0(c){switch(c.tag){case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new kn),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new kn),f;default:throw Error(s(435,c.tag))}}function qr(c,f){var y=m0(c);f.forEach(function(S){var C=Ho.bind(null,c,S);y.has(S)||(y.add(S),S.then(C,C))})}function ws(c,f){var y=f.deletions;if(y!==null)for(var S=0;S<y.length;S++){var C=y[S],U=c,q=f;if(Vi){var rt=q;t:for(;rt!==null;){switch(rt.tag){case 27:case 5:Xe=rt.stateNode,mn=!1;break t;case 3:Xe=rt.stateNode.containerInfo,mn=!0;break t;case 4:Xe=rt.stateNode.containerInfo,mn=!0;break t}rt=rt.return}if(Xe===null)throw Error(s(160));Uo(U,q,C),Xe=null,mn=!1}else Uo(U,q,C);U=C.alternate,U!==null&&(U.return=null),C.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)wp(f,c),f=f.sibling}function wp(c,f){var y=c.alternate,S=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:ws(f,c),Ys(c),S&4&&(Do(3,c,c.return),Iu(3,c),Do(5,c,c.return));break;case 1:ws(f,c),Ys(c),S&512&&(Ai||y===null||js(y,y.return)),S&64&&br&&(c=c.updateQueue,c!==null&&(S=c.callbacks,S!==null&&(y=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=y===null?S:y.concat(S))));break;case 26:if(la){var C=mi;ws(f,c),Ys(c),S&512&&(Ai||y===null||js(y,y.return)),S&4&&(S=y!==null?y.memoizedState:null,f=c.memoizedState,y===null?f===null?c.stateNode===null?c.stateNode=sf(C,c.type,c.memoizedProps,c):af(C,c.type,c.stateNode):c.stateNode=J0(C,f,c.memoizedProps):S!==f?(S===null?y.stateNode!==null&&Uc(y.stateNode):Ml(S),f===null?af(C,c.type,c.stateNode):J0(C,f,c.memoizedProps)):f===null&&c.stateNode!==null&&Ep(c,c.memoizedProps,y.memoizedProps));break}case 27:if($n&&S&4&&c.alternate===null){C=c.stateNode;var U=c.memoizedProps;try{Xo(C),tv(c.type,U,C,c)}catch(he){Vn(c,c.return,he)}}case 5:if(ws(f,c),Ys(c),S&512&&(Ai||y===null||js(y,y.return)),Vi){if(c.flags&32){f=c.stateNode;try{Qp(f)}catch(he){Vn(c,c.return,he)}}S&4&&c.stateNode!=null&&(f=c.memoizedProps,Ep(c,f,y!==null?y.memoizedProps:f)),S&1024&&(um=!0)}break;case 6:if(ws(f,c),Ys(c),S&4&&Vi){if(c.stateNode===null)throw Error(s(162));S=c.memoizedProps,y=y!==null?y.memoizedProps:S,f=c.stateNode;try{B0(f,y,S)}catch(he){Vn(c,c.return,he)}}break;case 3:if(la?(Z0(),C=mi,mi=Vh(f.containerInfo),ws(f,c),mi=C):ws(f,c),Ys(c),S&4){if(Vi&&cs&&y!==null&&y.memoizedState.isDehydrated)try{wx(f.containerInfo)}catch(he){Vn(c,c.return,he)}if(Na){S=f.containerInfo,y=f.pendingChildren;try{Dc(S,y)}catch(he){Vn(c,c.return,he)}}}um&&(um=!1,g0(c));break;case 4:la?(y=mi,mi=Vh(c.stateNode.containerInfo),ws(f,c),Ys(c),mi=y):(ws(f,c),Ys(c)),S&4&&Na&&vh(c.stateNode,c,c.stateNode.pendingChildren);break;case 12:ws(f,c),Ys(c);break;case 13:ws(f,c),Ys(c),c.child.flags&8192&&c.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(Ls=Oa()),S&4&&(S=c.updateQueue,S!==null&&(c.updateQueue=null,qr(c,S)));break;case 22:S&512&&(Ai||y===null||js(y,y.return)),C=c.memoizedState!==null;var q=y!==null&&y.memoizedState!==null,rt=br,St=Ai;if(br=rt||C,Ai=St||q,ws(f,c),Ai=St,br=rt,Ys(c),f=c.stateNode,f._current=c,f._visibility&=-3,f._visibility|=f._pendingVisibility&2,S&8192&&(f._visibility=C?f._visibility&-2:f._visibility|1,C&&(f=br||Ai,y===null||q||f||gc(c)),Vi&&(c.memoizedProps===null||c.memoizedProps.mode!=="manual"))){t:if(y=null,Vi)for(f=c;;){if(f.tag===5||la&&f.tag===26||$n&&f.tag===27){if(y===null){q=y=f;try{U=q.stateNode,C?L0(U):P0(q.stateNode,q.memoizedProps)}catch(he){Vn(q,q.return,he)}}}else if(f.tag===6){if(y===null){q=f;try{var Yt=q.stateNode;C?I0(Yt):Cx(Yt,q.memoizedProps)}catch(he){Vn(q,q.return,he)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break t;for(;f.sibling===null;){if(f.return===null||f.return===c)break t;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}}S&4&&(S=c.updateQueue,S!==null&&(y=S.retryQueue,y!==null&&(S.retryQueue=null,qr(c,y))));break;case 19:ws(f,c),Ys(c),S&4&&(S=c.updateQueue,S!==null&&(c.updateQueue=null,qr(c,S)));break;case 21:break;default:ws(f,c),Ys(c)}}function Ys(c){var f=c.flags;if(f&2){try{if(Vi&&(!$n||c.tag!==27)){t:{for(var y=c.return;y!==null;){if(Tp(y)){var S=y;break t}y=y.return}throw Error(s(160))}switch(S.tag){case 27:if($n){var C=S.stateNode,U=Pu(c);Yr(c,U,C);break}case 5:var q=S.stateNode;S.flags&32&&(Qp(q),S.flags&=-33);var rt=Pu(c);Yr(c,rt,q);break;case 3:case 4:var St=S.stateNode.containerInfo,Yt=Pu(c);Cp(c,Yt,St);break;default:throw Error(s(161))}}}catch(he){Vn(c,c.return,he)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function g0(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;g0(f),f.tag===5&&f.flags&1024&&Lh(f.stateNode),c=c.sibling}}function Wr(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)yh(c,f.alternate,f),f=f.sibling}function gc(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:Do(4,f,f.return),gc(f);break;case 1:js(f,f.return);var y=f.stateNode;typeof y.componentWillUnmount=="function"&&Xs(f,f.return,y),gc(f);break;case 26:case 27:case 5:js(f,f.return),gc(f);break;case 22:js(f,f.return),f.memoizedState===null&&gc(f);break;default:gc(f)}c=c.sibling}}function Kr(c,f,y){for(y=y&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var S=f.alternate,C=c,U=f,q=U.flags;switch(U.tag){case 0:case 11:case 15:Kr(C,U,y),Iu(4,U);break;case 1:if(Kr(C,U,y),S=U,C=S.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Yt){Vn(S,S.return,Yt)}if(S=U,C=S.updateQueue,C!==null){var rt=S.stateNode;try{var St=C.shared.hiddenCallbacks;if(St!==null)for(C.shared.hiddenCallbacks=null,C=0;C<St.length;C++)ct(St[C],rt)}catch(Yt){Vn(S,S.return,Yt)}}y&&q&64&&p0(U),Ka(U,U.return);break;case 26:case 27:case 5:Kr(C,U,y),y&&S===null&&q&4&&bp(U),Ka(U,U.return);break;case 12:Kr(C,U,y);break;case 13:Kr(C,U,y),y&&q&4&&_h(C,U);break;case 22:U.memoizedState===null&&Kr(C,U,y),Ka(U,U.return);break;default:Kr(C,U,y)}f=f.sibling}}function xh(c,f){var y=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==y&&(c!=null&&c.refCount++,y!=null&&Ou(y))}function Hu(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Ou(c))}function Zi(c,f,y,S){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Bp(c,f,y,S),f=f.sibling}function Bp(c,f,y,S){var C=f.flags;switch(f.tag){case 0:case 11:case 15:Zi(c,f,y,S),C&2048&&Iu(9,f);break;case 3:Zi(c,f,y,S),C&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Ou(c)));break;case 12:if(C&2048){Zi(c,f,y,S),c=f.stateNode;try{var U=f.memoizedProps,q=U.id,rt=U.onPostCommit;typeof rt=="function"&&rt(q,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(St){Vn(f,f.return,St)}}else Zi(c,f,y,S);break;case 23:break;case 22:U=f.stateNode,f.memoizedState!==null?U._visibility&4?Zi(c,f,y,S):vs(c,f):U._visibility&4?Zi(c,f,y,S):(U._visibility|=4,os(c,f,y,S,(f.subtreeFlags&10256)!==0)),C&2048&&xh(f.alternate,f);break;case 24:Zi(c,f,y,S),C&2048&&Hu(f.alternate,f);break;default:Zi(c,f,y,S)}}function os(c,f,y,S,C){for(C=C&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var U=c,q=f,rt=y,St=S,Yt=q.flags;switch(q.tag){case 0:case 11:case 15:os(U,q,rt,St,C),Iu(8,q);break;case 23:break;case 22:var he=q.stateNode;q.memoizedState!==null?he._visibility&4?os(U,q,rt,St,C):vs(U,q):(he._visibility|=4,os(U,q,rt,St,C)),C&&Yt&2048&&xh(q.alternate,q);break;case 24:os(U,q,rt,St,C),C&&Yt&2048&&Hu(q.alternate,q);break;default:os(U,q,rt,St,C)}f=f.sibling}}function vs(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var y=c,S=f,C=S.flags;switch(S.tag){case 22:vs(y,S),C&2048&&xh(S.alternate,S);break;case 24:vs(y,S),C&2048&&Hu(S.alternate,S);break;default:vs(y,S)}f=f.sibling}}function Ra(c){if(c.subtreeFlags&ma)for(c=c.child;c!==null;)Ah(c),c=c.sibling}function Ah(c){switch(c.tag){case 26:Ra(c),c.flags&ma&&(c.memoizedState!==null?$0(mi,c.memoizedState,c.memoizedProps):Us(c.type,c.memoizedProps));break;case 5:Ra(c),c.flags&ma&&Us(c.type,c.memoizedProps);break;case 3:case 4:if(la){var f=mi;mi=Vh(c.stateNode.containerInfo),Ra(c),mi=f}else Ra(c);break;case 22:c.memoizedState===null&&(f=c.alternate,f!==null&&f.memoizedState!==null?(f=ma,ma=16777216,Ra(c),ma=f):Ra(c));break;default:Ra(c)}}function zu(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function No(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];on=S,Dp(S,c)}zu(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Sh(c),c=c.sibling}function Sh(c){switch(c.tag){case 0:case 11:case 15:No(c),c.flags&2048&&Do(9,c,c.return);break;case 3:No(c);break;case 12:No(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&4&&(c.return===null||c.return.tag!==13)?(f._visibility&=-5,Jr(c)):No(c);break;default:No(c)}}function Jr(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];on=S,Dp(S,c)}zu(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:Do(8,f,f.return),Jr(f);break;case 22:y=f.stateNode,y._visibility&4&&(y._visibility&=-5,Jr(f));break;default:Jr(f)}c=c.sibling}}function Dp(c,f){for(;on!==null;){var y=on;switch(y.tag){case 0:case 11:case 15:Do(8,y,f);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var S=y.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Ou(y.memoizedState.cache)}if(S=y.child,S!==null)S.return=y,on=S;else t:for(y=c;on!==null;){S=on;var C=S.sibling,U=S.return;if(Rp(S),S===y){on=null;break t}if(C!==null){C.return=U,on=C;break t}on=U}}}function vc(c){var f=S0(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(s(364));return f}if(c=Wp(c),c===null)throw Error(s(362));return c.stateNode.current}function Oo(c,f){var y=c.tag;switch(f.$$typeof){case Gc:if(c.type===f.value)return!0;break;case Fa:t:{for(f=f.value,c=[c,0],y=0;y<c.length;){var S=c[y++],C=S.tag,U=c[y++],q=f[U];if(C!==5&&C!==26&&C!==27||!wc(S)){for(;q!=null&&Oo(S,q);)U++,q=f[U];if(U===f.length){f=!0;break t}else for(S=S.child;S!==null;)c.push(S,U),S=S.sibling}}f=!1}return f;case fi:if((y===5||y===26||y===27)&&T0(c.stateNode,f.value))return!0;break;case Er:if((y===5||y===6||y===26||y===27)&&(c=E0(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case ar:if((y===5||y===26||y===27)&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Up(c){switch(c.$$typeof){case Gc:return"<"+(l(c.value)||"Unknown")+">";case Fa:return":has("+(Up(c)||"")+")";case fi:return'[role="'+c.value+'"]';case Er:return'"'+c.value+'"';case ar:return'[data-testname="'+c.value+'"]';default:throw Error(s(365))}}function qs(c,f){var y=[];c=[c,0];for(var S=0;S<c.length;){var C=c[S++],U=C.tag,q=c[S++],rt=f[q];if(U!==5&&U!==26&&U!==27||!wc(C)){for(;rt!=null&&Oo(C,rt);)q++,rt=f[q];if(q===f.length)y.push(C);else for(C=C.child;C!==null;)c.push(C,q),C=C.sibling}}return y}function Gu(c,f){if(!ko)throw Error(s(363));c=vc(c),c=qs(c,f),f=[],c=Array.from(c);for(var y=0;y<c.length;){var S=c[y++],C=S.tag;if(C===5||C===26||C===27)wc(S)||f.push(S.stateNode);else for(S=S.child;S!==null;)c.push(S),S=S.sibling}return f}function Ri(){if((Un&2)!==0&&bn!==0)return bn&-bn;if(tn.T!==null){var c=fa;return c!==0?c:fe()}return M0()}function Np(){ya===0&&(ya=(bn&536870912)===0||Bn?H():536870912);var c=ha.current;return c!==null&&(c.flags|=32),ya}function Qi(c,f,y){(c===Xn&&Kn===2||c.cancelPendingCommit!==null)&&(ls(c,0),Ws(c,bn,ya,!1)),Y(c,y),((Un&2)===0||c!==Xn)&&(c===Xn&&((Un&2)===0&&(uo|=y),ni===4&&Ws(c,bn,ya,!1)),Qt(c))}function Lo(c,f,y){if((Un&6)!==0)throw Error(s(327));var S=!y&&(f&60)===0&&(f&c.expiredLanes)===0||L(c,f),C=S?Lp(c,f):bh(c,f,!0),U=S;do{if(C===0){ga&&!S&&Ws(c,f,0,!1);break}else if(C===6)Ws(c,f,0,!za);else{if(y=c.current.alternate,U&&!yc(y)){C=bh(c,f,!1),U=!1;continue}if(C===2){if(U=f,c.errorRecoveryDisabledLanes&U)var q=0;else q=c.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){f=q;t:{var rt=c;C=Fl;var St=cs&&rt.current.memoizedState.isDehydrated;if(St&&(ls(rt,q).flags|=256),q=bh(rt,q,!1),q!==2){if(ji&&!St){rt.errorRecoveryDisabledLanes|=U,uo|=U,C=4;break t}U=Si,Si=C,U!==null&&Vu(U)}C=q}if(U=!1,C!==2)continue}}if(C===1){ls(c,0),Ws(c,f,0,!0);break}t:{switch(S=c,C){case 0:case 1:throw Error(s(345));case 4:if((f&4194176)===f){Ws(S,f,ya,!za);break t}break;case 2:Si=null;break;case 3:case 5:break;default:throw Error(s(329))}if(S.finishedWork=y,S.finishedLanes=f,(f&62914560)===f&&(U=Ls+300-Oa(),10<U)){if(Ws(S,f,ya,!za),I(S,0)!==0)break t;S.timeoutHandle=Fi(Mh.bind(null,S,y,Si,hf,$h,f,ya,uo,Tr,za,2,-0,0),U);break t}Mh(S,y,Si,hf,$h,f,ya,uo,Tr,za,0,-0,0)}}break}while(!0);Qt(c)}function Vu(c){Si===null?Si=c:Si.push.apply(Si,c)}function Mh(c,f,y,S,C,U,q,rt,St,Yt,he,be,Ce){var ln=f.subtreeFlags;if((ln&8192||(ln&16785408)===16785408)&&(Yp(),Ah(f),f=Hi(),f!==null)){c.cancelPendingCommit=f(Po.bind(null,c,y,S,C,q,rt,St,1,be,Ce)),Ws(c,U,q,!Yt);return}Po(c,y,S,C,q,rt,St,he,be,Ce)}function yc(c){for(var f=c;;){var y=f.tag;if((y===0||y===11||y===15)&&f.flags&16384&&(y=f.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var S=0;S<y.length;S++){var C=y[S],U=C.getSnapshot;C=C.value;try{if(!Js(U(),C))return!1}catch{return!1}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ws(c,f,y,S){f&=~ff,f&=~uo,c.suspendedLanes|=f,c.pingedLanes&=~f,S&&(c.warmLanes|=f),S=c.expirationTimes;for(var C=f;0<C;){var U=31-Ns(C),q=1<<U;S[U]=-1,C&=~q}y!==0&&et(c,y,f)}function ku(){return(Un&6)===0?(J(0),!1):!0}function _c(){if(Ke!==null){if(Kn===0)var c=Ke.return;else c=Ke,pa=sr=null,ne(c),Ko=null,Jo=0,c=Ke;for(;c!==null;)d0(c.alternate,c),c=c.return;Ke=null}}function ls(c,f){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;y!==Go&&(c.timeoutHandle=Go,Nh(y)),y=c.cancelPendingCommit,y!==null&&(c.cancelPendingCommit=null,y()),_c(),Xn=c,Ke=y=Ba(c.current,null),bn=f,Kn=0,_s=null,za=!1,ga=L(c,f),ji=!1,Tr=ya=ff=uo=va=ni=0,Si=Fl=null,$h=!1,(f&8)!==0&&(f|=f&32);var S=c.entangledLanes;if(S!==0)for(c=c.entanglements,S&=f;0<S;){var C=31-Ns(S),U=1<<C;f|=c[C],S&=~U}return xs=f,Z(),y}function aa(c,f){yn=null,tn.H=xi,f===Pc?(f=Pe(),Kn=3):f===cf?(f=Pe(),Kn=4):Kn=f===Zh?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,_s=f,Ke===null&&(ni=1,uc(c,yt(f,c.current)))}function Io(){var c=ha.current;return c===null?!0:(bn&4194176)===bn?ti===null:(bn&62914560)===bn||(bn&536870912)!==0?c===ti:!1}function dr(){var c=tn.H;return tn.H=xi,c===null?xi:c}function pr(){var c=tn.A;return tn.A=zc,c}function Zr(){ni=4,za||(bn&4194176)!==bn&&ha.current!==null||(ga=!0),(va&134217727)===0&&(uo&134217727)===0||Xn===null||Ws(Xn,bn,ya,!1)}function bh(c,f,y){var S=Un;Un|=2;var C=dr(),U=pr();(Xn!==c||bn!==f)&&(hf=null,ls(c,f)),f=!1;var q=ni;t:do try{if(Kn!==0&&Ke!==null){var rt=Ke,St=_s;switch(Kn){case 8:_c(),q=6;break t;case 3:case 2:case 6:ha.current===null&&(f=!0);var Yt=Kn;if(Kn=0,_s=null,wa(c,rt,St,Yt),y&&ga){q=0;break t}break;default:Yt=Kn,Kn=0,_s=null,wa(c,rt,St,Yt)}}Op(),q=ni;break}catch(he){aa(c,he)}while(!0);return f&&c.shellSuspendCounter++,pa=sr=null,Un=S,tn.H=C,tn.A=U,Ke===null&&(Xn=null,bn=0,Z()),q}function Op(){for(;Ke!==null;)pi(Ke)}function Lp(c,f){var y=Un;Un|=2;var S=dr(),C=pr();Xn!==c||bn!==f?(hf=null,Vc=Oa()+500,ls(c,f)):ga=L(c,f);t:do try{if(Kn!==0&&Ke!==null){f=Ke;var U=_s;e:switch(Kn){case 1:Kn=0,_s=null,wa(c,f,U,1);break;case 2:if(kt(U)){Kn=0,_s=null,In(f);break}f=function(){Kn===2&&Xn===c&&(Kn=7),Qt(c)},U.then(f,f);break t;case 3:Kn=7;break t;case 4:Kn=5;break t;case 7:kt(U)?(Kn=0,_s=null,In(f)):(Kn=0,_s=null,wa(c,f,U,7));break;case 5:var q=null;switch(Ke.tag){case 26:q=Ke.memoizedState;case 5:case 27:var rt=Ke,St=rt.type,Yt=rt.pendingProps;if(q?bl(q):Oh(St,Yt)){Kn=0,_s=null;var he=rt.sibling;if(he!==null)Ke=he;else{var be=rt.return;be!==null?(Ke=be,ra(be)):Ke=null}break e}}Kn=0,_s=null,wa(c,f,U,5);break;case 6:Kn=0,_s=null,wa(c,f,U,6);break;case 8:_c(),ni=6;break t;default:throw Error(s(462))}}Bs();break}catch(Ce){aa(c,Ce)}while(!0);return pa=sr=null,tn.H=S,tn.A=C,Un=y,Ke!==null?0:(Xn=null,bn=0,Z(),ni)}function Bs(){for(;Ke!==null&&!iv();)pi(Ke)}function pi(c){var f=u0(c.alternate,c,xs);c.memoizedProps=c.pendingProps,f===null?ra(c):Ke=f}function In(c){var f=c,y=f.alternate;switch(f.tag){case 15:case 0:f=s0(y,f,f.pendingProps,f.type,void 0,bn);break;case 11:f=s0(y,f,f.pendingProps,f.type.render,f.ref,bn);break;case 5:ne(f);default:d0(y,f),f=Ke=ju(f,xs),f=u0(y,f,xs)}c.memoizedProps=c.pendingProps,f===null?ra(c):Ke=f}function wa(c,f,y,S){pa=sr=null,ne(f),Ko=null,Jo=0;var C=f.return;try{if(xx(c,C,f,y,bn)){ni=1,uc(c,yt(y,c.current)),Ke=null;return}}catch(U){if(C!==null)throw Ke=C,U;ni=1,uc(c,yt(y,c.current)),Ke=null;return}f.flags&32768?(Bn||S===1?c=!0:ga||(bn&536870912)!==0?c=!1:(za=c=!0,(S===2||S===3||S===6)&&(S=ha.current,S!==null&&S.tag===13&&(S.flags|=16384))),Eh(f,c)):ra(f)}function ra(c){var f=c;do{if((f.flags&32768)!==0){Eh(f,za);return}c=f.return;var y=h0(f.alternate,f,xs);if(y!==null){Ke=y;return}if(f=f.sibling,f!==null){Ke=f;return}Ke=f=c}while(f!==null);ni===0&&(ni=5)}function Eh(c,f){do{var y=Sx(c.alternate,c);if(y!==null){y.flags&=32767,Ke=y;return}if(y=c.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!f&&(c=c.sibling,c!==null)){Ke=c;return}Ke=c=y}while(c!==null);ni=6,Ke=null}function Po(c,f,y,S,C,U,q,rt,St,Yt){var he=tn.T,be=io();try{ys(2),tn.T=null,v0(c,f,y,S,be,C,U,q,rt,St,Yt)}finally{tn.T=he,ys(be)}}function v0(c,f,y,S,C,U,q,rt){do Ja();while(Cr!==null);if((Un&6)!==0)throw Error(s(327));var St=c.finishedWork;if(S=c.finishedLanes,St===null)return null;if(c.finishedWork=null,c.finishedLanes=0,St===c.current)throw Error(s(177));c.callbackNode=null,c.callbackPriority=0,c.cancelPendingCommit=null;var Yt=St.lanes|St.childLanes;if(Yt|=nr,ht(c,S,Yt,U,q,rt),c===Xn&&(Ke=Xn=null,bn=0),(St.subtreeFlags&10256)===0&&(St.flags&10256)===0||rr||(rr=!0,el=Yt,td=y,$r(qh,function(){return Ja(),null})),y=(St.flags&15990)!==0,(St.subtreeFlags&15990)!==0||y?(y=tn.T,tn.T=null,U=io(),ys(2),q=Un,Un|=4,Fu(c,St),wp(St,c),A0(c.containerInfo),c.current=St,yh(c,St.alternate,St),jh(),Un=q,ys(U),tn.T=y):c.current=St,rr?(rr=!1,Cr=c,Hl=S):Ip(c,Yt),Yt=c.pendingLanes,Yt===0&&(tl=null),F(St.stateNode),Qt(c),f!==null)for(C=c.onRecoverableError,St=0;St<f.length;St++)Yt=f[St],C(Yt.value,{componentStack:Yt.stack});return(Hl&3)!==0&&Ja(),Yt=c.pendingLanes,(S&4194218)!==0&&(Yt&42)!==0?c===ed?kc++:(kc=0,ed=c):kc=0,J(0),null}function Ip(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,Ou(f)))}function Ja(){if(Cr!==null){var c=Cr,f=el;el=0;var y=mt(Hl),S=32>y?32:y;y=tn.T;var C=io();try{if(ys(S),tn.T=null,Cr===null)var U=!1;else{S=td,td=null;var q=Cr,rt=Hl;if(Cr=null,Hl=0,(Un&6)!==0)throw Error(s(331));var St=Un;if(Un|=4,Sh(q.current),Bp(q,q.current,rt,S),Un=St,J(0,!1),Ks&&typeof Ks.onPostCommitFiberRoot=="function")try{Ks.onPostCommitFiberRoot(Di,q)}catch{}U=!0}return U}finally{ys(C),tn.T=y,Ip(c,f)}}return!1}function xc(c,f,y){f=yt(y,f),f=hc(c.stateNode,f,2),c=_e(c,f,2),c!==null&&(Y(c,2),Qt(c))}function Vn(c,f,y){if(c.tag===3)xc(c,c,y);else for(;f!==null;){if(f.tag===3){xc(f,c,y);break}else if(f.tag===1){var S=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(tl===null||!tl.has(S))){c=yt(y,c),y=mp(2),S=_e(f,y,2),S!==null&&($g(y,S,f,c),Y(S,2),Qt(S));break}}f=f.return}}function Al(c,f,y){var S=c.pingCache;if(S===null){S=c.pingCache=new Ha;var C=new Set;S.set(f,C)}else C=S.get(f),C===void 0&&(C=new Set,S.set(f,C));C.has(y)||(ji=!0,C.add(y),c=Pp.bind(null,c,f,y),f.then(c,c))}function Pp(c,f,y){var S=c.pingCache;S!==null&&S.delete(f),c.pingedLanes|=c.suspendedLanes&y,c.warmLanes&=~y,Xn===c&&(bn&y)===y&&(ni===4||ni===3&&(bn&62914560)===bn&&300>Oa()-Ls?(Un&2)===0&&ls(c,0):ff|=y,Tr===bn&&(Tr=0)),Qt(c)}function Fo(c,f){f===0&&(f=N()),c=Kt(c,f),c!==null&&(Y(c,f),Qt(c))}function Qr(c){var f=c.memoizedState,y=0;f!==null&&(y=f.retryLane),Fo(c,y)}function Ho(c,f){var y=0;switch(c.tag){case 13:var S=c.stateNode,C=c.memoizedState;C!==null&&(y=C.retryLane);break;case 19:S=c.stateNode;break;case 22:S=c.stateNode._retryCache;break;default:throw Error(s(314))}S!==null&&S.delete(f),Fo(c,y)}function $r(c,f){return rf(c,f)}function Fp(c,f,y,S){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xu(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Ba(c,f){var y=c.alternate;return y===null?(y=e(c.tag,f,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=f,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&31457280,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,f=c.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y.refCleanup=c.refCleanup,y}function ju(c,f){c.flags&=31457282;var y=c.alternate;return y===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=y.childLanes,c.lanes=y.lanes,c.child=y.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=y.memoizedProps,c.memoizedState=y.memoizedState,c.updateQueue=y.updateQueue,c.type=y.type,f=y.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function mr(c,f,y,S,C,U){var q=0;if(S=c,typeof c=="function")Xu(c)&&(q=1);else if(typeof c=="string")q=la&&$n?nf(c,y,ki.current)?26:vr(c)?27:5:la?nf(c,y,ki.current)?26:5:$n&&vr(c)?27:5;else t:switch(c){case zo:return _i(y.children,C,U,f);case Ku:q=8,C|=24;break;case wh:return c=e(12,y,f,C|2),c.elementType=wh,c.lanes=U,c;case Bh:return c=e(13,y,f,C),c.elementType=Bh,c.lanes=U,c;case bc:return c=e(19,y,f,C),c.elementType=bc,c.lanes=U,c;case Gp:return Yu(y,C,U,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case Ju:case Za:q=10;break t;case zp:q=9;break t;case Zu:q=11;break t;case Dh:q=14;break t;case Ua:q=16,S=null;break t}q=29,y=Error(s(130,c===null?"null":typeof c,"")),S=null}return f=e(q,y,f,C),f.elementType=c,f.type=S,f.lanes=U,f}function _i(c,f,y,S){return c=e(7,c,S,f),c.lanes=y,c}function Yu(c,f,y,S){c=e(22,c,S,f),c.elementType=Gp,c.lanes=y;var C={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var U=C._current;if(U===null)throw Error(s(456));if((C._pendingVisibility&2)===0){var q=Kt(U,2);q!==null&&(C._pendingVisibility|=2,Qi(q,U,2))}},attach:function(){var U=C._current;if(U===null)throw Error(s(456));if((C._pendingVisibility&2)!==0){var q=Kt(U,2);q!==null&&(C._pendingVisibility&=-3,Qi(q,U,2))}}};return c.stateNode=C,c}function Th(c,f,y){return c=e(6,c,null,f),c.lanes=y,c}function Hp(c,f,y){return f=e(4,c.children!==null?c.children:[],c.key,f),f.lanes=y,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function Mx(c,f,y,S,C,U,q,rt){this.tag=1,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Go,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=O(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O(0),this.hiddenUpdates=O(null),this.identifierPrefix=S,this.onUncaughtError=C,this.onCaughtError=U,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=rt,this.incompleteTransitions=new Map}function y0(c,f,y,S,C,U,q,rt,St,Yt,he,be){return c=new Mx(c,f,y,q,rt,St,Yt,be),f=1,U===!0&&(f|=24),U=e(3,null,null,f),c.current=U,U.stateNode=c,f=Bo(),f.refCount++,c.pooledCache=f,f.refCount++,U.memoizedState={element:S,isDehydrated:y,cache:f},ae(U),c}function Pi(c){return c?(c=Yo,c):Yo}function Ch(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(s(188)):(c=Object.keys(c).join(","),Error(s(268,c)));return c=x(f),c=c!==null?b(c):null,c===null?null:Cc(c.stateNode)}function Ac(c,f,y,S,C,U){C=Pi(C),S.context===null?S.context=C:S.pendingContext=C,S=Re(f),S.payload={element:y},U=U===void 0?null:U,U!==null&&(S.callback=U),y=_e(c,S,f),y!==null&&(Qi(y,c,f),de(y,c,f))}function Sc(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<f?y:f}}function qu(c,f){Sc(c,f),(c=c.alternate)&&Sc(c,f)}var cn={},Mc=ep(),oa=m8(),Rh=Object.assign,bx=Symbol.for("react.element"),Wu=Symbol.for("react.transitional.element"),Da=Symbol.for("react.portal"),zo=Symbol.for("react.fragment"),Ku=Symbol.for("react.strict_mode"),wh=Symbol.for("react.profiler"),Ju=Symbol.for("react.provider"),zp=Symbol.for("react.consumer"),Za=Symbol.for("react.context"),Zu=Symbol.for("react.forward_ref"),Bh=Symbol.for("react.suspense"),bc=Symbol.for("react.suspense_list"),Dh=Symbol.for("react.memo"),Ua=Symbol.for("react.lazy"),Gp=Symbol.for("react.offscreen"),_0=Symbol.for("react.memo_cache_sentinel"),to=Symbol.iterator,Vp=Symbol.for("react.client.reference"),tn=Mc.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gr,eo,Sl=!1,Ec=Array.isArray,kp=t.rendererVersion,Qu=t.rendererPackageName,Tc=t.extraDevToolsConfig,Cc=t.getPublicInstance,x0=t.getRootHostContext,Rc=t.getChildHostContext,Uh=t.prepareForCommit,A0=t.resetAfterCommit,Xp=t.createInstance,$u=t.appendInitialChild,no=t.finalizeInitialChildren,un=t.shouldSetTextContent,qn=t.createTextInstance,Fi=t.scheduleTimeout,Nh=t.cancelTimeout,Go=t.noTimeout,Ds=t.isPrimaryRenderer;t.warnsIfNotActing;var Vi=t.supportsMutation,Na=t.supportsPersistence,cs=t.supportsHydration,S0=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var wi=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var ys=t.setCurrentUpdatePriority,io=t.getCurrentUpdatePriority,M0=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var b0=t.shouldAttemptEagerTransition,Ex=t.detachDeletedInstance;t.requestPostPaintCallback;var jp=t.maySuspendCommit,Oh=t.preloadInstance,Yp=t.startSuspendingCommit,Us=t.suspendInstance,Hi=t.waitForCommitToBeReady,Vo=t.NotPendingTransition,Qa=t.HostTransitionContext,Lh=t.resetFormInstance;t.bindToConsole;var qp=t.supportsMicrotasks,so=t.scheduleMicrotask,ko=t.supportsTestSelectors,Wp=t.findFiberRoot,Kp=t.getBoundingRect,E0=t.getTextContent,wc=t.isHiddenSubtree,T0=t.matchAccessibilityRole,C0=t.setFocusIfFocusable,R0=t.setupIntersectionObserver,w0=t.appendChild,Jp=t.appendChildToContainer,B0=t.commitTextUpdate,Tx=t.commitMount,D0=t.commitUpdate,U0=t.insertBefore,N0=t.insertInContainerBefore,Zp=t.removeChild,O0=t.removeChildFromContainer,Qp=t.resetTextContent,L0=t.hideInstance,I0=t.hideTextInstance,P0=t.unhideInstance,Cx=t.unhideTextInstance,F0=t.clearContainer,Bc=t.cloneInstance,tf=t.createContainerChildSet,$p=t.appendChildToContainerChildSet,Ih=t.finalizeContainerChildren,Dc=t.replaceContainerChildren,tm=t.cloneHiddenInstance,em=t.cloneHiddenTextInstance,Ph=t.isSuspenseInstancePending,Fh=t.isSuspenseInstanceFallback,H0=t.getSuspenseInstanceFallbackErrorDetails,z0=t.registerSuspenseInstanceRetry,nm=t.canHydrateFormStateMarker,G0=t.isFormStateMarkerMatching,im=t.getNextHydratableSibling,Hh=t.getFirstHydratableChild,V0=t.getFirstHydratableChildWithinContainer,k0=t.getFirstHydratableChildWithinSuspenseInstance,Rx=t.canHydrateInstance,sm=t.canHydrateTextInstance,X0=t.canHydrateSuspenseInstance,j0=t.hydrateInstance,am=t.hydrateTextInstance,Y0=t.hydrateSuspenseInstance,q0=t.getNextHydratableInstanceAfterSuspenseInstance,wx=t.commitHydratedContainer,Bx=t.commitHydratedSuspenseInstance,W0=t.clearSuspenseBoundary,ef=t.clearSuspenseBoundaryFromContainer,zh=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var Gh=t.validateHydratableInstance,K0=t.validateHydratableTextInstance,la=t.supportsResources,nf=t.isHostHoistableType,Vh=t.getHoistableRoot,rm=t.getResource,J0=t.acquireResource,Ml=t.releaseResource,sf=t.hydrateHoistable,af=t.mountHoistable,Uc=t.unmountHoistable,kh=t.createHoistableInstance,Z0=t.prepareToCommitHoistables,Q0=t.mayResourceSuspendCommit,bl=t.preloadResource,$0=t.suspendResource,$n=t.supportsSingletons,$a=t.resolveSingletonInstance,Xo=t.clearSingleton,tv=t.acquireSingletonInstance,jo=t.releaseSingletonInstance,vr=t.isHostSingletonType,Bi=[],ao=-1,Yo={},Ns=Math.clz32?Math.clz32:B,ev=Math.log,nv=Math.LN2,yr=128,El=4194304,rf=oa.unstable_scheduleCallback,Xh=oa.unstable_cancelCallback,iv=oa.unstable_shouldYield,jh=oa.unstable_requestPaint,Oa=oa.unstable_now,Yh=oa.unstable_ImmediatePriority,sv=oa.unstable_UserBlockingPriority,qh=oa.unstable_NormalPriority,Dx=oa.unstable_IdlePriority,av=oa.log,$i=oa.unstable_setDisableYieldValue,Di=null,Ks=null,Js=typeof Object.is=="function"?Object.is:$,om=new WeakMap,Tl=[],Cl=0,Rl=null,Nc=0,ca=[],ua=0,qo=null,tr=1,er="",ki=E(null),Oc=E(null),_r=E(null),wl=E(null),us=null,fs=null,Bn=!1,La=null,ts=!1,of=Error(s(519)),Ia=[],Bl=0,nr=0,lf=null,ro=null,Dl=!1,ai=!1,lm=!1,Lc=0,Ic=null,Ul=0,fa=0,Nl=null,oo=!1,Ol=!1,xr=Object.prototype.hasOwnProperty,Pc=Error(s(460)),cf=Error(s(474)),uf={then:function(){}},Wo=null,Ko=null,Jo=0,Zo=si(!0),Ar=si(!1),ri=E(null),Fc=E(0),ha=E(null),ti=null,Xi=E(0),lo=0,yn=null,qe=null,Dn=null,Pa=!1,Ll=!1,Qo=!1,Wh=0,Il=0,es=null,ir=0,Kh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},xi={readContext:as,use:at,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useLayoutEffect:Gn,useInsertionEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useSyncExternalStore:Gn,useId:Gn};xi.useCacheRefresh=Gn,xi.useMemoCache=Gn,xi.useHostTransitionStatus=Gn,xi.useFormState=Gn,xi.useActionState=Gn,xi.useOptimistic=Gn;var $o={readContext:as,use:at,useCallback:function(c,f){return G().memoizedState=[c,f===void 0?null:f],c},useContext:as,useEffect:rh,useImperativeHandle:function(c,f,y){y=y!=null?y.concat([c]):null,Su(4194308,4,oh.bind(null,f,c),y)},useLayoutEffect:function(c,f){return Su(4194308,4,c,f)},useInsertionEffect:function(c,f){Su(4,2,c,f)},useMemo:function(c,f){var y=G();f=f===void 0?null:f;var S=c();if(Qo){K(!0);try{c()}finally{K(!1)}}return y.memoizedState=[S,f],S},useReducer:function(c,f,y){var S=G();if(y!==void 0){var C=y(f);if(Qo){K(!0);try{y(f)}finally{K(!1)}}}else C=f;return S.memoizedState=S.baseState=C,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:C},S.queue=c,c=c.dispatch=ch.bind(null,yn,c),[S.memoizedState,c]},useRef:function(c){var f=G();return c={current:c},f.memoizedState=c},useState:function(c){c=De(c);var f=c.queue,y=pp.bind(null,yn,f);return f.dispatch=y,[c.memoizedState,y]},useDebugValue:Eo,useDeferredValue:function(c,f){var y=G();return Eu(y,c,f)},useTransition:function(){var c=De(!1);return c=ac.bind(null,yn,c.queue,!0,!1),G().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,y){var S=yn,C=G();if(Bn){if(y===void 0)throw Error(s(407));y=y()}else{if(y=f(),Xn===null)throw Error(s(349));(bn&60)!==0||pe(S,f,y)}C.memoizedState=y;var U={value:y,getSnapshot:f};return C.queue=U,rh(ke.bind(null,S,U,c),[c]),S.flags|=2048,Cs(9,ye.bind(null,S,U,y,f),{destroy:void 0},null),y},useId:function(){var c=G(),f=Xn.identifierPrefix;if(Bn){var y=er,S=tr;y=(S&~(1<<32-Ns(S)-1)).toString(32)+y,f=":"+f+"R"+y,y=Wh++,0<y&&(f+="H"+y.toString(32)),f+=":"}else y=ir++,f=":"+f+"r"+y.toString(32)+":";return c.memoizedState=f},useCacheRefresh:function(){return G().memoizedState=dp.bind(null,yn)}};$o.useMemoCache=gt,$o.useHostTransitionStatus=Tu,$o.useFormState=pn,$o.useActionState=pn,$o.useOptimistic=function(c){var f=G();f.memoizedState=f.baseState=c;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=y,f=oc.bind(null,yn,!0,y),y.dispatch=f,[c,f]};var Os={readContext:as,use:at,useCallback:yl,useContext:as,useEffect:up,useImperativeHandle:lh,useInsertionEffect:Zg,useLayoutEffect:bu,useMemo:fp,useReducer:Vt,useRef:fr,useState:function(){return Vt(Tt)},useDebugValue:Eo,useDeferredValue:function(c,f){var y=tt();return hp(y,qe.memoizedState,c,f)},useTransition:function(){var c=Vt(Tt)[0],f=tt().memoizedState;return[typeof c=="boolean"?c:st(c),f]},useSyncExternalStore:ve,useId:rc};Os.useCacheRefresh=Vr,Os.useMemoCache=gt,Os.useHostTransitionStatus=Tu,Os.useFormState=ui,Os.useActionState=ui,Os.useOptimistic=function(c,f){var y=tt();return ze(y,qe,c,f)};var da={readContext:as,use:at,useCallback:yl,useContext:as,useEffect:up,useImperativeHandle:lh,useInsertionEffect:Zg,useLayoutEffect:bu,useMemo:fp,useReducer:ee,useRef:fr,useState:function(){return ee(Tt)},useDebugValue:Eo,useDeferredValue:function(c,f){var y=tt();return qe===null?Eu(y,c,f):hp(y,qe.memoizedState,c,f)},useTransition:function(){var c=ee(Tt)[0],f=tt().memoizedState;return[typeof c=="boolean"?c:st(c),f]},useSyncExternalStore:ve,useId:rc};da.useCacheRefresh=Vr,da.useMemoCache=gt,da.useHostTransitionStatus=Tu,da.useFormState=Ji,da.useActionState=Ji,da.useOptimistic=function(c,f){var y=tt();return qe!==null?ze(y,qe,c,f):(y.baseState=c,[c,y.queue.dispatch])};var Sr={isMounted:function(c){return(c=c._reactInternals)?v(c)===c:!1},enqueueSetState:function(c,f,y){c=c._reactInternals;var S=Ri(),C=Re(S);C.payload=f,y!=null&&(C.callback=y),f=_e(c,C,S),f!==null&&(Qi(f,c,S),de(f,c,S))},enqueueReplaceState:function(c,f,y){c=c._reactInternals;var S=Ri(),C=Re(S);C.tag=1,C.payload=f,y!=null&&(C.callback=y),f=_e(c,C,S),f!==null&&(Qi(f,c,S),de(f,c,S))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var y=Ri(),S=Re(y);S.tag=2,f!=null&&(S.callback=f),f=_e(c,S,y),f!==null&&(Qi(f,c,y),de(f,c,y))}},Jh=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},Zh=Error(s(461)),ei=!1,Qh={dehydrated:null,treeContext:null,retryLane:0},co=E(null),sr=null,pa=null,Hc=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(y,S){c.push(S)}};this.abort=function(){f.aborted=!0,c.forEach(function(y){return y()})}},rv=oa.unstable_scheduleCallback,ov=oa.unstable_NormalPriority,oi={$$typeof:Za,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},cm=tn.S;tn.S=function(c,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&ue(c,f),cm!==null&&cm(c,f)};var Mr=E(null),br=!1,Ai=!1,um=!1,kn=typeof WeakSet=="function"?WeakSet:Set,on=null,Sn=!1,Xe=null,mn=!1,mi=null,ma=8192,zc={getCacheForType:function(c){var f=as(oi),y=f.data.get(c);return y===void 0&&(y=c(),f.data.set(c,y)),y}},Gc=0,Fa=1,fi=2,ar=3,Er=4;if(typeof Symbol=="function"&&Symbol.for){var Pl=Symbol.for;Gc=Pl("selector.component"),Fa=Pl("selector.has_pseudo_class"),fi=Pl("selector.role"),ar=Pl("selector.test_id"),Er=Pl("selector.text")}var Ha=typeof WeakMap=="function"?WeakMap:Map,Un=0,Xn=null,Ke=null,bn=0,Kn=0,_s=null,za=!1,ga=!1,ji=!1,xs=0,ni=0,va=0,uo=0,ff=0,ya=0,Tr=0,Fl=null,Si=null,$h=!1,Ls=0,Vc=1/0,hf=null,tl=null,rr=!1,Cr=null,Hl=0,el=0,td=null,kc=0,ed=null;return cn.attemptContinuousHydration=function(c){if(c.tag===13){var f=Kt(c,67108864);f!==null&&Qi(f,c,67108864),qu(c,67108864)}},cn.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=Ri(),y=Kt(c,f);y!==null&&Qi(y,c,f),qu(c,f)}},cn.attemptSynchronousHydration=function(c){switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var f=D(c.pendingLanes);if(f!==0){for(c.pendingLanes|=2,c.entangledLanes|=2;f;){var y=1<<31-Ns(f);c.entanglements[1]|=y,f&=~y}Qt(c),(Un&6)===0&&(Vc=Oa()+500,J(0))}}break;case 13:f=Kt(c,2),f!==null&&Qi(f,c,2),ku(),qu(c,2)}},cn.batchedUpdates=function(c,f){return c(f)},cn.createComponentSelector=function(c){return{$$typeof:Gc,value:c}},cn.createContainer=function(c,f,y,S,C,U,q,rt,St,Yt){return y0(c,f,!1,null,y,S,U,q,rt,St,Yt,null)},cn.createHasPseudoClassSelector=function(c){return{$$typeof:Fa,value:c}},cn.createHydrationContainer=function(c,f,y,S,C,U,q,rt,St,Yt,he,be,Ce){return c=y0(y,S,!0,c,C,U,rt,St,Yt,he,be,Ce),c.context=Pi(null),y=c.current,S=Ri(),C=Re(S),C.callback=f??null,_e(y,C,S),c.current.lanes=S,Y(c,S),Qt(c),c},cn.createPortal=function(c,f,y){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Da,key:S==null?null:""+S,children:c,containerInfo:f,implementation:y}},cn.createRoleSelector=function(c){return{$$typeof:fi,value:c}},cn.createTestNameSelector=function(c){return{$$typeof:ar,value:c}},cn.createTextSelector=function(c){return{$$typeof:Er,value:c}},cn.defaultOnCaughtError=function(c){console.error(c)},cn.defaultOnRecoverableError=function(c){Jh(c)},cn.defaultOnUncaughtError=function(c){Jh(c)},cn.deferredUpdates=function(c){var f=tn.T,y=io();try{return ys(32),tn.T=null,c()}finally{ys(y),tn.T=f}},cn.discreteUpdates=function(c,f,y,S,C){var U=tn.T,q=io();try{return ys(2),tn.T=null,c(f,y,S,C)}finally{ys(q),tn.T=U,Un===0&&(Vc=Oa()+500)}},cn.findAllNodes=Gu,cn.findBoundingRects=function(c,f){if(!ko)throw Error(s(363));f=Gu(c,f),c=[];for(var y=0;y<f.length;y++)c.push(Kp(f[y]));for(f=c.length-1;0<f;f--){y=c[f];for(var S=y.x,C=S+y.width,U=y.y,q=U+y.height,rt=f-1;0<=rt;rt--)if(f!==rt){var St=c[rt],Yt=St.x,he=Yt+St.width,be=St.y,Ce=be+St.height;if(S>=Yt&&U>=be&&C<=he&&q<=Ce){c.splice(f,1);break}else if(S!==Yt||y.width!==St.width||Ce<U||be>q){if(!(U!==be||y.height!==St.height||he<S||Yt>C)){Yt>S&&(St.width+=Yt-S,St.x=S),he<C&&(St.width=C-Yt),c.splice(f,1);break}}else{be>U&&(St.height+=be-U,St.y=U),Ce<q&&(St.height=q-be),c.splice(f,1);break}}}return c},cn.findHostInstance=Ch,cn.findHostInstanceWithNoPortals=function(c){return c=x(c),c=c!==null?R(c):null,c===null?null:Cc(c.stateNode)},cn.findHostInstanceWithWarning=function(c){return Ch(c)},cn.flushPassiveEffects=Ja,cn.flushSyncFromReconciler=function(c){var f=Un;Un|=1;var y=tn.T,S=io();try{if(ys(2),tn.T=null,c)return c()}finally{ys(S),tn.T=y,Un=f,(Un&6)===0&&J(0)}},cn.flushSyncWork=ku,cn.focusWithin=function(c,f){if(!ko)throw Error(s(363));for(c=vc(c),f=qs(c,f),f=Array.from(f),c=0;c<f.length;){var y=f[c++],S=y.tag;if(!wc(y)){if((S===5||S===26||S===27)&&C0(y.stateNode))return!0;for(y=y.child;y!==null;)f.push(y),y=y.sibling}}return!1},cn.getFindAllNodesFailureDescription=function(c,f){if(!ko)throw Error(s(363));var y=0,S=[];c=[vc(c),0];for(var C=0;C<c.length;){var U=c[C++],q=U.tag,rt=c[C++],St=f[rt];if((q!==5&&q!==26&&q!==27||!wc(U))&&(Oo(U,St)&&(S.push(Up(St)),rt++,rt>y&&(y=rt)),rt<f.length))for(U=U.child;U!==null;)c.push(U,rt),U=U.sibling}if(y<f.length){for(c=[];y<f.length;y++)c.push(Up(f[y]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},cn.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 27:case 5:return Cc(c.child.stateNode);default:return c.child.stateNode}},cn.injectIntoDevTools=function(){var c={bundleType:0,version:kp,rendererPackageName:Qu,currentDispatcherRef:tn,findFiberByHostInstance:S0,reconcilerVersion:"19.0.0"};if(Tc!==null&&(c.rendererConfig=Tc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{Di=f.inject(c),Ks=f}catch{}c=!!f.checkDCE}}return c},cn.isAlreadyRendering=function(){return!1},cn.observeVisibleRects=function(c,f,y,S){if(!ko)throw Error(s(363));c=Gu(c,f);var C=R0(c,y,S).disconnect;return{disconnect:function(){C()}}},cn.shouldError=function(){return null},cn.shouldSuspend=function(){return!1},cn.startHostTransition=function(c,f,y,S){if(c.tag!==5)throw Error(s(476));var C=hr(c).queue;ac(c,C,f,Vo,y===null?n:function(){var U=hr(c).next.queue;return To(c,U,{},Ri()),y(S)})},cn.updateContainer=function(c,f,y,S){var C=f.current,U=Ri();return Ac(C,U,c,f,y,S),U},cn.updateContainerSync=function(c,f,y,S){return f.tag===0&&Ja(),Ac(f.current,2,c,f,y,S),2},cn},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})}(h1)),h1.exports}var r2;function v8(){return r2||(r2=1,f1.exports=g8()),f1.exports}var y8=v8();const _8=ES(y8);var m1={exports:{}},g1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o2;function x8(){return o2||(o2=1,function(i){function t(F,K){var $=F.length;F.push(K);t:for(;0<$;){var yt=$-1>>>1,X=F[yt];if(0<s(X,K))F[yt]=K,F[$]=X,$=yt;else break t}}function e(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var K=F[0],$=F.pop();if($!==K){F[0]=$;t:for(var yt=0,X=F.length,lt=X>>>1;yt<lt;){var xt=2*(yt+1)-1,bt=F[xt],ot=xt+1,Ot=F[ot];if(0>s(bt,$))ot<X&&0>s(Ot,bt)?(F[yt]=Ot,F[ot]=$,yt=ot):(F[yt]=bt,F[xt]=$,yt=xt);else if(ot<X&&0>s(Ot,$))F[yt]=Ot,F[ot]=$,yt=ot;else break t}}return K}function s(F,K){var $=F.sortIndex-K.sortIndex;return $!==0?$:F.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var l=Date,u=l.now();i.unstable_now=function(){return l.now()-u}}var d=[],p=[],g=1,v=null,_=3,x=!1,b=!1,R=!1,E=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function B(F){for(var K=e(p);K!==null;){if(K.callback===null)n(p);else if(K.startTime<=F)n(p),K.sortIndex=K.expirationTime,t(d,K);else break;K=e(p)}}function D(F){if(R=!1,B(F),!b)if(e(d)!==null)b=!0,dt();else{var K=e(p);K!==null&&mt(D,K.startTime-F)}}var I=!1,L=-1,V=5,H=-1;function N(){return!(i.unstable_now()-H<V)}function O(){if(I){var F=i.unstable_now();H=F;var K=!0;try{t:{b=!1,R&&(R=!1,M(L),L=-1),x=!0;var $=_;try{e:{for(B(F),v=e(d);v!==null&&!(v.expirationTime>F&&N());){var yt=v.callback;if(typeof yt=="function"){v.callback=null,_=v.priorityLevel;var X=yt(v.expirationTime<=F);if(F=i.unstable_now(),typeof X=="function"){v.callback=X,B(F),K=!0;break e}v===e(d)&&n(d),B(F)}else n(d);v=e(d)}if(v!==null)K=!0;else{var lt=e(p);lt!==null&&mt(D,lt.startTime-F),K=!1}}break t}finally{v=null,_=$,x=!1}K=void 0}}finally{K?Y():I=!1}}}var Y;if(typeof w=="function")Y=function(){w(O)};else if(typeof MessageChannel<"u"){var ht=new MessageChannel,et=ht.port2;ht.port1.onmessage=O,Y=function(){et.postMessage(null)}}else Y=function(){E(O,0)};function dt(){I||(I=!0,Y())}function mt(F,K){L=E(function(){F(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(F){F.callback=null},i.unstable_continueExecution=function(){b||x||(b=!0,dt())},i.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<F?Math.floor(1e3/F):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return e(d)},i.unstable_next=function(F){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var $=_;_=K;try{return F()}finally{_=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(F,K){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var $=_;_=F;try{return K()}finally{_=$}},i.unstable_scheduleCallback=function(F,K,$){var yt=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?yt+$:yt):$=yt,F){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=$+X,F={id:g++,callback:K,priorityLevel:F,startTime:$,expirationTime:X,sortIndex:-1},$>yt?(F.sortIndex=$,t(p,F),e(d)===null&&F===e(p)&&(R?(M(L),L=-1):R=!0,mt(D,$-yt))):(F.sortIndex=X,t(d,F),b||x||(b=!0,dt())),F},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(F){var K=_;return function(){var $=_;_=K;try{return F.apply(this,arguments)}finally{_=$}}}}(g1)),g1}var l2;function A8(){return l2||(l2=1,m1.exports=x8()),m1.exports}var c2=A8();const S8=i=>typeof i=="object"&&typeof i.then=="function",Vf=[];function s3(i,t,e=(n,s)=>n===s){if(i===t)return!0;if(!i||!t)return!1;const n=i.length;if(t.length!==n)return!1;for(let s=0;s<n;s++)if(!e(i[s],t[s]))return!1;return!0}function a3(i,t=null,e=!1,n={}){t===null&&(t=[i]);for(const r of Vf)if(s3(t,r.keys,r.equal)){if(e)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!e)throw r.promise}const s={keys:t,equal:n.equal,remove:()=>{const r=Vf.indexOf(s);r!==-1&&Vf.splice(r,1)},promise:(S8(i)?i:i(...t)).then(r=>{s.response=r,n.lifespan&&n.lifespan>0&&(s.timeout=setTimeout(s.remove,n.lifespan))}).catch(r=>s.error=r)};if(Vf.push(s),!e)throw s.promise}const M8=(i,t,e)=>a3(i,t,!1,e),b8=(i,t,e)=>void a3(i,t,!0,e),E8=i=>{if(i===void 0||i.length===0)Vf.splice(0,Vf.length);else{const t=Vf.find(e=>s3(i,e.keys,e.equal));t&&t.remove()}};function WM(i,t,e){if(!i)return;if(e(i)===!0)return i;let n=t?i.return:i.child;for(;n;){const s=WM(n,t,e);if(s)return s;n=t?null:n.sibling}}function r3(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const KM=r3(Rt.createContext(null));class o3 extends Rt.Component{render(){return Rt.createElement(KM.Provider,{value:this._reactInternals},this.props.children)}}function l3(){const i=Rt.useContext(KM);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=Rt.useId();return Rt.useMemo(()=>{for(const e of[i,i==null?void 0:i.alternate]){if(!e)continue;const n=WM(e,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===t)return!0;r=r.next}});if(n)return n}},[i,t])}const T8=Symbol.for("react.context"),C8=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===T8;function R8(){const i=l3(),[t]=Rt.useState(()=>new Map);t.clear();let e=i;for(;e;){const n=e.type;C8(n)&&n!==KM&&!t.has(n)&&t.set(n,Rt.use(r3(n))),e=e.return}return t}function w8(){const i=R8();return Rt.useMemo(()=>Array.from(i.keys()).reduce((t,e)=>n=>Rt.createElement(t,null,Rt.createElement(e.Provider,{...n,value:i.get(e)})),t=>Rt.createElement(o3,{...t})),[i])}function c3(i){let t=i.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const u3=i=>i&&i.isOrthographicCamera,B8=i=>i&&i.hasOwnProperty("current"),D8=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),qg=((i,t)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?Rt.useLayoutEffect:Rt.useEffect;function JM(i){const t=Rt.useRef(i);return qg(()=>void(t.current=i),[i]),t}function U8(){const i=l3(),t=w8();return Rt.useMemo(()=>({children:e})=>{const s=!!WM(i,!0,r=>r.type===Rt.StrictMode)?Rt.StrictMode:Rt.Fragment;return it.jsx(s,{children:it.jsx(t,{children:e})})},[i,t])}function N8({set:i}){return qg(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const O8=(i=>(i=class extends Rt.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function f3(i){var t;const e=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],e),i[1]):i}function Ed(i){var t;return(t=i.__r3f)==null?void 0:t.root.getState()}const Mi={obj:i=>i===Object(i)&&!Mi.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,t,{arrays:e="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof t||!!i!=!!t)return!1;if(Mi.str(i)||Mi.num(i)||Mi.boo(i))return i===t;const r=Mi.obj(i);if(r&&n==="reference")return i===t;const l=Mi.arr(i);if(l&&e==="reference")return i===t;if((l||r)&&i===t)return!0;let u;for(u in i)if(!(u in t))return!1;if(r&&e==="shallow"&&n==="shallow"){for(u in s?t:i)if(!Mi.equ(i[u],t[u],{strict:s,objects:"reference"}))return!1}else for(u in s?t:i)if(i[u]!==t[u])return!1;if(Mi.und(u)){if(l&&i.length===0&&t.length===0||r&&Object.keys(i).length===0&&Object.keys(t).length===0)return!0;if(i!==t)return!1}return!0}};function L8(i){const t={nodes:{},materials:{},meshes:{}};return i&&i.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material),e.isMesh&&!t.meshes[e.name]&&(t.meshes[e.name]=e)}),t}function I8(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const t in i){const e=i[t];(e==null?void 0:e.type)!=="Scene"&&(e==null||e.dispose==null||e.dispose())}}const h3=["children","key","ref"];function P8(i){const t={};for(const e in i)h3.includes(e)||(t[e]=i[e]);return t}function R_(i,t,e,n){const s=i;let r=s==null?void 0:s.__r3f;return r||(r={root:t,type:e,parent:null,children:[],props:P8(n),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=r)),r}function bg(i,t){let e=i[t];if(!t.includes("-"))return{root:i,key:t,target:e};e=i;for(const s of t.split("-")){var n;t=s,i=e,e=(n=e)==null?void 0:n[t]}return{root:i,key:t,target:e}}const u2=/-\d+$/;function w_(i,t){if(Mi.str(t.props.attach)){if(u2.test(t.props.attach)){const s=t.props.attach.replace(u2,""),{root:r,key:l}=bg(i.object,s);Array.isArray(r[l])||(r[l]=[])}const{root:e,key:n}=bg(i.object,t.props.attach);t.previousAttach=e[n],e[n]=t.object}else Mi.fun(t.props.attach)&&(t.previousAttach=t.props.attach(i.object,t.object))}function B_(i,t){if(Mi.str(t.props.attach)){const{root:e,key:n}=bg(i.object,t.props.attach),s=t.previousAttach;s===void 0?delete e[n]:e[n]=s}else t.previousAttach==null||t.previousAttach(i.object,t.object);delete t.previousAttach}const mS=[...h3,"args","dispose","attach","object","onUpdate","dispose"],f2=new Map;function F8(i){let t=f2.get(i.constructor);try{t||(t=new i.constructor,f2.set(i.constructor,t))}catch{}return t}function H8(i,t){const e={};for(const n in t)if(!mS.includes(n)&&!Mi.equ(t[n],i.props[n])){e[n]=t[n];for(const s in t)s.startsWith(`${n}-`)&&(e[s]=t[s])}for(const n in i.props){if(mS.includes(n)||t.hasOwnProperty(n))continue;const{root:s,key:r}=bg(i.object,n);if(s.constructor&&s.constructor.length===0){const l=F8(s);Mi.und(l)||(e[r]=l[r])}else e[r]=0}return e}const z8=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],G8=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function ol(i,t){var e;const n=i.__r3f,s=n&&c3(n).getState(),r=n==null?void 0:n.eventCount;for(const u in t){let d=t[u];if(mS.includes(u))continue;if(n&&G8.test(u)){typeof d=="function"?n.handlers[u]=d:delete n.handlers[u],n.eventCount=Object.keys(n.handlers).length;continue}if(d===void 0)continue;let{root:p,key:g,target:v}=bg(i,u);if(v instanceof Jd&&d instanceof Jd)v.mask=d.mask;else if(v instanceof xe&&D8(d))v.set(d);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof v.copy=="function"&&d!=null&&d.constructor&&v.constructor===d.constructor)v.copy(d);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&Array.isArray(d))typeof v.fromArray=="function"?v.fromArray(d):v.set(...d);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof d=="number")typeof v.setScalar=="function"?v.setScalar(d):v.set(d);else{var l;p[g]=d,s&&!s.linear&&z8.includes(g)&&(l=p[g])!=null&&l.isTexture&&p[g].format===Ki&&p[g].type===Ca&&(p[g].colorSpace=Fs)}}if(n!=null&&n.parent&&s!=null&&s.internal&&(e=n.object)!=null&&e.isObject3D&&r!==n.eventCount){const u=n.object,d=s.internal.interaction.indexOf(u);d>-1&&s.internal.interaction.splice(d,1),n.eventCount&&u.raycast!==null&&s.internal.interaction.push(u)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&cp(n),i}function cp(i){var t;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const e=(t=i.root)==null||t.getState==null?void 0:t.getState();e&&e.internal.frames===0&&e.invalidate()}function d3(i,t){i.manual||(u3(i)?(i.left=t.width/-2,i.right=t.width/2,i.top=t.height/2,i.bottom=t.height/-2):i.aspect=t.width/t.height,i.updateProjectionMatrix())}const Sa=i=>i==null?void 0:i.isObject3D;function yy(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function p3(i,t,e,n){const s=e.get(t);s&&(e.delete(t),e.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function V8(i,t){const{internal:e}=i.getState();e.interaction=e.interaction.filter(n=>n!==t),e.initialHits=e.initialHits.filter(n=>n!==t),e.hovered.forEach((n,s)=>{(n.eventObject===t||n.object===t)&&e.hovered.delete(s)}),e.capturedMap.forEach((n,s)=>{p3(e.capturedMap,t,n,s)})}function k8(i){function t(d){const{internal:p}=i.getState(),g=d.offsetX-p.initialClick[0],v=d.offsetY-p.initialClick[1];return Math.round(Math.sqrt(g*g+v*v))}function e(d){return d.filter(p=>["Move","Over","Enter","Out","Leave"].some(g=>{var v;return(v=p.__r3f)==null?void 0:v.handlers["onPointer"+g]}))}function n(d,p){const g=i.getState(),v=new Set,_=[],x=p?p(g.internal.interaction):g.internal.interaction;for(let M=0;M<x.length;M++){const w=Ed(x[M]);w&&(w.raycaster.camera=void 0)}g.previousRoot||g.events.compute==null||g.events.compute(d,g);function b(M){const w=Ed(M);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var B;w.events.compute==null||w.events.compute(d,w,(B=w.previousRoot)==null?void 0:B.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(M,!0):[]}let R=x.flatMap(b).sort((M,w)=>{const B=Ed(M.object),D=Ed(w.object);return!B||!D?M.distance-w.distance:D.events.priority-B.events.priority||M.distance-w.distance}).filter(M=>{const w=yy(M);return v.has(w)?!1:(v.add(w),!0)});g.events.filter&&(R=g.events.filter(R,g));for(const M of R){let w=M.object;for(;w;){var E;(E=w.__r3f)!=null&&E.eventCount&&_.push({...M,eventObject:w}),w=w.parent}}if("pointerId"in d&&g.internal.capturedMap.has(d.pointerId))for(let M of g.internal.capturedMap.get(d.pointerId).values())v.has(yy(M.intersection))||_.push(M.intersection);return _}function s(d,p,g,v){if(d.length){const _={stopped:!1};for(const x of d){let b=Ed(x.object);if(b||x.object.traverseAncestors(R=>{const E=Ed(R);if(E)return b=E,!1}),b){const{raycaster:R,pointer:E,camera:M,internal:w}=b,B=new Q(E.x,E.y,0).unproject(M),D=N=>{var O,Y;return(O=(Y=w.capturedMap.get(N))==null?void 0:Y.has(x.eventObject))!=null?O:!1},I=N=>{const O={intersection:x,target:p.target};w.capturedMap.has(N)?w.capturedMap.get(N).set(x.eventObject,O):w.capturedMap.set(N,new Map([[x.eventObject,O]])),p.target.setPointerCapture(N)},L=N=>{const O=w.capturedMap.get(N);O&&p3(w.capturedMap,x.eventObject,O,N)};let V={};for(let N in p){let O=p[N];typeof O!="function"&&(V[N]=O)}let H={...x,...V,pointer:E,intersections:d,stopped:_.stopped,delta:g,unprojectedPoint:B,ray:R.ray,camera:M,stopPropagation(){const N="pointerId"in p&&w.capturedMap.get(p.pointerId);if((!N||N.has(x.eventObject))&&(H.stopped=_.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(O=>O.eventObject===x.eventObject))){const O=d.slice(0,d.indexOf(x));r([...O,x])}},target:{hasPointerCapture:D,setPointerCapture:I,releasePointerCapture:L},currentTarget:{hasPointerCapture:D,setPointerCapture:I,releasePointerCapture:L},nativeEvent:p};if(v(H),_.stopped===!0)break}}}return d}function r(d){const{internal:p}=i.getState();for(const g of p.hovered.values())if(!d.length||!d.find(v=>v.object===g.object&&v.index===g.index&&v.instanceId===g.instanceId)){const _=g.eventObject.__r3f;if(p.hovered.delete(yy(g)),_!=null&&_.eventCount){const x=_.handlers,b={...g,intersections:d};x.onPointerOut==null||x.onPointerOut(b),x.onPointerLeave==null||x.onPointerLeave(b)}}}function l(d,p){for(let g=0;g<p.length;g++){const v=p[g].__r3f;v==null||v.handlers.onPointerMissed==null||v.handlers.onPointerMissed(d)}}function u(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return p=>{const{internal:g}=i.getState();"pointerId"in p&&g.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{g.capturedMap.has(p.pointerId)&&(g.capturedMap.delete(p.pointerId),r([]))})}}return function(g){const{onPointerMissed:v,internal:_}=i.getState();_.lastEvent.current=g;const x=d==="onPointerMove",b=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",E=n(g,x?e:void 0),M=b?t(g):0;d==="onPointerDown"&&(_.initialClick=[g.offsetX,g.offsetY],_.initialHits=E.map(B=>B.eventObject)),b&&!E.length&&M<=2&&(l(g,_.interaction),v&&v(g)),x&&r(E);function w(B){const D=B.eventObject,I=D.__r3f;if(!(I!=null&&I.eventCount))return;const L=I.handlers;if(x){if(L.onPointerOver||L.onPointerEnter||L.onPointerOut||L.onPointerLeave){const V=yy(B),H=_.hovered.get(V);H?H.stopped&&B.stopPropagation():(_.hovered.set(V,B),L.onPointerOver==null||L.onPointerOver(B),L.onPointerEnter==null||L.onPointerEnter(B))}L.onPointerMove==null||L.onPointerMove(B)}else{const V=L[d];V?(!b||_.initialHits.includes(D))&&(l(g,_.interaction.filter(H=>!_.initialHits.includes(H))),V(B)):b&&_.initialHits.includes(D)&&l(g,_.interaction.filter(H=>!_.initialHits.includes(H)))}}s(E,g,M,w)}}return{handlePointer:u}}const h2=i=>!!(i!=null&&i.render),ZM=Rt.createContext(null),X8=(i,t)=>{const e=i3((u,d)=>{const p=new Q,g=new Q,v=new Q;function _(M=d().camera,w=g,B=d().size){const{width:D,height:I,top:L,left:V}=B,H=D/I;w.isVector3?v.copy(w):v.set(...w);const N=M.getWorldPosition(p).distanceTo(v);if(u3(M))return{width:D/M.zoom,height:I/M.zoom,top:L,left:V,factor:1,distance:N,aspect:H};{const O=M.fov*Math.PI/180,Y=2*Math.tan(O/2)*N,ht=Y*(D/I);return{width:ht,height:Y,top:L,left:V,factor:D/ht,distance:N,aspect:H}}}let x;const b=M=>u(w=>({performance:{...w.performance,current:M}})),R=new Wt;return{set:u,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>i(d(),M),advance:(M,w)=>t(M,w,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new zM,pointer:R,mouse:R,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=d();x&&clearTimeout(x),M.performance.current!==M.performance.min&&b(M.performance.min),x=setTimeout(()=>b(d().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:_},setEvents:M=>u(w=>({...w,events:{...w.events,...M}})),setSize:(M,w,B=0,D=0)=>{const I=d().camera,L={width:M,height:w,top:B,left:D};u(V=>({size:L,viewport:{...V.viewport,..._(I,g,L)}}))},setDpr:M=>u(w=>{const B=f3(M);return{viewport:{...w.viewport,dpr:B,initialDpr:w.viewport.initialDpr||B}}}),setFrameloop:(M="always")=>{const w=d().clock;w.stop(),w.elapsedTime=0,M!=="never"&&(w.start(),w.elapsedTime=0),u(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:Rt.createRef(),active:!1,frames:0,priority:0,subscribe:(M,w,B)=>{const D=d().internal;return D.priority=D.priority+(w>0?1:0),D.subscribers.push({ref:M,priority:w,store:B}),D.subscribers=D.subscribers.sort((I,L)=>I.priority-L.priority),()=>{const I=d().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(w>0?1:0),I.subscribers=I.subscribers.filter(L=>L.ref!==M))}}}}}),n=e.getState();let s=n.size,r=n.viewport.dpr,l=n.camera;return e.subscribe(()=>{const{camera:u,size:d,viewport:p,gl:g,set:v}=e.getState();if(d.width!==s.width||d.height!==s.height||p.dpr!==r){s=d,r=p.dpr,d3(u,d),p.dpr>0&&g.setPixelRatio(p.dpr);const _=typeof HTMLCanvasElement<"u"&&g.domElement instanceof HTMLCanvasElement;g.setSize(d.width,d.height,_)}u!==l&&(l=u,v(_=>({viewport:{..._.viewport,..._.viewport.getCurrentViewport(u)}})))}),e.subscribe(u=>i(u)),e};function QM(){const i=Rt.useContext(ZM);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function Ma(i=e=>e,t){return QM()(i,t)}function Wg(i,t=0){const e=QM(),n=e.getState().internal.subscribe,s=JM(i);return qg(()=>n(s,t,e),[t,n,e]),null}const d2=new WeakMap,j8=i=>{var t;return typeof i=="function"&&(i==null||(t=i.prototype)==null?void 0:t.constructor)===i};function m3(i,t){return function(e,...n){let s;return j8(e)?(s=d2.get(e),s||(s=new e,d2.set(e,s))):s=e,i&&i(s),Promise.all(n.map(r=>new Promise((l,u)=>s.load(r,d=>{Sa(d==null?void 0:d.scene)&&Object.assign(d,L8(d.scene)),l(d)},t,d=>u(new Error(`Could not load ${r}: ${d==null?void 0:d.message}`))))))}}function gl(i,t,e,n){const s=Array.isArray(t)?t:[t],r=M8(m3(e,n),[i,...s],{equal:Mi.equ});return Array.isArray(t)?r:r[0]}gl.preload=function(i,t,e){const n=Array.isArray(t)?t:[t];return b8(m3(e),[i,...n])};gl.clear=function(i,t){const e=Array.isArray(t)?t:[t];return E8([i,...e])};function Y8(i){const t=_8(i);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Rt.version}),t}const g3=0,tp={},q8=/^three(?=[A-Z])/,vx=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let W8=0;const K8=i=>typeof i=="function";function v3(i){if(K8(i)){const t=`${W8++}`;return tp[t]=i,t}else Object.assign(tp,i)}function y3(i,t){const e=vx(i),n=tp[e];if(i!=="primitive"&&!n)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function J8(i,t,e){var n;return i=vx(i)in tp?i:i.replace(q8,""),y3(i,t),i==="primitive"&&(n=t.object)!=null&&n.__r3f&&delete t.object.__r3f,R_(t.object,e,i,t)}function Z8(i){if(!i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?B_(i.parent,i):Sa(i.object)&&(i.object.visible=!1),i.isHidden=!0,cp(i)}}function _3(i){if(i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?w_(i.parent,i):Sa(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,cp(i)}}function $M(i,t,e){const n=t.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!t.object){var s,r;const l=tp[vx(t.type)];t.object=(s=t.props.object)!=null?s:new l(...(r=t.props.args)!=null?r:[]),t.object.__r3f=t}if(ol(t.object,t.props),t.props.attach)w_(i,t);else if(Sa(t.object)&&Sa(i.object)){const l=i.object.children.indexOf(e==null?void 0:e.object);if(e&&l!==-1){const u=i.object.children.indexOf(t.object);if(u!==-1){i.object.children.splice(u,1);const d=u<l?l-1:l;i.object.children.splice(d,0,t.object)}else t.object.parent=i.object,i.object.children.splice(l,0,t.object),t.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:t.object})}else i.object.add(t.object)}for(const l of t.children)$M(t,l);cp(t)}}function v1(i,t){t&&(t.parent=i,i.children.push(t),$M(i,t))}function p2(i,t,e){if(!t||!e)return;t.parent=i;const n=i.children.indexOf(e);n!==-1?i.children.splice(n,0,t):i.children.push(t),$M(i,t,e)}function x3(i){if(typeof i.dispose=="function"){const t=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():c2.unstable_scheduleCallback(c2.unstable_IdlePriority,t)}}function gS(i,t,e){if(!t)return;t.parent=null;const n=i.children.indexOf(t);n!==-1&&i.children.splice(n,1),t.props.attach?B_(i,t):Sa(t.object)&&Sa(i.object)&&(i.object.remove(t.object),V8(c3(t),t.object));const s=t.props.dispose!==null&&e!==!1;for(let r=t.children.length-1;r>=0;r--){const l=t.children[r];gS(t,l,s)}t.children.length=0,delete t.object.__r3f,s&&t.type!=="primitive"&&t.object.type!=="Scene"&&x3(t.object),e===void 0&&cp(t)}function Q8(i,t){for(const e of[i,i.alternate])if(e!==null)if(typeof e.ref=="function"){e.refCleanup==null||e.refCleanup();const n=e.ref(t);typeof n=="function"&&(e.refCleanup=n)}else e.ref&&(e.ref.current=t)}const Oy=[];function $8(){for(const[e]of Oy){const n=e.parent;if(n){e.props.attach?B_(n,e):Sa(e.object)&&Sa(n.object)&&n.object.remove(e.object);for(const s of e.children)s.props.attach?B_(e,s):Sa(s.object)&&Sa(e.object)&&e.object.remove(s.object)}e.isHidden&&_3(e),e.object.__r3f&&delete e.object.__r3f,e.type!=="primitive"&&x3(e.object)}for(const[e,n,s]of Oy){e.props=n;const r=e.parent;if(r){var i,t;const l=tp[vx(e.type)];e.object=(i=e.props.object)!=null?i:new l(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,Q8(s,e.object),ol(e.object,e.props),e.props.attach?w_(r,e):Sa(e.object)&&Sa(r.object)&&r.object.add(e.object);for(const u of e.children)u.props.attach?w_(e,u):Sa(u.object)&&Sa(e.object)&&e.object.add(u.object);cp(e)}}Oy.length=0}const y1=()=>{},m2={};let _y=g3;const t9=0,e9=4,D_=Y8({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:J8,removeChild:gS,appendChild:v1,appendInitialChild:v1,insertBefore:p2,appendChildToContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||v1(e,t)},removeChildFromContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||gS(e,t)},insertInContainerBefore(i,t,e){const n=i.getState().scene.__r3f;!t||!e||!n||p2(n,t,e)},getRootHostContext:()=>m2,getChildHostContext:()=>m2,commitUpdate(i,t,e,n,s){var r,l,u;y3(t,n);let d=!1;if((i.type==="primitive"&&e.object!==n.object||((r=n.args)==null?void 0:r.length)!==((l=e.args)==null?void 0:l.length)||(u=n.args)!=null&&u.some((g,v)=>{var _;return g!==((_=e.args)==null?void 0:_[v])}))&&(d=!0),d)Oy.push([i,{...n},s]);else{const g=H8(i,n);Object.keys(g).length&&(Object.assign(i.props,g),ol(i.object,g))}(s.sibling===null||(s.flags&e9)===t9)&&$8()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i==null?void 0:i.object,prepareForCommit:()=>null,preparePortalMount:i=>R_(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Z8,unhideInstance:_3,createTextInstance:y1,hideTextInstance:y1,unhideTextInstance:y1,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:Rt.createContext(null),setCurrentUpdatePriority(i){_y=i},getCurrentUpdatePriority(){return _y},resolveUpdatePriority(){var i;if(_y!==g3)return _y;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ny.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ny.ContinuousEventPriority;default:return Ny.DefaultEventPriority}},resetFormInstance(){}}),eh=new Map,Td={objects:"shallow",strict:!1};function n9(i,t){if(!t&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:e,height:n,top:s,left:r}=i.parentElement.getBoundingClientRect();return{width:e,height:n,top:s,left:r}}else if(!t&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function i9(i){const t=eh.get(i),e=t==null?void 0:t.fiber,n=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=n||X8(_S,v2),l=e||D_.createContainer(r,Ny.ConcurrentRoot,null,!1,null,"",s,s,s,null);t||eh.set(i,{fiber:l,store:r});let u,d,p=!1,g=null;return{async configure(v={}){let _;g=new Promise(lt=>_=lt);let{gl:x,size:b,scene:R,events:E,onCreated:M,shadows:w=!1,linear:B=!1,flat:D=!1,legacy:I=!1,orthographic:L=!1,frameloop:V="always",dpr:H=[1,2],performance:N,raycaster:O,camera:Y,onPointerMissed:ht}=v,et=r.getState(),dt=et.gl;if(!et.gl){const lt={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},xt=typeof x=="function"?await x(lt):x;h2(xt)?dt=xt:dt=new qM({...lt,...x}),et.set({gl:dt})}let mt=et.raycaster;mt||et.set({raycaster:mt=new XM});const{params:F,...K}=O||{};if(Mi.equ(K,mt,Td)||ol(mt,{...K}),Mi.equ(F,mt.params,Td)||ol(mt,{params:{...mt.params,...F}}),!et.camera||et.camera===d&&!Mi.equ(d,Y,Td)){d=Y;const lt=Y==null?void 0:Y.isCamera,xt=lt?Y:L?new Fr(0,0,0,0,.1,1e3):new bi(75,0,.1,1e3);lt||(xt.position.z=5,Y&&(ol(xt,Y),xt.manual||("aspect"in Y||"left"in Y||"right"in Y||"bottom"in Y||"top"in Y)&&(xt.manual=!0,xt.updateProjectionMatrix())),!et.camera&&!(Y!=null&&Y.rotation)&&xt.lookAt(0,0,0)),et.set({camera:xt}),mt.camera=xt}if(!et.scene){let lt;R!=null&&R.isScene?(lt=R,R_(lt,r,"",{})):(lt=new Fg,R_(lt,r,"",{}),R&&ol(lt,R)),et.set({scene:lt})}E&&!et.events.handlers&&et.set({events:E(r)});const $=n9(i,b);if(Mi.equ($,et.size,Td)||et.setSize($.width,$.height,$.top,$.left),H&&et.viewport.dpr!==f3(H)&&et.setDpr(H),et.frameloop!==V&&et.setFrameloop(V),et.onPointerMissed||et.set({onPointerMissed:ht}),N&&!Mi.equ(N,et.performance,Td)&&et.set(lt=>({performance:{...lt.performance,...N}})),!et.xr){var yt;const lt=(ot,Ot)=>{const It=r.getState();It.frameloop!=="never"&&v2(ot,!0,It,Ot)},xt=()=>{const ot=r.getState();ot.gl.xr.enabled=ot.gl.xr.isPresenting,ot.gl.xr.setAnimationLoop(ot.gl.xr.isPresenting?lt:null),ot.gl.xr.isPresenting||_S(ot)},bt={connect(){const ot=r.getState().gl;ot.xr.addEventListener("sessionstart",xt),ot.xr.addEventListener("sessionend",xt)},disconnect(){const ot=r.getState().gl;ot.xr.removeEventListener("sessionstart",xt),ot.xr.removeEventListener("sessionend",xt)}};typeof((yt=dt.xr)==null?void 0:yt.addEventListener)=="function"&&bt.connect(),et.set({xr:bt})}if(dt.shadowMap){const lt=dt.shadowMap.enabled,xt=dt.shadowMap.type;if(dt.shadowMap.enabled=!!w,Mi.boo(w))dt.shadowMap.type=Jm;else if(Mi.str(w)){var X;const bt={basic:fw,percentage:P_,soft:Jm,variance:yo};dt.shadowMap.type=(X=bt[w])!=null?X:Jm}else Mi.obj(w)&&Object.assign(dt.shadowMap,w);(lt!==dt.shadowMap.enabled||xt!==dt.shadowMap.type)&&(dt.shadowMap.needsUpdate=!0)}return Nn.enabled=!I,p||(dt.outputColorSpace=B?So:Fs,dt.toneMapping=D?hl:sM),et.legacy!==I&&et.set(()=>({legacy:I})),et.linear!==B&&et.set(()=>({linear:B})),et.flat!==D&&et.set(()=>({flat:D})),x&&!Mi.fun(x)&&!h2(x)&&!Mi.equ(x,dt,Td)&&ol(dt,x),u=M,p=!0,_(),this},render(v){return!p&&!g&&this.configure(),g.then(()=>{D_.updateContainer(it.jsx(s9,{store:r,children:v,onCreated:u,rootElement:i}),l,null,()=>{})}),r},unmount(){A3(i)}}}function s9({store:i,children:t,onCreated:e,rootElement:n}){return qg(()=>{const s=i.getState();s.set(r=>({internal:{...r.internal,active:!0}})),e&&e(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),it.jsx(ZM.Provider,{value:i,children:t})}function A3(i,t){const e=eh.get(i),n=e==null?void 0:e.fiber;if(n){const s=e==null?void 0:e.store.getState();s&&(s.internal.active=!1),D_.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var r,l,u,d;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(l=r.renderLists)==null||l.dispose==null||l.dispose(),(u=s.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(d=s.gl)!=null&&d.xr&&s.xr.disconnect(),I8(s.scene),eh.delete(i)}catch{}},500)})}}function a9(i,t,e){return it.jsx(r9,{children:i,container:t,state:e})}function r9({state:i={},children:t,container:e}){const{events:n,size:s,...r}=i,l=QM(),[u]=Rt.useState(()=>new XM),[d]=Rt.useState(()=>new Wt),p=JM((v,_)=>{let x;if(_.camera&&s){const b=_.camera;x=v.viewport.getCurrentViewport(b,new Q,s),b!==v.camera&&d3(b,s)}return{...v,..._,scene:e,raycaster:u,pointer:d,mouse:d,previousRoot:l,events:{...v.events,..._.events,...n},size:{...v.size,...s},viewport:{...v.viewport,...x},setEvents:b=>_.set(R=>({...R,events:{...R.events,...b}}))}}),g=Rt.useMemo(()=>{const v=i3((x,b)=>({...r,set:x,get:b})),_=x=>v.setState(b=>p.current(x,b));return _(l.getState()),l.subscribe(_),v},[l,e]);return it.jsx(it.Fragment,{children:D_.createPortal(it.jsx(ZM.Provider,{value:g,children:t}),g,null)})}const o9=new Set,l9=new Set,c9=new Set;function _1(i,t){if(i.size)for(const{callback:e}of i.values())e(t)}function ag(i,t){switch(i){case"before":return _1(o9,t);case"after":return _1(l9,t);case"tail":return _1(c9,t)}}let x1,A1;function vS(i,t,e){let n=t.clock.getDelta();t.frameloop==="never"&&typeof i=="number"&&(n=i-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=i),x1=t.internal.subscribers;for(let s=0;s<x1.length;s++)A1=x1[s],A1.ref.current(A1.store.getState(),n,e);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let U_=!1,yS=!1,S1,g2,Cd;function S3(i){g2=requestAnimationFrame(S3),U_=!0,S1=0,ag("before",i),yS=!0;for(const e of eh.values()){var t;Cd=e.store.getState(),Cd.internal.active&&(Cd.frameloop==="always"||Cd.internal.frames>0)&&!((t=Cd.gl.xr)!=null&&t.isPresenting)&&(S1+=vS(i,Cd))}if(yS=!1,ag("after",i),S1===0)return ag("tail",i),U_=!1,cancelAnimationFrame(g2)}function _S(i,t=1){var e;if(!i)return eh.forEach(n=>_S(n.store.getState(),t));(e=i.gl.xr)!=null&&e.isPresenting||!i.internal.active||i.frameloop==="never"||(t>1?i.internal.frames=Math.min(60,i.internal.frames+t):yS?i.internal.frames=2:i.internal.frames=1,U_||(U_=!0,requestAnimationFrame(S3)))}function v2(i,t=!0,e,n){if(t&&ag("before",i),e)vS(i,e,n);else for(const s of eh.values())vS(i,s.store.getState());t&&ag("after",i)}const M1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function u9(i){const{handlePointer:t}=k8(i);return{priority:1,enabled:!0,compute(e,n,s){n.pointer.set(e.offsetX/n.size.width*2-1,-(e.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(M1).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var e;const{events:n,internal:s}=i.getState();(e=s.lastEvent)!=null&&e.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:e=>{const{set:n,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),n(r=>({events:{...r.events,connected:e}})),s.handlers)for(const r in s.handlers){const l=s.handlers[r],[u,d]=M1[r];e.addEventListener(u,l,{passive:d})}},disconnect:()=>{const{set:e,events:n}=i.getState();if(n.connected){if(n.handlers)for(const s in n.handlers){const r=n.handlers[s],[l]=M1[s];n.connected.removeEventListener(l,r)}e(s=>({events:{...s.events,connected:void 0}}))}}}}function y2(i,t){let e;return(...n)=>{window.clearTimeout(e),e=window.setTimeout(()=>i(...n),t)}}function f9({debounce:i,scroll:t,polyfill:e,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,l]=Rt.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=Rt.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),d=i?typeof i=="number"?i:i.scroll:null,p=i?typeof i=="number"?i:i.resize:null,g=Rt.useRef(!1);Rt.useEffect(()=>(g.current=!0,()=>void(g.current=!1)));const[v,_,x]=Rt.useMemo(()=>{const M=()=>{if(!u.current.element)return;const{left:w,top:B,width:D,height:I,bottom:L,right:V,x:H,y:N}=u.current.element.getBoundingClientRect(),O={left:w,top:B,width:D,height:I,bottom:L,right:V,x:H,y:N};u.current.element instanceof HTMLElement&&n&&(O.height=u.current.element.offsetHeight,O.width=u.current.element.offsetWidth),Object.freeze(O),g.current&&!m9(u.current.lastBounds,O)&&l(u.current.lastBounds=O)};return[M,p?y2(M,p):M,d?y2(M,d):M]},[l,n,d,p]);function b(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",x,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null),u.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",u.current.orientationHandler))}function R(){u.current.element&&(u.current.resizeObserver=new s(x),u.current.resizeObserver.observe(u.current.element),t&&u.current.scrollContainers&&u.current.scrollContainers.forEach(M=>M.addEventListener("scroll",x,{capture:!0,passive:!0})),u.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",u.current.orientationHandler))}const E=M=>{!M||M===u.current.element||(b(),u.current.element=M,u.current.scrollContainers=M3(M),R())};return d9(x,!!t),h9(_),Rt.useEffect(()=>{b(),R()},[t,x,_]),Rt.useEffect(()=>b,[]),[E,r,v]}function h9(i){Rt.useEffect(()=>{const t=i;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[i])}function d9(i,t){Rt.useEffect(()=>{if(t){const e=i;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)}},[i,t])}function M3(i){const t=[];if(!i||i===document.body)return t;const{overflow:e,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[e,n,s].some(r=>r==="auto"||r==="scroll")&&t.push(i),[...t,...M3(i.parentElement)]}const p9=["x","y","top","bottom","left","right","width","height"],m9=(i,t)=>p9.every(e=>i[e]===t[e]);function g9({ref:i,children:t,fallback:e,resize:n,style:s,gl:r,events:l=u9,eventSource:u,eventPrefix:d,shadows:p,linear:g,flat:v,legacy:_,orthographic:x,frameloop:b,dpr:R,performance:E,raycaster:M,camera:w,scene:B,onPointerMissed:D,onCreated:I,...L}){Rt.useMemo(()=>v3(e8),[]);const V=U8(),[H,N]=f9({scroll:!0,debounce:{scroll:50,resize:0},...n}),O=Rt.useRef(null),Y=Rt.useRef(null);Rt.useImperativeHandle(i,()=>O.current);const ht=JM(D),[et,dt]=Rt.useState(!1),[mt,F]=Rt.useState(!1);if(et)throw et;if(mt)throw mt;const K=Rt.useRef(null);qg(()=>{const yt=O.current;if(N.width>0&&N.height>0&&yt){K.current||(K.current=i9(yt));async function X(){await K.current.configure({gl:r,scene:B,events:l,shadows:p,linear:g,flat:v,legacy:_,orthographic:x,frameloop:b,dpr:R,performance:E,raycaster:M,camera:w,size:N,onPointerMissed:(...lt)=>ht.current==null?void 0:ht.current(...lt),onCreated:lt=>{lt.events.connect==null||lt.events.connect(u?B8(u)?u.current:u:Y.current),d&&lt.setEvents({compute:(xt,bt)=>{const ot=xt[d+"X"],Ot=xt[d+"Y"];bt.pointer.set(ot/bt.size.width*2-1,-(Ot/bt.size.height)*2+1),bt.raycaster.setFromCamera(bt.pointer,bt.camera)}}),I==null||I(lt)}}),K.current.render(it.jsx(V,{children:it.jsx(O8,{set:F,children:it.jsx(Rt.Suspense,{fallback:it.jsx(N8,{set:dt}),children:t??null})})}))}X()}}),Rt.useEffect(()=>{const yt=O.current;if(yt)return()=>A3(yt)},[]);const $=u?"none":"auto";return it.jsx("div",{ref:Y,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:$,...s},...L,children:it.jsx("div",{ref:H,style:{width:"100%",height:"100%"},children:it.jsx("canvas",{ref:O,style:{display:"block"},children:e})})})}function v9(i){return it.jsx(o3,{children:it.jsx(g9,{...i})})}function Eg(){return Eg=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)({}).hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Eg.apply(null,arguments)}const Kg=new Q,tb=new Q,y9=new Q,_2=new Wt;function _9(i,t,e){const n=Kg.setFromMatrixPosition(i.matrixWorld);n.project(t);const s=e.width/2,r=e.height/2;return[n.x*s+s,-(n.y*r)+r]}function x9(i,t){const e=Kg.setFromMatrixPosition(i.matrixWorld),n=tb.setFromMatrixPosition(t.matrixWorld),s=e.sub(n),r=t.getWorldDirection(y9);return s.angleTo(r)>Math.PI/2}function A9(i,t,e,n){const s=Kg.setFromMatrixPosition(i.matrixWorld),r=s.clone();r.project(t),_2.set(r.x,r.y),e.setFromCamera(_2,t);const l=e.intersectObjects(n,!0);if(l.length){const u=l[0].distance;return s.distanceTo(e.ray.origin)<u}return!0}function S9(i,t){if(t instanceof Fr)return t.zoom;if(t instanceof bi){const e=Kg.setFromMatrixPosition(i.matrixWorld),n=tb.setFromMatrixPosition(t.matrixWorld),s=t.fov*Math.PI/180,r=e.distanceTo(n);return 1/(2*Math.tan(s/2)*r)}else return 1}function M9(i,t,e){if(t instanceof bi||t instanceof Fr){const n=Kg.setFromMatrixPosition(i.matrixWorld),s=tb.setFromMatrixPosition(t.matrixWorld),r=n.distanceTo(s),l=(e[1]-e[0])/(t.far-t.near),u=e[1]-l*t.far;return Math.round(l*r+u)}}const xS=i=>Math.abs(i)<1e-10?0:i;function b3(i,t,e=""){let n="matrix3d(";for(let s=0;s!==16;s++)n+=xS(t[s]*i.elements[s])+(s!==15?",":")");return e+n}const b9=(i=>t=>b3(t,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),E9=(i=>(t,e)=>b3(t,i(e),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function T9(i){return i&&typeof i=="object"&&"current"in i}const b1=Rt.forwardRef(({children:i,eps:t=.001,style:e,className:n,prepend:s,center:r,fullscreen:l,portal:u,distanceFactor:d,sprite:p=!1,transform:g=!1,occlude:v,onOcclude:_,castShadow:x,receiveShadow:b,material:R,geometry:E,zIndexRange:M=[16777271,0],calculatePosition:w=_9,as:B="div",wrapperClass:D,pointerEvents:I="auto",...L},V)=>{const{gl:H,camera:N,scene:O,size:Y,raycaster:ht,events:et,viewport:dt}=Ma(),[mt]=Rt.useState(()=>document.createElement(B)),F=Rt.useRef(null),K=Rt.useRef(null),$=Rt.useRef(0),yt=Rt.useRef([0,0]),X=Rt.useRef(null),lt=Rt.useRef(null),xt=(u==null?void 0:u.current)||et.connected||H.domElement.parentNode,bt=Rt.useRef(null),ot=Rt.useRef(!1),Ot=Rt.useMemo(()=>v&&v!=="blending"||Array.isArray(v)&&v.length&&T9(v[0]),[v]);Rt.useLayoutEffect(()=>{const Ae=H.domElement;v&&v==="blending"?(Ae.style.zIndex=`${Math.floor(M[0]/2)}`,Ae.style.position="absolute",Ae.style.pointerEvents="none"):(Ae.style.zIndex=null,Ae.style.position=null,Ae.style.pointerEvents=null)},[v]),Rt.useLayoutEffect(()=>{if(K.current){const Ae=F.current=w2.createRoot(mt);if(O.updateMatrixWorld(),g)mt.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Be=w(K.current,N,Y);mt.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Be[0]}px,${Be[1]}px,0);transform-origin:0 0;`}return xt&&(s?xt.prepend(mt):xt.appendChild(mt)),()=>{xt&&xt.removeChild(mt),Ae.unmount()}}},[xt,g]),Rt.useLayoutEffect(()=>{D&&(mt.className=D)},[D]);const It=Rt.useMemo(()=>g?{position:"absolute",top:0,left:0,width:Y.width,height:Y.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:r?"translate3d(-50%,-50%,0)":"none",...l&&{top:-Y.height/2,left:-Y.width/2,width:Y.width,height:Y.height},...e},[e,r,l,Y,g]),ie=Rt.useMemo(()=>({position:"absolute",pointerEvents:I}),[I]);Rt.useLayoutEffect(()=>{if(ot.current=!1,g){var Ae;(Ae=F.current)==null||Ae.render(Rt.createElement("div",{ref:X,style:It},Rt.createElement("div",{ref:lt,style:ie},Rt.createElement("div",{ref:V,className:n,style:e,children:i}))))}else{var Be;(Be=F.current)==null||Be.render(Rt.createElement("div",{ref:V,style:It,className:n,children:i}))}});const se=Rt.useRef(!0);Wg(Ae=>{if(K.current){N.updateMatrixWorld(),K.current.updateWorldMatrix(!0,!1);const Be=g?yt.current:w(K.current,N,Y);if(g||Math.abs($.current-N.zoom)>t||Math.abs(yt.current[0]-Be[0])>t||Math.abs(yt.current[1]-Be[1])>t){const Ve=x9(K.current,N);let we=!1;Ot&&(Array.isArray(v)?we=v.map(Kt=>Kt.current):v!=="blending"&&(we=[O]));const Z=se.current;if(we){const Kt=A9(K.current,N,ht,we);se.current=Kt&&!Ve}else se.current=!Ve;Z!==se.current&&(_?_(!se.current):mt.style.display=se.current?"block":"none");const le=Math.floor(M[0]/2),te=v?Ot?[M[0],le]:[le-1,0]:M;if(mt.style.zIndex=`${M9(K.current,N,te)}`,g){const[Kt,Xt]=[Y.width/2,Y.height/2],Te=N.projectionMatrix.elements[5]*Xt,{isOrthographicCamera:Qt,top:J,left:k,bottom:_t,right:zt}=N,Jt=b9(N.matrixWorldInverse),Ht=Qt?`scale(${Te})translate(${xS(-(zt+k)/2)}px,${xS((J+_t)/2)}px)`:`translateZ(${Te}px)`;let fe=K.current.matrixWorld;p&&(fe=N.matrixWorldInverse.clone().transpose().copyPosition(fe).scale(K.current.scale),fe.elements[3]=fe.elements[7]=fe.elements[11]=0,fe.elements[15]=1),mt.style.width=Y.width+"px",mt.style.height=Y.height+"px",mt.style.perspective=Qt?"":`${Te}px`,X.current&&lt.current&&(X.current.style.transform=`${Ht}${Jt}translate(${Kt}px,${Xt}px)`,lt.current.style.transform=E9(fe,1/((d||10)/400)))}else{const Kt=d===void 0?1:S9(K.current,N)*d;mt.style.transform=`translate3d(${Be[0]}px,${Be[1]}px,0) scale(${Kt})`}yt.current=Be,$.current=N.zoom}}if(!Ot&&bt.current&&!ot.current)if(g){if(X.current){const Be=X.current.children[0];if(Be!=null&&Be.clientWidth&&Be!=null&&Be.clientHeight){const{isOrthographicCamera:Ve}=N;if(Ve||E)L.scale&&(Array.isArray(L.scale)?L.scale instanceof Q?bt.current.scale.copy(L.scale.clone().divideScalar(1)):bt.current.scale.set(1/L.scale[0],1/L.scale[1],1/L.scale[2]):bt.current.scale.setScalar(1/L.scale));else{const we=(d||10)/400,Z=Be.clientWidth*we,le=Be.clientHeight*we;bt.current.scale.set(Z,le,1)}ot.current=!0}}}else{const Be=mt.children[0];if(Be!=null&&Be.clientWidth&&Be!=null&&Be.clientHeight){const Ve=1/dt.factor,we=Be.clientWidth*Ve,Z=Be.clientHeight*Ve;bt.current.scale.set(we,Z,1),ot.current=!0}bt.current.lookAt(Ae.camera.position)}});const Ie=Rt.useMemo(()=>({vertexShader:g?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[g]);return Rt.createElement("group",Eg({},L,{ref:K}),v&&!Ot&&Rt.createElement("mesh",{castShadow:x,receiveShadow:b,ref:bt},E||Rt.createElement("planeGeometry",null),R||Rt.createElement("shaderMaterial",{side:ka,vertexShader:Ie.vertexShader,fragmentShader:Ie.fragmentShader})))}),eb=parseInt(Dg.replace(/\D+/g,""));function x2(i,t){if(t===Vw)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(t===M_||t===fM){let e=i.getIndex();if(e===null){const l=[],u=i.getAttribute("position");if(u!==void 0){for(let d=0;d<u.count;d++)l.push(d);i.setIndex(l),e=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=e.count-2,s=[];if(e)if(t===M_)for(let l=1;l<=n;l++)s.push(e.getX(0)),s.push(e.getX(l)),s.push(e.getX(l+1));else for(let l=0;l<n;l++)l%2===0?(s.push(e.getX(l)),s.push(e.getX(l+1)),s.push(e.getX(l+2))):(s.push(e.getX(l+2)),s.push(e.getX(l+1)),s.push(e.getX(l)));s.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=i.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),i}var Or=Uint8Array,lu=Uint16Array,AS=Uint32Array,E3=new Or([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),T3=new Or([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),C9=new Or([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C3=function(i,t){for(var e=new lu(31),n=0;n<31;++n)e[n]=t+=1<<i[n-1];for(var s=new AS(e[30]),n=1;n<30;++n)for(var r=e[n];r<e[n+1];++r)s[r]=r-e[n]<<5|n;return[e,s]},R3=C3(E3,2),w3=R3[0],R9=R3[1];w3[28]=258,R9[258]=28;var w9=C3(T3,0),B9=w9[0],SS=new lu(32768);for(var gi=0;gi<32768;++gi){var iu=(gi&43690)>>>1|(gi&21845)<<1;iu=(iu&52428)>>>2|(iu&13107)<<2,iu=(iu&61680)>>>4|(iu&3855)<<4,SS[gi]=((iu&65280)>>>8|(iu&255)<<8)>>>1}var rg=function(i,t,e){for(var n=i.length,s=0,r=new lu(t);s<n;++s)++r[i[s]-1];var l=new lu(t);for(s=0;s<t;++s)l[s]=l[s-1]+r[s-1]<<1;var u;if(e){u=new lu(1<<t);var d=15-t;for(s=0;s<n;++s)if(i[s])for(var p=s<<4|i[s],g=t-i[s],v=l[i[s]-1]++<<g,_=v|(1<<g)-1;v<=_;++v)u[SS[v]>>>d]=p}else for(u=new lu(n),s=0;s<n;++s)i[s]&&(u[s]=SS[l[i[s]-1]++]>>>15-i[s]);return u},Jg=new Or(288);for(var gi=0;gi<144;++gi)Jg[gi]=8;for(var gi=144;gi<256;++gi)Jg[gi]=9;for(var gi=256;gi<280;++gi)Jg[gi]=7;for(var gi=280;gi<288;++gi)Jg[gi]=8;var B3=new Or(32);for(var gi=0;gi<32;++gi)B3[gi]=5;var D9=rg(Jg,9,1),U9=rg(B3,5,1),E1=function(i){for(var t=i[0],e=1;e<i.length;++e)i[e]>t&&(t=i[e]);return t},go=function(i,t,e){var n=t/8|0;return(i[n]|i[n+1]<<8)>>(t&7)&e},T1=function(i,t){var e=t/8|0;return(i[e]|i[e+1]<<8|i[e+2]<<16)>>(t&7)},N9=function(i){return(i/8|0)+(i&7&&1)},O9=function(i,t,e){(e==null||e>i.length)&&(e=i.length);var n=new(i instanceof lu?lu:i instanceof AS?AS:Or)(e-t);return n.set(i.subarray(t,e)),n},L9=function(i,t,e){var n=i.length;if(!n||e&&!e.l&&n<5)return t||new Or(0);var s=!t||e,r=!e||e.i;e||(e={}),t||(t=new Or(n*3));var l=function(It){var ie=t.length;if(It>ie){var se=new Or(Math.max(ie*2,It));se.set(t),t=se}},u=e.f||0,d=e.p||0,p=e.b||0,g=e.l,v=e.d,_=e.m,x=e.n,b=n*8;do{if(!g){e.f=u=go(i,d,1);var R=go(i,d+1,3);if(d+=3,R)if(R==1)g=D9,v=U9,_=9,x=5;else if(R==2){var B=go(i,d,31)+257,D=go(i,d+10,15)+4,I=B+go(i,d+5,31)+1;d+=14;for(var L=new Or(I),V=new Or(19),H=0;H<D;++H)V[C9[H]]=go(i,d+H*3,7);d+=D*3;for(var N=E1(V),O=(1<<N)-1,Y=rg(V,N,1),H=0;H<I;){var ht=Y[go(i,d,O)];d+=ht&15;var E=ht>>>4;if(E<16)L[H++]=E;else{var et=0,dt=0;for(E==16?(dt=3+go(i,d,3),d+=2,et=L[H-1]):E==17?(dt=3+go(i,d,7),d+=3):E==18&&(dt=11+go(i,d,127),d+=7);dt--;)L[H++]=et}}var mt=L.subarray(0,B),F=L.subarray(B);_=E1(mt),x=E1(F),g=rg(mt,_,1),v=rg(F,x,1)}else throw"invalid block type";else{var E=N9(d)+4,M=i[E-4]|i[E-3]<<8,w=E+M;if(w>n){if(r)throw"unexpected EOF";break}s&&l(p+M),t.set(i.subarray(E,w),p),e.b=p+=M,e.p=d=w*8;continue}if(d>b){if(r)throw"unexpected EOF";break}}s&&l(p+131072);for(var K=(1<<_)-1,$=(1<<x)-1,yt=d;;yt=d){var et=g[T1(i,d)&K],X=et>>>4;if(d+=et&15,d>b){if(r)throw"unexpected EOF";break}if(!et)throw"invalid length/literal";if(X<256)t[p++]=X;else if(X==256){yt=d,g=null;break}else{var lt=X-254;if(X>264){var H=X-257,xt=E3[H];lt=go(i,d,(1<<xt)-1)+w3[H],d+=xt}var bt=v[T1(i,d)&$],ot=bt>>>4;if(!bt)throw"invalid distance";d+=bt&15;var F=B9[ot];if(ot>3){var xt=T3[ot];F+=T1(i,d)&(1<<xt)-1,d+=xt}if(d>b){if(r)throw"unexpected EOF";break}s&&l(p+131072);for(var Ot=p+lt;p<Ot;p+=4)t[p]=t[p-F],t[p+1]=t[p+1-F],t[p+2]=t[p+2-F],t[p+3]=t[p+3-F];p=Ot}}e.l=g,e.p=yt,e.b=p,g&&(u=1,e.m=_,e.d=v,e.n=x)}while(!u);return p==t.length?t:O9(t,0,p)},I9=new Or(0),P9=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function xy(i,t){return L9((P9(i),i.subarray(2,-4)),t)}var F9=typeof TextDecoder<"u"&&new TextDecoder,H9=0;try{F9.decode(I9,{stream:!0}),H9=1}catch{}const z9=i=>i&&i.isCubeTexture;class G9 extends Ei{constructor(t,e){var n,s;const r=z9(t),u=((s=r?(n=t.image[0])==null?void 0:n.width:t.image.width)!=null?s:1024)/4,d=Math.floor(Math.log2(u)),p=Math.pow(2,d),g=3*Math.max(p,16*7),v=4*p,_=[r?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/g}`,`#define CUBEUV_TEXEL_HEIGHT ${1/v}`,`#define CUBEUV_MAX_MIP ${d}.0`],x=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,b=_.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${eb>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,R={map:{value:t},height:{value:(e==null?void 0:e.height)||15},radius:{value:(e==null?void 0:e.radius)||100}},E=new kg(1,16),M=new qa({uniforms:R,fragmentShader:b,vertexShader:x,side:ka});super(E,M)}set radius(t){this.material.uniforms.radius.value=t}get radius(){return this.material.uniforms.radius.value}set height(t){this.material.uniforms.height.value=t}get height(){return this.material.uniforms.height.value}}var V9=Object.defineProperty,k9=(i,t,e)=>t in i?V9(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,X9=(i,t,e)=>(k9(i,t+"",e),e);class j9{constructor(){X9(this,"_listeners")}addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const s=this._listeners[t];if(s!==void 0){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const n=this._listeners[t.type];if(n!==void 0){t.target=this;const s=n.slice(0);for(let r=0,l=s.length;r<l;r++)s[r].call(this,t);t.target=null}}}var Y9=Object.defineProperty,q9=(i,t,e)=>t in i?Y9(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,Je=(i,t,e)=>(q9(i,typeof t!="symbol"?t+"":t,e),e);const Ay=new nh,A2=new Kl,W9=Math.cos(70*(Math.PI/180)),S2=(i,t)=>(i%t+t)%t;let K9=class extends j9{constructor(t,e){super(),Je(this,"object"),Je(this,"domElement"),Je(this,"enabled",!0),Je(this,"target",new Q),Je(this,"minDistance",0),Je(this,"maxDistance",1/0),Je(this,"minZoom",0),Je(this,"maxZoom",1/0),Je(this,"minPolarAngle",0),Je(this,"maxPolarAngle",Math.PI),Je(this,"minAzimuthAngle",-1/0),Je(this,"maxAzimuthAngle",1/0),Je(this,"enableDamping",!1),Je(this,"dampingFactor",.05),Je(this,"enableZoom",!0),Je(this,"zoomSpeed",1),Je(this,"enableRotate",!0),Je(this,"rotateSpeed",1),Je(this,"enablePan",!0),Je(this,"panSpeed",1),Je(this,"screenSpacePanning",!0),Je(this,"keyPanSpeed",7),Je(this,"zoomToCursor",!1),Je(this,"autoRotate",!1),Je(this,"autoRotateSpeed",2),Je(this,"reverseOrbit",!1),Je(this,"reverseHorizontalOrbit",!1),Je(this,"reverseVerticalOrbit",!1),Je(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Je(this,"mouseButtons",{LEFT:Bf.ROTATE,MIDDLE:Bf.DOLLY,RIGHT:Bf.PAN}),Je(this,"touches",{ONE:Df.ROTATE,TWO:Df.DOLLY_PAN}),Je(this,"target0"),Je(this,"position0"),Je(this,"zoom0"),Je(this,"_domElementKeyEvents",null),Je(this,"getPolarAngle"),Je(this,"getAzimuthalAngle"),Je(this,"setPolarAngle"),Je(this,"setAzimuthalAngle"),Je(this,"getDistance"),Je(this,"getZoomScale"),Je(this,"listenToKeyEvents"),Je(this,"stopListenToKeyEvents"),Je(this,"saveState"),Je(this,"reset"),Je(this,"update"),Je(this,"connect"),Je(this,"dispose"),Je(this,"dollyIn"),Je(this,"dollyOut"),Je(this,"getScale"),Je(this,"setScale"),this.object=t,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>g.phi,this.getAzimuthalAngle=()=>g.theta,this.setPolarAngle=ft=>{let Ft=S2(ft,2*Math.PI),re=g.phi;re<0&&(re+=2*Math.PI),Ft<0&&(Ft+=2*Math.PI);let ct=Math.abs(Ft-re);2*Math.PI-ct<ct&&(Ft<re?Ft+=2*Math.PI:re+=2*Math.PI),v.phi=Ft-re,n.update()},this.setAzimuthalAngle=ft=>{let Ft=S2(ft,2*Math.PI),re=g.theta;re<0&&(re+=2*Math.PI),Ft<0&&(Ft+=2*Math.PI);let ct=Math.abs(Ft-re);2*Math.PI-ct<ct&&(Ft<re?Ft+=2*Math.PI:re+=2*Math.PI),v.theta=Ft-re,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ft=>{ft.addEventListener("keydown",ue),this._domElementKeyEvents=ft},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ue),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(s),n.update(),d=u.NONE},this.update=(()=>{const ft=new Q,Ft=new Q(0,1,0),re=new Es().setFromUnitVectors(t.up,Ft),ct=re.clone().invert(),Et=new Q,Nt=new Es,kt=2*Math.PI;return function(){const me=n.object.position;re.setFromUnitVectors(t.up,Ft),ct.copy(re).invert(),ft.copy(me).sub(n.target),ft.applyQuaternion(re),g.setFromVector3(ft),n.autoRotate&&d===u.NONE&&dt(ht()),n.enableDamping?(g.theta+=v.theta*n.dampingFactor,g.phi+=v.phi*n.dampingFactor):(g.theta+=v.theta,g.phi+=v.phi);let Pe=n.minAzimuthAngle,dn=n.maxAzimuthAngle;isFinite(Pe)&&isFinite(dn)&&(Pe<-Math.PI?Pe+=kt:Pe>Math.PI&&(Pe-=kt),dn<-Math.PI?dn+=kt:dn>Math.PI&&(dn-=kt),Pe<=dn?g.theta=Math.max(Pe,Math.min(dn,g.theta)):g.theta=g.theta>(Pe+dn)/2?Math.max(Pe,g.theta):Math.min(dn,g.theta)),g.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,g.phi)),g.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(x,n.dampingFactor):n.target.add(x),n.zoomToCursor&&N||n.object.isOrthographicCamera?g.radius=bt(g.radius):g.radius=bt(g.radius*_),ft.setFromSpherical(g),ft.applyQuaternion(ct),me.copy(n.target).add(ft),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(v.theta*=1-n.dampingFactor,v.phi*=1-n.dampingFactor,x.multiplyScalar(1-n.dampingFactor)):(v.set(0,0,0),x.set(0,0,0));let Ln=!1;if(n.zoomToCursor&&N){let rn=null;if(n.object instanceof bi&&n.object.isPerspectiveCamera){const vi=ft.length();rn=bt(vi*_);const si=vi-rn;n.object.position.addScaledVector(V,si),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const vi=new Q(H.x,H.y,0);vi.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/_)),n.object.updateProjectionMatrix(),Ln=!0;const si=new Q(H.x,H.y,0);si.unproject(n.object),n.object.position.sub(si).add(vi),n.object.updateMatrixWorld(),rn=ft.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;rn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(rn).add(n.object.position):(Ay.origin.copy(n.object.position),Ay.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Ay.direction))<W9?t.lookAt(n.target):(A2.setFromNormalAndCoplanarPoint(n.object.up,n.target),Ay.intersectPlane(A2,n.target))))}else n.object instanceof Fr&&n.object.isOrthographicCamera&&(Ln=_!==1,Ln&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/_)),n.object.updateProjectionMatrix()));return _=1,N=!1,Ln||Et.distanceToSquared(n.object.position)>p||8*(1-Nt.dot(n.object.quaternion))>p?(n.dispatchEvent(s),Et.copy(n.object.position),Nt.copy(n.object.quaternion),Ln=!1,!0):!1}})(),this.connect=ft=>{n.domElement=ft,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",ae),n.domElement.addEventListener("pointerdown",k),n.domElement.addEventListener("pointercancel",zt),n.domElement.addEventListener("wheel",fe)},this.dispose=()=>{var ft,Ft,re,ct,Et,Nt;n.domElement&&(n.domElement.style.touchAction="auto"),(ft=n.domElement)==null||ft.removeEventListener("contextmenu",ae),(Ft=n.domElement)==null||Ft.removeEventListener("pointerdown",k),(re=n.domElement)==null||re.removeEventListener("pointercancel",zt),(ct=n.domElement)==null||ct.removeEventListener("wheel",fe),(Et=n.domElement)==null||Et.ownerDocument.removeEventListener("pointermove",_t),(Nt=n.domElement)==null||Nt.ownerDocument.removeEventListener("pointerup",zt),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",ue)};const n=this,s={type:"change"},r={type:"start"},l={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=u.NONE;const p=1e-6,g=new fS,v=new fS;let _=1;const x=new Q,b=new Wt,R=new Wt,E=new Wt,M=new Wt,w=new Wt,B=new Wt,D=new Wt,I=new Wt,L=new Wt,V=new Q,H=new Wt;let N=!1;const O=[],Y={};function ht(){return 2*Math.PI/60/60*n.autoRotateSpeed}function et(){return Math.pow(.95,n.zoomSpeed)}function dt(ft){n.reverseOrbit||n.reverseHorizontalOrbit?v.theta+=ft:v.theta-=ft}function mt(ft){n.reverseOrbit||n.reverseVerticalOrbit?v.phi+=ft:v.phi-=ft}const F=(()=>{const ft=new Q;return function(re,ct){ft.setFromMatrixColumn(ct,0),ft.multiplyScalar(-re),x.add(ft)}})(),K=(()=>{const ft=new Q;return function(re,ct){n.screenSpacePanning===!0?ft.setFromMatrixColumn(ct,1):(ft.setFromMatrixColumn(ct,0),ft.crossVectors(n.object.up,ft)),ft.multiplyScalar(re),x.add(ft)}})(),$=(()=>{const ft=new Q;return function(re,ct){const Et=n.domElement;if(Et&&n.object instanceof bi&&n.object.isPerspectiveCamera){const Nt=n.object.position;ft.copy(Nt).sub(n.target);let kt=ft.length();kt*=Math.tan(n.object.fov/2*Math.PI/180),F(2*re*kt/Et.clientHeight,n.object.matrix),K(2*ct*kt/Et.clientHeight,n.object.matrix)}else Et&&n.object instanceof Fr&&n.object.isOrthographicCamera?(F(re*(n.object.right-n.object.left)/n.object.zoom/Et.clientWidth,n.object.matrix),K(ct*(n.object.top-n.object.bottom)/n.object.zoom/Et.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function yt(ft){n.object instanceof bi&&n.object.isPerspectiveCamera||n.object instanceof Fr&&n.object.isOrthographicCamera?_=ft:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function X(ft){yt(_/ft)}function lt(ft){yt(_*ft)}function xt(ft){if(!n.zoomToCursor||!n.domElement)return;N=!0;const Ft=n.domElement.getBoundingClientRect(),re=ft.clientX-Ft.left,ct=ft.clientY-Ft.top,Et=Ft.width,Nt=Ft.height;H.x=re/Et*2-1,H.y=-(ct/Nt)*2+1,V.set(H.x,H.y,1).unproject(n.object).sub(n.object.position).normalize()}function bt(ft){return Math.max(n.minDistance,Math.min(n.maxDistance,ft))}function ot(ft){b.set(ft.clientX,ft.clientY)}function Ot(ft){xt(ft),D.set(ft.clientX,ft.clientY)}function It(ft){M.set(ft.clientX,ft.clientY)}function ie(ft){R.set(ft.clientX,ft.clientY),E.subVectors(R,b).multiplyScalar(n.rotateSpeed);const Ft=n.domElement;Ft&&(dt(2*Math.PI*E.x/Ft.clientHeight),mt(2*Math.PI*E.y/Ft.clientHeight)),b.copy(R),n.update()}function se(ft){I.set(ft.clientX,ft.clientY),L.subVectors(I,D),L.y>0?X(et()):L.y<0&&lt(et()),D.copy(I),n.update()}function Ie(ft){w.set(ft.clientX,ft.clientY),B.subVectors(w,M).multiplyScalar(n.panSpeed),$(B.x,B.y),M.copy(w),n.update()}function Ae(ft){xt(ft),ft.deltaY<0?lt(et()):ft.deltaY>0&&X(et()),n.update()}function Be(ft){let Ft=!1;switch(ft.code){case n.keys.UP:$(0,n.keyPanSpeed),Ft=!0;break;case n.keys.BOTTOM:$(0,-n.keyPanSpeed),Ft=!0;break;case n.keys.LEFT:$(n.keyPanSpeed,0),Ft=!0;break;case n.keys.RIGHT:$(-n.keyPanSpeed,0),Ft=!0;break}Ft&&(ft.preventDefault(),n.update())}function Ve(){if(O.length==1)b.set(O[0].pageX,O[0].pageY);else{const ft=.5*(O[0].pageX+O[1].pageX),Ft=.5*(O[0].pageY+O[1].pageY);b.set(ft,Ft)}}function we(){if(O.length==1)M.set(O[0].pageX,O[0].pageY);else{const ft=.5*(O[0].pageX+O[1].pageX),Ft=.5*(O[0].pageY+O[1].pageY);M.set(ft,Ft)}}function Z(){const ft=O[0].pageX-O[1].pageX,Ft=O[0].pageY-O[1].pageY,re=Math.sqrt(ft*ft+Ft*Ft);D.set(0,re)}function le(){n.enableZoom&&Z(),n.enablePan&&we()}function te(){n.enableZoom&&Z(),n.enableRotate&&Ve()}function Kt(ft){if(O.length==1)R.set(ft.pageX,ft.pageY);else{const re=de(ft),ct=.5*(ft.pageX+re.x),Et=.5*(ft.pageY+re.y);R.set(ct,Et)}E.subVectors(R,b).multiplyScalar(n.rotateSpeed);const Ft=n.domElement;Ft&&(dt(2*Math.PI*E.x/Ft.clientHeight),mt(2*Math.PI*E.y/Ft.clientHeight)),b.copy(R)}function Xt(ft){if(O.length==1)w.set(ft.pageX,ft.pageY);else{const Ft=de(ft),re=.5*(ft.pageX+Ft.x),ct=.5*(ft.pageY+Ft.y);w.set(re,ct)}B.subVectors(w,M).multiplyScalar(n.panSpeed),$(B.x,B.y),M.copy(w)}function Te(ft){const Ft=de(ft),re=ft.pageX-Ft.x,ct=ft.pageY-Ft.y,Et=Math.sqrt(re*re+ct*ct);I.set(0,Et),L.set(0,Math.pow(I.y/D.y,n.zoomSpeed)),X(L.y),D.copy(I)}function Qt(ft){n.enableZoom&&Te(ft),n.enablePan&&Xt(ft)}function J(ft){n.enableZoom&&Te(ft),n.enableRotate&&Kt(ft)}function k(ft){var Ft,re;n.enabled!==!1&&(O.length===0&&((Ft=n.domElement)==null||Ft.ownerDocument.addEventListener("pointermove",_t),(re=n.domElement)==null||re.ownerDocument.addEventListener("pointerup",zt)),Me(ft),ft.pointerType==="touch"?Se(ft):Jt(ft))}function _t(ft){n.enabled!==!1&&(ft.pointerType==="touch"?He(ft):Ht(ft))}function zt(ft){var Ft,re,ct;Re(ft),O.length===0&&((Ft=n.domElement)==null||Ft.releasePointerCapture(ft.pointerId),(re=n.domElement)==null||re.ownerDocument.removeEventListener("pointermove",_t),(ct=n.domElement)==null||ct.ownerDocument.removeEventListener("pointerup",zt)),n.dispatchEvent(l),d=u.NONE}function Jt(ft){let Ft;switch(ft.button){case 0:Ft=n.mouseButtons.LEFT;break;case 1:Ft=n.mouseButtons.MIDDLE;break;case 2:Ft=n.mouseButtons.RIGHT;break;default:Ft=-1}switch(Ft){case Bf.DOLLY:if(n.enableZoom===!1)return;Ot(ft),d=u.DOLLY;break;case Bf.ROTATE:if(ft.ctrlKey||ft.metaKey||ft.shiftKey){if(n.enablePan===!1)return;It(ft),d=u.PAN}else{if(n.enableRotate===!1)return;ot(ft),d=u.ROTATE}break;case Bf.PAN:if(ft.ctrlKey||ft.metaKey||ft.shiftKey){if(n.enableRotate===!1)return;ot(ft),d=u.ROTATE}else{if(n.enablePan===!1)return;It(ft),d=u.PAN}break;default:d=u.NONE}d!==u.NONE&&n.dispatchEvent(r)}function Ht(ft){if(n.enabled!==!1)switch(d){case u.ROTATE:if(n.enableRotate===!1)return;ie(ft);break;case u.DOLLY:if(n.enableZoom===!1)return;se(ft);break;case u.PAN:if(n.enablePan===!1)return;Ie(ft);break}}function fe(ft){n.enabled===!1||n.enableZoom===!1||d!==u.NONE&&d!==u.ROTATE||(ft.preventDefault(),n.dispatchEvent(r),Ae(ft),n.dispatchEvent(l))}function ue(ft){n.enabled===!1||n.enablePan===!1||Be(ft)}function Se(ft){switch(_e(ft),O.length){case 1:switch(n.touches.ONE){case Df.ROTATE:if(n.enableRotate===!1)return;Ve(),d=u.TOUCH_ROTATE;break;case Df.PAN:if(n.enablePan===!1)return;we(),d=u.TOUCH_PAN;break;default:d=u.NONE}break;case 2:switch(n.touches.TWO){case Df.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;le(),d=u.TOUCH_DOLLY_PAN;break;case Df.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;te(),d=u.TOUCH_DOLLY_ROTATE;break;default:d=u.NONE}break;default:d=u.NONE}d!==u.NONE&&n.dispatchEvent(r)}function He(ft){switch(_e(ft),d){case u.TOUCH_ROTATE:if(n.enableRotate===!1)return;Kt(ft),n.update();break;case u.TOUCH_PAN:if(n.enablePan===!1)return;Xt(ft),n.update();break;case u.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Qt(ft),n.update();break;case u.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;J(ft),n.update();break;default:d=u.NONE}}function ae(ft){n.enabled!==!1&&ft.preventDefault()}function Me(ft){O.push(ft)}function Re(ft){delete Y[ft.pointerId];for(let Ft=0;Ft<O.length;Ft++)if(O[Ft].pointerId==ft.pointerId){O.splice(Ft,1);return}}function _e(ft){let Ft=Y[ft.pointerId];Ft===void 0&&(Ft=new Wt,Y[ft.pointerId]=Ft),Ft.set(ft.pageX,ft.pageY)}function de(ft){const Ft=ft.pointerId===O[0].pointerId?O[1]:O[0];return Y[Ft.pointerId]}this.dollyIn=(ft=et())=>{lt(ft),n.update()},this.dollyOut=(ft=et())=>{X(ft),n.update()},this.getScale=()=>_,this.setScale=ft=>{yt(ft),n.update()},this.getZoomScale=()=>et(),e!==void 0&&this.connect(e),this.update()}};function N_(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let t="";for(let e=0,n=i.length;e<n;e++)t+=String.fromCharCode(i[e]);try{return decodeURIComponent(escape(t))}catch{return t}}const kf="srgb",ec="srgb-linear",M2=3001,J9=3e3;class nb extends Gs{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new eV(e)}),this.register(function(e){return new nV(e)}),this.register(function(e){return new fV(e)}),this.register(function(e){return new hV(e)}),this.register(function(e){return new dV(e)}),this.register(function(e){return new sV(e)}),this.register(function(e){return new aV(e)}),this.register(function(e){return new rV(e)}),this.register(function(e){return new oV(e)}),this.register(function(e){return new tV(e)}),this.register(function(e){return new lV(e)}),this.register(function(e){return new iV(e)}),this.register(function(e){return new uV(e)}),this.register(function(e){return new cV(e)}),this.register(function(e){return new Q9(e)}),this.register(function(e){return new pV(e)}),this.register(function(e){return new mV(e)})}load(t,e,n,s){const r=this;let l;if(this.resourcePath!=="")l=this.resourcePath;else if(this.path!==""){const p=uu.extractUrlBase(t);l=uu.resolveURL(p,this.path)}else l=uu.extractUrlBase(t);this.manager.itemStart(t);const u=function(p){s?s(p):console.error(p),r.manager.itemError(t),r.manager.itemEnd(t)},d=new zs(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(t,function(p){try{r.parse(p,l,function(g){e(g),r.manager.itemEnd(t)},u)}catch(g){u(g)}},n,u)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,s){let r;const l={},u={};if(typeof t=="string")r=JSON.parse(t);else if(t instanceof ArrayBuffer)if(N_(new Uint8Array(t.slice(0,4)))===D3){try{l[Rn.KHR_BINARY_GLTF]=new gV(t)}catch(g){s&&s(g);return}r=JSON.parse(l[Rn.KHR_BINARY_GLTF].content)}else r=JSON.parse(N_(new Uint8Array(t)));else r=t;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const d=new wV(r,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const g=this.pluginCallbacks[p](d);g.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),u[g.name]=g,l[g.name]=!0}if(r.extensionsUsed)for(let p=0;p<r.extensionsUsed.length;++p){const g=r.extensionsUsed[p],v=r.extensionsRequired||[];switch(g){case Rn.KHR_MATERIALS_UNLIT:l[g]=new $9;break;case Rn.KHR_DRACO_MESH_COMPRESSION:l[g]=new vV(r,this.dracoLoader);break;case Rn.KHR_TEXTURE_TRANSFORM:l[g]=new yV;break;case Rn.KHR_MESH_QUANTIZATION:l[g]=new _V;break;default:v.indexOf(g)>=0&&u[g]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}d.setExtensions(l),d.setPlugins(u),d.parse(n,s)}parseAsync(t,e){const n=this;return new Promise(function(s,r){n.parse(t,e,s,r)})}}function Z9(){let i={};return{get:function(t){return i[t]},add:function(t,e){i[t]=e},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const Rn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Q9{constructor(t){this.parser=t,this.name=Rn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,s=e.length;n<s;n++){const r=e[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let s=e.cache.get(n);if(s)return s;const r=e.json,d=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let p;const g=new xe(16777215);d.color!==void 0&&g.setRGB(d.color[0],d.color[1],d.color[2],ec);const v=d.range!==void 0?d.range:0;switch(d.type){case"directional":p=new FM(g),p.target.position.set(0,0,-1),p.add(p.target);break;case"point":p=new PM(g),p.distance=v;break;case"spot":p=new IM(g),p.distance=v,d.spot=d.spot||{},d.spot.innerConeAngle=d.spot.innerConeAngle!==void 0?d.spot.innerConeAngle:0,d.spot.outerConeAngle=d.spot.outerConeAngle!==void 0?d.spot.outerConeAngle:Math.PI/4,p.angle=d.spot.outerConeAngle,p.penumbra=1-d.spot.innerConeAngle/d.spot.outerConeAngle,p.target.position.set(0,0,-1),p.add(p.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+d.type)}return p.position.set(0,0,0),p.decay=2,Wl(p,d),d.intensity!==void 0&&(p.intensity=d.intensity),p.name=e.createUniqueName(d.name||"light_"+t),s=Promise.resolve(p),e.cache.add(n,s),s}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,r=n.json.nodes[t],u=(r.extensions&&r.extensions[this.name]||{}).light;return u===void 0?null:this._loadLight(u).then(function(d){return n._getNodeRef(e.cache,u,d)})}}class $9{constructor(){this.name=Rn.KHR_MATERIALS_UNLIT}getMaterialType(){return Ya}extendParams(t,e,n){const s=[];t.color=new xe(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const l=r.baseColorFactor;t.color.setRGB(l[0],l[1],l[2],ec),t.opacity=l[3]}r.baseColorTexture!==void 0&&s.push(n.assignTexture(t,"map",r.baseColorTexture,kf))}return Promise.all(s)}}class tV{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(e.emissiveIntensity=r),Promise.resolve()}}class eV{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],l=s.extensions[this.name];if(l.clearcoatFactor!==void 0&&(e.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&r.push(n.assignTexture(e,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(e,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){const u=l.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new Wt(u,u)}return Promise.all(r)}}class nV{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_DISPERSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return e.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class iV{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],l=s.extensions[this.name];return l.iridescenceFactor!==void 0&&(e.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&r.push(n.assignTexture(e,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(e.iridescenceIOR=l.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&r.push(n.assignTexture(e,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(r)}}class sV{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new xe(0,0,0),e.sheenRoughness=0,e.sheen=1;const l=s.extensions[this.name];if(l.sheenColorFactor!==void 0){const u=l.sheenColorFactor;e.sheenColor.setRGB(u[0],u[1],u[2],ec)}return l.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&r.push(n.assignTexture(e,"sheenColorMap",l.sheenColorTexture,kf)),l.sheenRoughnessTexture!==void 0&&r.push(n.assignTexture(e,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(r)}}class aV{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],l=s.extensions[this.name];return l.transmissionFactor!==void 0&&(e.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&r.push(n.assignTexture(e,"transmissionMap",l.transmissionTexture)),Promise.all(r)}}class rV{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],l=s.extensions[this.name];e.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&r.push(n.assignTexture(e,"thicknessMap",l.thicknessTexture)),e.attenuationDistance=l.attenuationDistance||1/0;const u=l.attenuationColor||[1,1,1];return e.attenuationColor=new xe().setRGB(u[0],u[1],u[2],ec),Promise.all(r)}}class oV{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return e.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class lV{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],l=s.extensions[this.name];e.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&r.push(n.assignTexture(e,"specularIntensityMap",l.specularTexture));const u=l.specularColorFactor||[1,1,1];return e.specularColor=new xe().setRGB(u[0],u[1],u[2],ec),l.specularColorTexture!==void 0&&r.push(n.assignTexture(e,"specularColorMap",l.specularColorTexture,kf)),Promise.all(r)}}class cV{constructor(t){this.parser=t,this.name=Rn.EXT_MATERIALS_BUMP}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],l=s.extensions[this.name];return e.bumpScale=l.bumpFactor!==void 0?l.bumpFactor:1,l.bumpTexture!==void 0&&r.push(n.assignTexture(e,"bumpMap",l.bumpTexture)),Promise.all(r)}}class uV{constructor(t){this.parser=t,this.name=Rn.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:zr}extendMaterialParams(t,e){const n=this.parser,s=n.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],l=s.extensions[this.name];return l.anisotropyStrength!==void 0&&(e.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(e.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&r.push(n.assignTexture(e,"anisotropyMap",l.anisotropyTexture)),Promise.all(r)}}class fV{constructor(t){this.parser=t,this.name=Rn.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,s=n.textures[t];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],l=e.options.ktx2Loader;if(!l){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,r.source,l)}}class hV{constructor(t){this.parser=t,this.name=Rn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,s=n.json,r=s.textures[t];if(!r.extensions||!r.extensions[e])return null;const l=r.extensions[e],u=s.images[l.source];let d=n.textureLoader;if(u.uri){const p=n.options.manager.getHandler(u.uri);p!==null&&(d=p)}return this.detectSupport().then(function(p){if(p)return n.loadTextureImage(t,l.source,d);if(s.extensionsRequired&&s.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class dV{constructor(t){this.parser=t,this.name=Rn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,s=n.json,r=s.textures[t];if(!r.extensions||!r.extensions[e])return null;const l=r.extensions[e],u=s.images[l.source];let d=n.textureLoader;if(u.uri){const p=n.options.manager.getHandler(u.uri);p!==null&&(d=p)}return this.detectSupport().then(function(p){if(p)return n.loadTextureImage(t,l.source,d);if(s.extensionsRequired&&s.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class pV{constructor(t){this.name=Rn.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(u){const d=s.byteOffset||0,p=s.byteLength||0,g=s.count,v=s.byteStride,_=new Uint8Array(u,d,p);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(g,v,_,s.mode,s.filter).then(function(x){return x.buffer}):l.ready.then(function(){const x=new ArrayBuffer(g*v);return l.decodeGltfBuffer(new Uint8Array(x),g,v,_,s.mode,s.filter),x})})}else return null}}class mV{constructor(t){this.name=Rn.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const s=e.meshes[n.mesh];for(const p of s.primitives)if(p.mode!==Nr.TRIANGLES&&p.mode!==Nr.TRIANGLE_STRIP&&p.mode!==Nr.TRIANGLE_FAN&&p.mode!==void 0)return null;const l=n.extensions[this.name].attributes,u=[],d={};for(const p in l)u.push(this.parser.getDependency("accessor",l[p]).then(g=>(d[p]=g,d[p])));return u.length<1?null:(u.push(this.parser.createNodeMesh(t)),Promise.all(u).then(p=>{const g=p.pop(),v=g.isGroup?g.children:[g],_=p[0].count,x=[];for(const b of v){const R=new We,E=new Q,M=new Es,w=new Q(1,1,1),B=new _M(b.geometry,b.material,_);for(let D=0;D<_;D++)d.TRANSLATION&&E.fromBufferAttribute(d.TRANSLATION,D),d.ROTATION&&M.fromBufferAttribute(d.ROTATION,D),d.SCALE&&w.fromBufferAttribute(d.SCALE,D),B.setMatrixAt(D,R.compose(E,M,w));for(const D in d)if(D==="_COLOR_0"){const I=d[D];B.instanceColor=new Jf(I.array,I.itemSize,I.normalized)}else D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&b.geometry.setAttribute(D,d[D]);On.prototype.copy.call(B,b),this.parser.assignFinalMaterial(B),x.push(B)}return g.isGroup?(g.clear(),g.add(...x),g):x[0]}))}}const D3="glTF",Fm=12,b2={JSON:1313821514,BIN:5130562};class gV{constructor(t){this.name=Rn.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,Fm);if(this.header={magic:N_(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==D3)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-Fm,s=new DataView(t,Fm);let r=0;for(;r<n;){const l=s.getUint32(r,!0);r+=4;const u=s.getUint32(r,!0);if(r+=4,u===b2.JSON){const d=new Uint8Array(t,Fm+r,l);this.content=N_(d)}else if(u===b2.BIN){const d=Fm+r;this.body=t.slice(d,d+l)}r+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class vV{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Rn.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,s=this.dracoLoader,r=t.extensions[this.name].bufferView,l=t.extensions[this.name].attributes,u={},d={},p={};for(const g in l){const v=MS[g]||g.toLowerCase();u[v]=l[g]}for(const g in t.attributes){const v=MS[g]||g.toLowerCase();if(l[g]!==void 0){const _=n.accessors[t.attributes[g]],x=Pd[_.componentType];p[v]=x.name,d[v]=_.normalized===!0}}return e.getDependency("bufferView",r).then(function(g){return new Promise(function(v,_){s.decodeDracoFile(g,function(x){for(const b in x.attributes){const R=x.attributes[b],E=d[b];E!==void 0&&(R.normalized=E)}v(x)},u,p,ec,_)})})}}class yV{constructor(){this.name=Rn.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord===void 0||e.texCoord===t.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class _V{constructor(){this.name=Rn.KHR_MESH_QUANTIZATION}}class U3 extends op{constructor(t,e,n,s){super(t,e,n,s)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=t*s*3+s;for(let l=0;l!==s;l++)e[l]=n[r+l];return e}interpolate_(t,e,n,s){const r=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=u*2,p=u*3,g=s-e,v=(n-e)/g,_=v*v,x=_*v,b=t*p,R=b-p,E=-2*x+3*_,M=x-_,w=1-E,B=M-_+v;for(let D=0;D!==u;D++){const I=l[R+D+u],L=l[R+D+d]*g,V=l[b+D+u],H=l[b+D]*g;r[D]=w*I+B*L+E*V+M*H}return r}}const xV=new Es;class AV extends U3{interpolate_(t,e,n,s){const r=super.interpolate_(t,e,n,s);return xV.fromArray(r).normalize().toArray(r),r}}const Nr={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Pd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},E2={9728:bs,9729:Wn,9984:F_,9985:Ld,9986:Pf,9987:Lr},T2={33071:Wi,33648:Vd,10497:mu},C1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},MS={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...eb>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},su={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},SV={CUBICSPLINE:void 0,LINEAR:Wd,STEP:qd},R1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function MV(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Yg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:dl})),i.DefaultMaterial}function Rf(i,t,e){for(const n in e.extensions)i[n]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=e.extensions[n])}function Wl(i,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(i.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function bV(i,t,e){let n=!1,s=!1,r=!1;for(let p=0,g=t.length;p<g;p++){const v=t[p];if(v.POSITION!==void 0&&(n=!0),v.NORMAL!==void 0&&(s=!0),v.COLOR_0!==void 0&&(r=!0),n&&s&&r)break}if(!n&&!s&&!r)return Promise.resolve(i);const l=[],u=[],d=[];for(let p=0,g=t.length;p<g;p++){const v=t[p];if(n){const _=v.POSITION!==void 0?e.getDependency("accessor",v.POSITION):i.attributes.position;l.push(_)}if(s){const _=v.NORMAL!==void 0?e.getDependency("accessor",v.NORMAL):i.attributes.normal;u.push(_)}if(r){const _=v.COLOR_0!==void 0?e.getDependency("accessor",v.COLOR_0):i.attributes.color;d.push(_)}}return Promise.all([Promise.all(l),Promise.all(u),Promise.all(d)]).then(function(p){const g=p[0],v=p[1],_=p[2];return n&&(i.morphAttributes.position=g),s&&(i.morphAttributes.normal=v),r&&(i.morphAttributes.color=_),i.morphTargetsRelative=!0,i})}function EV(i,t){if(i.updateMorphTargets(),t.weights!==void 0)for(let e=0,n=t.weights.length;e<n;e++)i.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(i.morphTargetInfluences.length===e.length){i.morphTargetDictionary={};for(let n=0,s=e.length;n<s;n++)i.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function TV(i){let t;const e=i.extensions&&i.extensions[Rn.KHR_DRACO_MESH_COMPRESSION];if(e?t="draco:"+e.bufferView+":"+e.indices+":"+w1(e.attributes):t=i.indices+":"+w1(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,s=i.targets.length;n<s;n++)t+=":"+w1(i.targets[n]);return t}function w1(i){let t="";const e=Object.keys(i).sort();for(let n=0,s=e.length;n<s;n++)t+=e[n]+":"+i[e[n]]+";";return t}function bS(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function CV(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const RV=new We;class wV{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new Z9,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,s=!1,r=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||s&&r<98?this.textureLoader=new OM(this.options.manager):this.textureLoader=new jB(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new zs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(l){const u={scene:l[0][s.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:s.asset,parser:n,userData:{}};return Rf(r,u,s),Wl(u,s),Promise.all(n._invokeAll(function(d){return d.afterRoot&&d.afterRoot(u)})).then(function(){for(const d of u.scenes)d.updateMatrixWorld();t(u)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let s=0,r=e.length;s<r;s++){const l=e[s].joints;for(let u=0,d=l.length;u<d;u++)t[l[u]].isBone=!0}for(let s=0,r=t.length;s<r;s++){const l=t[s];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(n[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const s=n.clone(),r=(l,u)=>{const d=this.associations.get(l);d!=null&&this.associations.set(u,d);for(const[p,g]of l.children.entries())r(g,u.children[p])};return r(n,s),s.name+="_instance_"+t.uses[e]++,s}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const s=t(e[n]);if(s)return s}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let s=0;s<e.length;s++){const r=t(e[s]);r&&n.push(r)}return n}getDependency(t,e){const n=t+":"+e;let s=this.cache.get(n);if(!s){switch(t){case"scene":s=this.loadScene(e);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(e)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(e)});break;case"accessor":s=this.loadAccessor(e);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(e)});break;case"buffer":s=this.loadBuffer(e);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(e)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(e)});break;case"skin":s=this.loadSkin(e);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(e)});break;case"camera":s=this.loadCamera(e);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(t,e)}),!s)throw new Error("Unknown type: "+t);break}this.cache.add(n,s)}return s}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,s=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(s.map(function(r,l){return n.getDependency(t,l)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[Rn.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,l){n.load(uu.resolveURL(e.uri,s.path),r,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(n){const s=e.byteLength||0,r=e.byteOffset||0;return n.slice(r,r+s)})}loadAccessor(t){const e=this,n=this.json,s=this.json.accessors[t];if(s.bufferView===void 0&&s.sparse===void 0){const l=C1[s.type],u=Pd[s.componentType],d=s.normalized===!0,p=new u(s.count*l);return Promise.resolve(new zn(p,l,d))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(l){const u=l[0],d=C1[s.type],p=Pd[s.componentType],g=p.BYTES_PER_ELEMENT,v=g*d,_=s.byteOffset||0,x=s.bufferView!==void 0?n.bufferViews[s.bufferView].byteStride:void 0,b=s.normalized===!0;let R,E;if(x&&x!==v){const M=Math.floor(_/x),w="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+M+":"+s.count;let B=e.cache.get(w);B||(R=new p(u,M*x,s.count*x/g),B=new Hg(R,x/g),e.cache.add(w,B)),E=new gu(B,d,_%x/g,b)}else u===null?R=new p(s.count*d):R=new p(u,_,s.count*d),E=new zn(R,d,b);if(s.sparse!==void 0){const M=C1.SCALAR,w=Pd[s.sparse.indices.componentType],B=s.sparse.indices.byteOffset||0,D=s.sparse.values.byteOffset||0,I=new w(l[1],B,s.sparse.count*M),L=new p(l[2],D,s.sparse.count*d);u!==null&&(E=new zn(E.array.slice(),E.itemSize,E.normalized));for(let V=0,H=I.length;V<H;V++){const N=I[V];if(E.setX(N,L[V*d]),d>=2&&E.setY(N,L[V*d+1]),d>=3&&E.setZ(N,L[V*d+2]),d>=4&&E.setW(N,L[V*d+3]),d>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return E})}loadTexture(t){const e=this.json,n=this.options,r=e.textures[t].source,l=e.images[r];let u=this.textureLoader;if(l.uri){const d=n.manager.getHandler(l.uri);d!==null&&(u=d)}return this.loadTextureImage(t,r,u)}loadTextureImage(t,e,n){const s=this,r=this.json,l=r.textures[t],u=r.images[e],d=(u.uri||u.bufferView)+":"+l.sampler;if(this.textureCache[d])return this.textureCache[d];const p=this.loadImageSource(e,n).then(function(g){g.flipY=!1,g.name=l.name||u.name||"",g.name===""&&typeof u.uri=="string"&&u.uri.startsWith("data:image/")===!1&&(g.name=u.uri);const _=(r.samplers||{})[l.sampler]||{};return g.magFilter=E2[_.magFilter]||Wn,g.minFilter=E2[_.minFilter]||Lr,g.wrapS=T2[_.wrapS]||mu,g.wrapT=T2[_.wrapT]||mu,s.associations.set(g,{textures:t}),g}).catch(function(){return null});return this.textureCache[d]=p,p}loadImageSource(t,e){const n=this,s=this.json,r=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(v=>v.clone());const l=s.images[t],u=self.URL||self.webkitURL;let d=l.uri||"",p=!1;if(l.bufferView!==void 0)d=n.getDependency("bufferView",l.bufferView).then(function(v){p=!0;const _=new Blob([v],{type:l.mimeType});return d=u.createObjectURL(_),d});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const g=Promise.resolve(d).then(function(v){return new Promise(function(_,x){let b=_;e.isImageBitmapLoader===!0&&(b=function(R){const E=new Jn(R);E.needsUpdate=!0,_(E)}),e.load(uu.resolveURL(v,r.path),b,void 0,x)})}).then(function(v){return p===!0&&u.revokeObjectURL(d),Wl(v,l),v.userData.mimeType=l.mimeType||CV(l.uri),v}).catch(function(v){throw console.error("THREE.GLTFLoader: Couldn't load texture",d),v});return this.sourceCache[t]=g,g}assignTexture(t,e,n,s){const r=this;return this.getDependency("texture",n.index).then(function(l){if(!l)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(l=l.clone(),l.channel=n.texCoord),r.extensions[Rn.KHR_TEXTURE_TRANSFORM]){const u=n.extensions!==void 0?n.extensions[Rn.KHR_TEXTURE_TRANSFORM]:void 0;if(u){const d=r.associations.get(l);l=r.extensions[Rn.KHR_TEXTURE_TRANSFORM].extendTexture(l,u),r.associations.set(l,d)}}return s!==void 0&&(typeof s=="number"&&(s=s===M2?kf:ec),"colorSpace"in l?l.colorSpace=s:l.encoding=s===kf?M2:J9),t[e]=l,l})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const s=e.attributes.tangent===void 0,r=e.attributes.color!==void 0,l=e.attributes.normal===void 0;if(t.isPoints){const u="PointsMaterial:"+n.uuid;let d=this.cache.get(u);d||(d=new $_,hs.prototype.copy.call(d,n),d.color.copy(n.color),d.map=n.map,d.sizeAttenuation=!1,this.cache.add(u,d)),n=d}else if(t.isLine){const u="LineBasicMaterial:"+n.uuid;let d=this.cache.get(u);d||(d=new sa,hs.prototype.copy.call(d,n),d.color.copy(n.color),d.map=n.map,this.cache.add(u,d)),n=d}if(s||r||l){let u="ClonedMaterial:"+n.uuid+":";s&&(u+="derivative-tangents:"),r&&(u+="vertex-colors:"),l&&(u+="flat-shading:");let d=this.cache.get(u);d||(d=n.clone(),r&&(d.vertexColors=!0),l&&(d.flatShading=!0),s&&(d.normalScale&&(d.normalScale.y*=-1),d.clearcoatNormalScale&&(d.clearcoatNormalScale.y*=-1)),this.cache.add(u,d),this.associations.set(d,this.associations.get(n))),n=d}t.material=n}getMaterialType(){return Yg}loadMaterial(t){const e=this,n=this.json,s=this.extensions,r=n.materials[t];let l;const u={},d=r.extensions||{},p=[];if(d[Rn.KHR_MATERIALS_UNLIT]){const v=s[Rn.KHR_MATERIALS_UNLIT];l=v.getMaterialType(),p.push(v.extendParams(u,r,e))}else{const v=r.pbrMetallicRoughness||{};if(u.color=new xe(1,1,1),u.opacity=1,Array.isArray(v.baseColorFactor)){const _=v.baseColorFactor;u.color.setRGB(_[0],_[1],_[2],ec),u.opacity=_[3]}v.baseColorTexture!==void 0&&p.push(e.assignTexture(u,"map",v.baseColorTexture,kf)),u.metalness=v.metallicFactor!==void 0?v.metallicFactor:1,u.roughness=v.roughnessFactor!==void 0?v.roughnessFactor:1,v.metallicRoughnessTexture!==void 0&&(p.push(e.assignTexture(u,"metalnessMap",v.metallicRoughnessTexture)),p.push(e.assignTexture(u,"roughnessMap",v.metallicRoughnessTexture))),l=this._invokeOne(function(_){return _.getMaterialType&&_.getMaterialType(t)}),p.push(Promise.all(this._invokeAll(function(_){return _.extendMaterialParams&&_.extendMaterialParams(t,u)})))}r.doubleSided===!0&&(u.side=ka);const g=r.alphaMode||R1.OPAQUE;if(g===R1.BLEND?(u.transparent=!0,u.depthWrite=!1):(u.transparent=!1,g===R1.MASK&&(u.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&l!==Ya&&(p.push(e.assignTexture(u,"normalMap",r.normalTexture)),u.normalScale=new Wt(1,1),r.normalTexture.scale!==void 0)){const v=r.normalTexture.scale;u.normalScale.set(v,v)}if(r.occlusionTexture!==void 0&&l!==Ya&&(p.push(e.assignTexture(u,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(u.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&l!==Ya){const v=r.emissiveFactor;u.emissive=new xe().setRGB(v[0],v[1],v[2],ec)}return r.emissiveTexture!==void 0&&l!==Ya&&p.push(e.assignTexture(u,"emissiveMap",r.emissiveTexture,kf)),Promise.all(p).then(function(){const v=new l(u);return r.name&&(v.name=r.name),Wl(v,r),e.associations.set(v,{materials:t}),r.extensions&&Rf(s,v,r),v})}createUniqueName(t){const e=Fn.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,n=this.extensions,s=this.primitiveCache;function r(u){return n[Rn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(u,e).then(function(d){return C2(d,u,e)})}const l=[];for(let u=0,d=t.length;u<d;u++){const p=t[u],g=TV(p),v=s[g];if(v)l.push(v.promise);else{let _;p.extensions&&p.extensions[Rn.KHR_DRACO_MESH_COMPRESSION]?_=r(p):_=C2(new hn,p,e),s[g]={primitive:p,promise:_},l.push(_)}}return Promise.all(l)}loadMesh(t){const e=this,n=this.json,s=this.extensions,r=n.meshes[t],l=r.primitives,u=[];for(let d=0,p=l.length;d<p;d++){const g=l[d].material===void 0?MV(this.cache):this.getDependency("material",l[d].material);u.push(g)}return u.push(e.loadGeometries(l)),Promise.all(u).then(function(d){const p=d.slice(0,d.length-1),g=d[d.length-1],v=[];for(let x=0,b=g.length;x<b;x++){const R=g[x],E=l[x];let M;const w=p[x];if(E.mode===Nr.TRIANGLES||E.mode===Nr.TRIANGLE_STRIP||E.mode===Nr.TRIANGLE_FAN||E.mode===void 0)M=r.isSkinnedMesh===!0?new yM(R,w):new Ei(R,w),M.isSkinnedMesh===!0&&M.normalizeSkinWeights(),E.mode===Nr.TRIANGLE_STRIP?M.geometry=x2(M.geometry,fM):E.mode===Nr.TRIANGLE_FAN&&(M.geometry=x2(M.geometry,M_));else if(E.mode===Nr.LINES)M=new Mo(R,w);else if(E.mode===Nr.LINE_STRIP)M=new sc(R,w);else if(E.mode===Nr.LINE_LOOP)M=new xM(R,w);else if(E.mode===Nr.POINTS)M=new AM(R,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+E.mode);Object.keys(M.geometry.morphAttributes).length>0&&EV(M,r),M.name=e.createUniqueName(r.name||"mesh_"+t),Wl(M,r),E.extensions&&Rf(s,M,E),e.assignFinalMaterial(M),v.push(M)}for(let x=0,b=v.length;x<b;x++)e.associations.set(v[x],{meshes:t,primitives:x});if(v.length===1)return r.extensions&&Rf(s,v[0],r),v[0];const _=new Ql;r.extensions&&Rf(s,_,r),e.associations.set(_,{meshes:t});for(let x=0,b=v.length;x<b;x++)_.add(v[x]);return _})}loadCamera(t){let e;const n=this.json.cameras[t],s=n[n.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?e=new bi($w.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):n.type==="orthographic"&&(e=new Fr(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),Wl(e,n),Promise.resolve(e)}loadSkin(t){const e=this.json.skins[t],n=[];for(let s=0,r=e.joints.length;s<r;s++)n.push(this._loadNodeShallow(e.joints[s]));return e.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",e.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(s){const r=s.pop(),l=s,u=[],d=[];for(let p=0,g=l.length;p<g;p++){const v=l[p];if(v){u.push(v);const _=new We;r!==null&&_.fromArray(r.array,p*16),d.push(_)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[p])}return new zg(u,d)})}loadAnimation(t){const e=this.json,n=this,s=e.animations[t],r=s.name?s.name:"animation_"+t,l=[],u=[],d=[],p=[],g=[];for(let v=0,_=s.channels.length;v<_;v++){const x=s.channels[v],b=s.samplers[x.sampler],R=x.target,E=R.node,M=s.parameters!==void 0?s.parameters[b.input]:b.input,w=s.parameters!==void 0?s.parameters[b.output]:b.output;R.node!==void 0&&(l.push(this.getDependency("node",E)),u.push(this.getDependency("accessor",M)),d.push(this.getDependency("accessor",w)),p.push(b),g.push(R))}return Promise.all([Promise.all(l),Promise.all(u),Promise.all(d),Promise.all(p),Promise.all(g)]).then(function(v){const _=v[0],x=v[1],b=v[2],R=v[3],E=v[4],M=[];for(let w=0,B=_.length;w<B;w++){const D=_[w],I=x[w],L=b[w],V=R[w],H=E[w];if(D===void 0)continue;D.updateMatrix&&D.updateMatrix();const N=n._createAnimationTracks(D,I,L,V,H);if(N)for(let O=0;O<N.length;O++)M.push(N[O])}return new $d(r,void 0,M)})}createNodeMesh(t){const e=this.json,n=this,s=e.nodes[t];return s.mesh===void 0?null:n.getDependency("mesh",s.mesh).then(function(r){const l=n._getNodeRef(n.meshCache,s.mesh,r);return s.weights!==void 0&&l.traverse(function(u){if(u.isMesh)for(let d=0,p=s.weights.length;d<p;d++)u.morphTargetInfluences[d]=s.weights[d]}),l})}loadNode(t){const e=this.json,n=this,s=e.nodes[t],r=n._loadNodeShallow(t),l=[],u=s.children||[];for(let p=0,g=u.length;p<g;p++)l.push(n.getDependency("node",u[p]));const d=s.skin===void 0?Promise.resolve(null):n.getDependency("skin",s.skin);return Promise.all([r,Promise.all(l),d]).then(function(p){const g=p[0],v=p[1],_=p[2];_!==null&&g.traverse(function(x){x.isSkinnedMesh&&x.bind(_,RV)});for(let x=0,b=v.length;x<b;x++)g.add(v[x]);return g})}_loadNodeShallow(t){const e=this.json,n=this.extensions,s=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const r=e.nodes[t],l=r.name?s.createUniqueName(r.name):"",u=[],d=s._invokeOne(function(p){return p.createNodeMesh&&p.createNodeMesh(t)});return d&&u.push(d),r.camera!==void 0&&u.push(s.getDependency("camera",r.camera).then(function(p){return s._getNodeRef(s.cameraCache,r.camera,p)})),s._invokeAll(function(p){return p.createNodeAttachment&&p.createNodeAttachment(t)}).forEach(function(p){u.push(p)}),this.nodeCache[t]=Promise.all(u).then(function(p){let g;if(r.isBone===!0?g=new Z_:p.length>1?g=new Ql:p.length===1?g=p[0]:g=new On,g!==p[0])for(let v=0,_=p.length;v<_;v++)g.add(p[v]);if(r.name&&(g.userData.name=r.name,g.name=l),Wl(g,r),r.extensions&&Rf(n,g,r),r.matrix!==void 0){const v=new We;v.fromArray(r.matrix),g.applyMatrix4(v)}else r.translation!==void 0&&g.position.fromArray(r.translation),r.rotation!==void 0&&g.quaternion.fromArray(r.rotation),r.scale!==void 0&&g.scale.fromArray(r.scale);return s.associations.has(g)||s.associations.set(g,{}),s.associations.get(g).nodes=t,g}),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],s=this,r=new Ql;n.name&&(r.name=s.createUniqueName(n.name)),Wl(r,n),n.extensions&&Rf(e,r,n);const l=n.nodes||[],u=[];for(let d=0,p=l.length;d<p;d++)u.push(s.getDependency("node",l[d]));return Promise.all(u).then(function(d){for(let g=0,v=d.length;g<v;g++)r.add(d[g]);const p=g=>{const v=new Map;for(const[_,x]of s.associations)(_ instanceof hs||_ instanceof Jn)&&v.set(_,x);return g.traverse(_=>{const x=s.associations.get(_);x!=null&&v.set(_,x)}),v};return s.associations=p(r),r})}_createAnimationTracks(t,e,n,s,r){const l=[],u=t.name?t.name:t.uuid,d=[];su[r.path]===su.weights?t.traverse(function(_){_.morphTargetInfluences&&d.push(_.name?_.name:_.uuid)}):d.push(u);let p;switch(su[r.path]){case su.weights:p=Qf;break;case su.rotation:p=$f;break;case su.position:case su.scale:p=th;break;default:switch(n.itemSize){case 1:p=Qf;break;case 2:case 3:default:p=th;break}break}const g=s.interpolation!==void 0?SV[s.interpolation]:Wd,v=this._getArrayFromAccessor(n);for(let _=0,x=d.length;_<x;_++){const b=new p(d[_]+"."+su[r.path],e.array,v,g);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(b),l.push(b)}return l}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const n=bS(e.constructor),s=new Float32Array(e.length);for(let r=0,l=e.length;r<l;r++)s[r]=e[r]*n;e=s}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(n){const s=this instanceof $f?AV:U3;return new s(this.times,this.values,this.getValueSize()/3,n)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function BV(i,t,e){const n=t.attributes,s=new Hs;if(n.POSITION!==void 0){const u=e.json.accessors[n.POSITION],d=u.min,p=u.max;if(d!==void 0&&p!==void 0){if(s.set(new Q(d[0],d[1],d[2]),new Q(p[0],p[1],p[2])),u.normalized){const g=bS(Pd[u.componentType]);s.min.multiplyScalar(g),s.max.multiplyScalar(g)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=t.targets;if(r!==void 0){const u=new Q,d=new Q;for(let p=0,g=r.length;p<g;p++){const v=r[p];if(v.POSITION!==void 0){const _=e.json.accessors[v.POSITION],x=_.min,b=_.max;if(x!==void 0&&b!==void 0){if(d.setX(Math.max(Math.abs(x[0]),Math.abs(b[0]))),d.setY(Math.max(Math.abs(x[1]),Math.abs(b[1]))),d.setZ(Math.max(Math.abs(x[2]),Math.abs(b[2]))),_.normalized){const R=bS(Pd[_.componentType]);d.multiplyScalar(R)}u.max(d)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(u)}i.boundingBox=s;const l=new Ts;s.getCenter(l.center),l.radius=s.min.distanceTo(s.max)/2,i.boundingSphere=l}function C2(i,t,e){const n=t.attributes,s=[];function r(l,u){return e.getDependency("accessor",l).then(function(d){i.setAttribute(u,d)})}for(const l in n){const u=MS[l]||l.toLowerCase();u in i.attributes||s.push(r(n[l],u))}if(t.indices!==void 0&&!i.index){const l=e.getDependency("accessor",t.indices).then(function(u){i.setIndex(u)});s.push(l)}return Wl(i,t),BV(i,t,e),Promise.all(s).then(function(){return t.targets!==void 0?bV(i,t.targets,e):i})}class DV extends NM{constructor(t){super(t),this.type=Ms}parse(t){const l=function(H,N){switch(H){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(N||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(N||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(N||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(N||""))}},g=`
`,v=function(H,N,O){N=N||1024;let ht=H.pos,et=-1,dt=0,mt="",F=String.fromCharCode.apply(null,new Uint16Array(H.subarray(ht,ht+128)));for(;0>(et=F.indexOf(g))&&dt<N&&ht<H.byteLength;)mt+=F,dt+=F.length,ht+=128,F+=String.fromCharCode.apply(null,new Uint16Array(H.subarray(ht,ht+128)));return-1<et?(H.pos+=dt+et+1,mt+F.slice(0,et)):!1},_=function(H){const N=/^#\?(\S+)/,O=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Y=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,ht=/^\s*FORMAT=(\S+)\s*$/,et=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,dt={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let mt,F;for((H.pos>=H.byteLength||!(mt=v(H)))&&l(1,"no header found"),(F=mt.match(N))||l(3,"bad initial token"),dt.valid|=1,dt.programtype=F[1],dt.string+=mt+`
`;mt=v(H),mt!==!1;){if(dt.string+=mt+`
`,mt.charAt(0)==="#"){dt.comments+=mt+`
`;continue}if((F=mt.match(O))&&(dt.gamma=parseFloat(F[1])),(F=mt.match(Y))&&(dt.exposure=parseFloat(F[1])),(F=mt.match(ht))&&(dt.valid|=2,dt.format=F[1]),(F=mt.match(et))&&(dt.valid|=4,dt.height=parseInt(F[1],10),dt.width=parseInt(F[2],10)),dt.valid&2&&dt.valid&4)break}return dt.valid&2||l(3,"missing format specifier"),dt.valid&4||l(3,"missing image size specifier"),dt},x=function(H,N,O){const Y=N;if(Y<8||Y>32767||H[0]!==2||H[1]!==2||H[2]&128)return new Uint8Array(H);Y!==(H[2]<<8|H[3])&&l(3,"wrong scanline width");const ht=new Uint8Array(4*N*O);ht.length||l(4,"unable to allocate buffer space");let et=0,dt=0;const mt=4*Y,F=new Uint8Array(4),K=new Uint8Array(mt);let $=O;for(;$>0&&dt<H.byteLength;){dt+4>H.byteLength&&l(1),F[0]=H[dt++],F[1]=H[dt++],F[2]=H[dt++],F[3]=H[dt++],(F[0]!=2||F[1]!=2||(F[2]<<8|F[3])!=Y)&&l(3,"bad rgbe scanline format");let yt=0,X;for(;yt<mt&&dt<H.byteLength;){X=H[dt++];const xt=X>128;if(xt&&(X-=128),(X===0||yt+X>mt)&&l(3,"bad scanline data"),xt){const bt=H[dt++];for(let ot=0;ot<X;ot++)K[yt++]=bt}else K.set(H.subarray(dt,dt+X),yt),yt+=X,dt+=X}const lt=Y;for(let xt=0;xt<lt;xt++){let bt=0;ht[et]=K[xt+bt],bt+=Y,ht[et+1]=K[xt+bt],bt+=Y,ht[et+2]=K[xt+bt],bt+=Y,ht[et+3]=K[xt+bt],et+=4}$--}return ht},b=function(H,N,O,Y){const ht=H[N+3],et=Math.pow(2,ht-128)/255;O[Y+0]=H[N+0]*et,O[Y+1]=H[N+1]*et,O[Y+2]=H[N+2]*et,O[Y+3]=1},R=function(H,N,O,Y){const ht=H[N+3],et=Math.pow(2,ht-128)/255;O[Y+0]=zf.toHalfFloat(Math.min(H[N+0]*et,65504)),O[Y+1]=zf.toHalfFloat(Math.min(H[N+1]*et,65504)),O[Y+2]=zf.toHalfFloat(Math.min(H[N+2]*et,65504)),O[Y+3]=zf.toHalfFloat(1)},E=new Uint8Array(t);E.pos=0;const M=_(E),w=M.width,B=M.height,D=x(E.subarray(E.pos),w,B);let I,L,V;switch(this.type){case Li:V=D.length/4;const H=new Float32Array(V*4);for(let O=0;O<V;O++)b(D,O*4,H,O*4);I=H,L=Li;break;case Ms:V=D.length/4;const N=new Uint16Array(V*4);for(let O=0;O<V;O++)R(D,O*4,N,O*4);I=N,L=Ms;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:w,height:B,data:I,header:M.string,gamma:M.gamma,exposure:M.exposure,type:L}}setDataType(t){return this.type=t,this}load(t,e,n,s){function r(l,u){switch(l.type){case Li:case Ms:"colorSpace"in l?l.colorSpace="srgb-linear":l.encoding=3e3,l.minFilter=Wn,l.magFilter=Wn,l.generateMipmaps=!1,l.flipY=!0;break}e&&e(l,u)}return super.load(t,r,n,s)}}const Hm=eb>=152;class UV extends NM{constructor(t){super(t),this.type=Ms}parse(t){const N=Math.pow(2.7182818,2.2);function O(z,W){for(var ut=0,wt=0;wt<65536;++wt)(wt==0||z[wt>>3]&1<<(wt&7))&&(W[ut++]=wt);for(var Dt=ut-1;ut<65536;)W[ut++]=0;return Dt}function Y(z){for(var W=0;W<16384;W++)z[W]={},z[W].len=0,z[W].lit=0,z[W].p=null}const ht={l:0,c:0,lc:0};function et(z,W,ut,wt,Dt){for(;ut<z;)W=W<<8|de(wt,Dt),ut+=8;ut-=z,ht.l=W>>ut&(1<<z)-1,ht.c=W,ht.lc=ut}const dt=new Array(59);function mt(z){for(var W=0;W<=58;++W)dt[W]=0;for(var W=0;W<65537;++W)dt[z[W]]+=1;for(var ut=0,W=58;W>0;--W){var wt=ut+dt[W]>>1;dt[W]=ut,ut=wt}for(var W=0;W<65537;++W){var Dt=z[W];Dt>0&&(z[W]=Dt|dt[Dt]++<<6)}}function F(z,W,ut,wt,Dt,Gt,oe){for(var ne=ut,G=0,tt=0;Dt<=Gt;Dt++){if(ne.value-ut.value>wt)return!1;et(6,G,tt,z,ne);var st=ht.l;if(G=ht.c,tt=ht.lc,oe[Dt]=st,st==63){if(ne.value-ut.value>wt)throw"Something wrong with hufUnpackEncTable";et(8,G,tt,z,ne);var at=ht.l+6;if(G=ht.c,tt=ht.lc,Dt+at>Gt+1)throw"Something wrong with hufUnpackEncTable";for(;at--;)oe[Dt++]=0;Dt--}else if(st>=59){var at=st-59+2;if(Dt+at>Gt+1)throw"Something wrong with hufUnpackEncTable";for(;at--;)oe[Dt++]=0;Dt--}}mt(oe)}function K(z){return z&63}function $(z){return z>>6}function yt(z,W,ut,wt){for(;W<=ut;W++){var Dt=$(z[W]),Gt=K(z[W]);if(Dt>>Gt)throw"Invalid table entry";if(Gt>14){var oe=wt[Dt>>Gt-14];if(oe.len)throw"Invalid table entry";if(oe.lit++,oe.p){var ne=oe.p;oe.p=new Array(oe.lit);for(var G=0;G<oe.lit-1;++G)oe.p[G]=ne[G]}else oe.p=new Array(1);oe.p[oe.lit-1]=W}else if(Gt)for(var tt=0,G=1<<14-Gt;G>0;G--){var oe=wt[(Dt<<14-Gt)+tt];if(oe.len||oe.p)throw"Invalid table entry";oe.len=Gt,oe.lit=W,tt++}}return!0}const X={c:0,lc:0};function lt(z,W,ut,wt){z=z<<8|de(ut,wt),W+=8,X.c=z,X.lc=W}const xt={c:0,lc:0};function bt(z,W,ut,wt,Dt,Gt,oe,ne,G,tt){if(z==W){wt<8&&(lt(ut,wt,Dt,oe),ut=X.c,wt=X.lc),wt-=8;var st=ut>>wt,st=new Uint8Array([st])[0];if(G.value+st>tt)return!1;for(var at=ne[G.value-1];st-- >0;)ne[G.value++]=at}else if(G.value<tt)ne[G.value++]=z;else return!1;xt.c=ut,xt.lc=wt}function ot(z){return z&65535}function Ot(z){var W=ot(z);return W>32767?W-65536:W}const It={a:0,b:0};function ie(z,W){var ut=Ot(z),wt=Ot(W),Dt=wt,Gt=ut+(Dt&1)+(Dt>>1),oe=Gt,ne=Gt-Dt;It.a=oe,It.b=ne}function se(z,W){var ut=ot(z),wt=ot(W),Dt=ut-(wt>>1)&65535,Gt=wt+Dt-32768&65535;It.a=Gt,It.b=Dt}function Ie(z,W,ut,wt,Dt,Gt,oe){for(var ne=oe<16384,G=ut>Dt?Dt:ut,tt=1,st;tt<=G;)tt<<=1;for(tt>>=1,st=tt,tt>>=1;tt>=1;){for(var at=0,gt=at+Gt*(Dt-st),Tt=Gt*tt,Vt=Gt*st,jt=wt*tt,ee=wt*st,ve,pe,ye,ke;at<=gt;at+=Vt){for(var Le=at,Tn=at+wt*(ut-st);Le<=Tn;Le+=ee){var De=Le+jt,ze=Le+Tt,Ue=ze+jt;ne?(ie(z[Le+W],z[ze+W]),ve=It.a,ye=It.b,ie(z[De+W],z[Ue+W]),pe=It.a,ke=It.b,ie(ve,pe),z[Le+W]=It.a,z[De+W]=It.b,ie(ye,ke),z[ze+W]=It.a,z[Ue+W]=It.b):(se(z[Le+W],z[ze+W]),ve=It.a,ye=It.b,se(z[De+W],z[Ue+W]),pe=It.a,ke=It.b,se(ve,pe),z[Le+W]=It.a,z[De+W]=It.b,se(ye,ke),z[ze+W]=It.a,z[Ue+W]=It.b)}if(ut&tt){var ze=Le+Tt;ne?ie(z[Le+W],z[ze+W]):se(z[Le+W],z[ze+W]),ve=It.a,z[ze+W]=It.b,z[Le+W]=ve}}if(Dt&tt)for(var Le=at,Tn=at+wt*(ut-st);Le<=Tn;Le+=ee){var De=Le+jt;ne?ie(z[Le+W],z[De+W]):se(z[Le+W],z[De+W]),ve=It.a,z[De+W]=It.b,z[Le+W]=ve}st=tt,tt>>=1}return at}function Ae(z,W,ut,wt,Dt,Gt,oe,ne,G,tt){for(var st=0,at=0,gt=ne,Tt=Math.trunc(Dt.value+(Gt+7)/8);Dt.value<Tt;)for(lt(st,at,ut,Dt),st=X.c,at=X.lc;at>=14;){var Vt=st>>at-14&16383,jt=W[Vt];if(jt.len)at-=jt.len,bt(jt.lit,oe,st,at,ut,wt,Dt,G,tt,gt),st=xt.c,at=xt.lc;else{if(!jt.p)throw"hufDecode issues";var ee;for(ee=0;ee<jt.lit;ee++){for(var ve=K(z[jt.p[ee]]);at<ve&&Dt.value<Tt;)lt(st,at,ut,Dt),st=X.c,at=X.lc;if(at>=ve&&$(z[jt.p[ee]])==(st>>at-ve&(1<<ve)-1)){at-=ve,bt(jt.p[ee],oe,st,at,ut,wt,Dt,G,tt,gt),st=xt.c,at=xt.lc;break}}if(ee==jt.lit)throw"hufDecode issues"}}var pe=8-Gt&7;for(st>>=pe,at-=pe;at>0;){var jt=W[st<<14-at&16383];if(jt.len)at-=jt.len,bt(jt.lit,oe,st,at,ut,wt,Dt,G,tt,gt),st=xt.c,at=xt.lc;else throw"hufDecode issues"}return!0}function Be(z,W,ut,wt,Dt,Gt){var oe={value:0},ne=ut.value,G=_e(W,ut),tt=_e(W,ut);ut.value+=4;var st=_e(W,ut);if(ut.value+=4,G<0||G>=65537||tt<0||tt>=65537)throw"Something wrong with HUF_ENCSIZE";var at=new Array(65537),gt=new Array(16384);Y(gt);var Tt=wt-(ut.value-ne);if(F(z,W,ut,Tt,G,tt,at),st>8*(wt-(ut.value-ne)))throw"Something wrong with hufUncompress";yt(at,G,tt,gt),Ae(at,gt,z,W,ut,st,tt,Gt,Dt,oe)}function Ve(z,W,ut){for(var wt=0;wt<ut;++wt)W[wt]=z[W[wt]]}function we(z){for(var W=1;W<z.length;W++){var ut=z[W-1]+z[W]-128;z[W]=ut}}function Z(z,W){for(var ut=0,wt=Math.floor((z.length+1)/2),Dt=0,Gt=z.length-1;!(Dt>Gt||(W[Dt++]=z[ut++],Dt>Gt));)W[Dt++]=z[wt++]}function le(z){for(var W=z.byteLength,ut=new Array,wt=0,Dt=new DataView(z);W>0;){var Gt=Dt.getInt8(wt++);if(Gt<0){var oe=-Gt;W-=oe+1;for(var ne=0;ne<oe;ne++)ut.push(Dt.getUint8(wt++))}else{var oe=Gt;W-=2;for(var G=Dt.getUint8(wt++),ne=0;ne<oe+1;ne++)ut.push(G)}}return ut}function te(z,W,ut,wt,Dt,Gt){var De=new DataView(Gt.buffer),oe=ut[z.idx[0]].width,ne=ut[z.idx[0]].height,G=3,tt=Math.floor(oe/8),st=Math.ceil(oe/8),at=Math.ceil(ne/8),gt=oe-(st-1)*8,Tt=ne-(at-1)*8,Vt={value:0},jt=new Array(G),ee=new Array(G),ve=new Array(G),pe=new Array(G),ye=new Array(G);for(let an=0;an<G;++an)ye[an]=W[z.idx[an]],jt[an]=an<1?0:jt[an-1]+st*at,ee[an]=new Float32Array(64),ve[an]=new Uint16Array(64),pe[an]=new Uint16Array(st*64);for(let an=0;an<at;++an){var ke=8;an==at-1&&(ke=Tt);var Le=8;for(let je=0;je<st;++je){je==st-1&&(Le=gt);for(let vn=0;vn<G;++vn)ve[vn].fill(0),ve[vn][0]=Dt[jt[vn]++],Kt(Vt,wt,ve[vn]),Xt(ve[vn],ee[vn]),Te(ee[vn]);Qt(ee);for(let vn=0;vn<G;++vn)J(ee[vn],pe[vn],je*64)}let Zn=0;for(let je=0;je<G;++je){const vn=ut[z.idx[je]].type;for(let pn=8*an;pn<8*an+ke;++pn){Zn=ye[je][pn];for(let ui=0;ui<tt;++ui){const wn=ui*64+(pn&7)*8;De.setUint16(Zn+0*2*vn,pe[je][wn+0],!0),De.setUint16(Zn+1*2*vn,pe[je][wn+1],!0),De.setUint16(Zn+2*2*vn,pe[je][wn+2],!0),De.setUint16(Zn+3*2*vn,pe[je][wn+3],!0),De.setUint16(Zn+4*2*vn,pe[je][wn+4],!0),De.setUint16(Zn+5*2*vn,pe[je][wn+5],!0),De.setUint16(Zn+6*2*vn,pe[je][wn+6],!0),De.setUint16(Zn+7*2*vn,pe[je][wn+7],!0),Zn+=8*2*vn}}if(tt!=st)for(let pn=8*an;pn<8*an+ke;++pn){const ui=ye[je][pn]+8*tt*2*vn,wn=tt*64+(pn&7)*8;for(let Qn=0;Qn<Le;++Qn)De.setUint16(ui+Qn*2*vn,pe[je][wn+Qn],!0)}}}for(var Tn=new Uint16Array(oe),De=new DataView(Gt.buffer),ze=0;ze<G;++ze){ut[z.idx[ze]].decoded=!0;var Ue=ut[z.idx[ze]].type;if(ut[ze].type==2)for(var Yn=0;Yn<ne;++Yn){const an=ye[ze][Yn];for(var $e=0;$e<oe;++$e)Tn[$e]=De.getUint16(an+$e*2*Ue,!0);for(var $e=0;$e<oe;++$e)De.setFloat32(an+$e*2*Ue,Et(Tn[$e]),!0)}}}function Kt(z,W,ut){for(var wt,Dt=1;Dt<64;)wt=W[z.value],wt==65280?Dt=64:wt>>8==255?Dt+=wt&255:(ut[Dt]=wt,Dt++),z.value++}function Xt(z,W){W[0]=Et(z[0]),W[1]=Et(z[1]),W[2]=Et(z[5]),W[3]=Et(z[6]),W[4]=Et(z[14]),W[5]=Et(z[15]),W[6]=Et(z[27]),W[7]=Et(z[28]),W[8]=Et(z[2]),W[9]=Et(z[4]),W[10]=Et(z[7]),W[11]=Et(z[13]),W[12]=Et(z[16]),W[13]=Et(z[26]),W[14]=Et(z[29]),W[15]=Et(z[42]),W[16]=Et(z[3]),W[17]=Et(z[8]),W[18]=Et(z[12]),W[19]=Et(z[17]),W[20]=Et(z[25]),W[21]=Et(z[30]),W[22]=Et(z[41]),W[23]=Et(z[43]),W[24]=Et(z[9]),W[25]=Et(z[11]),W[26]=Et(z[18]),W[27]=Et(z[24]),W[28]=Et(z[31]),W[29]=Et(z[40]),W[30]=Et(z[44]),W[31]=Et(z[53]),W[32]=Et(z[10]),W[33]=Et(z[19]),W[34]=Et(z[23]),W[35]=Et(z[32]),W[36]=Et(z[39]),W[37]=Et(z[45]),W[38]=Et(z[52]),W[39]=Et(z[54]),W[40]=Et(z[20]),W[41]=Et(z[22]),W[42]=Et(z[33]),W[43]=Et(z[38]),W[44]=Et(z[46]),W[45]=Et(z[51]),W[46]=Et(z[55]),W[47]=Et(z[60]),W[48]=Et(z[21]),W[49]=Et(z[34]),W[50]=Et(z[37]),W[51]=Et(z[47]),W[52]=Et(z[50]),W[53]=Et(z[56]),W[54]=Et(z[59]),W[55]=Et(z[61]),W[56]=Et(z[35]),W[57]=Et(z[36]),W[58]=Et(z[48]),W[59]=Et(z[49]),W[60]=Et(z[57]),W[61]=Et(z[58]),W[62]=Et(z[62]),W[63]=Et(z[63])}function Te(z){const W=.5*Math.cos(.7853975),ut=.5*Math.cos(3.14159/16),wt=.5*Math.cos(3.14159/8),Dt=.5*Math.cos(3*3.14159/16),Gt=.5*Math.cos(5*3.14159/16),oe=.5*Math.cos(3*3.14159/8),ne=.5*Math.cos(7*3.14159/16);for(var G=new Array(4),tt=new Array(4),st=new Array(4),at=new Array(4),gt=0;gt<8;++gt){var Tt=gt*8;G[0]=wt*z[Tt+2],G[1]=oe*z[Tt+2],G[2]=wt*z[Tt+6],G[3]=oe*z[Tt+6],tt[0]=ut*z[Tt+1]+Dt*z[Tt+3]+Gt*z[Tt+5]+ne*z[Tt+7],tt[1]=Dt*z[Tt+1]-ne*z[Tt+3]-ut*z[Tt+5]-Gt*z[Tt+7],tt[2]=Gt*z[Tt+1]-ut*z[Tt+3]+ne*z[Tt+5]+Dt*z[Tt+7],tt[3]=ne*z[Tt+1]-Gt*z[Tt+3]+Dt*z[Tt+5]-ut*z[Tt+7],st[0]=W*(z[Tt+0]+z[Tt+4]),st[3]=W*(z[Tt+0]-z[Tt+4]),st[1]=G[0]+G[3],st[2]=G[1]-G[2],at[0]=st[0]+st[1],at[1]=st[3]+st[2],at[2]=st[3]-st[2],at[3]=st[0]-st[1],z[Tt+0]=at[0]+tt[0],z[Tt+1]=at[1]+tt[1],z[Tt+2]=at[2]+tt[2],z[Tt+3]=at[3]+tt[3],z[Tt+4]=at[3]-tt[3],z[Tt+5]=at[2]-tt[2],z[Tt+6]=at[1]-tt[1],z[Tt+7]=at[0]-tt[0]}for(var Vt=0;Vt<8;++Vt)G[0]=wt*z[16+Vt],G[1]=oe*z[16+Vt],G[2]=wt*z[48+Vt],G[3]=oe*z[48+Vt],tt[0]=ut*z[8+Vt]+Dt*z[24+Vt]+Gt*z[40+Vt]+ne*z[56+Vt],tt[1]=Dt*z[8+Vt]-ne*z[24+Vt]-ut*z[40+Vt]-Gt*z[56+Vt],tt[2]=Gt*z[8+Vt]-ut*z[24+Vt]+ne*z[40+Vt]+Dt*z[56+Vt],tt[3]=ne*z[8+Vt]-Gt*z[24+Vt]+Dt*z[40+Vt]-ut*z[56+Vt],st[0]=W*(z[Vt]+z[32+Vt]),st[3]=W*(z[Vt]-z[32+Vt]),st[1]=G[0]+G[3],st[2]=G[1]-G[2],at[0]=st[0]+st[1],at[1]=st[3]+st[2],at[2]=st[3]-st[2],at[3]=st[0]-st[1],z[0+Vt]=at[0]+tt[0],z[8+Vt]=at[1]+tt[1],z[16+Vt]=at[2]+tt[2],z[24+Vt]=at[3]+tt[3],z[32+Vt]=at[3]-tt[3],z[40+Vt]=at[2]-tt[2],z[48+Vt]=at[1]-tt[1],z[56+Vt]=at[0]-tt[0]}function Qt(z){for(var W=0;W<64;++W){var ut=z[0][W],wt=z[1][W],Dt=z[2][W];z[0][W]=ut+1.5747*Dt,z[1][W]=ut-.1873*wt-.4682*Dt,z[2][W]=ut+1.8556*wt}}function J(z,W,ut){for(var wt=0;wt<64;++wt)W[ut+wt]=zf.toHalfFloat(k(z[wt]))}function k(z){return z<=1?Math.sign(z)*Math.pow(Math.abs(z),2.2):Math.sign(z)*Math.pow(N,Math.abs(z)-1)}function _t(z){return new DataView(z.array.buffer,z.offset.value,z.size)}function zt(z){var W=z.viewer.buffer.slice(z.offset.value,z.offset.value+z.size),ut=new Uint8Array(le(W)),wt=new Uint8Array(ut.length);return we(ut),Z(ut,wt),new DataView(wt.buffer)}function Jt(z){var W=z.array.slice(z.offset.value,z.offset.value+z.size),ut=xy(W),wt=new Uint8Array(ut.length);return we(ut),Z(ut,wt),new DataView(wt.buffer)}function Ht(z){for(var W=z.viewer,ut={value:z.offset.value},wt=new Uint16Array(z.width*z.scanlineBlockSize*(z.channels*z.type)),Dt=new Uint8Array(8192),Gt=0,oe=new Array(z.channels),ne=0;ne<z.channels;ne++)oe[ne]={},oe[ne].start=Gt,oe[ne].end=oe[ne].start,oe[ne].nx=z.width,oe[ne].ny=z.lines,oe[ne].size=z.type,Gt+=oe[ne].nx*oe[ne].ny*oe[ne].size;var G=Nt(W,ut),tt=Nt(W,ut);if(tt>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(G<=tt)for(var ne=0;ne<tt-G+1;ne++)Dt[ne+G]=ft(W,ut);var st=new Uint16Array(65536),at=O(Dt,st),gt=_e(W,ut);Be(z.array,W,ut,gt,wt,Gt);for(var ne=0;ne<z.channels;++ne)for(var Tt=oe[ne],Vt=0;Vt<oe[ne].size;++Vt)Ie(wt,Tt.start+Vt,Tt.nx,Tt.size,Tt.ny,Tt.nx*Tt.size,at);Ve(st,wt,Gt);for(var jt=0,ee=new Uint8Array(wt.buffer.byteLength),ve=0;ve<z.lines;ve++)for(var pe=0;pe<z.channels;pe++){var Tt=oe[pe],ye=Tt.nx*Tt.size,ke=new Uint8Array(wt.buffer,Tt.end*2,ye*2);ee.set(ke,jt),jt+=ye*2,Tt.end+=ye}return new DataView(ee.buffer)}function fe(z){var W=z.array.slice(z.offset.value,z.offset.value+z.size),ut=xy(W);const wt=z.lines*z.channels*z.width,Dt=z.type==1?new Uint16Array(wt):new Uint32Array(wt);let Gt=0,oe=0;const ne=new Array(4);for(let G=0;G<z.lines;G++)for(let tt=0;tt<z.channels;tt++){let st=0;switch(z.type){case 1:ne[0]=Gt,ne[1]=ne[0]+z.width,Gt=ne[1]+z.width;for(let at=0;at<z.width;++at){const gt=ut[ne[0]++]<<8|ut[ne[1]++];st+=gt,Dt[oe]=st,oe++}break;case 2:ne[0]=Gt,ne[1]=ne[0]+z.width,ne[2]=ne[1]+z.width,Gt=ne[2]+z.width;for(let at=0;at<z.width;++at){const gt=ut[ne[0]++]<<24|ut[ne[1]++]<<16|ut[ne[2]++]<<8;st+=gt,Dt[oe]=st,oe++}break}}return new DataView(Dt.buffer)}function ue(z){var W=z.viewer,ut={value:z.offset.value},wt=new Uint8Array(z.width*z.lines*(z.channels*z.type*2)),Dt={version:Ft(W,ut),unknownUncompressedSize:Ft(W,ut),unknownCompressedSize:Ft(W,ut),acCompressedSize:Ft(W,ut),dcCompressedSize:Ft(W,ut),rleCompressedSize:Ft(W,ut),rleUncompressedSize:Ft(W,ut),rleRawSize:Ft(W,ut),totalAcUncompressedCount:Ft(W,ut),totalDcUncompressedCount:Ft(W,ut),acCompression:Ft(W,ut)};if(Dt.version<2)throw"EXRLoader.parse: "+is.compression+" version "+Dt.version+" is unsupported";for(var Gt=new Array,oe=Nt(W,ut)-2;oe>0;){var ne=Se(W.buffer,ut),G=ft(W,ut),tt=G>>2&3,st=(G>>4)-1,at=new Int8Array([st])[0],gt=ft(W,ut);Gt.push({name:ne,index:at,type:gt,compression:tt}),oe-=ne.length+3}for(var Tt=is.channels,Vt=new Array(z.channels),jt=0;jt<z.channels;++jt){var ee=Vt[jt]={},ve=Tt[jt];ee.name=ve.name,ee.compression=0,ee.decoded=!1,ee.type=ve.pixelType,ee.pLinear=ve.pLinear,ee.width=z.width,ee.height=z.lines}for(var pe={idx:new Array(3)},ye=0;ye<z.channels;++ye)for(var ee=Vt[ye],jt=0;jt<Gt.length;++jt){var ke=Gt[jt];ee.name==ke.name&&(ee.compression=ke.compression,ke.index>=0&&(pe.idx[ke.index]=ye),ee.offset=ye)}if(Dt.acCompressedSize>0)switch(Dt.acCompression){case 0:var De=new Uint16Array(Dt.totalAcUncompressedCount);Be(z.array,W,ut,Dt.acCompressedSize,De,Dt.totalAcUncompressedCount);break;case 1:var Le=z.array.slice(ut.value,ut.value+Dt.totalAcUncompressedCount),Tn=xy(Le),De=new Uint16Array(Tn.buffer);ut.value+=Dt.totalAcUncompressedCount;break}if(Dt.dcCompressedSize>0){var ze={array:z.array,offset:ut,size:Dt.dcCompressedSize},Ue=new Uint16Array(Jt(ze).buffer);ut.value+=Dt.dcCompressedSize}if(Dt.rleRawSize>0){var Le=z.array.slice(ut.value,ut.value+Dt.rleCompressedSize),Tn=xy(Le),Yn=le(Tn.buffer);ut.value+=Dt.rleCompressedSize}for(var $e=0,an=new Array(Vt.length),jt=0;jt<an.length;++jt)an[jt]=new Array;for(var Zn=0;Zn<z.lines;++Zn)for(var je=0;je<Vt.length;++je)an[je].push($e),$e+=Vt[je].width*z.type*2;te(pe,an,Vt,De,Ue,wt);for(var jt=0;jt<Vt.length;++jt){var ee=Vt[jt];if(!ee.decoded)switch(ee.compression){case 2:for(var vn=0,pn=0,Zn=0;Zn<z.lines;++Zn){for(var ui=an[jt][vn],wn=0;wn<ee.width;++wn){for(var Qn=0;Qn<2*ee.type;++Qn)wt[ui++]=Yn[pn+Qn*ee.width*ee.height];pn++}vn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(wt.buffer)}function Se(z,W){for(var ut=new Uint8Array(z),wt=0;ut[W.value+wt]!=0;)wt+=1;var Dt=new TextDecoder().decode(ut.slice(W.value,W.value+wt));return W.value=W.value+wt+1,Dt}function He(z,W,ut){var wt=new TextDecoder().decode(new Uint8Array(z).slice(W.value,W.value+ut));return W.value=W.value+ut,wt}function ae(z,W){var ut=Re(z,W),wt=_e(z,W);return[ut,wt]}function Me(z,W){var ut=_e(z,W),wt=_e(z,W);return[ut,wt]}function Re(z,W){var ut=z.getInt32(W.value,!0);return W.value=W.value+4,ut}function _e(z,W){var ut=z.getUint32(W.value,!0);return W.value=W.value+4,ut}function de(z,W){var ut=z[W.value];return W.value=W.value+1,ut}function ft(z,W){var ut=z.getUint8(W.value);return W.value=W.value+1,ut}const Ft=function(z,W){let ut;return"getBigInt64"in DataView.prototype?ut=Number(z.getBigInt64(W.value,!0)):ut=z.getUint32(W.value+4,!0)+Number(z.getUint32(W.value,!0)<<32),W.value+=8,ut};function re(z,W){var ut=z.getFloat32(W.value,!0);return W.value+=4,ut}function ct(z,W){return zf.toHalfFloat(re(z,W))}function Et(z){var W=(z&31744)>>10,ut=z&1023;return(z>>15?-1:1)*(W?W===31?ut?NaN:1/0:Math.pow(2,W-15)*(1+ut/1024):6103515625e-14*(ut/1024))}function Nt(z,W){var ut=z.getUint16(W.value,!0);return W.value+=2,ut}function kt(z,W){return Et(Nt(z,W))}function ge(z,W,ut,wt){for(var Dt=ut.value,Gt=[];ut.value<Dt+wt-1;){var oe=Se(W,ut),ne=Re(z,ut),G=ft(z,ut);ut.value+=3;var tt=Re(z,ut),st=Re(z,ut);Gt.push({name:oe,pixelType:ne,pLinear:G,xSampling:tt,ySampling:st})}return ut.value+=1,Gt}function me(z,W){var ut=re(z,W),wt=re(z,W),Dt=re(z,W),Gt=re(z,W),oe=re(z,W),ne=re(z,W),G=re(z,W),tt=re(z,W);return{redX:ut,redY:wt,greenX:Dt,greenY:Gt,blueX:oe,blueY:ne,whiteX:G,whiteY:tt}}function Pe(z,W){var ut=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],wt=ft(z,W);return ut[wt]}function dn(z,W){var ut=_e(z,W),wt=_e(z,W),Dt=_e(z,W),Gt=_e(z,W);return{xMin:ut,yMin:wt,xMax:Dt,yMax:Gt}}function Ln(z,W){var ut=["INCREASING_Y"],wt=ft(z,W);return ut[wt]}function rn(z,W){var ut=re(z,W),wt=re(z,W);return[ut,wt]}function vi(z,W){var ut=re(z,W),wt=re(z,W),Dt=re(z,W);return[ut,wt,Dt]}function si(z,W,ut,wt,Dt){if(wt==="string"||wt==="stringvector"||wt==="iccProfile")return He(W,ut,Dt);if(wt==="chlist")return ge(z,W,ut,Dt);if(wt==="chromaticities")return me(z,ut);if(wt==="compression")return Pe(z,ut);if(wt==="box2i")return dn(z,ut);if(wt==="lineOrder")return Ln(z,ut);if(wt==="float")return re(z,ut);if(wt==="v2f")return rn(z,ut);if(wt==="v3f")return vi(z,ut);if(wt==="int")return Re(z,ut);if(wt==="rational")return ae(z,ut);if(wt==="timecode")return Me(z,ut);if(wt==="preview")return ut.value+=Dt,"skipped";ut.value+=Dt}function yi(z,W,ut){const wt={};if(z.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";wt.version=z.getUint8(4);const Dt=z.getUint8(5);wt.spec={singleTile:!!(Dt&2),longName:!!(Dt&4),deepFormat:!!(Dt&8),multiPart:!!(Dt&16)},ut.value=8;for(var Gt=!0;Gt;){var oe=Se(W,ut);if(oe==0)Gt=!1;else{var ne=Se(W,ut),G=_e(z,ut),tt=si(z,W,ut,ne,G);tt===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${ne}'.`):wt[oe]=tt}}if((Dt&-5)!=0)throw console.error("EXRHeader:",wt),"THREE.EXRLoader: provided file is currently unsupported.";return wt}function Ti(z,W,ut,wt,Dt){const Gt={size:0,viewer:W,array:ut,offset:wt,width:z.dataWindow.xMax-z.dataWindow.xMin+1,height:z.dataWindow.yMax-z.dataWindow.yMin+1,channels:z.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:z.channels[0].pixelType,uncompress:null,getter:null,format:null,[Hm?"colorSpace":"encoding"]:null};switch(z.compression){case"NO_COMPRESSION":Gt.lines=1,Gt.uncompress=_t;break;case"RLE_COMPRESSION":Gt.lines=1,Gt.uncompress=zt;break;case"ZIPS_COMPRESSION":Gt.lines=1,Gt.uncompress=Jt;break;case"ZIP_COMPRESSION":Gt.lines=16,Gt.uncompress=Jt;break;case"PIZ_COMPRESSION":Gt.lines=32,Gt.uncompress=Ht;break;case"PXR24_COMPRESSION":Gt.lines=16,Gt.uncompress=fe;break;case"DWAA_COMPRESSION":Gt.lines=32,Gt.uncompress=ue;break;case"DWAB_COMPRESSION":Gt.lines=256,Gt.uncompress=ue;break;default:throw"EXRLoader.parse: "+z.compression+" is unsupported"}if(Gt.scanlineBlockSize=Gt.lines,Gt.type==1)switch(Dt){case Li:Gt.getter=kt,Gt.inputSize=2;break;case Ms:Gt.getter=Nt,Gt.inputSize=2;break}else if(Gt.type==2)switch(Dt){case Li:Gt.getter=re,Gt.inputSize=4;break;case Ms:Gt.getter=ct,Gt.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Gt.type+" for "+z.compression+".";Gt.blockCount=(z.dataWindow.yMax+1)/Gt.scanlineBlockSize;for(var oe=0;oe<Gt.blockCount;oe++)Ft(W,wt);Gt.outputChannels=Gt.channels==3?4:Gt.channels;const ne=Gt.width*Gt.height*Gt.outputChannels;switch(Dt){case Li:Gt.byteArray=new Float32Array(ne),Gt.channels<Gt.outputChannels&&Gt.byteArray.fill(1,0,ne);break;case Ms:Gt.byteArray=new Uint16Array(ne),Gt.channels<Gt.outputChannels&&Gt.byteArray.fill(15360,0,ne);break;default:console.error("THREE.EXRLoader: unsupported type: ",Dt);break}return Gt.bytesPerLine=Gt.width*Gt.inputSize*Gt.channels,Gt.outputChannels==4?Gt.format=Ki:Gt.format=Og,Hm?Gt.colorSpace="srgb-linear":Gt.encoding=3e3,Gt}const Ci=new DataView(t),gs=new Uint8Array(t),Wa={value:0},is=yi(Ci,t,Wa),Ye=Ti(is,Ci,gs,Wa,this.type),Vs={value:0},Gn={R:0,G:1,B:2,A:3,Y:0};for(let z=0;z<Ye.height/Ye.scanlineBlockSize;z++){const W=_e(Ci,Wa);Ye.size=_e(Ci,Wa),Ye.lines=W+Ye.scanlineBlockSize>Ye.height?Ye.height-W:Ye.scanlineBlockSize;const wt=Ye.size<Ye.lines*Ye.bytesPerLine?Ye.uncompress(Ye):_t(Ye);Wa.value+=Ye.size;for(let Dt=0;Dt<Ye.scanlineBlockSize;Dt++){const Gt=Dt+z*Ye.scanlineBlockSize;if(Gt>=Ye.height)break;for(let oe=0;oe<Ye.channels;oe++){const ne=Gn[is.channels[oe].name];for(let G=0;G<Ye.width;G++){Vs.value=(Dt*(Ye.channels*Ye.width)+oe*Ye.width+G)*Ye.inputSize;const tt=(Ye.height-1-Gt)*(Ye.width*Ye.outputChannels)+G*Ye.outputChannels+ne;Ye.byteArray[tt]=Ye.getter(wt,Vs)}}}}return{header:is,width:Ye.width,height:Ye.height,data:Ye.byteArray,format:Ye.format,[Hm?"colorSpace":"encoding"]:Ye[Hm?"colorSpace":"encoding"],type:this.type}}setDataType(t){return this.type=t,this}load(t,e,n,s){function r(l,u){Hm?l.colorSpace=u.colorSpace:l.encoding=u.encoding,l.minFilter=Wn,l.magFilter=Wn,l.generateMipmaps=!1,l.flipY=!1,e&&e(l,u)}return super.load(t,r,n,s)}}const B1=new WeakMap;class NV extends Gs{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,s){const r=new zs(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,l=>{const u={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(l,u).then(e).catch(s)},n,s)}decodeDracoFile(t,e,n,s){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(t,r).then(e)}decodeGeometry(t,e){for(const d in e.attributeTypes){const p=e.attributeTypes[d];p.BYTES_PER_ELEMENT!==void 0&&(e.attributeTypes[d]=p.name)}const n=JSON.stringify(e);if(B1.has(t)){const d=B1.get(t);if(d.key===n)return d.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,l=t.byteLength,u=this._getWorker(r,l).then(d=>(s=d,new Promise((p,g)=>{s._callbacks[r]={resolve:p,reject:g},s.postMessage({type:"decode",id:r,taskConfig:e,buffer:t},[t])}))).then(d=>this._createGeometry(d.geometry));return u.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),B1.set(t,{key:n,promise:u}),u}_createGeometry(t){const e=new hn;t.index&&e.setIndex(new zn(t.index.array,1));for(let n=0;n<t.attributes.length;n++){const s=t.attributes[n],r=s.name,l=s.array,u=s.itemSize;e.setAttribute(r,new zn(l,u))}return e}_loadLibrary(t,e){const n=new zs(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise((s,r)=>{n.load(t,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(n=>{const s=n[0];t||(this.decoderConfig.wasmBinary=n[1]);const r=OV.toString(),l=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l]))}),this.decoderPending}_getWorker(t,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const l=r.data;switch(l.type){case"decode":s._callbacks[l.id].resolve(l);break;case"error":s._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n})}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function OV(){let i,t;onmessage=function(l){const u=l.data;switch(u.type){case"init":i=u.decoderConfig,t=new Promise(function(g){i.onModuleLoaded=function(v){g({draco:v})},DracoDecoderModule(i)});break;case"decode":const d=u.buffer,p=u.taskConfig;t.then(g=>{const v=g.draco,_=new v.Decoder,x=new v.DecoderBuffer;x.Init(new Int8Array(d),d.byteLength);try{const b=e(v,_,x,p),R=b.attributes.map(E=>E.array.buffer);b.index&&R.push(b.index.array.buffer),self.postMessage({type:"decode",id:u.id,geometry:b},R)}catch(b){console.error(b),self.postMessage({type:"error",id:u.id,error:b.message})}finally{v.destroy(x),v.destroy(_)}});break}};function e(l,u,d,p){const g=p.attributeIDs,v=p.attributeTypes;let _,x;const b=u.GetEncodedGeometryType(d);if(b===l.TRIANGULAR_MESH)_=new l.Mesh,x=u.DecodeBufferToMesh(d,_);else if(b===l.POINT_CLOUD)_=new l.PointCloud,x=u.DecodeBufferToPointCloud(d,_);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!x.ok()||_.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+x.error_msg());const R={index:null,attributes:[]};for(const E in g){const M=self[v[E]];let w,B;if(p.useUniqueIDs)B=g[E],w=u.GetAttributeByUniqueId(_,B);else{if(B=u.GetAttributeId(_,l[g[E]]),B===-1)continue;w=u.GetAttribute(_,B)}R.attributes.push(s(l,u,_,E,M,w))}return b===l.TRIANGULAR_MESH&&(R.index=n(l,u,_)),l.destroy(_),R}function n(l,u,d){const g=d.num_faces()*3,v=g*4,_=l._malloc(v);u.GetTrianglesUInt32Array(d,v,_);const x=new Uint32Array(l.HEAPF32.buffer,_,g).slice();return l._free(_),{array:x,itemSize:1}}function s(l,u,d,p,g,v){const _=v.num_components(),b=d.num_points()*_,R=b*g.BYTES_PER_ELEMENT,E=r(l,g),M=l._malloc(R);u.GetAttributeDataArrayForAllPoints(d,v,E,R,M);const w=new g(l.HEAPF32.buffer,M,b).slice();return l._free(M),{name:p,array:w,itemSize:_}}function r(l,u){switch(u){case Float32Array:return l.DT_FLOAT32;case Int8Array:return l.DT_INT8;case Int16Array:return l.DT_INT16;case Int32Array:return l.DT_INT32;case Uint8Array:return l.DT_UINT8;case Uint16Array:return l.DT_UINT16;case Uint32Array:return l.DT_UINT32}}}let Sy;const D1=()=>{if(Sy)return Sy;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",t="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=i;WebAssembly.validate(e)&&(s=t);let r;const l=WebAssembly.instantiate(u(s),{}).then(v=>{r=v.instance,r.exports.__wasm_call_ctors()});function u(v){const _=new Uint8Array(v.length);for(let b=0;b<v.length;++b){const R=v.charCodeAt(b);_[b]=R>96?R-71:R>64?R-65:R>47?R+4:R>46?63:62}let x=0;for(let b=0;b<v.length;++b)_[x++]=_[b]<60?n[_[b]]:(_[b]-60)*64+_[++b];return _.buffer.slice(0,x)}function d(v,_,x,b,R,E){const M=r.exports.sbrk,w=x+3&-4,B=M(w*b),D=M(R.length),I=new Uint8Array(r.exports.memory.buffer);I.set(R,D);const L=v(B,x,b,D,R.length);if(L===0&&E&&E(B,w,b),_.set(I.subarray(B,B+x*b)),M(B-M(0)),L!==0)throw new Error(`Malformed buffer data: ${L}`)}const p={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},g={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Sy={ready:l,supported:!0,decodeVertexBuffer(v,_,x,b,R){d(r.exports.meshopt_decodeVertexBuffer,v,_,x,b,r.exports[p[R]])},decodeIndexBuffer(v,_,x,b){d(r.exports.meshopt_decodeIndexBuffer,v,_,x,b)},decodeIndexSequence(v,_,x,b){d(r.exports.meshopt_decodeIndexSequence,v,_,x,b)},decodeGltfBuffer(v,_,x,b,R,E){d(r.exports[g[R]],v,_,x,b,r.exports[p[E]])}},Sy};let My=null,N3="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function O3(i=!0,t=!0,e){return n=>{e&&e(n),i&&(My||(My=new NV),My.setDecoderPath(typeof i=="string"?i:N3),n.setDRACOLoader(My)),t&&n.setMeshoptDecoder(typeof D1=="function"?D1():D1)}}const yx=(i,t,e,n)=>gl(nb,i,O3(t,e,n));yx.preload=(i,t,e,n)=>gl.preload(nb,i,O3(t,e,n));yx.clear=i=>gl.clear(nb,i);yx.setDecoderPath=i=>{N3=i};const LV=Rt.forwardRef(({makeDefault:i,camera:t,regress:e,domElement:n,enableDamping:s=!0,keyEvents:r=!1,onChange:l,onStart:u,onEnd:d,...p},g)=>{const v=Ma(L=>L.invalidate),_=Ma(L=>L.camera),x=Ma(L=>L.gl),b=Ma(L=>L.events),R=Ma(L=>L.setEvents),E=Ma(L=>L.set),M=Ma(L=>L.get),w=Ma(L=>L.performance),B=t||_,D=n||b.connected||x.domElement,I=Rt.useMemo(()=>new K9(B),[B]);return Wg(()=>{I.enabled&&I.update()},-1),Rt.useEffect(()=>(r&&I.connect(r===!0?D:r),I.connect(D),()=>void I.dispose()),[r,D,e,I,v]),Rt.useEffect(()=>{const L=N=>{v(),e&&w.regress(),l&&l(N)},V=N=>{u&&u(N)},H=N=>{d&&d(N)};return I.addEventListener("change",L),I.addEventListener("start",V),I.addEventListener("end",H),()=>{I.removeEventListener("start",V),I.removeEventListener("end",H),I.removeEventListener("change",L)}},[l,u,d,I,v,R]),Rt.useEffect(()=>{if(i){const L=M().controls;return E({controls:I}),()=>E({controls:L})}},[i,I]),Rt.createElement("primitive",Eg({ref:g,object:I,enableDamping:s},p))}),L3=(i,t,e)=>{let n;switch(i){case Ca:n=new Uint8ClampedArray(t*e*4);break;case Ms:n=new Uint16Array(t*e*4);break;case ml:n=new Uint32Array(t*e*4);break;case H_:n=new Int8Array(t*e*4);break;case z_:n=new Int16Array(t*e*4);break;case Ng:n=new Int32Array(t*e*4);break;case Li:n=new Float32Array(t*e*4);break;default:throw new Error("Unsupported data type")}return n};let by;const IV=(i,t,e,n)=>{if(by!==void 0)return by;const s=new Hr(1,1,n);t.setRenderTarget(s);const r=new Ei(new xu,new Ya({color:16777215}));t.render(r,e),t.setRenderTarget(null);const l=L3(i,s.width,s.height);return t.readRenderTargetPixels(s,0,0,s.width,s.height,l),s.dispose(),r.geometry.dispose(),r.material.dispose(),by=l[0]!==0,by};class ib{constructor(t){var e,n,s,r,l,u,d,p,g,v,_,x,b,R,E,M;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(B){throw this._renderer.setRenderTarget(null),B}this._renderer.setRenderTarget(null)},this._width=t.width,this._height=t.height,this._type=t.type,this._colorSpace=t.colorSpace;const w={format:Ki,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((e=t.renderTargetOptions)===null||e===void 0?void 0:e.anisotropy)!==void 0?(n=t.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy:1,generateMipmaps:((s=t.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps)!==void 0?(r=t.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps:!1,magFilter:((l=t.renderTargetOptions)===null||l===void 0?void 0:l.magFilter)!==void 0?(u=t.renderTargetOptions)===null||u===void 0?void 0:u.magFilter:Wn,minFilter:((d=t.renderTargetOptions)===null||d===void 0?void 0:d.minFilter)!==void 0?(p=t.renderTargetOptions)===null||p===void 0?void 0:p.minFilter:Wn,samples:((g=t.renderTargetOptions)===null||g===void 0?void 0:g.samples)!==void 0?(v=t.renderTargetOptions)===null||v===void 0?void 0:v.samples:void 0,wrapS:((_=t.renderTargetOptions)===null||_===void 0?void 0:_.wrapS)!==void 0?(x=t.renderTargetOptions)===null||x===void 0?void 0:x.wrapS:Wi,wrapT:((b=t.renderTargetOptions)===null||b===void 0?void 0:b.wrapT)!==void 0?(R=t.renderTargetOptions)===null||R===void 0?void 0:R.wrapT:Wi};if(this._material=t.material,t.renderer?this._renderer=t.renderer:(this._renderer=ib.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Fg,this._camera=new Fr,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!IV(this._type,this._renderer,this._camera,w)){let B;switch(this._type){case Ms:B=this._renderer.extensions.has("EXT_color_buffer_float")?Li:void 0;break}B!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Li}`),this._type=B):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Ei(new xu,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Hr(this.width,this.height,w),this._renderTarget.texture.mapping=((E=t.renderTargetOptions)===null||E===void 0?void 0:E.mapping)!==void 0?(M=t.renderTargetOptions)===null||M===void 0?void 0:M.mapping:du}static instantiateRenderer(){const t=new qM;return t.setSize(128,128),t}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const t=L3(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,t),t}toDataTexture(t){const e=new Ao(this.toArray(),this.width,this.height,Ki,this._type,(t==null?void 0:t.mapping)||du,(t==null?void 0:t.wrapS)||Wi,(t==null?void 0:t.wrapT)||Wi,(t==null?void 0:t.magFilter)||Wn,(t==null?void 0:t.minFilter)||Wn,(t==null?void 0:t.anisotropy)||1,So);return e.generateMipmaps=(t==null?void 0:t.generateMipmaps)!==void 0?t==null?void 0:t.generateMipmaps:!1,e}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(t){this.disposeOnDemandRenderer(),t&&this.renderTarget.dispose(),this.material instanceof qa&&Object.values(this.material.uniforms).forEach(e=>{e.value instanceof Jn&&e.value.dispose()}),Object.values(this.material).forEach(e=>{e instanceof Jn&&e.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(t){this._width=t,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(t){this._height=t,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(t){this._renderTarget=t,this._width=t.width,this._height=t.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const PV=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,FV=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class HV extends qa{constructor({gamma:t,offsetHdr:e,offsetSdr:n,gainMapMin:s,gainMapMax:r,maxDisplayBoost:l,hdrCapacityMin:u,hdrCapacityMax:d,sdr:p,gainMap:g}){super({name:"GainMapDecoderMaterial",vertexShader:PV,fragmentShader:FV,uniforms:{sdr:{value:p},gainMap:{value:g},gamma:{value:new Q(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:new Q().fromArray(e)},offsetSdr:{value:new Q().fromArray(n)},gainMapMin:{value:new Q().fromArray(s)},gainMapMax:{value:new Q().fromArray(r)},weightFactor:{value:(Math.log2(l)-u)/(d-u)}},blending:fl,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=l,this._hdrCapacityMin=u,this._hdrCapacityMax=d,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(t){this.uniforms.sdr.value=t}get gainMap(){return this.uniforms.gainMap.value}set gainMap(t){this.uniforms.gainMap.value=t}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(t){this.uniforms.offsetHdr.value.fromArray(t)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(t){this.uniforms.offsetSdr.value.fromArray(t)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(t){this.uniforms.gainMapMin.value.fromArray(t)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(t){this.uniforms.gainMapMax.value.fromArray(t)}get gamma(){const t=this.uniforms.gamma.value;return[1/t.x,1/t.y,1/t.z]}set gamma(t){const e=this.uniforms.gamma.value;e.x=1/t[0],e.y=1/t[1],e.z=1/t[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(t){this._hdrCapacityMin=t,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(t){this._hdrCapacityMax=t,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(t){this._maxDisplayBoost=Math.max(1,Math.min(65504,t)),this.calculateWeight()}calculateWeight(){const t=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,t))}}class I3 extends Error{}class P3 extends Error{}const zm=(i,t,e)=>{const n=new RegExp(`${t}="([^"]*)"`,"i").exec(i);if(n)return n[1];const s=new RegExp(`<${t}[^>]*>([\\s\\S]*?)</${t}>`,"i").exec(i);if(s){const r=s[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return r&&r.length===3?r.map(l=>l.replace(/<\/?rdf:li>/g,"")):s[1].trim()}if(e!==void 0)return e;throw new Error(`Can't find ${t} in gainmap metadata`)},zV=i=>{let t;typeof TextDecoder<"u"?t=new TextDecoder().decode(i):t=i.toString();let e=t.indexOf("<x:xmpmeta");for(;e!==-1;){const n=t.indexOf("x:xmpmeta>",e),s=t.slice(e,n+10);try{const r=zm(s,"hdrgm:GainMapMin","0"),l=zm(s,"hdrgm:GainMapMax"),u=zm(s,"hdrgm:Gamma","1"),d=zm(s,"hdrgm:OffsetSDR","0.015625"),p=zm(s,"hdrgm:OffsetHDR","0.015625"),g=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(s),v=g?g[1]:"0",_=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(s);if(!_)throw new Error("Incomplete gainmap metadata");const x=_[1];return{gainMapMin:Array.isArray(r)?r.map(b=>parseFloat(b)):[parseFloat(r),parseFloat(r),parseFloat(r)],gainMapMax:Array.isArray(l)?l.map(b=>parseFloat(b)):[parseFloat(l),parseFloat(l),parseFloat(l)],gamma:Array.isArray(u)?u.map(b=>parseFloat(b)):[parseFloat(u),parseFloat(u),parseFloat(u)],offsetSdr:Array.isArray(d)?d.map(b=>parseFloat(b)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetHdr:Array.isArray(p)?p.map(b=>parseFloat(b)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(v),hdrCapacityMax:parseFloat(x)}}catch{}e=t.indexOf("<x:xmpmeta",n)}};class GV{constructor(t){this.options={debug:t&&t.debug!==void 0?t.debug:!1,extractFII:t&&t.extractFII!==void 0?t.extractFII:!0,extractNonFII:t&&t.extractNonFII!==void 0?t.extractNonFII:!0}}extract(t){return new Promise((e,n)=>{const s=this.options.debug,r=new DataView(t.buffer);if(r.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const l=r.byteLength;let u=2,d=0,p;for(;u<l;){if(++d>250){n(new Error(`Found no marker after ${d} loops `));return}if(r.getUint8(u)!==255){n(new Error(`Not a valid marker at offset 0x${u.toString(16)}, found: 0x${r.getUint8(u).toString(16)}`));return}if(p=r.getUint8(u+1),s&&console.log(`Marker: ${p.toString(16)}`),p===226){s&&console.log("Found APP2 marker (0xffe2)");const g=u+4;if(r.getUint32(g)===1297106432){const v=g+4;let _;if(r.getUint16(v)===18761)_=!1;else if(r.getUint16(v)===19789)_=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(r.getUint16(v+2,!_)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const x=r.getUint32(v+4,!_);if(x<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const b=v+x,R=r.getUint16(b,!_),E=b+2;let M=0;for(let I=E;I<E+12*R;I+=12)r.getUint16(I,!_)===45057&&(M=r.getUint32(I+8,!_));const B=b+2+R*12+4,D=[];for(let I=B;I<B+M*16;I+=16){const L={MPType:r.getUint32(I,!_),size:r.getUint32(I+4,!_),dataOffset:r.getUint32(I+8,!_),dependantImages:r.getUint32(I+12,!_),start:-1,end:-1,isFII:!1};L.dataOffset?(L.start=v+L.dataOffset,L.isFII=!1):(L.start=0,L.isFII=!0),L.end=L.start+L.size,D.push(L)}if(this.options.extractNonFII&&D.length){const I=new Blob([r]),L=[];for(const V of D){if(V.isFII&&!this.options.extractFII)continue;const H=I.slice(V.start,V.end+1,"image/jpeg");L.push(H)}e(L)}}}u+=2+r.getUint16(u+2)}})}}const VV=async i=>{const t=zV(i);if(!t)throw new P3("Gain map XMP metadata not found");const n=await new GV({extractFII:!0,extractNonFII:!0}).extract(i);if(n.length!==2)throw new I3("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:t}},R2=i=>new Promise((t,e)=>{const n=document.createElement("img");n.onload=()=>{t(n)},n.onerror=s=>{e(s)},n.src=URL.createObjectURL(i)});class F3 extends Gs{constructor(t,e){super(e),t&&(this._renderer=t),this._internalLoadingManager=new px}setRenderer(t){return this._renderer=t,this}setRenderTargetOptions(t){return this._renderTargetOptions=t,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const t=new HV({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Jn,sdr:new Jn});return new ib({width:16,height:16,type:Ms,colorSpace:So,material:t,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(t,e,n,s){const r=s?new Blob([s],{type:"image/jpeg"}):void 0,l=new Blob([n],{type:"image/jpeg"});let u,d,p=!1;if(typeof createImageBitmap>"u"){const _=await Promise.all([r?R2(r):Promise.resolve(void 0),R2(l)]);d=_[0],u=_[1],p=!0}else{const _=await Promise.all([r?createImageBitmap(r,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(l,{imageOrientation:"flipY"})]);d=_[0],u=_[1]}const g=new Jn(d||new ImageData(2,2),du,Wi,Wi,Wn,iS,Ki,Ca,1,So);g.flipY=p,g.needsUpdate=!0;const v=new Jn(u,du,Wi,Wi,Wn,iS,Ki,Ca,1,Fs);v.flipY=p,v.needsUpdate=!0,t.width=u.width,t.height=u.height,t.material.gainMap=g,t.material.sdr=v,t.material.gainMapMin=e.gainMapMin,t.material.gainMapMax=e.gainMapMax,t.material.offsetHdr=e.offsetHdr,t.material.offsetSdr=e.offsetSdr,t.material.gamma=e.gamma,t.material.hdrCapacityMin=e.hdrCapacityMin,t.material.hdrCapacityMax=e.hdrCapacityMax,t.material.maxDisplayBoost=Math.pow(2,e.hdrCapacityMax),t.material.needsUpdate=!0,t.render()}}class kV extends F3{load([t,e,n],s,r,l){const u=this.prepareQuadRenderer();let d,p,g;const v=async()=>{if(d&&p&&g){try{await this.render(u,g,d,p)}catch(N){this.manager.itemError(t),this.manager.itemError(e),this.manager.itemError(n),typeof l=="function"&&l(N),u.disposeOnDemandRenderer();return}typeof s=="function"&&s(u),this.manager.itemEnd(t),this.manager.itemEnd(e),this.manager.itemEnd(n),u.disposeOnDemandRenderer()}};let _=!0,x=0,b=0,R=!0,E=0,M=0,w=!0,B=0,D=0;const I=()=>{if(typeof r=="function"){const N=x+E+B,O=b+M+D,Y=_&&R&&w;r(new ProgressEvent("progress",{lengthComputable:Y,loaded:O,total:N}))}};this.manager.itemStart(t),this.manager.itemStart(e),this.manager.itemStart(n);const L=new zs(this._internalLoadingManager);L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(t,async N=>{if(typeof N=="string")throw new Error("Invalid sdr buffer");d=N,await v()},N=>{_=N.lengthComputable,b=N.loaded,x=N.total,I()},N=>{this.manager.itemError(t),typeof l=="function"&&l(N)});const V=new zs(this._internalLoadingManager);V.setResponseType("arraybuffer"),V.setRequestHeader(this.requestHeader),V.setPath(this.path),V.setWithCredentials(this.withCredentials),V.load(e,async N=>{if(typeof N=="string")throw new Error("Invalid gainmap buffer");p=N,await v()},N=>{R=N.lengthComputable,M=N.loaded,E=N.total,I()},N=>{this.manager.itemError(e),typeof l=="function"&&l(N)});const H=new zs(this._internalLoadingManager);return H.setRequestHeader(this.requestHeader),H.setPath(this.path),H.setWithCredentials(this.withCredentials),H.load(n,async N=>{if(typeof N!="string")throw new Error("Invalid metadata string");g=JSON.parse(N),await v()},N=>{w=N.lengthComputable,D=N.loaded,B=N.total,I()},N=>{this.manager.itemError(n),typeof l=="function"&&l(N)}),u}}class XV extends F3{load(t,e,n,s){const r=this.prepareQuadRenderer(),l=new zs(this._internalLoadingManager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(this.withCredentials),this.manager.itemStart(t),l.load(t,async u=>{if(typeof u=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const d=new Uint8Array(u);let p,g,v;try{const _=await VV(d);p=_.sdr,g=_.gainMap,v=_.metadata}catch(_){if(_ instanceof P3||_ instanceof I3)console.warn(`Failure to reconstruct an HDR image from ${t}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),v={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},p=d;else throw _}try{await this.render(r,v,p,g)}catch(_){this.manager.itemError(t),typeof s=="function"&&s(_),r.disposeOnDemandRenderer();return}typeof e=="function"&&e(r),this.manager.itemEnd(t),r.disposeOnDemandRenderer()},n,u=>{this.manager.itemError(t),typeof s=="function"&&s(u)}),r}}const Tg={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},H3="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Fd=i=>Array.isArray(i),sb=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function _x({files:i=sb,path:t="",preset:e=void 0,colorSpace:n=void 0,extensions:s}={}){e&&(ab(e),i=Tg[e],t=H3);const r=Fd(i),{extension:l,isCubemap:u}=rb(i),d=ob(l);if(!d)throw new Error("useEnvironment: Unrecognized file extension: "+i);const p=Ma(x=>x.gl);Rt.useLayoutEffect(()=>{if(l!=="webp"&&l!=="jpg"&&l!=="jpeg")return;function x(){gl.clear(d,r?[i]:i)}p.domElement.addEventListener("webglcontextlost",x,{once:!0})},[i,p.domElement]);const g=gl(d,r?[i]:i,x=>{(l==="webp"||l==="jpg"||l==="jpeg")&&x.setRenderer(p),x.setPath==null||x.setPath(t),s&&s(x)});let v=r?g[0]:g;if(l==="jpg"||l==="jpeg"||l==="webp"){var _;v=(_=v.renderTarget)==null?void 0:_.texture}return v.mapping=u?pl:Gd,v.colorSpace=n??(u?"srgb":"srgb-linear"),v}const jV={files:sb,path:"",preset:void 0,extensions:void 0};_x.preload=i=>{const t={...jV,...i};let{files:e,path:n=""}=t;const{preset:s,extensions:r}=t;s&&(ab(s),e=Tg[s],n=H3);const{extension:l}=rb(e);if(l==="webp"||l==="jpg"||l==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const u=ob(l);if(!u)throw new Error("useEnvironment: Unrecognized file extension: "+e);gl.preload(u,Fd(e)?[e]:e,d=>{d.setPath==null||d.setPath(n),r&&r(d)})};const YV={files:sb,preset:void 0};_x.clear=i=>{const t={...YV,...i};let{files:e}=t;const{preset:n}=t;n&&(ab(n),e=Tg[n]);const{extension:s}=rb(e),r=ob(s);if(!r)throw new Error("useEnvironment: Unrecognized file extension: "+e);gl.clear(r,Fd(e)?[e]:e)};function ab(i){if(!(i in Tg))throw new Error("Preset must be one of: "+Object.keys(Tg).join(", "))}function rb(i){var t;const e=Fd(i)&&i.length===6,n=Fd(i)&&i.length===3&&i.some(l=>l.endsWith("json")),s=Fd(i)?i[0]:i;return{extension:e?"cube":n?"webp":s.startsWith("data:application/exr")?"exr":s.startsWith("data:application/hdr")?"hdr":s.startsWith("data:image/jpeg")?"jpg":(t=s.split(".").pop())==null||(t=t.split("?"))==null||(t=t.shift())==null?void 0:t.toLowerCase(),isCubemap:e,isGainmap:n}}function ob(i){return i==="cube"?PB:i==="hdr"?DV:i==="exr"?UV:i==="jpg"||i==="jpeg"?XV:i==="webp"?kV:null}const qV=i=>i.current&&i.current.isScene,WV=i=>qV(i)?i.current:i;function lb(i,t,e,n,s={}){var r,l,u,d;s={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...s};const p=WV(t||e),g=p.background,v=p.environment,_={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:(r=(l=p.backgroundRotation)==null||l.clone==null?void 0:l.clone())!==null&&r!==void 0?r:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:(u=(d=p.environmentRotation)==null||d.clone==null?void 0:d.clone())!==null&&u!==void 0?u:[0,0,0]};return i!=="only"&&(p.environment=n),i&&(p.background=n),ol(p,s),()=>{i!=="only"&&(p.environment=v),i&&(p.background=g),ol(p,_)}}function cb({scene:i,background:t=!1,map:e,...n}){const s=Ma(r=>r.scene);return Rt.useLayoutEffect(()=>{if(e)return lb(t,i,s,e,n)}),null}function z3({background:i=!1,scene:t,blur:e,backgroundBlurriness:n,backgroundIntensity:s,backgroundRotation:r,environmentIntensity:l,environmentRotation:u,...d}){const p=_x(d),g=Ma(v=>v.scene);return Rt.useLayoutEffect(()=>lb(i,t,g,p,{backgroundBlurriness:e??n,backgroundIntensity:s,backgroundRotation:r,environmentIntensity:l,environmentRotation:u})),Rt.useEffect(()=>()=>{p.dispose()},[p]),null}function KV({children:i,near:t=.1,far:e=1e3,resolution:n=256,frames:s=1,map:r,background:l=!1,blur:u,backgroundBlurriness:d,backgroundIntensity:p,backgroundRotation:g,environmentIntensity:v,environmentRotation:_,scene:x,files:b,path:R,preset:E=void 0,extensions:M}){const w=Ma(H=>H.gl),B=Ma(H=>H.scene),D=Rt.useRef(null),[I]=Rt.useState(()=>new Fg),L=Rt.useMemo(()=>{const H=new gM(n);return H.texture.type=Ms,H},[n]);Rt.useEffect(()=>()=>{L.dispose()},[L]),Rt.useLayoutEffect(()=>{if(s===1){const H=w.autoClear;w.autoClear=!0,D.current.update(w,I),w.autoClear=H}return lb(l,x,B,L.texture,{backgroundBlurriness:u??d,backgroundIntensity:p,backgroundRotation:g,environmentIntensity:v,environmentRotation:_})},[i,I,L.texture,x,B,l,s,w]);let V=1;return Wg(()=>{if(s===1/0||V<s){const H=w.autoClear;w.autoClear=!0,D.current.update(w,I),w.autoClear=H,V++}}),Rt.createElement(Rt.Fragment,null,a9(Rt.createElement(Rt.Fragment,null,i,Rt.createElement("cubeCamera",{ref:D,args:[t,e,L]}),b||E?Rt.createElement(z3,{background:!0,files:b,preset:E,path:R,extensions:M}):r?Rt.createElement(cb,{background:!0,map:r,extensions:M}):null),I))}function JV(i){var t,e,n,s;const r=_x(i),l=i.map||r;Rt.useMemo(()=>v3({GroundProjectedEnvImpl:G9}),[]),Rt.useEffect(()=>()=>{r.dispose()},[r]);const u=Rt.useMemo(()=>[l],[l]),d=(t=i.ground)==null?void 0:t.height,p=(e=i.ground)==null?void 0:e.radius,g=(n=(s=i.ground)==null?void 0:s.scale)!==null&&n!==void 0?n:1e3;return Rt.createElement(Rt.Fragment,null,Rt.createElement(cb,Eg({},i,{map:l})),Rt.createElement("groundProjectedEnvImpl",{args:u,scale:g,height:d,radius:p}))}function ZV(i){return i.ground?Rt.createElement(JV,i):i.map?Rt.createElement(cb,i):i.children?Rt.createElement(KV,i):Rt.createElement(z3,i)}const QV=()=>it.jsxs("group",{children:[it.jsxs("mesh",{position:[-.2,-.5,0],receiveShadow:!0,children:[it.jsx("boxGeometry",{args:[5,.1,2]}),it.jsx("meshStandardMaterial",{color:"#333333",roughness:.8})]}),[-1.8,1.8].map(i=>[-.8,.8].map(t=>it.jsxs("mesh",{position:[i,-1.1,t],castShadow:!0,children:[it.jsx("cylinderGeometry",{args:[.1,.1,1.2,8]}),it.jsx("meshStandardMaterial",{color:"#222222"})]},`${i}-${t}`)))]}),$V=()=>{const i=Rt.useRef();Wg((e,n)=>{i.current.rotation.y=Math.PI});const t=gl(OM,"/Portfolio/image.png");return it.jsxs("group",{position:[0,0,0],children:[it.jsxs("mesh",{position:[0,.6,.115],children:[it.jsx("boxGeometry",{args:[1.8,1,.03]}),it.jsx("meshStandardMaterial",{color:"#000000"})]}),it.jsxs("mesh",{position:[0,.6,.095],ref:i,children:[it.jsx("planeGeometry",{args:[1.75,.99]}),it.jsx("meshStandardMaterial",{map:t,side:ka,toneMapped:!1})]}),it.jsxs("group",{position:[0,-.25,.1],children:[it.jsxs("mesh",{children:[it.jsx("cylinderGeometry",{args:[.05,.1,.7,8]}),it.jsx("meshStandardMaterial",{color:"#555555"})]}),it.jsxs("mesh",{position:[0,-.2,0],children:[it.jsx("boxGeometry",{args:[.5,.2,.35]}),it.jsx("meshStandardMaterial",{color:"#555555"})]})]})]})},t7=()=>it.jsxs("group",{position:[0,-.4,-.5],rotation:[-.1,0,0],children:[it.jsxs("mesh",{castShadow:!0,children:[it.jsx("boxGeometry",{args:[1.2,.05,.4]}),it.jsx("meshStandardMaterial",{color:"#111111",roughness:.8})]}),it.jsxs("group",{position:[0,.03,0],children:[["Q","W","E","R","T","Y","U","I","O","P"].map((i,t)=>it.jsxs("mesh",{position:[-.5+t*.1,.02,0],castShadow:!0,children:[it.jsx("boxGeometry",{args:[.08,.02,.08]}),it.jsx("meshStandardMaterial",{color:"#222222",roughness:.6}),it.jsx(b1,{position:[0,.015,0],transform:!0,distanceFactor:10,style:{width:"16px",height:"16px",display:"flex",justifyContent:"center",alignItems:"center",color:"white",fontSize:"8px",fontWeight:"bold",pointerEvents:"none"}})]},`top-${i}`)),["A","S","D","F","G","H","J","K","L"].map((i,t)=>it.jsxs("mesh",{position:[-.45+t*.1,.05,.1],castShadow:!0,children:[it.jsx("boxGeometry",{args:[.08,.02,.08]}),it.jsx("meshStandardMaterial",{color:"#222222"}),it.jsx(b1,{position:[0,.015,0],transform:!0,style:{color:"white",fontSize:"8px",fontWeight:"bold"}})]},`home-${i}`)),it.jsxs("mesh",{position:[0,.02,-.12],castShadow:!0,children:[it.jsx("boxGeometry",{args:[.4,.02,.1]}),it.jsx("meshStandardMaterial",{color:"#333333"}),it.jsx(b1,{position:[0,.015,0],transform:!0,style:{width:"80px",textAlign:"center",color:"transparent",fontSize:"1px"}})]})]})]}),e7=()=>it.jsxs("mesh",{position:[1,-.4,-.6],rotation:[-Math.PI/4,0,0],castShadow:!0,children:[it.jsx("sphereGeometry",{args:[.15,16,8]}),it.jsx("meshStandardMaterial",{color:"#333333",emissive:"#00ffaa",emissiveIntensity:.2})]}),n7=({modelPath:i,...t})=>{const{scene:e}=yx(i);return it.jsx("group",{scale:.85,...t,children:it.jsx("primitive",{object:e})})},i7=()=>it.jsxs("group",{position:[-1.5,.2,0],castShadow:!0,children:[it.jsxs("mesh",{position:[-.3,0,0],children:[it.jsx("boxGeometry",{args:[.8,1.5,1]}),it.jsx("meshStandardMaterial",{color:"black"})]}),it.jsxs("mesh",{position:[-.3,.2,-.5],children:[it.jsx("torusGeometry",{args:[.2,.1,10,100]}),it.jsx("meshStandardMaterial",{color:"blue"})]}),it.jsxs("mesh",{position:[-.3,-.35,-.48],children:[it.jsx("boxGeometry",{args:[.6,.3,.05]}),it.jsx("meshStandardMaterial",{color:"red"})]})]}),s7=()=>{const i=Rt.useRef(),{camera:t}=Ma();return Wg((e,n)=>{i.current&&(i.current.rotation.y+=n*.5)}),it.jsxs(it.Fragment,{children:[it.jsx("directionalLight",{position:[0,0,2],intensity:1,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}),it.jsx(ZV,{preset:"city"}),it.jsxs("group",{ref:i,children:[it.jsx(QV,{}),it.jsx($V,{}),it.jsx(t7,{}),it.jsx(e7,{}),it.jsx(Rt.Suspense,{children:it.jsx(n7,{modelPath:"/Portfolio/models/chair.gltf",position:[0,-2,-2.2]})}),it.jsx(i7,{})]}),it.jsx(LV,{enableZoom:!1,enablePan:!0,minPolarAngle:Math.PI/6,maxPolarAngle:Math.PI/2,camera:t})]})},a7=()=>it.jsx(v9,{shadows:!0,camera:{position:[0,1,5]},className:"absolute inset-0 w-[70%]",children:it.jsx(s7,{})});function r7(){return it.jsxs("div",{className:"min-h-screen",children:[it.jsx("div",{className:"absolute inset-0 w-full",children:it.jsx(a7,{})}),it.jsx("div",{className:"relative w-[70%] pt-20 z-10 flex items-center justify-center px-4",children:it.jsx(WI,{})})]})}const o7=()=>it.jsxs("div",{className:"min-h-screen font-sans",children:[it.jsx(qI,{}),it.jsxs("main",{className:"pb-10",children:[it.jsx(r7,{}),it.jsx("hr",{}),it.jsx(vI,{}),it.jsx("hr",{}),it.jsx(XI,{}),it.jsx("hr",{}),it.jsx(jI,{})]}),it.jsx(YI,{})]});w2.createRoot(document.getElementById("root")).render(it.jsx(Rt.StrictMode,{children:it.jsx(o7,{})}));
